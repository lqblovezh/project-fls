/*!
 * {
 *   "buildtime": "2019-05-31 16:22:54",
 *   "workspace": "F:\\X-BOOK\\xcloud\\x-book4\\js",
 *   "username": "LQB",
 *   "hostname": "DESKTOP-QL56OJS",
 *   "platform": "win32",
 *   "git": {
 *     "branch": "master",
 *     "hash": "fbc007935",
 *     "message": [
 *       "commit fbc00793544e5767db1868f95f89c64b93f3aa79",
 *       "Author: 骆秋波 <1277678760@qq.com>",
 *       "Date:   Fri May 31 15:21:03 2019 +0800",
 *       "    打包上传"
 *     ],
 *     "user": "骆秋波",
 *     "email": "1277678760@qq.com",
 *     "remote": [
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (fetch)",
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (push)"
 *     ]
 *   }
 * }
 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{211:function(t,e){var n=/^(?:submit|button|image|reset|file)$/i,a=/^(?:input|select|textarea|keygen)/i,i=/(\[[^\[\]]*\])/g;function r(t,e,n){if(e.match(i)){!function t(e,n,a){if(0===n.length)return e=a;var i=n.shift(),r=i.match(/^\[(.+?)\]$/);if("[]"===i)return e=e||[],Array.isArray(e)?e.push(t(null,n,a)):(e._values=e._values||[],e._values.push(t(null,n,a))),e;if(r){var s=r[1],o=+s;isNaN(o)?(e=e||{})[s]=t(e[s],n,a):(e=e||[])[o]=t(e[o],n,a)}else e[i]=t(e[i],n,a);return e}(t,function(t){var e=[],n=new RegExp(i),a=/^([^\[\]]*)/.exec(t);for(a[1]&&e.push(a[1]);null!==(a=n.exec(t));)e.push(a[1]);return e}(e),n)}else{var a=t[e];a?(Array.isArray(a)||(t[e]=[a]),t[e].push(n)):t[e]=n}return t}function s(t,e,n){return n=n.replace(/(\r)?\n/g,"\r\n"),n=(n=encodeURIComponent(n)).replace(/%20/g,"+"),t+(t?"&":"")+encodeURIComponent(e)+"="+n}t.exports=function(t,e){"object"!=typeof e?e={hash:!!e}:void 0===e.hash&&(e.hash=!0);for(var i=e.hash?{}:"",o=e.serializer||(e.hash?r:s),l=t&&t.elements?t.elements:[],u=Object.create(null),c=0;c<l.length;++c){var f=l[c];if((e.disabled||!f.disabled)&&f.name&&a.test(f.nodeName)&&!n.test(f.type)){var d=f.name,p=f.value;if("checkbox"!==f.type&&"radio"!==f.type||f.checked||(p=void 0),e.empty){if("checkbox"!==f.type||f.checked||(p=""),"radio"===f.type&&(u[f.name]||f.checked?f.checked&&(u[f.name]=!0):u[f.name]=!1),void 0==p&&"radio"==f.type)continue}else if(!p)continue;if("select-multiple"!==f.type)i=o(i,d,p);else{p=[];for(var m=f.options,h=!1,g=0;g<m.length;++g){var v=m[g],b=e.empty&&!v.value,y=v.value||b;v.selected&&y&&(h=!0,i=e.hash&&"[]"!==d.slice(d.length-2)?o(i,d+"[]",v.value):o(i,d,v.value))}!h&&e.empty&&(i=o(i,d,""))}}}if(e.empty)for(var d in u)u[d]||(i=o(i,d,""));return i}},271:function(t,e,n){"use strict";n.r(e);var a=n(272),i=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,function(){return a[t]})}(r);e.default=i.a},272:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,i=n(18),r=(a=i)&&a.__esModule?a:{default:a},s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(342)),o=n(93);e.default={data:function(){return{type:"demo",dialogVisible:!1,tableData:[],ids:[],form:{id:"",name:"",img:"",img_code:""}}},mounted:function(){this.getList()},methods:{getList:function(){var t=this;s.getList().then(function(e){log(e.data),t.tableData=e.data})},change:function(t){},handleSelectionChange:function(t){this.ids=t.map(function(t){return t.id}),this.multipleSelection=t},open:function(t){this.tableData.length>7?this.$message.error("数量不能超过7个"):(this.dialogVisible=!0,this.form=t||{id:"",name:"",img:"",img_code:""})},handleClose:function(){this.dialogVisible=!1},upload:function(t,e){this.$refs[e].src=URL.createObjectURL(t.target.files[0])},sendMessage:function(t){var e,n=this;return(e=r.default.mark(function e(){var a,i;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(log(n.$refs[t[0]],t[0]),a=n.$refs[t[0]].files[0],i=n.$refs[t[1]].files[0],!a){e.next=6;break}return e.next=6,(0,o.getTask)(a).then(function(t){n.form.img=t.data.path});case 6:if(!i){e.next=9;break}return e.next=9,(0,o.getTask)(i).then(function(t){n.form.img_code=t.data.path});case 9:s.save(n.form).then(function(t){n.dialogVisible=!1,n.getList()}).catch(function(t){var e=t.payload;n.$message.error(e.message)});case 10:case"end":return e.stop()}},e,n)}),function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function a(i,r){try{var s=t[i](r),o=s.value}catch(t){return void n(t)}if(!s.done)return Promise.resolve(o).then(function(t){a("next",t)},function(t){a("throw",t)});e(o)}("next")})})()},del:function(t){var e=this;t instanceof Array||(t=[t]),s.del({id:t}).then(function(t){e.$message.success("删除成功"),e.getList()})},clear:function(){this.$refs.updateImg1.value="",this.$refs.updateImg2.value=""}}}},273:function(t,e,n){},274:function(t,e,n){"use strict";n.r(e);var a=n(275),i=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,function(){return a[t]})}(r);e.default=i.a},275:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,i=n(18),r=(a=i)&&a.__esModule?a:{default:a},s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(344)),o=n(93);e.default={data:function(){return{type:"demo",dialogVisible:!1,tableData:[],ids:[],form:{id:"",name:"",video_src:"",video:""}}},mounted:function(){this.getList()},methods:{getList:function(){var t=this;s.getList().then(function(e){log(e.data),t.tableData=e.data})},change:function(t){},handleSelectionChange:function(t){this.ids=t.map(function(t){return t.id}),this.multipleSelection=t},open:function(t){this.tableData.length>7?this.$message.error("数量不能超过7个"):(this.dialogVisible=!0,this.form=t||{id:"",name:"",video_src:"",video:""})},handleClose:function(){this.dialogVisible=!1},upload:function(t,e){this.$refs[e].src=URL.createObjectURL(t.target.files[0])},sendMessage:function(t){var e,n=this;return(e=r.default.mark(function e(){var a,i;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(log(n.$refs[t[0]],t[0]),a=n.$refs[t[0]].files[0],i=n.$refs[t[1]].files[0],!a){e.next=6;break}return e.next=6,(0,o.getTask)(a).then(function(t){n.form.video=t.data.path});case 6:if(!i){e.next=10;break}return log(i,888),e.next=10,(0,o.getTask)(i).then(function(t){n.form.file=t.data.path});case 10:s.save(n.form).then(function(t){n.dialogVisible=!1,n.getList()});case 11:case"end":return e.stop()}},e,n)}),function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function a(i,r){try{var s=t[i](r),o=s.value}catch(t){return void n(t)}if(!s.done)return Promise.resolve(o).then(function(t){a("next",t)},function(t){a("throw",t)});e(o)}("next")})})()},del:function(t){var e=this;t instanceof Array||(t=[t]),s.del({id:t}).then(function(t){e.$message.success("删除成功"),e.getList()})},clear:function(){this.$refs.updateImg1.value="",this.$refs.updateImg2.value=""}}}},276:function(t,e,n){},277:function(t,e,n){"use strict";n.r(e);var a=n(278),i=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,function(){return a[t]})}(r);e.default=i.a},278:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(346)),i=n(347);n(93);e.default={mixins:[i.main],data:function(){return{type:"demo",dialogVisible:!1,total:0,tableData:[],services:a,ids:[]}},mounted:function(){this.getList()},methods:{getList:function(){var t=this;a.getList().then(function(e){t.tableData=e.data,t.total=e.page.total})},audit:function(t,e){var n=this;a.audit({id:t,passed:e}).then(function(t){n.$message.success("操作成功"),n.getList(n.page)})}}}},279:function(t,e,n){},308:function(t,e,n){"use strict";n.r(e);var a=n(378),i=n(271);for(var r in i)"default"!==r&&function(t){n.d(e,t,function(){return i[t]})}(r);n(343);var s=n(2),o=Object(s.a)(i.default,a.a,a.b,!1,null,"6c42c4a2",null);e.default=o.exports},309:function(t,e,n){"use strict";n.r(e);var a=n(386),i=n(274);for(var r in i)"default"!==r&&function(t){n.d(e,t,function(){return i[t]})}(r);n(345);var s=n(2),o=Object(s.a)(i.default,a.a,a.b,!1,null,"e6f94b42",null);e.default=o.exports},310:function(t,e,n){"use strict";n.r(e);var a=n(380),i=n(277);for(var r in i)"default"!==r&&function(t){n.d(e,t,function(){return i[t]})}(r);n(348);var s=n(2),o=Object(s.a)(i.default,a.a,a.b,!1,null,"a4218c44",null);e.default=o.exports},342:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getList=function(t){return(0,i.request_get)("/system/api/demo_demos",t)},e.save=function(t){if(log(t,888),t.id)return(0,i.request_put)(s(t),t);return(0,i.request_post)("/system/api/demo_demo",t)},e.del=function(t){return(0,i.request_post)("/system/api/demo_demo/delete",t)};var a,i=n(65),r=n(66);var s=((a=r)&&a.__esModule?a:{default:a}).default.compile("/system/api/demo_demo/:id")},343:function(t,e,n){"use strict";var a=n(273);n.n(a).a},344:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getList=function(t){return(0,i.request_get)("/system/api/xbooks",t)},e.save=function(t){if(log(t,888),t.id)return(0,i.request_put)(s(t),t);return(0,i.request_post)("/system/api/xbooks",t)},e.del=function(t){return(0,i.request_post)("/system/api/xbooks/delete",t)};var a,i=n(65),r=n(66);var s=((a=r)&&a.__esModule?a:{default:a}).default.compile("/system/api/xbooks/:id")},345:function(t,e,n){"use strict";var a=n(276);n.n(a).a},346:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getList=function(t){return(0,i.request_get)("/system/api/cooperations/apply",t)},e.audit=function(t){return(0,i.request_post)(s(t),t)},e.save=function(t){return(0,i.request_post)("/system/api/cooperations/apply",t)},e.getCode=function(t){return(0,i.request_get)("/system/api/captcha/image",t)},e.checkCode=function(t){return(0,i.request_post)("/system/api/captcha/check",t)},e.msg=function(t){return(0,i.request_post)("/system/api/captcha/mobile",t)};var a,i=n(65),r=n(66);var s=((a=r)&&a.__esModule?a:{default:a}).default.compile("/system/api/cooperations/audit/:id")},347:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.main=void 0;var a,i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},r=n(211);(a=r)&&a.__esModule;var s={data:function(){return{tableData:[],page:{pageOffset:10,pageNum:1},currentPage:1,ids:[],isTeacher:"",dialogVisible:!1,detailVisible:!1,detailData:[],productType:null}},created:function(){this.isTeacher=this.$config.isTeacher,this.getList(i({},this.query,this.page))},methods:{seareHandeler:function(){this.page.pageNum=1,this.getList(i({},this.query))},getList:function(t){var e=this;this.service&&this.service.getList(t).then(function(t){t&&t.status&&(e.tableData=t.data,e.total=t.page.total)})},handleSelectionChange:function(t){this.ids=t.map(function(t){return t.id}),this.multipleSelection=t},update:function(t,e){this.$refs[e].src=URL.createObjectURL(t.target.files[0])},getTime:function(t){t||(t=["",""]),this.query.time_start=t[0],this.query.time_end=t[1],this.query.start_time=t[0],this.query.end_time=t[1]},handleSizeChange:function(t){this.page.pageOffset=t,this.getList(i({},this.page,this.query))},handleCurrentChange:function(t){this.page.pageNum=t,this.getList(i({},this.page,this.query))},handleClose:function(){this.detailVisible=!1,this.dialogVisible=!1},del:function(t){var e=this;this.$confirm("你真的要删除该数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.service.del({id:t}).then(function(t){t&&t.status&&(e.getList(i({},e.page,e.query)),e.$message.success("删除成功"))},function(t){var n=t.payload;e.$message.error(n.message)})}).catch(function(){})},save:function(t){var e=this;t||(t=this.form),this.service.save(t).then(function(t){t.status&&(e.$message.success("保存成功"),e.getList(e.query)),e.dialogVisible=!1,e.$refs.child.dialogVisible=!1},function(t){e.$message.error(t.payload.message)})},educe:function(t){this.service.educe({id:t}).then(function(t){window.location.href=t.data.url})},detail:function(t){var e=this;this.service.detail({id:t}).then(function(t){e.detailData=t.data,log(t,"detail")}),this.$refs.child.dialogVisible=!0},showDetail:function(t,e){var n=this;log("------------"),this.service.detail({id:t}).then(function(t){log(t,"detailInfo"),n.detailData=t.data,n.productType=e,n.detailVisible=!0})}}};e.main=s},348:function(t,e,n){"use strict";var a=n(279);n.n(a).a},378:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"btns"},[n("el-button",{attrs:{type:"primary"},on:{click:t.open}},[t._v("新增")]),n("el-button",{attrs:{type:"danger"},on:{click:function(e){return t.del(t.ids)}}},[t._v("批量删除")])],1),n("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{stripe:"",data:t.tableData,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55",fixed:""}}),n("el-table-column",{attrs:{prop:"name",label:"名称"}}),n("el-table-column",{attrs:{label:"图片"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("div",{staticClass:"pic",style:{backgroundImage:"url("+t.row.img_src+")"}})]}}])}),n("el-table-column",{attrs:{label:"二维码"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("div",{staticClass:"pic",style:{backgroundImage:"url("+t.row.img_code_src+")"}})]}}])}),n("el-table-column",{attrs:{prop:"nick_name",label:"文字介绍",width:"600"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("pre",[t._v(t._s(e.row.text))])]}}])}),n("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(n){return t.open(e.row)}}},[t._v("修改")]),n("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(n){return t.del(e.row.id)}}},[t._v("删除")])]}}])})],1),n("el-dialog",{attrs:{visible:t.dialogVisible,width:"800px","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e},opened:t.clear}},[n("div",{staticClass:"box"},[n("div",{staticClass:"part"},[n("div",{staticClass:"img"},[n("img",{ref:"img1",attrs:{src:t.form.img_src}})]),n("input",{ref:"updateImg1",staticClass:"hide",attrs:{type:"file"},on:{change:function(e){return t.upload(e,"img1")}}}),n("el-button",{attrs:{type:"primary",size:"small",plain:""},on:{click:function(e){return t.$refs.updateImg1.click()}}},[t._v("图片上传")])],1),n("div",{staticClass:"part"},[n("div",{staticClass:"img"},[n("img",{ref:"img2",attrs:{src:t.form.img_code_src}})]),n("input",{ref:"updateImg2",staticClass:"hide",attrs:{type:"file"},on:{change:function(e){return t.upload(e,"img2")}}}),n("el-button",{attrs:{type:"primary",size:"small",plain:""},on:{click:function(e){return t.$refs.updateImg2.click()}}},[t._v("二维码上传")])],1)]),n("el-input",{staticClass:"name",attrs:{placeholder:"请填写导航名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),n("el-input",{attrs:{type:"textarea",rows:6,placeholder:"请输入介绍内容"},model:{value:t.form.text,callback:function(e){t.$set(t.form,"text",e)},expression:"form.text"}}),n("div",{staticClass:"footer dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{staticClass:"right",attrs:{type:"primary",size:"small"},on:{click:function(e){return t.sendMessage(["updateImg1","updateImg2"])}}},[t._v("确定")])],1)],1)],1)},i=[];n.d(e,"a",function(){return a}),n.d(e,"b",function(){return i})},380:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{stripe:"",data:t.tableData,"tooltip-effect":"dark"}},[n("el-table-column",{attrs:{prop:"user_name",label:"用户名称"}}),n("el-table-column",{attrs:{prop:"phone",label:"电话号码"}}),n("el-table-column",{attrs:{prop:"publisher_name",label:"出版社名称"}}),n("el-table-column",{attrs:{label:"审核状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(["未审核","已通过","已驳回"][e.row.status]))])]}}])}),n("el-table-column",{attrs:{prop:"create_time",label:"申请时间",width:"200"}}),n("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(n){return t.audit(e.row.id,1)}}},[t._v("通过")]),n("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(n){return t.audit(e.row.id,0)}}},[t._v("驳回")])]}}])})],1),n("div",{staticClass:"page"},[n("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,50,100],"page-size":10,background:"",layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},i=[];n.d(e,"a",function(){return a}),n.d(e,"b",function(){return i})},386:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"btns"},[n("el-button",{attrs:{type:"primary"},on:{click:t.open}},[t._v("新增")]),n("el-button",{attrs:{type:"danger"},on:{click:function(e){return t.del(t.ids)}}},[t._v("批量删除")])],1),n("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{stripe:"",data:t.tableData,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55",fixed:""}}),n("el-table-column",{attrs:{prop:"name",label:"名称",width:"200"}}),n("el-table-column",{attrs:{label:"视频"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("video",{attrs:{src:t.row.video_src,width:"320",height:"200",controls:""}})]}}])}),n("el-table-column",{attrs:{prop:"nick_name",label:"文字介绍",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("pre",[t._v(t._s(e.row.text))])]}}])}),n("el-table-column",{attrs:{prop:"file_code",label:"文档",width:"100"}}),n("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(n){return t.open(e.row)}}},[t._v("修改")]),n("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(n){return t.del(e.row.id)}}},[t._v("删除")])]}}])})],1),n("el-dialog",{attrs:{visible:t.dialogVisible,width:"816px","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e},opened:t.clear}},[n("div",{staticClass:"box"},[n("div",{staticClass:"part"},[n("div",{staticClass:"img"},[n("video",{ref:"img1",attrs:{src:t.form.video_src,height:"250px",controls:"controls"}})]),n("input",{ref:"updateImg1",staticClass:"hide",attrs:{type:"file",accept:"audio/3gpp, video/3gpp,audio/mp4, video/mp4,\tapplication/ogg, audio/ogg"},on:{change:function(e){return t.upload(e,"img1")}}}),n("el-button",{attrs:{type:"primary",size:"small",plain:""},on:{click:function(e){return t.$refs.updateImg1.click()}}},[t._v("视频上传")])],1),n("div",{staticClass:"part"},[n("div",{staticClass:"img file"},[t._v(t._s(t.form.file_code))]),n("input",{ref:"updateImg2",staticClass:"hide",attrs:{type:"file"},on:{change:function(e){t.form.file_code=t.$refs.updateImg2.files[0].name}}}),n("el-button",{attrs:{type:"primary",size:"small",plain:""},on:{click:function(e){return t.$refs.updateImg2.click()}}},[t._v("文档上传")])],1)]),n("el-input",{staticClass:"name",attrs:{placeholder:"请填写导航名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),n("el-input",{attrs:{type:"textarea",rows:6,placeholder:"请输入介绍内容"},model:{value:t.form.text,callback:function(e){t.$set(t.form,"text",e)},expression:"form.text"}}),n("div",{staticClass:"footer dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{staticClass:"right",attrs:{type:"primary",size:"small"},on:{click:function(e){return t.sendMessage(["updateImg1","updateImg2"])}}},[t._v("确定")])],1)],1)],1)},i=[];n.d(e,"a",function(){return a}),n.d(e,"b",function(){return i})}}]);