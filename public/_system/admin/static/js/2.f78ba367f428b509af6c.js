/*!
 * {
 *   "buildtime": "2019-05-31 16:22:54",
 *   "workspace": "F:\\X-BOOK\\xcloud\\x-book4\\js",
 *   "username": "LQB",
 *   "hostname": "DESKTOP-QL56OJS",
 *   "platform": "win32",
 *   "git": {
 *     "branch": "master",
 *     "hash": "fbc007935",
 *     "message": [
 *       "commit fbc00793544e5767db1868f95f89c64b93f3aa79",
 *       "Author: 骆秋波 <1277678760@qq.com>",
 *       "Date:   Fri May 31 15:21:03 2019 +0800",
 *       "    打包上传"
 *     ],
 *     "user": "骆秋波",
 *     "email": "1277678760@qq.com",
 *     "remote": [
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (fetch)",
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (push)"
 *     ]
 *   }
 * }
 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{198:function(e,t,n){"use strict";n.r(t);var r=n(374),s=n(230);for(var a in s)"default"!==a&&function(e){n.d(t,e,function(){return s[e]})}(a);n(325);var i=n(2),o=Object(i.a)(s.default,r.a,r.b,!1,null,null,null);t.default=o.exports},210:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.event_terminal_verison=t.event_terminal=void 0,t.cb=function(e){e&&!e.status&&console.warn(e)},t.getUserId=function(){var e=window.sessionStorage.getItem("userInfo");if(e)return e._id||e.id;return""};var r,s=n(217);(r=s)&&r.__esModule;var a=(0,n(220).detect)(),i=a.name,o=a.version;t.event_terminal=i,t.event_terminal_verison=o},212:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.listRole=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)("/system/api/manager/roles",e)},t.listManager=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)("/system/api/manager/managers",e)},t.addManager=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)("/system/api/manager/managers",e)},t.modifyManager=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=u(e,["id"]);return(0,a.request_put)(l({id:t}),n)},t.detailManager=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=u(e,["id"]);return(0,a.request_get)(l({id:t}),n)},t.detailRole=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=u(e,["id"]);return t?(0,a.request_get)(c({id:t}),n).then(function(e){var t={};if(e.status){t=e.data.accesses;var n={allow_create:0,allow_view_all:0,allow_edit_all:0,allow_delete_all:0};return d().then(function(s){if(s.status){var a=s.data,i={};for(var o in a)i[a[o].id]=r({},a[o],n),t[a[o].id]&&(i[a[o].id]=r({},a[o],t[a[o].id]));return s.data=i,log(e,222),s}})}}):f()},t.allJurisdiction=d,t._allJurisdiction=f,t.role=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=u(e,["id"]);if(log(n),t)return(0,a.request_put)(c({id:t}),n);return(0,a.request_post)("/system/api/manager/roles",n)},t.addRole=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)("/system/api/manager/roles",e)},t.deleteManager=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)("/system/api/manager/managers/delete",e)},t.deleteRole=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)("/system/api/manager/roles/delete",e)},t.logManager=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)("/system/api/manager/logs",e)},t.login=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)("/system/api/auth/login/manager",e)},t.isLogin=function(){return(0,a.request_get)("/system/api/auth/is_login/manager")},t.loginOut=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)("/system/api/auth/logout",e)},t.changePass=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_put)("/system/api/auth/pass",e).then(function(e){return window.sessionStorage.removeItem("token"),window.sessionStorage.removeItem("userInfo"),config.token=null,e})};var s,a=n(65),i=n(66),o=(s=i)&&s.__esModule?s:{default:s};function u(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var l=o.default.compile("/system/api/manager/managers/:id"),c=o.default.compile("/system/api/manager/roles/:id");function d(){return(0,a.request_get)("/system/api/manager/accesses")}function f(){return(0,a.request_get)("/system/api/manager/accesses").then(function(e){if(e.status){var t={allow_create:0,allow_view_all:0,allow_edit_all:0,allow_delete_all:0},n=e.data,s={};for(var a in n)s[n[a].id]=r({},n[a],t);return e.data=s,e}})}},213:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUserInfo=function(){return r.default.parse(window.sessionStorage.getItem("userInfo"))},t.getDefaultCover=function(){return(0,s.request_get)(restUrl_publish+"/api/videos/images")},t.commonPreview=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.request_get)(u(e))},t.commonPreviewCode=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.request_post)(restUrl_publish+"/api/preview",e)},t.platInfo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=i.default.compile(restUrl_publish+"/api/current");return(0,s.request_get)(t(e)).then(function(e){return a.default.app_id=e.data.id,sessionStorage.app_id=e.data.id,document.title=e.data.application?e.data.application.name:e.data.publisher.name,e})},t.fileExport=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.request_get)(l(e))},t.groupsDelete=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.request_post)(restUrl_publish+"/api/groups/delete",e)};var r=o(n(67)),s=n(65),a=o(n(94)),i=(n(214),o(n(66)));function o(e){return e&&e.__esModule?e:{default:e}}var u=i.default.compile(restUrl_publish+"/api/preview/:id");var l=i.default.compile(restUrl_publish+"/api/content/export/:id")},214:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.suance=t.loginListener=t.createProListener=t.educeResListener=t.addResListener=void 0;var r=u(n(216)),s=u(n(222)),a=u(n(223)),i=u(n(224)),o=u(n(225));function u(e){return e&&e.__esModule?e:{default:e}}t.addResListener=r.default,t.educeResListener=s.default,t.createProListener=a.default,t.loginListener=i.default,t.suance=o.default},216:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.res_id,n=e.res_type,s=e.res_name,a=e.res_exp,i=e.res_author,o=void 0===i?"佚名":i,u=e.res_author_id,l=void 0===u?[]:u,c=e.res_tree,d=void 0===c?[]:c,f=e.res_lables,_=void 0===f?[]:f,p=e.res_attr,v=void 0===p?[]:p,m=e.user_id,h=void 0===m?"":m;if(window.DBI){h=h||(0,r.getUserId)();var g=new DBI.createEvent({event_class:"Resources",event_data:{Resources:[{res_id:t,res_type:n,res_name:s,res_exp:a,res_author:o,res_author_id:l,res_tree:d,res_lables:_,res_attr:v,user_id:h,res_total_play:0,res_total_order:0}]},event_target:"",event_type:"创建",event_source:"WEB",event_sources:r.origin,event_operator:h,event_temporary:"",event_system:"",event_system_verison:"",event_terminal:r.event_terminal,event_terminal_verison:r.event_terminal_verison});DBI.declare(g,r.cb)}};var r=n(210)},222:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.res_url,n=e.user_id,s=void 0===n?"":n;window.DBI&&(s=s||(0,r.getUserId)(),DBI.declare({event_class:"Resources",event_data:{Resources:[{res_url:t}]},event_target:"",event_type:"导出",event_source:"Web",event_sources:r.origin,event_operator:s,event_temporary:"",event_system:"",event_system_version:"",event_terminal:r.event_terminal,event_terminal_verison:r.event_terminal_verison},r.cb))};var r=n(210)},223:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.res_id,n=e.res_type,s=e.res_name,a=e.res_cover,i=e.res_covers,o=e.res_exp,u=e.res_author,l=e.res_author_id,c=e.res_Interpreter,d=e.res_Interpreter_id,f=e.res_lables,_=e.res_money,p=e.res_isbn,v=e.res_isbn_ext,m=e.user_id,h=void 0===m?"":m;if(window.DBI){h=h||(0,r.getUserId)();var g=new DBI.createEvent({event_class:"PDAMBook",event_data:{Resources:[{res_id:t,res_type:n,res_name:s,res_cover:a,res_covers:i,res_exp:o,res_author:u,res_author_id:l,res_Interpreter:c,res_Interpreter_id:d,res_lables:f,res_money:_,res_isbn:p,res_isbn_ext:v}]},event_target:t,event_type:"创建",event_source:"WEB",event_sources:r.origin,event_operator:h,event_temporary:"",event_system:"",event_system_verison:"",event_terminal:r.event_terminal,event_terminal_verison:r.event_terminal_verison});DBI.declare(g,r.cb)}};var r=n(210)},224:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.user_id,n=e.user_name,s=e.user_nick_name,a=e.user_phone,i=e.user_picture,o=e.user_picture_absolute,u=e.user_email,l=e.user_sex,c=e.user_date_of_birth,d=e.user_address,f=e.user_city;t=t||(0,r.getUserId)(),window.DBI&&DBI.declare({event_class:"User",event_data:{User:[{user_id:t,user_nick_name:s,user_name:n,user_sex:l,user_email:u,user_phone:a,user_picture:i,user_picture_absolute:o,user_address:d,user_city:f,user_date_of_birth:c}]},event_target:"",event_type:"登录",event_source:"",event_sources:r.origin,event_operator:t,event_temporary:"",event_system:"",event_system_version:"",event_terminal:r.event_terminal,event_terminal_verison:r.event_terminal_verison},r.cb)};var r=n(210)},225:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.id,n=e.info,s=e.user_id,a=void 0===s?"":s;a=a||(0,r.getUserId)(),window.DBI&&DBI.declare({event_class:"PDAMBook",event_data:{PDAMBook:[n]},event_target:t,event_type:"分发",event_source:"web",event_sources:r.origin,event_operator:a,event_temporary:"",event_system:"",event_system_version:"",event_terminal:r.event_terminal,event_terminal_verison:r.event_terminal_verison},r.cb)};var r=n(210)},230:function(e,t,n){"use strict";n.r(t);var r=n(231),s=n.n(r);for(var a in r)"default"!==a&&function(e){n.d(t,e,function(){return r[e]})}(a);t.default=s.a},231:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=l(n(18)),s=l(n(313)),a=l(n(321)),i=l(n(68)),o=n(212),u=l(n(67));function l(e){return e&&e.__esModule?e:{default:e}}t.default={components:{Menu:s.default,SwitchSys:a.default},data:function(){return{isCollspan:!1}},mounted:function(){this.checkLogin()},methods:{collspan:function(e){this.isCollspan=e},checkLogin:function(){var e,t=this;return(e=r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.isOpen=!0,e.next=3,(0,o.isLogin)().then(function(e){e&&e.status?sessionStorage.userInfo=u.default.stringify(e.data):t.$route.path!=(0,i.default)("/","")&&t.$router.push({path:(0,i.default)("/","")})},function(e){t.$route.path!=(0,i.default)("/","/")&&t.$router.push({path:(0,i.default)("/","")})});case 3:case"end":return e.stop()}},e,t)}),function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(s,a){try{var i=t[s](a),o=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(o).then(function(e){r("next",e)},function(e){r("throw",e)});e(o)}("next")})})()}}}},232:function(e,t,n){"use strict";n.r(t);var r=n(233),s=n.n(r);for(var a in r)"default"!==a&&function(e){n.d(t,e,function(){return r[e]})}(a);t.default=s.a},233:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(314)),s=o(n(317)),a=o(n(319)),i=o(n(68));function o(e){return e&&e.__esModule?e:{default:e}}t.default={components:{GliMenu:r.default,GliMenuTop:s.default,GliMenuItem:a.default},created:function(){},data:function(){return{list:[{txt:"首页",items:[{iconClass:"icon-4",txt:"出版社列表",index:(0,i.default)("/","/app/home")},{iconClass:"icon-3",txt:"账户列表",index:(0,i.default)("/","/app/user")}]},{txt:"系统设置",items:[{iconClass:"icon-2",txt:"登录页设置",index:(0,i.default)("/","/app/systemSetting")},{iconClass:"icon-2",txt:"作品设置",index:(0,i.default)("/","/app/systemSetting/production")},{iconClass:"icon-2",txt:"系统设置",index:(0,i.default)("/","/app/systemSetting/info")},{iconClass:"icon-1",txt:"系统管理",index:(0,i.default)("/","/app/systemManage/manager")}]}],isCollapse:!1}},methods:{menuItemClickHandler:function(){},menuFoldHandler:function(e){this.$emit("collspan",!e)}}}},234:function(e,t,n){"use strict";n.r(t);var r=n(235),s=n.n(r);for(var a in r)"default"!==a&&function(e){n.d(t,e,function(){return r[e]})}(a);t.default=s.a},235:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(315),t.default={compName:"GliMenu",provide:function(){return{rootMenu:this}},props:{defaultActive:String,keepOneOpen:{type:Boolean,default:!1},menuRecreate:{type:Boolean,default:!0},changedRecreate:{type:Boolean,default:!1},router:{type:Boolean,default:!0},collapse:{type:Boolean,default:!1},topPx:{type:String,default:"10px"},topBarClass:{type:String,default:"icon-menuown-fold"},arrowClass:{type:String,default:"icon-menuown-right"},backgroundColor:{type:String,default:"#333744"},textColor:{type:String,default:"#fff"},activeTextColor:{type:String,default:"#44c3aa"}},created:function(){this.isFold=!this.collapse,this.isFold},mounted:function(){this.findCurrChild(!0)},data:function(){return{isFold:!0,styleObj:{backgroundColor:this.backgroundColor},scrollTop:0,rootMenu:!0}},watch:{defaultActive:function(){this.findCurrChild(!0)}},methods:{fold:function(){this.isFold=!this.isFold,this.isFold||this.hideChildrenName(this.$children),this.$emit("foldHandler",this.isFold)},hideChildrenName:function(e){var t=this;e.forEach(function(e){e.isFold=t.isFold,e.$children&&t.hideChildrenName(e.$children)})},itemClickHandler:function(e){this.$emit("itemClickHandler",e)},findCurrChild:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$children.forEach(function(n){e.currChild(n,e.defaultActive,t)})},currChild:function(e,t,n){var r=this,s=!1;e.$children.forEach(function(e){e.index==t||e.index==r.$route.query.index?(e.isCurr=!0,s=!0):e.isCurr=!1}),s?n&&(e.isOpen=!0):e.isOpen=!1},normalizeOther:function(e){this.$children.forEach(function(t){t.$children.forEach(function(t){t.index!=e&&(t.isCurr=!1)})})},findEachItem:function(){},closeOtherGroup:function(e){this.$children.forEach(function(t){t.txt!=e&&(t.isOpen=!1)})},scrollHander:function(e){if(!this.isFold){var t=e.target;this.scrollTop=t.scrollTop}}}}},236:function(e,t,n){},237:function(e,t,n){"use strict";n.r(t);var r=n(238),s=n.n(r);for(var a in r)"default"!==a&&function(e){n.d(t,e,function(){return r[e]})}(a);t.default=s.a},238:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={inject:["rootMenu"],props:{txt:{type:String},index:String},created:function(){this.isFold=this.rootMenu.isFold},mounted:function(){var e=this;setTimeout(function(){e.$refs.icon2.style.transition="transform 0.3s ease-in-out"},0)},data:function(){return{isOpen:!1,isFold:!0,currTip:!1}},methods:{open:function(){this.index&&this.$router.push({path:this.index}),this.isOpen=!this.isOpen,this.rootMenu.keepOneOpen&&this.rootMenu.closeOtherGroup(this.txt)}}}},239:function(e,t,n){},240:function(e,t,n){"use strict";n.r(t);var r=n(241),s=n.n(r);for(var a in r)"default"!==a&&function(e){n.d(t,e,function(){return r[e]})}(a);t.default=s.a},241:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={inject:["rootMenu"],props:{index:String,iconClass:String,txt:String},created:function(){},data:function(){return{isFold:!0,isCurr:!1,compType:"menuItem",currTip:!1}},computed:{currStyle:function(){if(this.isCurr)return{color:this.rootMenu.activeTextColor}}},methods:{goHref:function(){var e=this.rootMenu;e.router&&this.$router.push({path:this.index}),e.menuRecreate||(this.isCurr=!0,e.normalizeOther(this.index),e.itemClickHandler(this.index))},findRootMenu:function(e){return e.rootMenu?e:this.findRootMenu(e.$parent)},showRightTip:function(){this.currTip=!0},mouseenterHander:function(e){this.currTip=!0},mouseleaveHandler:function(e){this.currTip=!1}}}},242:function(e,t,n){},243:function(e,t,n){"use strict";n.r(t);var r=n(244),s=n.n(r);for(var a in r)"default"!==a&&function(e){n.d(t,e,function(){return r[e]})}(a);t.default=s.a},244:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=p(n(18)),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=p(n(211)),i=n(322),o=n(212),u=n(96),l=p(n(67)),c=p(n(68)),d=n(213),f=n(323),_=p(n(97));function p(e){return e&&e.__esModule?e:{default:e}}var v="system",m="system"==v&&!0&&"desktop"=="desktop";t.default={props:["leftName","title","currentPlant"],data:function(){return{userInfo:null,current:"",type:v,plantInfo:null,loginDialog:!1,showMoreTop:!1,outlink:"",isBase:!0,publisher:{},passData:{old_pass:null,new_pass:null,new_pass_confirm:null}}},mounted:function(){var e=this;"system"!=v&&(0,d.platInfo)().then(function(t){e.publisher=t.data.publisher,e.outlink=e.publisher.apps,e.outlink.forEach(function(t){t.is_current&&(e.isBase=!1)})}),this.current=this.currentPlant,sessionStorage.userInfo&&(this.userInfo=l.default.parse(sessionStorage.userInfo)),this.$config.userInfo&&(this.userInfo=this.$config.userInfo),this.$config.userInfo||sessionStorage.userInfo||this.checklogin()},computed:{left:function(){return this.leftName||"显示平台"},isXDataVisible:function(){return this.$store.state.xDataVisible},isXDataTextVisible:function(){return!0},userName:function(){return this.userInfo&&this.userInfo.user?this.userInfo.user.name:null}},methods:s({checklogin:function(){var e,t=this;return(e=r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,f.isLogin)().then(function(e){t.userInfo=e.data});case 2:case"end":return e.stop()}},e,t)}),function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(s,a){try{var i=t[s](a),o=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(o).then(function(e){r("next",e)},function(e){r("throw",e)});e(o)}("next")})})()},update:function(e){this.userInfo=e},handleClose:function(e){this.passData.old_pass=null,this.passDatanew_pass=null,this.passDatanew_pass_confirm=null,this.loginDialog=!1},changeCode:function(e){var t=e.currentTarget;t.src=t.src},logout:function(){this.$confirm("是否确认退出?").then(function(e){(m?o.loginOut:i.loginOut)().then(function(e){sessionStorage.clear(),window.location.href=m?"/system/admin":"/admin"})}).catch(function(e){})},backHome:function(){window.location.href=restUrl_system+"/system"},changePass:function(){this.loginDialog=!0},changePassword:function(){var e=this,t=(0,a.default)(this.$refs.passForm,{hash:!0});(m?o.changePass:i.changePass)(t).then(function(t){e.$message.success("修改密码成功！"),e.loginDialog=!1,window.location.href="../"}).catch(function(t){var n=t.payload;for(var r in n.messages){e.$message.error(n.messages[r]);break}})},goPage:function(e){"string"!=typeof e?e.name!=this.currentPlant?location.href=(0,c.default)(e.base_url,"admin"):this.$message.error("你正处在该平台"):location.href=e},showMore:function(){this.showMoreTop=!this.showMoreTop},handleCommand:function(t){_.default.set("token",sessionStorage.token,{expires:1,path:"/",domain:e.restUrl_system.replace("http://",".")}),location.href=t+"/common/admin"}},(0,u.mapMutations)(["updateUser","openXData","closeXData"]))}}).call(this,n(5))},245:function(e,t,n){},246:function(e,t,n){},313:function(e,t,n){"use strict";n.r(t);var r=n(384),s=n(232);for(var a in s)"default"!==a&&function(e){n.d(t,e,function(){return s[e]})}(a);var i=n(2),o=Object(i.a)(s.default,r.a,r.b,!1,null,"20117e8a",null);t.default=o.exports},314:function(e,t,n){"use strict";n.r(t);var r=n(389),s=n(234);for(var a in s)"default"!==a&&function(e){n.d(t,e,function(){return s[e]})}(a);n(316);var i=n(2),o=Object(i.a)(s.default,r.a,r.b,!1,null,"21763bd0",null);t.default=o.exports},315:function(e,t,n){},316:function(e,t,n){"use strict";var r=n(236);n.n(r).a},317:function(e,t,n){"use strict";n.r(t);var r=n(390),s=n(237);for(var a in s)"default"!==a&&function(e){n.d(t,e,function(){return s[e]})}(a);n(318);var i=n(2),o=Object(i.a)(s.default,r.a,r.b,!1,null,null,null);t.default=o.exports},318:function(e,t,n){"use strict";var r=n(239);n.n(r).a},319:function(e,t,n){"use strict";n.r(t);var r=n(388),s=n(240);for(var a in s)"default"!==a&&function(e){n.d(t,e,function(){return s[e]})}(a);n(320);var i=n(2),o=Object(i.a)(s.default,r.a,r.b,!1,null,"21ea082e",null);t.default=o.exports},320:function(e,t,n){"use strict";var r=n(242);n.n(r).a},321:function(e,t,n){"use strict";n.r(t);var r=n(377),s=n(243);for(var a in s)"default"!==a&&function(e){n.d(t,e,function(){return s[e]})}(a);n(324);var i=n(2),o=Object(i.a)(s.default,r.a,r.b,!1,null,"5d3b1c52",null);t.default=o.exports},322:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.register=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)("/common/api/user/register",e)},t.login=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)("/common/api/auth/login/user",e).then(function(e){return window.sessionStorage.setItem("token",e.data.token),window.localStorage.setItem("token",e.data.token),a.default.token=e.data.token,e})},t.thirdLogin=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.back_url.match(/.*(\?.*)#.*/),n=t&&t[1];n&&(e.back_url=e.back_url.replace(n,""));return(0,r.request_post)("/common/api/auth/third/link",e)},t.phoneLogin=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)("/common/api/auth/login_by_phone/phone",e).then(function(e){return window.sessionStorage.setItem("token",e.data.token),window.localStorage.setItem("token",e.data.token),a.default.token=e.data.token,e})},t.codeImage=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=Math.random().toFixed(3);return(0,r.request_get)("/common/api/captcha/image?code="+e)},t.codeCheck=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)("/common/api/captcha/check",e)},t.codePhone=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)("/common/api/captcha/mobile",e)},t.codeEmail=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)("/common/api/captcha/email",e)},t.getUserInfo=function(){return(0,r.request_get)("/api/auth/is_login/user")},t.save=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_put)("/common/api/user",e)},t.loginOut=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)("/common/api/auth/logout",e).then(function(e){return window.sessionStorage.removeItem("token"),window.sessionStorage.removeItem("userInfo"),a.default.token=null,e})},t.changePass=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_put)("/common/api/auth/pass",e).then(function(e){return window.sessionStorage.removeItem("token"),window.sessionStorage.removeItem("userInfo"),a.default.token=null,e})},t.saveMemberData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_put)(o(e),e)};var r=n(65),s=i(n(66)),a=(i(n(67)),i(n(94)));function i(e){return e&&e.__esModule?e:{default:e}}var o=s.default.compile("/common/api/user/:id")},323:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.detailRole=void 0;var r,s,a=f(n(18)),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.detailRole=(r=a.default.mark(function e(){var t,n,r,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=s.id,o=_(s,["id"]);return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={accesses:{}},n={},r={},e.next=5,(0,u.request_get)("/common/api/current").then(function(e){n.common={name:"common",type:"common"},t.pointer=n,e.data.publisher.apps.forEach(function(e){n[e.id]={name:e.name,type:e.type}})});case 5:if(!i){e.next=13;break}return e.next=8,(0,u.request_get)(v({id:i}),o).then(function(e){e&&e.status&&(t.name=e.data.name,t.exp=e.data.exp,t.id=e.data.id,r=e.data.accesses)});case 8:return e.next=10,(0,u.request_get)("/common/api/user/accesses").then(function(e){var s=["checkedList","allow_create","allow_view_all","allow_view_own","allow_edit_all","allow_edit_own","allow_delete_all","allow_delete_own"],a=function(a){r[a]?t.accesses[a]=e.data[n[a].type].map(function(e){var t={};if(r[a][e.identifier]){var n=null;return(n=r[a][e.identifier]).allow_create&&n.allow_view_own&&n.allow_view_own&&n.allow_edit_all&&n.allow_edit_own&&n.allow_delete_all&&n.allow_delete_own?n.checkedList=1:n.checkedList=0,s.forEach(function(e){t[e]=n[e]}),t.name=n.name,t.identifier=n.access_identifier,t}return s.forEach(function(e){t[e]=0}),t.name=e.name,t.identifier=e.identifier,t}):t.accesses[a]=e.data[n[a].type].map(function(e){var t={};return s.forEach(function(e){t[e]=0}),t.name=e.name,t.identifier=e.identifier,t})};for(var i in n)a(i)});case 10:return e.abrupt("return",t);case 13:return e.next=15,(0,u.request_get)("/common/api/user/accesses").then(function(e){var r=["checkedList","allow_create","allow_view_all","allow_view_own","allow_edit_all","allow_edit_own","allow_delete_all","allow_delete_own"];for(var s in n)t.accesses[s]=e.data[n[s].type].map(function(e){var t={};return r.forEach(function(e){t[e]=0}),t.name=e.name,t.identifier=e.identifier,t})});case 15:return e.abrupt("return",t);case 16:case"end":return e.stop()}},e,this)}),s=function(){var e=r.apply(this,arguments);return new Promise(function(t,n){return function r(s,a){try{var i=e[s](a),o=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(o).then(function(e){r("next",e)},function(e){r("throw",e)});t(o)}("next")})},function(){return s.apply(this,arguments)});t.listRole=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,u.request_get)("/common/api/user/roles",e)},t.listManager=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,u.request_get)("/common/api/user/users/manager",e)},t.addManager=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,u.request_post)("/common/api/user/users/detail/manager",e)},t.modifyManager=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=_(e,["id"]);return(0,u.request_put)(p({id:t}),n)},t.detailManager=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=_(e,["id"]);return(0,u.request_get)(p({id:t}),n)},t.allJurisdiction=function(){return(0,u.request_get)("/common/api/user/accesses")},t._allJurisdiction=function(){return(0,u.request_get)("/common/api/user/accesses").then(function(e){return e.data.publish=e.data.publish.map(function(e){return i({},e,{allow_create:0,allow_delete_all:0,allow_edit_all:0,allow_view_all:0})}),e.data.read=e.data.read.map(function(e){return i({},e,{allow_create:0,allow_delete_all:0,allow_edit_all:0,allow_view_all:0})}),e})},t.role=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=_(e,["id"]);if(t)return(0,u.request_put)(v({id:t}),n);return(0,u.request_post)("/common/api/user/roles",n)},t.addRole=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,u.request_post)("/common/api/user/roles",e)},t.deleteManager=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,u.request_post)("/common/api/user/users/delete",e)},t.deleteRole=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,u.request_post)("/common/api/user/roles/delete",e)},t.logManager=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,u.request_get)("/common/api/user/logs",e)},t.login=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,u.request_post)("/common/api/manager/login",e)},t.isLogin=function(){return(0,u.request_get)("/api/auth/is_login/manager")},t.adminLogin=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,u.request_post)("/common/api/auth/login/manager",e).then(function(e){return(0,d.loginListener)({user_id:e.data.id,user_name:e.data.user.name,user_nick_name:e.data.user.nick_name,user_phone:e.data.user.phone,user_picture:e.data.user.user_picture,user_picture_absolute:e.data.user.user_picture_absolute,user_email:e.data.user.email,user_sex:e.data.user.sex,user_date_of_birth:e.data.user.date_of_birth,user_address:e.data.user.address,user_city:""}),window.sessionStorage.setItem("token",e.data.token),window.sessionStorage.setItem("userInfo",o.default.stringify(e.data.user)),c.default.token=e.data.token,e})},t.getSelectOptions=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,u.request_post)("/common/api/auth/login/manager_check",e)};var o=f(n(67)),u=n(65),l=f(n(66)),c=f(n(94)),d=n(214);function f(e){return e&&e.__esModule?e:{default:e}}function _(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var p=l.default.compile("/common/api/user/users/detail/:id"),v=l.default.compile("/common/api/user/roles/:id")},324:function(e,t,n){"use strict";var r=n(245);n.n(r).a},325:function(e,t,n){"use strict";var r=n(246);n.n(r).a},374:function(e,t,n){"use strict";var r=function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",{staticClass:"top"},[t("SwitchSys",{attrs:{currentPlant:"X-System"}})],1),this._v(" "),t("div",{},[t("Menu",{on:{collspan:this.collspan}})],1),this._v(" "),t("div",{staticClass:"main-content",class:this.isCollspan?"collspan":""},[t("div",{staticClass:"bg"}),this._v(" "),t("router-view")],1)])},s=[];n.d(t,"a",function(){return r}),n.d(t,"b",function(){return s})},377:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"div"},[n("div",{staticClass:"alltop",class:{showMoreTop:e.showMoreTop},on:{mouseleave:function(t){e.showMoreTop=!1}}},[n("ul",{staticClass:"otherTop"},[n("li",{class:{active:e.isBase},on:{click:function(t){return e.goPage("/common/admin")}}},[e._m(0)]),e._l(e.outlink,function(t){return n("li",{class:{active:t.is_current},on:{click:function(n){return e.goPage(t)}}},[n("div",{staticClass:"content"},[n("p",{staticClass:"title"},[e._v(e._s(t.title))]),n("p",{staticClass:"name"},[e._v(e._s(t.name))])])])})],2),n("header",{staticClass:"header"},[n("div",{staticClass:"left",domProps:{textContent:e._s(e.left)},on:{click:e.showMore}}),e.plantInfo&&!e.isXDataVisible?n("div",{staticClass:"content"},[e._v("（"+e._s(e.plantInfo.name)+"）")]):e._e(),e.userInfo?n("div",{staticClass:"right"},["system"!=e.type?n("el-dropdown",{on:{command:e.handleCommand}},[n("span",{staticClass:"el-dropdown-link"},[e._v("平台切换"),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.userInfo.publishers,function(t){return n("el-dropdown-item",{key:t.id,attrs:{command:t.base_url,disabled:e.publisher.id==t.id}},[e._v(e._s(t.name))])}),1)],1):e._e(),n("span",{staticClass:"user"},[e._v(e._s(e.userName))]),n("span",{staticClass:"logoutBtn",on:{click:e.logout}},[e._v("退出登录")]),n("span",{staticClass:"logoutBtn",on:{click:e.changePass}},[e._v("修改密码")]),n("span",{staticClass:"logoutBtn",on:{click:e.backHome}},[e._v("返回首页")]),n("el-dialog",{attrs:{visible:e.loginDialog,width:"420px","close-on-click-modal":!1,"lock-scroll":!1,"before-close":e.handleClose,"append-to-body":!0},on:{"update:visible":function(t){e.loginDialog=t}}},[n("div",{staticClass:"top",attrs:{slot:"title"},slot:"title"},[n("el-tabs",{attrs:{value:"pass"}},[n("el-tab-pane",{attrs:{label:"修改密码",name:"pass"}})],1)],1),n("form",{ref:"passForm",staticClass:"passContent"},[n("div",{staticClass:"group"},[n("div",{staticClass:"label"},[e._v("旧密码:")]),n("input",{staticClass:"form-control",attrs:{name:"old_pass",type:"password"},domProps:{value:e.passData.old_pass}})]),n("div",{staticClass:"group"},[n("div",{staticClass:"label"},[e._v("新密码:")]),n("input",{staticClass:"form-control",attrs:{name:"new_pass",type:"password"},domProps:{value:e.passData.new_pass}})]),n("div",{staticClass:"group"},[n("div",{staticClass:"label"},[e._v("新密码确认:")]),n("input",{staticClass:"form-control",attrs:{name:"new_pass_confirm",type:"password"},domProps:{value:e.passData.new_pass_confirm}})])]),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.loginDialog=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.changePassword}},[e._v("确 定")])],1)])],1):e._e()])])])},s=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"content"},[t("p",{staticClass:"title"}),t("p",{staticClass:"name"},[this._v("基础设置")])])}];n.d(t,"a",function(){return r}),n.d(t,"b",function(){return s})},384:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("GliMenu",{attrs:{menuRecreate:!1,topPx:"50px",keepOneOpen:!0,"default-active":e.$route.path,router:!0,collapse:e.isCollapse,"background-color":"#333744","text-color":"#fff","active-text-color":"#44c3aa"},on:{itemClickHandler:e.menuItemClickHandler,foldHandler:e.menuFoldHandler}},e._l(e.list,function(t){return n("GliMenuTop",{key:t.txt,attrs:{txt:t.txt}},e._l(t.items,function(e){return n("GliMenuItem",{key:e.index,attrs:{iconClass:e.iconClass,txt:e.txt,index:e.index}})}),1)}),1)],1)},s=[];n.d(t,"a",function(){return r}),n.d(t,"b",function(){return s})},388:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"item-main curr",style:e.currStyle},[n("div",{on:{click:e.goHref,mouseleave:e.mouseleaveHandler,mouseenter:e.mouseenterHander}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!e.rootMenu.isFold&&e.currTip,expression:"!rootMenu.isFold && currTip"}],staticClass:"rightTip",style:{marginTop:-e.rootMenu.scrollTop+"px"}},[n("div",[n("span",{staticClass:"tiptxt"},[e._v("\n          "+e._s(e.txt)+"\n        ")])])]),e._v(" "),n("div",{staticClass:"title"},[n("span",{staticClass:"icon",class:e.iconClass}),e._v(" "),n("span",{staticClass:"name",class:e.rootMenu.isFold?"":"hide"},[e._v("\n        "+e._s(e.txt)+"\n      ")])])])])},s=[];n.d(t,"a",function(){return r}),n.d(t,"b",function(){return s})},389:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wrap",class:e.isFold?"open":"close",style:{top:e.topPx}},[n("div",{staticClass:"main",style:e.styleObj,on:{scroll:e.scrollHander}},[n("div",{staticClass:"topbar",class:e.isFold?"":"fold",on:{click:e.fold}},[n("span",{class:e.topBarClass})]),e._v(" "),n("div",{attrs:{color:"red"}},[e._t("default")],2)])])},s=[];n.d(t,"a",function(){return r}),n.d(t,"b",function(){return s})},390:function(e,t,n){"use strict";var r=function(){var e,t=this,n=t.$createElement,r=t._self._c||n;return r("div",{staticClass:"menu-main"},[r("div",{staticClass:"title-item",on:{mouseleave:function(e){t.currTip=!1},mouseenter:function(e){t.currTip=!0},click:t.open}},[r("div",{directives:[{name:"show",rawName:"v-show",value:!t.rootMenu.isFold&&t.currTip,expression:"!rootMenu.isFold && currTip"}],staticClass:"rightTip",style:{marginTop:-t.rootMenu.scrollTop+"px"}},[r("div",[r("span",{staticClass:"tiptxt"},[t._v("\n          "+t._s(t.txt)+"\n        ")])])]),t._v(" "),r("div",{staticClass:"submenu__title",class:{isOpen:t.isOpen}},[r("span",{ref:"icon2",staticClass:"icon2",class:(e={isOpen:t.isOpen},e[t.rootMenu.arrowClass]=!0,e)}),t._v(" "),r("span",{staticClass:"name",class:t.rootMenu.isFold?"":"hide"},[t._v(t._s(t.txt))])])]),t._v(" "),r("div",{staticClass:"subs",class:t.isOpen?"open":"close"},[t._t("default")],2)])},s=[];n.d(t,"a",function(){return r}),n.d(t,"b",function(){return s})}}]);