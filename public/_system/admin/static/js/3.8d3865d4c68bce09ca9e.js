/*!
 * {
 *   "buildtime": "2019-05-31 16:22:54",
 *   "workspace": "F:\\X-BOOK\\xcloud\\x-book4\\js",
 *   "username": "LQB",
 *   "hostname": "DESKTOP-QL56OJS",
 *   "platform": "win32",
 *   "git": {
 *     "branch": "master",
 *     "hash": "fbc007935",
 *     "message": [
 *       "commit fbc00793544e5767db1868f95f89c64b93f3aa79",
 *       "Author: 骆秋波 <1277678760@qq.com>",
 *       "Date:   Fri May 31 15:21:03 2019 +0800",
 *       "    打包上传"
 *     ],
 *     "user": "骆秋波",
 *     "email": "1277678760@qq.com",
 *     "remote": [
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (fetch)",
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (push)"
 *     ]
 *   }
 * }
 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{199:function(e,t,n){"use strict";n.r(t);var a=n(371),r=n(247);for(var i in r)"default"!==i&&function(e){n.d(t,e,function(){return r[e]})}(i);n(330);var s=n(2),o=Object(s.a)(r.default,a.a,a.b,!1,null,"0be24131",null);t.default=o.exports},210:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.event_terminal_verison=t.event_terminal=void 0,t.cb=function(e){e&&!e.status&&console.warn(e)},t.getUserId=function(){var e=window.sessionStorage.getItem("userInfo");if(e)return e._id||e.id;return""};var a,r=n(217);(a=r)&&a.__esModule;var i=(0,n(220).detect)(),s=i.name,o=i.version;t.event_terminal=s,t.event_terminal_verison=o},213:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUserInfo=function(){return a.default.parse(window.sessionStorage.getItem("userInfo"))},t.getDefaultCover=function(){return(0,r.request_get)(restUrl_publish+"/api/videos/images")},t.commonPreview=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_get)(u(e))},t.commonPreviewCode=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)(restUrl_publish+"/api/preview",e)},t.platInfo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=s.default.compile(restUrl_publish+"/api/current");return(0,r.request_get)(t(e)).then(function(e){return i.default.app_id=e.data.id,sessionStorage.app_id=e.data.id,document.title=e.data.application?e.data.application.name:e.data.publisher.name,e})},t.fileExport=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_get)(l(e))},t.groupsDelete=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)(restUrl_publish+"/api/groups/delete",e)};var a=o(n(67)),r=n(65),i=o(n(94)),s=(n(214),o(n(66)));function o(e){return e&&e.__esModule?e:{default:e}}var u=s.default.compile(restUrl_publish+"/api/preview/:id");var l=s.default.compile(restUrl_publish+"/api/content/export/:id")},214:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.suance=t.loginListener=t.createProListener=t.educeResListener=t.addResListener=void 0;var a=u(n(216)),r=u(n(222)),i=u(n(223)),s=u(n(224)),o=u(n(225));function u(e){return e&&e.__esModule?e:{default:e}}t.addResListener=a.default,t.educeResListener=r.default,t.createProListener=i.default,t.loginListener=s.default,t.suance=o.default},215:function(e,t){var n,a,r=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function o(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{a="function"==typeof clearTimeout?clearTimeout:s}catch(e){a=s}}();var u,l=[],c=!1,d=-1;function f(){c&&u&&(c=!1,u.length?l=u.concat(l):d=-1,l.length&&p())}function p(){if(!c){var e=o(f);c=!0;for(var t=l.length;t;){for(u=l,l=[];++d<t;)u&&u[d].run();d=-1,t=l.length}u=null,c=!1,function(e){if(a===clearTimeout)return clearTimeout(e);if((a===s||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(e);try{a(e)}catch(t){try{return a.call(null,e)}catch(t){return a.call(this,e)}}}(e)}}function v(e,t){this.fun=e,this.array=t}function h(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new v(e,t)),1!==l.length||c||o(p)},v.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=h,r.addListener=h,r.once=h,r.off=h,r.removeListener=h,r.removeAllListeners=h,r.emit=h,r.prependListener=h,r.prependOnceListener=h,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},216:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.res_id,n=e.res_type,r=e.res_name,i=e.res_exp,s=e.res_author,o=void 0===s?"佚名":s,u=e.res_author_id,l=void 0===u?[]:u,c=e.res_tree,d=void 0===c?[]:c,f=e.res_lables,p=void 0===f?[]:f,v=e.res_attr,h=void 0===v?[]:v,_=e.user_id,m=void 0===_?"":_;if(window.DBI){m=m||(0,a.getUserId)();var g=new DBI.createEvent({event_class:"Resources",event_data:{Resources:[{res_id:t,res_type:n,res_name:r,res_exp:i,res_author:o,res_author_id:l,res_tree:d,res_lables:p,res_attr:h,user_id:m,res_total_play:0,res_total_order:0}]},event_target:"",event_type:"创建",event_source:"WEB",event_sources:a.origin,event_operator:m,event_temporary:"",event_system:"",event_system_verison:"",event_terminal:a.event_terminal,event_terminal_verison:a.event_terminal_verison});DBI.declare(g,a.cb)}};var a=n(210)},217:function(e,t,n){"use strict";(function(t){var a=n(218),r=n(219),i=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,s=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,o=new RegExp("^[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]+");function u(e){return(e||"").toString().replace(o,"")}var l=[["#","hash"],["?","query"],function(e){return e.replace("\\","/")},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],c={hash:1,query:1};function d(e){var n,a=("undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{}).location||{},r={},s=typeof(e=e||a);if("blob:"===e.protocol)r=new p(unescape(e.pathname),{});else if("string"===s)for(n in r=new p(e,{}),c)delete r[n];else if("object"===s){for(n in e)n in c||(r[n]=e[n]);void 0===r.slashes&&(r.slashes=i.test(e.href))}return r}function f(e){e=u(e);var t=s.exec(e);return{protocol:t[1]?t[1].toLowerCase():"",slashes:!!t[2],rest:t[3]}}function p(e,t,n){if(e=u(e),!(this instanceof p))return new p(e,t,n);var i,s,o,c,v,h,_=l.slice(),m=typeof t,g=this,b=0;for("object"!==m&&"string"!==m&&(n=t,t=null),n&&"function"!=typeof n&&(n=r.parse),t=d(t),i=!(s=f(e||"")).protocol&&!s.slashes,g.slashes=s.slashes||i&&t.slashes,g.protocol=s.protocol||t.protocol||"",e=s.rest,s.slashes||(_[3]=[/(.*)/,"pathname"]);b<_.length;b++)"function"!=typeof(c=_[b])?(o=c[0],h=c[1],o!=o?g[h]=e:"string"==typeof o?~(v=e.indexOf(o))&&("number"==typeof c[2]?(g[h]=e.slice(0,v),e=e.slice(v+c[2])):(g[h]=e.slice(v),e=e.slice(0,v))):(v=o.exec(e))&&(g[h]=v[1],e=e.slice(0,v.index)),g[h]=g[h]||i&&c[3]&&t[h]||"",c[4]&&(g[h]=g[h].toLowerCase())):e=c(e);n&&(g.query=n(g.query)),i&&t.slashes&&"/"!==g.pathname.charAt(0)&&(""!==g.pathname||""!==t.pathname)&&(g.pathname=function(e,t){if(""===e)return t;for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),a=n.length,r=n[a-1],i=!1,s=0;a--;)"."===n[a]?n.splice(a,1):".."===n[a]?(n.splice(a,1),s++):s&&(0===a&&(i=!0),n.splice(a,1),s--);return i&&n.unshift(""),"."!==r&&".."!==r||n.push(""),n.join("/")}(g.pathname,t.pathname)),a(g.port,g.protocol)||(g.host=g.hostname,g.port=""),g.username=g.password="",g.auth&&(c=g.auth.split(":"),g.username=c[0]||"",g.password=c[1]||""),g.origin=g.protocol&&g.host&&"file:"!==g.protocol?g.protocol+"//"+g.host:"null",g.href=g.toString()}p.prototype={set:function(e,t,n){var i=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(n||r.parse)(t)),i[e]=t;break;case"port":i[e]=t,a(t,i.protocol)?t&&(i.host=i.hostname+":"+t):(i.host=i.hostname,i[e]="");break;case"hostname":i[e]=t,i.port&&(t+=":"+i.port),i.host=t;break;case"host":i[e]=t,/:\d+$/.test(t)?(t=t.split(":"),i.port=t.pop(),i.hostname=t.join(":")):(i.hostname=t,i.port="");break;case"protocol":i.protocol=t.toLowerCase(),i.slashes=!n;break;case"pathname":case"hash":if(t){var s="pathname"===e?"/":"#";i[e]=t.charAt(0)!==s?s+t:t}else i[e]=t;break;default:i[e]=t}for(var o=0;o<l.length;o++){var u=l[o];u[4]&&(i[u[1]]=i[u[1]].toLowerCase())}return i.origin=i.protocol&&i.host&&"file:"!==i.protocol?i.protocol+"//"+i.host:"null",i.href=i.toString(),i},toString:function(e){e&&"function"==typeof e||(e=r.stringify);var t,n=this,a=n.protocol;a&&":"!==a.charAt(a.length-1)&&(a+=":");var i=a+(n.slashes?"//":"");return n.username&&(i+=n.username,n.password&&(i+=":"+n.password),i+="@"),i+=n.host+n.pathname,(t="object"==typeof n.query?e(n.query):n.query)&&(i+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(i+=n.hash),i}},p.extractProtocol=f,p.location=d,p.trimLeft=u,p.qs=r,e.exports=p}).call(this,n(5))},218:function(e,t,n){"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},219:function(e,t,n){"use strict";var a,r=Object.prototype.hasOwnProperty;function i(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}t.stringify=function(e,t){t=t||"";var n,i,s=[];for(i in"string"!=typeof t&&(t="?"),e)if(r.call(e,i)){if((n=e[i])||null!==n&&n!==a&&!isNaN(n)||(n=""),i=encodeURIComponent(i),n=encodeURIComponent(n),null===i||null===n)continue;s.push(i+"="+n)}return s.length?t+s.join("&"):""},t.parse=function(e){for(var t,n=/([^=?&]+)=?([^&]*)/g,a={};t=n.exec(e);){var r=i(t[1]),s=i(t[2]);null===r||null===s||r in a||(a[r]=s)}return a}},220:function(e,t,n){(function(t){function a(e){var t=s([["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/],["Search Bot",/(nuhk)|(Googlebot)|(Yammybot)|(Openbot)|(Slurp)|(MSNBot)|(Ask Jeeves\/Teoma)|(ia_archiver)/]]).filter(function(t){return t.rule&&t.rule.test(e)})[0];return t?t.name:null}function r(){return"undefined"==typeof navigator&&void 0!==t?{name:"node",version:t.version.slice(1),os:n(221).type().toLowerCase()}:null}function i(e){var t=s([["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["vivaldi",/Vivaldi\/([0-9\.]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)$/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\ ([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/]]);if(!e)return null;var n=t.map(function(t){var n=t.rule.exec(e),a=n&&n[1].split(/[._]/).slice(0,3);return a&&a.length<3&&(a=a.concat(1==a.length?[0,0]:[0])),n&&{name:t.name,version:a.join(".")}}).filter(Boolean)[0]||null;return n&&(n.os=a(e)),/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/i.test(e)&&((n=n||{}).bot=!0),n}function s(e){return e.map(function(e){return{name:e[0],rule:e[1]}})}e.exports={detect:function(){var e=r();return e||("undefined"!=typeof navigator?i(navigator.userAgent):null)},detectOS:a,getNodeVersion:r,parseUserAgent:i}}).call(this,n(215))},221:function(e,t){t.endianness=function(){return"LE"},t.hostname=function(){return"undefined"!=typeof location?location.hostname:""},t.loadavg=function(){return[]},t.uptime=function(){return 0},t.freemem=function(){return Number.MAX_VALUE},t.totalmem=function(){return Number.MAX_VALUE},t.cpus=function(){return[]},t.type=function(){return"Browser"},t.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},t.networkInterfaces=t.getNetworkInterfaces=function(){return{}},t.arch=function(){return"javascript"},t.platform=function(){return"browser"},t.tmpdir=t.tmpDir=function(){return"/tmp"},t.EOL="\n",t.homedir=function(){return"/"}},222:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.res_url,n=e.user_id,r=void 0===n?"":n;window.DBI&&(r=r||(0,a.getUserId)(),DBI.declare({event_class:"Resources",event_data:{Resources:[{res_url:t}]},event_target:"",event_type:"导出",event_source:"Web",event_sources:a.origin,event_operator:r,event_temporary:"",event_system:"",event_system_version:"",event_terminal:a.event_terminal,event_terminal_verison:a.event_terminal_verison},a.cb))};var a=n(210)},223:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.res_id,n=e.res_type,r=e.res_name,i=e.res_cover,s=e.res_covers,o=e.res_exp,u=e.res_author,l=e.res_author_id,c=e.res_Interpreter,d=e.res_Interpreter_id,f=e.res_lables,p=e.res_money,v=e.res_isbn,h=e.res_isbn_ext,_=e.user_id,m=void 0===_?"":_;if(window.DBI){m=m||(0,a.getUserId)();var g=new DBI.createEvent({event_class:"PDAMBook",event_data:{Resources:[{res_id:t,res_type:n,res_name:r,res_cover:i,res_covers:s,res_exp:o,res_author:u,res_author_id:l,res_Interpreter:c,res_Interpreter_id:d,res_lables:f,res_money:p,res_isbn:v,res_isbn_ext:h}]},event_target:t,event_type:"创建",event_source:"WEB",event_sources:a.origin,event_operator:m,event_temporary:"",event_system:"",event_system_verison:"",event_terminal:a.event_terminal,event_terminal_verison:a.event_terminal_verison});DBI.declare(g,a.cb)}};var a=n(210)},224:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.user_id,n=e.user_name,r=e.user_nick_name,i=e.user_phone,s=e.user_picture,o=e.user_picture_absolute,u=e.user_email,l=e.user_sex,c=e.user_date_of_birth,d=e.user_address,f=e.user_city;t=t||(0,a.getUserId)(),window.DBI&&DBI.declare({event_class:"User",event_data:{User:[{user_id:t,user_nick_name:r,user_name:n,user_sex:l,user_email:u,user_phone:i,user_picture:s,user_picture_absolute:o,user_address:d,user_city:f,user_date_of_birth:c}]},event_target:"",event_type:"登录",event_source:"",event_sources:a.origin,event_operator:t,event_temporary:"",event_system:"",event_system_version:"",event_terminal:a.event_terminal,event_terminal_verison:a.event_terminal_verison},a.cb)};var a=n(210)},225:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.id,n=e.info,r=e.user_id,i=void 0===r?"":r;i=i||(0,a.getUserId)(),window.DBI&&DBI.declare({event_class:"PDAMBook",event_data:{PDAMBook:[n]},event_target:t,event_type:"分发",event_source:"web",event_sources:a.origin,event_operator:i,event_temporary:"",event_system:"",event_system_version:"",event_terminal:a.event_terminal,event_terminal_verison:a.event_terminal_verison},a.cb)};var a=n(210)},247:function(e,t,n){"use strict";n.r(t);var a=n(248),r=n.n(a);for(var i in a)"default"!==i&&function(e){n.d(t,e,function(){return a[e]})}(i);t.default=r.a},248:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(95)),i=o(n(326)),s=o(n(328));function o(e){return e&&e.__esModule?e:{default:e}}t.default={components:{Detail:i.default,Detail2:s.default},data:function(){return{detailDialog:!1,authDialog:!1,detail:null,authDetail:null,authId:"",searchData:{name:"",liaisons:"",phone:"",manager_name:""},list:null,page:{offset:10,total:6,num:1}}},mounted:function(){this.init()},methods:{init:function(){this.getList()},getList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=a({pageNum:t,pageOffset:this.page.offset},this.searchData);return r.getList(n).then(function(t){e.list=t.data,e.page=t.page})},currentChange:function(e){this.getList(e)},sizechange:function(e){this.page.offset=e,this.getList()},openDetailDialog:function(){this.detailDialog=!0},getDetail:function(e){var t=this;r.detail({id:e.id}).then(function(e){t.detail=e.data,t.detailDialog=!0})},add:function(){this.detail=null,this.detailDialog=!0},forbid:function(e,t){var n=this;this.$confirm(t+"该用户，该用户的系统将处于"+t+"状态?").then(function(t){r.disabled(e).then(function(t){n.$message.success("操作成功!"),e.status=!e.status})})},buttonClickHandler:function(e,t){var n=this,a=e.target.title;switch(a){case"禁用":case"启用":this.forbid(t,a);break;case"删除":this.$confirm("删除将删除该用户全部数据,危险操作!").then(function(e){n.$confirm("再次确认!").then(function(e){r.del(t).then(function(e){return n.getList()},function(e){n.$message.error("请先在详情中删除该出版社挂载的平台！！")})})});break;case"详情":this.getDetail(t)}},detailSave:function(e){this.detailDialog=!1,this.getList()},checkAll:function(e){this.$checkAll(e)},formatType:function(e){return e.join(", ")},auth:function(e){this.authDialog=!0,this.authId=e.id}}}},249:function(e,t,n){"use strict";n.r(t);var a=n(250),r=n.n(a);for(var i in a)"default"!==i&&function(e){n.d(t,e,function(){return a[e]})}(i);t.default=r.a},250:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});i(n(213));var a=n(93),r=i(n(95));function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}t.default={props:["isVis","detail"],created:function(){this.localVis=this.isVis,this.detail&&(this.data=this.detail),this.initAuthority()},data:function(){return{data:{type:[],apps:[]},allowType:[],authority:{publish:"",read:"",data:"",teach:""},localVis:!1}},methods:{addLicensePic:function(){},picChangeHandler:function(e){var t=this,n=e.target.files[0];if(n){var r=this.$loading();(0,a.getTask)(n).then(function(e){t.data.license=e.data.path,t.$set(t.data,"license_src",e.data.url),r.close()})}},addApp:function(){var e=this;r.getAllowedType({id:this.data.id}).then(function(t){e.allowType=t.data}),this.data.apps.push({name:"",read_front_uri:""})},delApp:function(e,t){var n=this;this.$confirm("是否删除?").then(function(a){t.id?r.delFlat(t).then(function(t){n.data.apps.splice(e,1)}):n.data.apps.splice(e,1)})},initAuthority:function(){var e=this;this.data.type&&this.data.type.forEach(function(t){e.authority[t]=!0})},authorize:function(e){this.authority[e]=!this.authority[e]},save:function(){var e=this;r.save(this.data).then(function(t){t&&t.status?(log(t.data),e.data=t.data,e.$message.success("保存成功")):e.$message.error(err.message)},function(t){e.$message.error(t.message)})},addFlat:function(e){var t=this,n=this.$loading({text:"正在新增初始化...",background:"rgba(0, 0, 0, 0.8)"});e.publisher_id=this.data.id,r.addFlat(e).then(function(e){e&&e.status?(t.$message.success("新增平台成功"),n.close()):(t.$message.error(err.message),n.close())},function(e){t.$message.error(e.message),n.close()})},handleClose:function(){this.$emit("save",!0)}},watch:{isVis:function(){this.localVis=this.isVis}}}},251:function(e,t,n){},252:function(e,t,n){"use strict";n.r(t);var a=n(253),r=n.n(a);for(var i in a)"default"!==i&&function(e){n.d(t,e,function(){return a[e]})}(i);t.default=r.a},253:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(95);t.default={props:["isVis","detail","id"],data:function(){return{isOpen:!1,formData:null}},mounted:function(){var e=this;this.isOpen=this.isVis,(0,a.getAuthList)().then(function(t){(0,a.detail)({id:e.id}).then(function(n){var a=[];for(var r in n.data.app_accesses.forEach(function(e){a.push(e.access_identifier)}),t.data)for(var i in t.data[r])t.data[r][i].checked=a.includes(t.data[r][i].identifier);e.formData=t.data,log(e.formData,777)})})},methods:{handleClose:function(){this.$emit("authClose",!0)},selectAll:function(e,t){var n=t.target.checked;e.forEach(function(e){e.checked=n})},save:function(){var e=this,t=[];for(var n in this.formData,this.formData)for(var r in this.formData[n])this.formData[n][r].checked&&t.push(this.formData[n][r].identifier);this.formData,(0,a.saveAuth)({id:this.id,app_accesses:JSON.stringify(t)}).then(function(t){e.$emit("authClose",!0),e.$message.success("保存成功")},function(t){e.$message.error(t.payload.message)})}},watch:{isVis:function(){this.isOpen=this.isVis}}}},254:function(e,t,n){},255:function(e,t,n){},326:function(e,t,n){"use strict";n.r(t);var a=n(376),r=n(249);for(var i in r)"default"!==i&&function(e){n.d(t,e,function(){return r[e]})}(i);n(327);var s=n(2),o=Object(s.a)(r.default,a.a,a.b,!1,null,"5310aeb0",null);t.default=o.exports},327:function(e,t,n){"use strict";var a=n(251);n.n(a).a},328:function(e,t,n){"use strict";n.r(t);var a=n(379),r=n(252);for(var i in r)"default"!==i&&function(e){n.d(t,e,function(){return r[e]})}(i);n(329);var s=n(2),o=Object(s.a)(r.default,a.a,a.b,!1,null,"3a68b751",null);t.default=o.exports},329:function(e,t,n){"use strict";var a=n(254);n.n(a).a},330:function(e,t,n){"use strict";var a=n(255);n.n(a).a},371:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"comps"},[e.detailDialog?n("Detail",{attrs:{detail:e.detail,isVis:e.detailDialog},on:{save:e.detailSave,"update:isVis":function(t){e.detailDialog=t},"update:is-vis":function(t){e.detailDialog=t}}}):e._e(),e.authDialog?n("Detail2",{attrs:{id:e.authId,isVis:e.authDialog},on:{"update:isVis":function(t){e.authDialog=t},"update:is-vis":function(t){e.authDialog=t},authClose:function(t){e.authDialog=!1}}}):e._e()],1),n("div",{staticClass:"content-wrap"},[n("div",{staticClass:"content"},[n("div",{staticClass:"search",on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getList()}}},[n("form",[n("el-input",{attrs:{placeholder:"出版社名称",clearable:""},model:{value:e.searchData.name,callback:function(t){e.$set(e.searchData,"name",t)},expression:"searchData.name"}}),n("el-input",{attrs:{placeholder:"联系人",clearable:""},model:{value:e.searchData.liaisons,callback:function(t){e.$set(e.searchData,"liaisons",t)},expression:"searchData.liaisons"}}),n("el-input",{attrs:{placeholder:"电话",clearable:""},model:{value:e.searchData.phone,callback:function(t){e.$set(e.searchData,"phone",t)},expression:"searchData.phone"}}),n("div",{staticClass:"seatch-btns"},[n("el-button",{attrs:{plain:"",icon:"el-icon-search",size:"medium",type:"primary"},on:{click:function(t){return e.getList()}}},[e._v("搜索")]),n("el-button",{attrs:{icon:"el-icon-plus",size:"medium",type:"primary"},on:{click:e.add}},[e._v("新建  ")])],1)],1)]),e.list?n("div",{staticClass:"table-warp"},[n("table",{staticClass:"table"},[n("thead",[n("tr",[n("th",{attrs:{width:"60"}},[n("input",{attrs:{type:"checkbox"},on:{click:function(t){return e.checkAll(t)}}})]),n("th",[e._v("出版社名称")]),n("th",[e._v("联系人")]),n("th",[e._v("电话")]),n("th",{attrs:{width:"140"}},[e._v("拥有平台")]),n("th",{attrs:{width:"230"}},[e._v("出版社后台地址")]),n("th",[e._v("状态")]),n("th",[e._v("操作")])])]),n("tbody",e._l(e.list,function(t){return n("tr",{key:t.id},[n("th",[n("input",{ref:"inps",refInFor:!0,attrs:{type:"checkbox"}})]),n("th",[n("div",{staticClass:"ell"},[e._v(e._s(t.name))])]),n("th",[n("div",{staticClass:"el"},[e._v(e._s(t.liaisons)+"   ")])]),n("th",[n("div",{staticClass:"ell"},[e._v(e._s(t.phone))])]),n("th",e._l(t.apps,function(a){return n("div",{staticClass:"ell"},[n("a",{attrs:{href:t.base_url+a.base_url,target:"_blank"}},[e._v(" "+e._s(a.name))])])}),0),n("th",[n("div",{staticClass:"ell url"},[n("a",{attrs:{href:t.base_url+"/admin",target:"_blank",title:t.base_url+"/admin"}},[e._v(" "+e._s(t.base_url)+"/admin")])])]),n("th",[e._v(e._s(1==t.status?"已审核":"未审核"))]),n("th",[n("div",{staticClass:"table-btns",on:{click:function(n){return e.buttonClickHandler(n,t)}}},[n("span",{staticClass:"icon icon-detail",attrs:{title:"详情"}}),n("span",{staticClass:"icon icon-know",attrs:{title:"权限设置"},on:{click:function(n){return e.auth(t)}}}),n("span",{staticClass:"icon icon-delete",attrs:{title:"删除"}})])])])}),0)]),e.page.total?n("div",{staticClass:"pages"},[n("Pages",{attrs:{currentPage:e.page.num,total:e.page.total,pageSize:e.page.offset,pageSizes:[e.page.offset,20,50,100]},on:{currentChange:e.currentChange,sizechange:e.sizechange}})],1):e._e()]):e._e()])])])},r=[];n.d(t,"a",function(){return a}),n.d(t,"b",function(){return r})},376:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-dialog",{attrs:{visible:e.localVis,width:"1200px",top:"50px","before-close":e.handleClose},on:{"update:visible":function(t){e.localVis=t}}},[e.data?n("div",{staticClass:"content"},[n("div",{staticClass:"base fix"},[n("div",{staticClass:"tname"},[e._v("基本信息")]),n("div",{staticClass:"form-group"},[n("label",[e._v("出版社名称 ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.data.name,expression:"data.name"}],staticClass:"form-control",attrs:{placeholder:"必填"},domProps:{value:e.data.name},on:{input:function(t){t.target.composing||e.$set(e.data,"name",t.target.value)}}})]),n("div",{staticClass:"form-group"},[n("label",[e._v("出版社地址")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.data.address,expression:"data.address"}],staticClass:"form-control",domProps:{value:e.data.address},on:{input:function(t){t.target.composing||e.$set(e.data,"address",t.target.value)}}})]),n("div",{staticClass:"form-group"},[n("label",[e._v("二级域名")]),(e.data.id,n("input",{directives:[{name:"model",rawName:"v-model",value:e.data.subdomain,expression:"data.subdomain"}],staticClass:"form-control",domProps:{value:e.data.subdomain},on:{input:function(t){t.target.composing||e.$set(e.data,"subdomain",t.target.value)}}}))]),n("div",{staticClass:"form-group"},[n("label",[e._v("联系方式")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.data.phone,expression:"data.phone"}],staticClass:"form-control",domProps:{value:e.data.phone},on:{input:function(t){t.target.composing||e.$set(e.data,"phone",t.target.value)}}})]),n("div",{staticClass:"form-group"},[n("label",[e._v("联系邮箱")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.data.email,expression:"data.email"}],staticClass:"form-control",domProps:{value:e.data.email},on:{input:function(t){t.target.composing||e.$set(e.data,"email",t.target.value)}}})]),n("div",{staticClass:"form-group"},[n("label",[e._v("联系人")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.data.liaisons,expression:"data.liaisons"}],staticClass:"form-control",domProps:{value:e.data.liaisons},on:{input:function(t){t.target.composing||e.$set(e.data,"liaisons",t.target.value)}}})]),n("div",{staticClass:"right"},[n("span",{staticClass:"pname"},[e._v("营业执照 :")]),n("Btn",{on:{click:function(t){return e.$refs.picFile.click()}}},[e._v("选择文件"),n("input",{ref:"picFile",staticClass:"hide",attrs:{type:"file",accept:e.$config.imgAccept},on:{change:e.picChangeHandler}})]),n("br"),n("img",{attrs:{src:e.data.license_thumb}})],1),n("div",{staticClass:"bottom"},[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.save}},[e._v("保存")])],1)]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.data.id,expression:"data.id"}],staticClass:"base sys"},[n("div",{staticClass:"tname"},[e._v("系统信息")]),n("span",{staticClass:"sys-list-name"},[e._v("系统列表")]),n("div",{staticClass:"xlist"},e._l(e.data.apps,function(t,a){return e.data.apps?n("div",{staticClass:"item"},[n("div",{staticClass:"form-group"},[n("label",{staticClass:"url",style:{color:t.is_test?"#f56c6c":""}},[e._v("平台名称")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"i.name"}],staticClass:"form-control",domProps:{value:t.name},on:{input:function(n){n.target.composing||e.$set(t,"name",n.target.value)}}})]),n("div",{staticClass:"form-group"},[n("label",{staticClass:"url"},[e._v("平台标识")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.identifier,expression:"i.identifier"}],staticClass:"form-control",domProps:{value:t.identifier},on:{input:function(n){n.target.composing||e.$set(t,"identifier",n.target.value)}}})]),n("div",{staticClass:"form-group"},[n("label",{staticClass:"url"},[e._v("平台类型 ")]),n("el-select",{model:{value:t.type,callback:function(n){e.$set(t,"type",n)},expression:"i.type"}},e._l(e.allowType,function(e){return n("el-option",{key:e.key,attrs:{label:e.value,value:e.key}})}),1),n("el-button",{attrs:{type:"primary"},on:{click:function(n){return e.addFlat(t)}}},[e._v("保存")]),n("el-button",{attrs:{type:"danger"},on:{click:function(n){return e.delApp(a,t)}}},[e._v("删除")])],1)]):e._e()}),0),n("div",{staticClass:"authority"}),n("div",{staticClass:"bottom"},[n("Btn",{on:{click:e.addApp}},[e._v("新增")])],1)])]):e._e()])],1)},r=[];n.d(t,"a",function(){return a}),n.d(t,"b",function(){return r})},379:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{visible:e.isOpen,"before-close":e.handleClose,"lock-scroll":!1,width:"1200px"},on:{"update:visible":function(t){e.isOpen=t}}},[n("el-tabs",{staticClass:"tabs",attrs:{value:"common权限",type:"border-card"}},e._l(e.formData,function(t,a){return n("el-tab-pane",{key:a,attrs:{label:a+"权限",name:a+"权限"}},[n("div",{staticClass:"selectAll"},[n("input",{attrs:{type:"checkbox"},on:{click:function(n){return e.selectAll(t,n)}}}),n("span",[e._v("全选")])]),e._l(t,function(t,a){return n("div",{staticClass:"item"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.checked,expression:"item.checked"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.checked)?e._i(t.checked,null)>-1:t.checked},on:{change:function(n){var a=t.checked,r=n.target,i=!!r.checked;if(Array.isArray(a)){var s=e._i(a,null);r.checked?s<0&&e.$set(t,"checked",a.concat([null])):s>-1&&e.$set(t,"checked",a.slice(0,s).concat(a.slice(s+1)))}else e.$set(t,"checked",i)}}}),n("span",[e._v(e._s(t.name))])])})],2)}),1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"info"},on:{click:e.handleClose}},[e._v("取消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("确定")])],1)],1)},r=[];n.d(t,"a",function(){return a}),n.d(t,"b",function(){return r})}}]);