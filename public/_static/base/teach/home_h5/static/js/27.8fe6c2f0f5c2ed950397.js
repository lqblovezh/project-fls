(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{254:function(t,e,n){"use strict";n.r(e);var i=n(672),a=n(363);for(var s in a)"default"!==s&&function(t){n.d(e,t,function(){return a[t]})}(s);n(556);var o=n(20),r=Object(o.a)(a.default,i.a,i.b,!1,null,"28c49065",null);r.options.__file="info.vue",e.default=r.exports},286:function(t,e,n){"use strict";n.r(e);var i=n(287),a=n.n(i);for(var s in i)"default"!==s&&function(t){n.d(e,t,function(){return i[t]})}(s);e.default=a.a},287:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["hideBack","isSearch","privateStyle"],methods:{goBack:function(){this.$router.go(-1)},goSearch:function(){this.$router.push({path:"search"})}},computed:{isShowSearch:function(){return!!this.isSearch},isShowBack:function(){return!this.hideBack}}}},288:function(t,e,n){},289:function(t,e,n){"use strict";n.r(e);var i=n(291),a=n(286);for(var s in a)"default"!==s&&function(t){n.d(e,t,function(){return a[t]})}(s);n(290);var o=n(20),r=Object(o.a)(a.default,i.a,i.b,!1,null,"a1350782",null);r.options.__file="index.vue",e.default=r.exports},290:function(t,e,n){"use strict";var i=n(288);n.n(i).a},291:function(t,e,n){"use strict";var i=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"header",style:this.privateStyle},[this._t("left",[e("span",{staticClass:"icon-go-back",on:{click:this.goBack}})]),this._t("center"),this._t("right",[e("span",{staticClass:"icon-search",on:{click:this.goSearch}})])],2)},a=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return a})},363:function(t,e,n){"use strict";n.r(e);var i=n(364),a=n.n(i);for(var s in i)"default"!==s&&function(t){n.d(e,t,function(){return i[t]})}(s);e.default=a.a},364:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=c(n(89)),a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},s=n(57),o=c(n(289)),r=n(555);function c(t){return t&&t.__esModule?t:{default:t}}e.default={data:function(){return{actions:null,sheetVisible:!1,userInfo:{},willUpdateData:{}}},components:{Head:o.default},mounted:function(){this.userInfo=this.$store.state.user.userInfo},methods:a({},(0,s.mapMutations)("user",["setUserInfo"]),{go:function(t){this.$router.push({path:t})},selectPic:function(){this.actions=[{name:"拍照",method:this.openPic},{name:"从相册中选择",method:this.openPic}],this.sheetVisible=!0},selectSex:function(){this.actions=[{name:"男",method:this.changeSex},{name:"女",method:this.changeSex},{name:"保密",method:this.changeSex}],this.sheetVisible=!0},changeSex:function(t){this.userInfo.sex!==t.name&&(this.userInfo.sex=t.name,this.willUpdateData.sex=t.name)},openPic:function(t){this.$refs.camera.click()},previewImg:function(t){var e=t.target.files[0],n=URL.createObjectURL(e);this.$set(this.userInfo,"picture_absolute",n)},save:function(){var t,e=(t=i.default.mark(function t(){var e,n=this;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.$refs.camera.files[0],t.prev=1,!e){t.next=5;break}return t.next=5,(0,r.getTask)(e).then(function(t){n.willUpdateData.picture=t.data.path});case 5:t.next=10;break;case 7:throw t.prev=7,t.t0=t.catch(1),new Error("图片更新失败");case 10:this.$service.user.changeUserInfo(a({},this.willUpdateData)).then(function(t){n.$Toast("修改成功"),n.userInfo=t.data}).catch(console.warn);case 11:case"end":return t.stop()}},t,this,[[1,7]])}),function(){var e=t.apply(this,arguments);return new Promise(function(t,n){return function i(a,s){try{var o=e[a](s),r=o.value}catch(t){return void n(t)}if(!o.done)return Promise.resolve(r).then(function(t){i("next",t)},function(t){i("throw",t)});t(r)}("next")})});return function(){return e.apply(this,arguments)}}()})}},365:function(t,e,n){},555:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getTask=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];return t.size,t.size>=1048576?(e.is_chunk=!0,(0,i.request_post)("/common/api/files/upload_task?r="+Math.random(5)).then(function(a){if(a.status)return e.task_id=a.data.task_id,(0,i.request_file)("/common/api/files/upload",{file:t,data:e},n);throw new Error(a.messages)}).catch(function(t){throw new Error("上传失败")})):(e.is_chunk=!1,(0,i.request_file)("/common/api/files/upload",{file:t,data:e}))},e.getAppId=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.request_get)("/common/api/app/search_name",t).then(function(t){return a.default.app_id=t.data.id,sessionStorage.app_id=t.data.id,t})},e.getClientToken=function(){return(0,i.request_post)("/common/api/auth/token/pcclient")},e.platInfo=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.request_get)(r(t)).then(function(t){return a.default.app_id=t.data.id,sessionStorage.app_id=t.data.id,document.title=t.data.name,t})},e.commonPreview=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.request_get)(u(t))},e.getDefaultCover=function(){return(0,i.request_get)("/api/videos/images")},e.commonPreviewCode=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.request_post)("/api/preview",t)},e.getQrcode=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.request_get)("/common/api/get_qrcode",t)},e.synchronization=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.request_get)(c(t)).then(function(t){return t})},e.getAuthor=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.request_get)("/api/ecommerce/author",t)},e.addAuthor=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.request_post)("/api/ecommerce/author",t)},e.getWeixinConfig=function(t){return(0,i.request_get)("/common/api/third/wx_js_sdk/config",t)};o(n(59));var i=n(2),a=o(n(58)),s=o(n(3));function o(t){return t&&t.__esModule?t:{default:t}}s.default.compile("/common/api/files/upload_task/:id"),s.default.compile("/common/api/manager/managers/:id"),s.default.compile("/common/api/manager/roles/:id");var r=s.default.compile("/common/api/app/apps/:id"),c=s.default.compile("/common/api/dragon_infos/:id");var u=s.default.compile("/api/preview/:id")},556:function(t,e,n){"use strict";var i=n(365);n.n(i).a},672:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"user-wrapper"},[n("Head",[n("p",{attrs:{slot:"center"},slot:"center"},[t._v("个人资料")]),n("p",{attrs:{slot:"right"},on:{click:t.save},slot:"right"},[t._v("保存")])]),n("div",{staticClass:"info-menu fix-top"},[n("div",{staticClass:"p3 bg-white"},[n("div",{staticClass:"info-item",on:{click:function(e){t.go("infoUpdate")}}},[n("p",[t._v("账户与安全")]),n("p",[t._v(t._s(t.userInfo.name)),n("span",{staticClass:"icon-small icon-enter"})])]),n("div",{staticClass:"info-item",on:{click:t.selectPic}},[n("p",[t._v("头像")]),n("p",[n("img",{attrs:{src:t.userInfo.picture_absolute}}),n("span",{staticClass:"icon-small icon-enter"})]),n("input",{ref:"camera",attrs:{type:"file",accept:"image/*",capture:"camera"},on:{change:function(e){t.previewImg(e)}}})]),n("div",{staticClass:"info-item",on:{click:function(e){t.go("updateNickName")}}},[n("p",[t._v("昵称")]),n("p",[t._v(t._s(t.userInfo.nick_name)),n("span",{staticClass:"icon-small icon-enter"})])]),n("div",{staticClass:"info-item noBorder",on:{click:t.selectSex}},[n("p",[t._v("性别")]),n("p",[t._v(t._s(t.userInfo.sex)),n("span",{staticClass:"icon-small icon-enter"})])]),n("div",{staticClass:"line-part"}),n("div",{staticClass:"info-item",on:{click:function(t){}}},[n("p",[t._v("学校")]),n("p",[t._v(t._s(t.userInfo.school)),n("span",{staticClass:"icon-small icon-enter"})])]),n("div",{staticClass:"info-item",on:{click:function(t){}}},[n("p",[t._v("学院")]),n("p",[t._v(t._s(t.userInfo.college)),n("span",{staticClass:"icon-small icon-enter"})])]),n("div",{staticClass:"info-item",on:{click:function(t){}}},[n("p",[t._v("真实姓名")]),t._m(0)])])]),n("mt-actionsheet",{attrs:{actions:t.actions},model:{value:t.sheetVisible,callback:function(e){t.sheetVisible=e},expression:"sheetVisible"}})],1)},a=[function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("杨芸"),e("span",{staticClass:"icon-small icon-enter"})])}];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return a})}}]);