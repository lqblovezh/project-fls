(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{441:function(e,t,i){"use strict";i.r(t);var a=i(780),n=i(634);for(var r in n)"default"!==r&&function(e){i.d(t,e,function(){return n[e]})}(r);i(752);var s=i(0),o=Object(s.a)(n.default,a.a,a.b,!1,null,null,null);o.options.__file="Apply.vue",t.default=o.exports},461:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={methods:{isPass:function(){var e=this;return this.valiAll(),new Promise(function(t,i){var a={};for(var n in e.valiData)if(e.valiData.hasOwnProperty(n)){var r=e.valiData[n];r.isError&&(r.message=r.display,i(r)),a[n]=r.value}t(a)})},valiAll:function(){for(var e in this.$refs,this.$refs){if(this.$refs.hasOwnProperty(e)&&/^inp_/.test(e))this.$refs[e][0].vali()}},getImgCode:function(){var e=this;return this.$service.signin.codeImage().then(function(t){e.valiData.code_img.img_src=t.data.code_img,e.valiData.code_img.code_id_img=t.data.code_id})},getPhoneCodeHander:function(){var e=this;if(this.$refs.inp_phone[0].vali(),!this.valiData.phone||!this.valiData.phone.isError){var t={code_id_img:this.valiData.code_img.code_id_img,code_val_img:this.valiData.code_img.value,phone:this.valiData.phone.value,not_check_user_exist:1};this.$service.signin.codePhone(t).then(function(t){e.$message({type:"success",message:"短信发送成功!"}),e.valiData.code_id.value=t.data.code_id,e.$refs.inp_code_val[0].wait()}).catch(function(t){"图片验证码错误"===t.message?(e.valiData.code_img.isError=!0,e.$message({type:"error",message:"图片验证码错误!"})):(console.error(t),e.$message({type:"error",message:"短信发送失败! 请稍后再试"}))})}}}}},619:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTask=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments[2];return e.size,e.size>=1048576?(t.is_chunk=!0,(0,a.request_post)("/common/api/files/upload_task?r="+Math.random(5)).then(function(n){if(n.status)return t.task_id=n.data.task_id,(0,a.request_file)("/common/api/files/upload",{file:e,data:t},i);throw new Error(n.messages)}).catch(function(e){throw new Error("上传失败")})):(t.is_chunk=!1,(0,a.request_file)("/common/api/files/upload",{file:e,data:t}))},t.getAppId=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)("/common/api/app/search_name",e).then(function(e){return n.default.app_id=e.data.id,sessionStorage.app_id=e.data.id,e})},t.getClientToken=function(){return(0,a.request_post)("/common/api/auth/token/pcclient")},t.platInfo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)(o(e)).then(function(e){return n.default.app_id=e.data.id,sessionStorage.app_id=e.data.id,document.title=e.data.name,e})},t.commonPreview=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)(c(e))},t.commonPreviewCode=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)("/api/preview",e)},t.getQrcode=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)("/common/api/get_qrcode",e)},t.synchronization=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)(u(e)).then(function(e){return e})},t.getAuthor=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)("/api/ecommerce/author",e)},t.addAuthor=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)("/api/ecommerce/author",e)},t.getWeixinConfig=function(e){return(0,a.request_get)("/common/api/third/wx_js_sdk/config",e)};s(i(168));var a=i(2),n=s(i(115)),r=s(i(4));function s(e){return e&&e.__esModule?e:{default:e}}r.default.compile("/common/api/files/upload_task/:id"),r.default.compile("/common/api/manager/managers/:id"),r.default.compile("/common/api/manager/roles/:id");var o=r.default.compile("/common/api/app/apps/:id"),u=r.default.compile("/common/api/dragon_infos/:id");var c=r.default.compile("/api/preview/:id")},634:function(e,t,i){"use strict";i.r(t);var a=i(635),n=i.n(a);for(var r in a)"default"!==r&&function(e){i.d(t,e,function(){return a[e]})}(r);t.default=n.a},635:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=u(i(5)),n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},r=u(i(461)),s=i(619),o=i(26);function u(e){return e&&e.__esModule?e:{default:e}}t.default={mixins:[r.default],computed:n({},(0,o.mapState)({user:function(e){return e.user}})),data:function(){return{detail:{img:"https://img4.sycdn.imooc.com/szimg/5b17bad10001535305400300.jpg",sex:"1"},isEdit:!1,previewImgUrl:null,info:{},valiData:{nick_name:{display:"姓名不能为空",rules:"min_length(1)",cname:"真实姓名",type:"text",value:"",isError:!1},education:{display:"学历不能为空",rules:"min_length(1)",cname:"学历",type:"text",value:"",isError:!1},email:{display:"邮箱格式错误",rules:"is_email",cname:"邮箱",type:"Url",value:"",isError:!1},company:{display:"单位不能为空",rules:"min_length(1)",cname:"单位",type:"text",value:"",isError:!1},duties:{display:"职务不能为空",rules:"min_length(1)",cname:"职务",type:"text",value:"",isError:!1}}}},created:function(){for(var e in this.info=n({},this.user),this.valiData)this.valiData[e].value=this.info[e]},methods:{save:function(){var e,t,i=this;this.isPass().then((e=a.default.mark(function e(t){var n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=i.$refs.file.files[0])){e.next=4;break}return e.next=4,(0,s.getTask)(n).then(function(e){i.info.picture=e.data.path});case 4:return e.next=6,i.$service.user.apply({company:t.company,duties:t.duties,education:t.education,email:t.email,nick_name:t.nick_name,picture:i.info.picture,summary:i.info.summary,sex:i.info.sex}).then(function(e){i.$message.success("申请成功等待后台审核!")}).catch(function(e){var t=e.payload;i.$message.error(t.message)});case 6:case"end":return e.stop()}},e,i)}),t=function(){var t=e.apply(this,arguments);return new Promise(function(e,i){return function a(n,r){try{var s=t[n](r),o=s.value}catch(e){return void i(e)}if(!s.done)return Promise.resolve(o).then(function(e){a("next",e)},function(e){a("throw",e)});e(o)}("next")})},function(e){return t.apply(this,arguments)})).catch(function(e){})},previewImg:function(e){var t=e.target.files[0];this.imgFile=t,this.info.size=t.size,this.info.format=t.name.substr(t.name.lastIndexOf(".")+1),this.previewImgUrl=URL.createObjectURL(t)}},watch:{user:function(e){for(var t in this.info=e,this.valiData)this.valiData[t].value=this.info[t]}}}},636:function(e,t,i){},752:function(e,t,i){"use strict";var a=i(636);i.n(a).a},780:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("NormalWrap",[i("div",{staticClass:"page-user-apply c_f5_bg cbox"},[e.user?i("div",{staticClass:"container c_f_bg"},[i("div",{staticClass:"top tc"},[i("div",{staticClass:"img"},[i("img",{attrs:{src:e.previewImgUrl||e.info.picture_absolute,alt:"alt"}}),i("input",{ref:"file",staticClass:"hide",attrs:{type:"file",accept:"image/jpeg,image/jpg,image/png"},on:{change:e.previewImg}}),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.$refs.file.click()}}},[e._v("选择")])],1)]),i("div",{staticClass:"box c_6 f14"},[i("div",{staticClass:"item"},[i("label",{staticClass:"ib"},[e._v("性别 ：")]),i("el-radio-group",{model:{value:e.info.sex,callback:function(t){e.$set(e.info,"sex",t)},expression:"info.sex"}},[i("el-radio",{attrs:{label:"男"}},[e._v("男")]),i("el-radio",{attrs:{label:"女"}},[e._v("女")]),i("el-radio",{attrs:{label:"保密"}},[e._v("保密")])],1)],1),e._l(e.valiData,function(e,t){return i("LoginInput",{key:t,ref:"inp_"+t,refInFor:!0,attrs:{name:t,data:e}})}),i("div",{staticClass:"item"},[i("label",{staticClass:"ib vt"},[e._v("简介 ：")]),i("div",{staticClass:"ib"},[i("el-input",{attrs:{type:"textarea"},model:{value:e.info.summary,callback:function(t){e.$set(e.info,"summary",t)},expression:"info.summary"}})],1)]),i("div",{staticClass:"btn tc f14"},[i("Tbutton",{attrs:{type:"og"},nativeOn:{click:function(t){return e.save(t)}}},[e._v("完成")])],1)],2)]):e._e()])])],1)},n=[];i.d(t,"a",function(){return a}),i.d(t,"b",function(){return n})}}]);