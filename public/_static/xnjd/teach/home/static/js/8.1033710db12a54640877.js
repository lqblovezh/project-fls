(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{424:function(e,t,n){"use strict";n.r(t);var r=n(800),i=n(531);for(var o in i)"default"!==o&&function(e){n.d(t,e,function(){return i[e]})}(o);n(709);var a=n(0),s=Object(a.a)(i.default,r.a,r.b,!1,null,null,null);s.options.__file="index.vue",t.default=s.exports},531:function(e,t,n){"use strict";n.r(t);var r=n(532),i=n.n(r);for(var o in r)"default"!==o&&function(e){n.d(t,e,function(){return r[e]})}(o);t.default=i.a},532:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(5)),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(26),a=u(n(704)),s=u(n(706));function u(e){return e&&e.__esModule?e:{default:e}}function c(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(i,o){try{var a=t[i](o),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}("next")})}}t.default={components:{VideoList:a.default,MyVideo:s.default},asyncData:function(e){e.store,e.route},created:function(){},mounted:function(){var e=c(r.default.mark(function e(){var t,n=this;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("course/getVideoData",this.$route.query);case 2:this.initEvent(),t=this.$route.query,t.course_id,t.course_hour_id,t.course_teaching_id,t.course_teaching_plan_id||setTimeout(function(){n.$replace("/video",i({},n.$route.query,n.allMedia.ids))},0);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),beforeDestroy:function(){window.removeEventListener("beforeunload",this.browserCloseHandler),window.removeEventListener("load",this.browserReloadHandler)},beforeRouteLeave:function(){var e=c(r.default.mark(function e(t,n,i){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,this.sendMsg();case 3:i();case 5:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}(),beforeRouteUpdate:function(e,t,n){n()},data:function(){return{}},computed:i({},(0,o.mapState)({detail:function(e){return e.course.courseVideoDetail}}),(0,o.mapGetters)({allMedia:"course/allMedia"}),{currMedia:function(){return this.allMedia.citem}}),watch:{"$route.query.course_teaching_plan_id":function(){}},methods:{back:function(){this.$router.go(-1)},changeIndex:function(e){},goVideo:function(e){var t=e.item,n=e.pitem,r=e.citem,i={course_id:this.$route.query.course_id,course_hour_id:t.id,course_teaching_id:n.id,course_teaching_plan_id:r.id};this.$store.dispatch("course/unChecked",{query:i,data:this.detail}),this.$set(t,"checkedVideo",!0),this.$set(n,"checkedVideo",!0),this.$set(r,"checkedVideo",!0),this.$replace("/video",i)},sendMsg:function(){var e=this.getSendData();if(e.course_time>=1)return this.$service.course.leaveVideoPonit(e).then(function(e){})},getSendData:function(){var e=this.getTime();return i({},this.$route.query,e)},getTime:function(){return this.$refs.video?this.$refs.video.getTime():{course_time:1,resources_time:1}},initEvent:function(){window.addEventListener("beforeunload",this.browserCloseHandler),window.addEventListener("load",this.browserReloadHandler)},browserCloseHandler:function(e){this.sendMsg()},browserReloadHandler:function(e){},playHandler:function(e){var t=e.target.player;console.dir(t.currentTime()),console.dir(t.duration())},pauseHandler:function(e){this.sendMsg(data)},endedHandler:function(e){var t=e.target.player;console.dir(t.currentTime()),console.dir(t.duration()),this.next()},next:function(){var e=this.allMedia,t=e.itemList,n=e.pitemList,r=e.citemList,i=e.item,o=e.pitem,a=(e.citem,e.mediaIndex),s=(e.ids,t[a.itemIndex+1]),u=n[a.pitemIndex+1],c=r[a.citemIndex+1];try{c?this.goVideo({item:i,pitem:o,citem:c}):u?this.goVideo({item:i,pitem:u,citem:u.teaching_plan_info[0]}):s&&this.goVideo({item:s,pitem:s.teaching_plan[0],citem:s.teaching_plan[0].teaching_plan_info[0]})}catch(e){console.error("下一首计算错误!"),console.error(e)}},timeupdateHandler:function(e){},videoMountedHandler:function(){}}}},533:function(e,t,n){"use strict";n.r(t);var r=n(534),i=n.n(r);for(var o in r)"default"!==o&&function(e){n.d(t,e,function(){return r[e]})}(o);t.default=i.a},534:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(26);t.default={created:function(){},beforeDestroy:function(){},data:function(){return{}},computed:r({},(0,i.mapState)({detail:function(e){return e.course.courseVideoDetail},hourList:function(e){return e.course.courseVideoDetail.course_period_list},study:function(e){return e.course.study}})),methods:{back:function(){this.$router.go(-1)},initEvent:function(){window.addEventListener("beforeunload",this.browserCloseHandler),window.addEventListener("load",this.browserReloadHandler)},browserCloseHandler:function(e){},browserReloadHandler:function(e){},goVideo:function(e,t,n){var r=this;n.name,this.$emit("sendMsg"),setTimeout(function(){r.$emit("goVideo",{item:e,pitem:t,citem:n})},20)},getPercentage:function(e){var t=e.user_time,n=e.resources_time;return t&&n?100*t/n:0}}}},535:function(e,t,n){},536:function(e,t,n){"use strict";n.r(t);var r=n(537),i=n.n(r);for(var o in r)"default"!==o&&function(e){n.d(t,e,function(){return r[e]})}(o);t.default=i.a},537:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(5),o=(r=i)&&r.__esModule?r:{default:r},a=n(116),s=(n(707),n(200));function u(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(i,o){try{var a=t[i](o),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}("next")})}}t.default={props:{src:{},poster:{},seekTime:{}},created:function(){},beforeDestroy:function(){this.player.dispose()},mounted:function(){var e=u(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.addVideoJs();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error("video.js   加载失败");case 8:this.initVideo(),this.initEvent();case 10:case"end":return e.stop()}},e,this,[[0,5]])}));return function(){return e.apply(this,arguments)}}(),watch:{src:function(){var e=this;this.player.src(this.src),setTimeout(function(){e.player.play()},20)}},methods:{next:function(){var e=this;setTimeout(function(){e.player.src(e.src),e.player.play()},20)},getTime:function(){return{course_time:this.player.currentTime().toFixed(2),resources_time:this.player.duration().toFixed(2)}},initVideo:function(){this.player=videojs("myvideo",{muted:!1,controls:!0,loop:!1,preload:"auto",poster:this.poster,src:this.src,language:"zh-CN",sources:[{src:this.src}],techOrder:["html5"]})},seek:function(){if(this.seekTime){this.seekTime;var e=this.player.duration().toFixed(2);Math.abs(e-this.seekTime)<1.3||this.player.currentTime(this.seekTime)}},initEvent:function(){var e=this,t=this.player;t.on("play",function(t){e.$emit("play",t)}),t.on("pause",function(t){e.$emit("pause",t)}),t.on("ended",function(t){e.$emit("ended",t)}),t.on("timeupdate",function(t){e.$emit("timeupdate",s.error)}),t.on("loadedmetadata",function(t){e.seek()})},addVideoJs:function(){var e=u(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.videojs){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,(0,a.addLinks)("https://cdnjs.cloudflare.com/ajax/libs/video.js/7.3.0/video-js.min.css","css"),e.next=6,(0,a.addLinks)("https://cdnjs.cloudflare.com/ajax/libs/video.js/7.3.0/video.js");case 6:return e.next=8,(0,a.addLinks)("https://cdnjs.cloudflare.com/ajax/libs/video.js/7.3.0/lang/zh-CN.js");case 8:e.next=18;break;case 10:return e.prev=10,e.t0=e.catch(2),(0,a.addLinks)("//static/video/video-js.min.css","css"),e.next=16,(0,a.addLinks)("//static/video/video.min.js");case 16:return e.next=18,(0,a.addLinks)("//static/video/zh-CN.js");case 18:case"end":return e.stop()}},e,this,[[2,10]])}));return function(){return e.apply(this,arguments)}}()}}},538:function(e,t,n){},539:function(e,t,n){},704:function(e,t,n){"use strict";n.r(t);var r=n(805),i=n(533);for(var o in i)"default"!==o&&function(e){n.d(t,e,function(){return i[e]})}(o);n(705);var a=n(0),s=Object(a.a)(i.default,r.a,r.b,!1,null,null,null);s.options.__file="VideoList.vue",t.default=s.exports},705:function(e,t,n){"use strict";var r=n(535);n.n(r).a},706:function(e,t,n){"use strict";n.r(t);var r=n(812),i=n(536);for(var o in i)"default"!==o&&function(e){n.d(t,e,function(){return i[e]})}(o);n(708);var a=n(0),s=Object(a.a)(i.default,r.a,r.b,!1,null,null,null);s.options.__file="MyVideo.vue",t.default=s.exports},707:function(e,t,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
function r(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0}function i(e){return t.Buffer&&"function"==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var o=n(200),a=Object.prototype.hasOwnProperty,s=Array.prototype.slice,u="foo"===function(){}.name;function c(e){return Object.prototype.toString.call(e)}function d(e){return!i(e)&&("function"==typeof t.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}var f=e.exports=_,l=/\s*function\s+([^\(\s]*)\s*/;function p(e){if(o.isFunction(e)){if(u)return e.name;var t=e.toString().match(l);return t&&t[1]}}function v(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function h(e){if(u||!o.isFunction(e))return o.inspect(e);var t=p(e);return"[Function"+(t?": "+t:"")+"]"}function m(e,t,n,r,i){throw new f.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:i})}function _(e,t){e||m(e,!0,t,"==",f.ok)}function g(e,t,n,a){if(e===t)return!0;if(i(e)&&i(t))return 0===r(e,t);if(o.isDate(e)&&o.isDate(t))return e.getTime()===t.getTime();if(o.isRegExp(e)&&o.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(d(e)&&d(t)&&c(e)===c(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===r(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(i(e)!==i(t))return!1;var u=(a=a||{actual:[],expected:[]}).actual.indexOf(e);return-1!==u&&u===a.expected.indexOf(t)||(a.actual.push(e),a.expected.push(t),function(e,t,n,r){if(null===e||void 0===e||null===t||void 0===t)return!1;if(o.isPrimitive(e)||o.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var i=y(e),a=y(t);if(i&&!a||!i&&a)return!1;if(i)return e=s.call(e),t=s.call(t),g(e,t,n);var u,c,d=x(e),f=x(t);if(d.length!==f.length)return!1;for(d.sort(),f.sort(),c=d.length-1;c>=0;c--)if(d[c]!==f[c])return!1;for(c=d.length-1;c>=0;c--)if(u=d[c],!g(e[u],t[u],n,r))return!1;return!0}(e,t,n,a))}return n?e===t:e==t}function y(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function b(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function w(e,t,n,r){var i;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),i=function(e){var t;try{e()}catch(e){t=e}return t}(t),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!i&&m(i,n,"Missing expected exception"+r);var a="string"==typeof r,s=!e&&o.isError(i),u=!e&&i&&!n;if((s&&a&&b(i,n)||u)&&m(i,n,"Got unwanted exception"+r),e&&i&&n&&!b(i,n)||!e&&i)throw i}f.AssertionError=function(e){var t;this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=v(h((t=this).actual),128)+" "+t.operator+" "+v(h(t.expected),128),this.generatedMessage=!0);var n=e.stackStartFunction||m;if(Error.captureStackTrace)Error.captureStackTrace(this,n);else{var r=new Error;if(r.stack){var i=r.stack,o=p(n),a=i.indexOf("\n"+o);if(a>=0){var s=i.indexOf("\n",a+1);i=i.substring(s+1)}this.stack=i}}},o.inherits(f.AssertionError,Error),f.fail=m,f.ok=_,f.equal=function(e,t,n){e!=t&&m(e,t,n,"==",f.equal)},f.notEqual=function(e,t,n){e==t&&m(e,t,n,"!=",f.notEqual)},f.deepEqual=function(e,t,n){g(e,t,!1)||m(e,t,n,"deepEqual",f.deepEqual)},f.deepStrictEqual=function(e,t,n){g(e,t,!0)||m(e,t,n,"deepStrictEqual",f.deepStrictEqual)},f.notDeepEqual=function(e,t,n){g(e,t,!1)&&m(e,t,n,"notDeepEqual",f.notDeepEqual)},f.notDeepStrictEqual=function e(t,n,r){g(t,n,!0)&&m(t,n,r,"notDeepStrictEqual",e)},f.strictEqual=function(e,t,n){e!==t&&m(e,t,n,"===",f.strictEqual)},f.notStrictEqual=function(e,t,n){e===t&&m(e,t,n,"!==",f.notStrictEqual)},f.throws=function(e,t,n){w(!0,e,t,n)},f.doesNotThrow=function(e,t,n){w(!1,e,t,n)},f.ifError=function(e){if(e)throw e};var x=Object.keys||function(e){var t=[];for(var n in e)a.call(e,n)&&t.push(n);return t}}).call(this,n(9))},708:function(e,t,n){"use strict";var r=n(538);n.n(r).a},709:function(e,t,n){"use strict";var r=n(539);n.n(r).a},800:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-video c_3_bg c_f"},[e.detail?n("div",{staticClass:"wrap"},[n("div",{staticClass:"head tc f20"},[n("div",{staticClass:"btns fl"},[n("Tbutton",{attrs:{icon:"arrow-left",type:"b7_plain",size:"small"},nativeOn:{click:function(t){return e.back(t)}}},[e._v("返回课程")])],1),n("div",[n("span",[e._v(e._s(e.currMedia.name))])])]),n("div",{staticClass:"container fix c_5_bg f13"},[n("VideoList",{on:{sendMsg:e.sendMsg,goVideo:e.goVideo}}),n("div",{ref:"videoWrap",staticClass:"mediaWrap fl c_2_bg tc"},[e.$isVideo(e.currMedia.preview)||e.$isAudio(e.currMedia.preview)?n("div",[n("MyVideo",{ref:"video",attrs:{src:e.currMedia.preview,poster:e.currMedia.img_src,seekTime:e.currMedia.user_time},on:{play:e.playHandler,pause:e.pauseHandler,ended:e.endedHandler,timeupdate:e.timeupdateHandler}})],1):e.$isPic(e.currMedia.preview_path)?n("div",[n("img",{attrs:{src:e.currMedia.preview_path}})]):n("div",[n("span",[e._v("错误资源")])]),n("div",{staticClass:"name"},[e._v(" 简介: "+e._s(e.currMedia.abs))])])],1),n("div",{staticClass:"other"})]):e._e()])},i=[];n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i})},805:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"comp-study-video-menu-list"},[n("div",{staticClass:"left fl"},[e._m(0),n("div",{staticClass:"ls"},e._l(e.hourList,function(t,r){return n("div",{key:t.id,staticClass:"item"},[n("div",{staticClass:"gp"},[n("div",{staticClass:"name c_e0 cp f16",class:{c_price:t.checkedVideo}},[e._v(e._s(t.name))]),e._l(t.teaching_plan,function(r){return n("div",{staticClass:"pitem"},[n("div",{staticClass:"gp"},[n("div",{staticClass:"name cp f15",class:{c_og_2:r.checkedVideo}},[e._v(" "+e._s(r.name))]),e._l(r.teaching_plan_info,function(i){return n("div",{key:i.id,staticClass:"citem"},[n("div",{staticClass:"gp cp",on:{click:function(n){e.goVideo(t,r,i)}}},[n("div",{staticClass:"name cp f14",class:{c_theme:i.checkedVideo}},[e._v(e._s(i.name))]),n("div",{staticClass:"progress"},[n("el-progress",{attrs:{showText:!1,percentage:e.getPercentage(i)}})],1)])])})],2)])})],2)])}))])])},i=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"mtop"},[t("div",{staticClass:"ib active_border active"},[this._v("目录")])])}];n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i})},812:function(e,t,n){"use strict";var r=function(){var e=this.$createElement;this._self._c;return this._m(0)},i=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"comp-my-video pr"},[t("div",{staticClass:"wrap"},[t("video",{staticClass:"video-js",attrs:{id:"myvideo"}})])])}];n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i})}}]);