(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{1205:function(e,t,i){"use strict";var a=i(637);i.n(a).a},1257:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"setting"},[i("div",{staticClass:"head"},[i("el-button-group",[i("el-button",{on:{click:function(t){e.$router.push({path:"/wms/setting/banner"})}}},[e._v("banner设置")]),i("el-button",{on:{click:function(t){e.$router.push({path:"/wms/setting/ad"})}}},[e._v("广告位")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.$router.push({path:"/wms/setting/commend"})}}},[e._v("推荐设置")]),i("el-button",{on:{click:function(t){e.$router.push({path:"/wms/setting/footer"})}}},[e._v("底部设置")])],1),i("div",{staticClass:"flat"},[i("el-radio",{attrs:{label:"course"},model:{value:e.toPage,callback:function(t){e.toPage=t},expression:"toPage"}},[e._v("精品课程")]),i("el-radio",{attrs:{label:"teacher"},model:{value:e.toPage,callback:function(t){e.toPage=t},expression:"toPage"}},[e._v("教师大咖")]),i("el-radio",{attrs:{label:"live"},model:{value:e.toPage,callback:function(t){e.toPage=t},expression:"toPage"}},[e._v("直播教学")])],1)],1),i("div",{staticClass:"content"},["course"==e.toPage?i("div",{staticClass:"part"},[i("div",{staticClass:"title"},[e._v("精品课程"),i("el-button",{staticClass:"add",attrs:{type:"primary",size:"small"},on:{click:function(t){e.open("")}}},[e._v("增加")])],1),i("div",{staticClass:"list"},e._l(e.tableData.course,function(t,a){return i("div",{directives:[{name:"show",rawName:"v-show",value:t.course_info,expression:"item.course_info"}],staticClass:"item"},[i("img",{staticClass:"cover",attrs:{src:t.course_info.img}}),i("div",{staticClass:"txt"},[i("span",[e._v(e._s(t.course_info.course_name))]),i("span",{staticClass:"el-icon-delete del",on:{click:function(i){e.del(a,t.id)}}})])])}))]):e._e(),"teacher"==e.toPage?i("div",{staticClass:"part"},[i("div",{staticClass:"title"},[e._v("教师大咖"),i("el-button",{staticClass:"add",attrs:{type:"primary",size:"small"},on:{click:function(t){e.open("")}}},[e._v("增加")])],1),i("div",{staticClass:"list"},e._l(e.tableData.teacher,function(t,a){return t.teacher_info?i("div",{staticClass:"item"},[i("img",{staticClass:"cover",attrs:{src:t.teacher_info.picture_absolute}}),i("div",{staticClass:"txt"},[i("span",[e._v(e._s(t.teacher_info.nick_name))]),i("span",{staticClass:"el-icon-delete del",on:{click:function(i){e.del(a,t.id)}}})])]):e._e()}))]):e._e(),"live"==e.toPage?i("div",{staticClass:"part"},[i("div",{staticClass:"title"},[e._v("直播教学"),i("el-button",{staticClass:"add",attrs:{type:"primary",size:"small"},on:{click:function(t){e.open("")}}},[e._v("增加")])],1),i("div",{staticClass:"list"},e._l(e.tableData.live,function(t,a){return t.live_info?i("div",{staticClass:"item"},[i("div",{staticClass:"img"},[i("img",{staticClass:"cover",attrs:{src:t.live_info.img}})]),i("div",{staticClass:"txt"},[i("span",[e._v(e._s(t.live_info.title))]),i("span",{staticClass:"el-icon-delete del",on:{click:function(i){e.del(a,t.id)}}})])]):e._e()}))]):e._e(),i("el-dialog",{attrs:{title:"勾选添加数据",width:"1100px",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t},open:e.show}},["course"==this.toPage&&e.courseList?i("el-table",{key:"1",ref:"table",staticStyle:{width:"100%"},attrs:{stripe:"",data:e.courseList,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55",fixed:""}}),i("el-table-column",{attrs:{prop:"course_name",label:"课程名称"}}),i("el-table-column",{attrs:{prop:"id",label:"所属教师"}}),i("el-table-column",{attrs:{prop:"price",label:"价格"}}),i("el-table-column",{attrs:{prop:"abs",label:"简介"}}),i("el-table-column",{attrs:{prop:"create_time",label:"创建时间",width:"200"}})],1):e._e(),"teacher"==this.toPage&&e.teacherList?i("el-table",{key:"2",ref:"table",staticStyle:{width:"100%"},attrs:{stripe:"",data:e.teacherList,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55",fixed:""}}),i("el-table-column",{attrs:{prop:"nick_name",label:"教师名称"}}),i("el-table-column",{attrs:{prop:"phone",label:"电话"}}),i("el-table-column",{attrs:{prop:"email",label:"邮箱"}}),i("el-table-column",{attrs:{prop:"education",label:"学历"}}),i("el-table-column",{attrs:{prop:"company",label:"单位"}}),i("el-table-column",{attrs:{prop:"summary",label:"简介"}}),i("el-table-column",{attrs:{prop:"date_of_birth",label:"生日"}})],1):e._e(),"live"==this.toPage&&e.liveList?i("el-table",{key:"3",ref:"table",staticStyle:{width:"100%"},attrs:{stripe:"",data:e.liveList,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55",fixed:""}}),i("el-table-column",{attrs:{prop:"title",label:"直播名称"}}),i("el-table-column",{attrs:{prop:"teacher_name",label:"直播教师"}}),i("el-table-column",{attrs:{prop:"price",label:"直播地址"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("a",{attrs:{href:t.row.url}},[e._v(e._s(t.row.url))])]}}])}),i("el-table-column",{attrs:{prop:"introduce",label:"简介"}}),i("el-table-column",{attrs:{prop:"audit_time",label:"直播时间",width:"200"}})],1):e._e(),i("div",{staticClass:"page"},[i("el-pagination",{attrs:{"current-page":1,"page-sizes":[10,50,100],"page-size":10,background:"",layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.sendInfo("updateImg")}}},[e._v("确定")])],1)],1)],1)])},n=[];i.d(t,"a",function(){return a}),i.d(t,"b",function(){return n})},289:function(e,t,i){"use strict";i.r(t);var a=i(1257),n=i(635);for(var s in n)"default"!==s&&function(e){i.d(t,e,function(){return n[e]})}(s);i(1205);var o=i(0),r=Object(o.a)(n.default,a.a,a.b,!1,null,"5bfd5066",null);r.options.__file="commend.vue",t.default=r.exports},308:function(e,t){var i=/^(?:submit|button|image|reset|file)$/i,a=/^(?:input|select|textarea|keygen)/i,n=/(\[[^\[\]]*\])/g;function s(e,t,i){if(t.match(n)){!function e(t,i,a){if(0===i.length)return t=a;var n=i.shift(),s=n.match(/^\[(.+?)\]$/);if("[]"===n)return t=t||[],Array.isArray(t)?t.push(e(null,i,a)):(t._values=t._values||[],t._values.push(e(null,i,a))),t;if(s){var o=s[1],r=+o;isNaN(r)?(t=t||{})[o]=e(t[o],i,a):(t=t||[])[r]=e(t[r],i,a)}else t[n]=e(t[n],i,a);return t}(e,function(e){var t=[],i=new RegExp(n),a=/^([^\[\]]*)/.exec(e);for(a[1]&&t.push(a[1]);null!==(a=i.exec(e));)t.push(a[1]);return t}(t),i)}else{var a=e[t];a?(Array.isArray(a)||(e[t]=[a]),e[t].push(i)):e[t]=i}return e}function o(e,t,i){return i=i.replace(/(\r)?\n/g,"\r\n"),i=(i=encodeURIComponent(i)).replace(/%20/g,"+"),e+(e?"&":"")+encodeURIComponent(t)+"="+i}e.exports=function(e,t){"object"!=typeof t?t={hash:!!t}:void 0===t.hash&&(t.hash=!0);for(var n=t.hash?{}:"",r=t.serializer||(t.hash?s:o),l=e&&e.elements?e.elements:[],u=Object.create(null),c=0;c<l.length;++c){var d=l[c];if((t.disabled||!d.disabled)&&d.name&&a.test(d.nodeName)&&!i.test(d.type)){var p=d.name,f=d.value;if("checkbox"!==d.type&&"radio"!==d.type||d.checked||(f=void 0),t.empty){if("checkbox"!==d.type||d.checked||(f=""),"radio"===d.type&&(u[d.name]||d.checked?d.checked&&(u[d.name]=!0):u[d.name]=!1),void 0==f&&"radio"==d.type)continue}else if(!f)continue;if("select-multiple"!==d.type)n=r(n,p,f);else{f=[];for(var h=d.options,g=!1,v=0;v<h.length;++v){var m=h[v],_=t.empty&&!m.value,b=m.value||_;m.selected&&b&&(g=!0,n=t.hash&&"[]"!==p.slice(p.length-2)?r(n,p+"[]",m.value):r(n,p,m.value))}!g&&t.empty&&(n=r(n,p,""))}}}if(t.empty)for(var p in u)u[p]||(n=r(n,p,""));return n}},309:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.main=void 0;var a,n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},s=i(308);(a=s)&&a.__esModule;var o={data:function(){return{tableData:[],total:0,page:{pageOffset:10,pageNum:1},ids:[],isTeacher:"",dialogVisible:!1,detailVisible:!1,detailData:[],productType:null}},created:function(){this.isTeacher=this.$config.isTeacher,this.getList(n({},this.query,this.page))},methods:{seareHandeler:function(){this.page.pageNum=1,this.getList(n({},this.query))},getList:function(e){var t=this;this.service&&this.service.getList(e).then(function(e){e&&e.status&&(t.tableData=e.data,t.total=e.page.total)})},handleSelectionChange:function(e){this.ids=e.map(function(e){return e.id}),this.multipleSelection=e},update:function(e,t){this.$refs[t].src=URL.createObjectURL(e.target.files[0])},getTime:function(e){e||(e=["",""]),this.query.time_start=e[0],this.query.time_end=e[1],this.query.start_time=e[0],this.query.end_time=e[1]},handleSizeChange:function(e){this.page.pageOffset=e,this.getList(n({},this.page,this.query))},handleCurrentChange:function(e){this.page.pageNum=e,this.getList(n({},this.page,this.query))},handleClose:function(){this.detailVisible=!1,this.dialogVisible=!1},del:function(e){var t=this;this.$confirm("你真的要删除该数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.service.del({id:e}).then(function(e){e&&e.status&&(t.getList(n({},t.page,t.query)),t.$message.success("删除成功"))},function(e){var i=e.payload;t.$message.error(i.message)})}).catch(function(){})},save:function(e){var t=this;e||(e=this.form),this.service.save(e).then(function(e){e.status&&(t.$message.success("保存成功"),t.getList(t.query)),t.dialogVisible=!1,t.$refs.child.dialogVisible=!1},function(e){t.$message.error(e.payload.message)})},educe:function(e){this.service.educe({id:e}).then(function(e){window.location.href=e.data.url})},detail:function(e){var t=this;this.service.detail({id:e}).then(function(e){t.detailData=e.data,log(e,"detail")}),this.$refs.child.dialogVisible=!0},showDetail:function(e,t){var i=this;log("------------"),this.service.detail({id:e}).then(function(e){log(e,"detailInfo"),i.detailData=e.data,i.productType=t,i.detailVisible=!0})}}};t.main=o},314:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTask=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments[2];return e.size,e.size>=1048576?(t.is_chunk=!0,(0,a.request_post)("/common/api/files/upload_task?r="+Math.random(5)).then(function(n){if(n.status)return t.task_id=n.data.task_id,(0,a.request_file)("/common/api/files/upload",{file:e,data:t},i);throw new Error(n.messages)}).catch(function(e){throw new Error("上传失败")})):(t.is_chunk=!1,(0,a.request_file)("/common/api/files/upload",{file:e,data:t}))},t.getAppId=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)("/common/api/app/search_name",e).then(function(e){return n.default.app_id=e.data.id,sessionStorage.app_id=e.data.id,e})},t.getClientToken=function(){return(0,a.request_post)("/common/api/auth/token/pcclient")},t.platInfo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)(r(e)).then(function(e){return n.default.app_id=e.data.id,sessionStorage.app_id=e.data.id,document.title=e.data.name,e})},t.commonPreview=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)(u(e))},t.commonPreviewCode=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)("/api/preview",e)},t.getQrcode=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)("/common/api/get_qrcode",e)},t.synchronization=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)(l(e)).then(function(e){return e})},t.getAuthor=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)("/api/ecommerce/author",e)},t.addAuthor=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)("/api/ecommerce/author",e)},t.getWeixinConfig=function(e){return(0,a.request_get)("/common/api/third/wx_js_sdk/config",e)};o(i(52));var a=i(51),n=o(i(53)),s=o(i(85));function o(e){return e&&e.__esModule?e:{default:e}}s.default.compile("/common/api/files/upload_task/:id"),s.default.compile("/common/api/manager/managers/:id"),s.default.compile("/common/api/manager/roles/:id");var r=s.default.compile("/common/api/app/apps/:id"),l=s.default.compile("/common/api/dragon_infos/:id");var u=s.default.compile("/api/preview/:id")},326:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getList=function(e){return log(e,"abcd"),n.request_get("/api/live/backstage_all",e).then(function(e){return e.data=e.data.map(function(e){switch(log(e.online),"true"==e.online?e.online="已上架":e.online="未上架",e.state){case"not_approve":e.state="未审核";break;case"approveing":e.state="审核中";break;case"success":e.state="审核已通过";break;case"fail":e.state="审核未通过"}return e}),e})},t.getListPrimery=function(e){return n.request_get("/api/live/state_list",e).then(function(e){return e.data=e.data.map(function(e){return"approveing"==e.state&&(e.state="审核中"),e}),e})},t.save=function(e){if(e.id)return n.request_put(r(e),e);return n.request_post("/api/live",e)},t.isOnLine=function(e){return n.request_put(l(e),e)},t.approve=function(e){return n.request_put(u(e),e)},t.del=function(e){return n.request_delete("/api/live",e)},t.getLiveLists=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.request_get("/api/live/front_all",e)};var a,n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(i(51)),s=i(85),o=(a=s)&&a.__esModule?a:{default:a};var r=o.default.compile("/api/live/:id"),l=o.default.compile("/api/live/online/:id"),u=o.default.compile("/api/live/state/:id")},342:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)("/api/courses",e)},t.getPubList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)("/api/course_share",e)},t.detail=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)(u(e))},t.del=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/api/courses/delete",e)},t.accredit=function(e){var t=e.id;if("acc"==e.type)return(0,n.request_put)(r({id:t}));return(0,n.request_put)(l({id:t}))},t.shelf=function(e){var t=e.id,i=function(e,t){var i={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(i[a]=e[a]);return i}(e,["id"]);return(0,n.request_put)(c({id:t}),i)},t.classfiy=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)("/api/classify/tree",e)},t.apply=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/api/class",e)},t.use=function(e){var t=e.id;return(0,n.request_put)(d({id:t}))};var a,n=i(51),s=i(85),o=(a=s)&&a.__esModule?a:{default:a};var r=o.default.compile("/api/courses/authorization/:id"),l=o.default.compile("/api/courses/enable_class/:id"),u=o.default.compile("/api/courses/:id"),c=o.default.compile("/api/courses/classfiy/:id"),d=o.default.compile("/api/course_share/authorization/:id")},354:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getList=function(e){return a.request_get("/api/setting/all",e)},t.save=function(e){if(e.id)return a.request_put(o(e),e);return a.request_post("/api/setting",e)},t.del=function(e){return a.request_delete(o(e),e)},t.files_move=function(e){return a.request_put("/api/setting/files_move",e)},t.recommend=function(e){return a.request_post("/api/recommend",e)},t.courseList=function(e){return a.request_get("/api/recommend/list",e)},t.courseDel=function(e){return a.request_delete(r({id:e.id}),e)},t.teacherList=function(){return a.request_get("/common/api/user/users/teacher")};var a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(i(51)),n=s(i(85));s(i(52));function s(e){return e&&e.__esModule?e:{default:e}}var o=n.default.compile("/api/setting/:id"),r=(n.default.compile("/api/live/online/:id"),n.default.compile("/api/live/state/:id"),n.default.compile("/api/recommend/:id"))},635:function(e,t,i){"use strict";i.r(t);var a=i(636),n=i.n(a);for(var s in a)"default"!==s&&function(e){i.d(t,e,function(){return a[e]})}(s);t.default=n.a},636:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},s=i(309),o=i(52),r=((a=o)&&a.__esModule,i(314),c(i(354))),l=c(i(342)),u=c(i(326));function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}t.default={mixins:[s.main],data:function(){return{dialogVisible:!1,service:r,tableData:{course:[],teacher:[],live:[]},id:"",toPage:"course",form:{},query:{},courseList:{},liveList:{},teacherList:{},info:{type:"",info:""},names:[{name:"课程名称",type:"xx"},{name:"所属教师",type:"dd"}]}},methods:{getList:function(){var e=this;"course"==this.toPage?l.getList(n({status:1},this.page)).then(function(t){t&&t.status&&(e.courseList=t.data),e.total=t.page.total}):"live"==this.toPage?u.getList(n({online:!0},this.page)).then(function(t){t&&t.data&&(e.liveList=t.data,e.total=t.page.total)}):"teacher"==this.toPage&&r.teacherList().then(function(t){e.teacherList=t.data,e.total=t.page.total}),r.courseList({type:this.toPage}).then(function(t){t&&t.status&&(e.tableData[e.toPage]=t.data)})},del:function(e,t){var i=this;r.courseDel({id:t}).then(function(t){i.tableData[i.toPage].splice(e,1),l.getList({status:1}).then(function(e){i.courseList=e.data}),i.$message.success("删除成功")},function(e){i.$message.error("删除失败")})},save_copyright:function(){this.changeData()},open:function(){this.dialogVisible=!0},show:function(){var e=this,t=[];"course"==this.toPage?(this.info.type="course_info",this.info.info="courseList"):"live"==this.toPage?(this.info.type="live_info",this.info.info="liveList"):"teacher"==this.toPage&&(this.info.type="teacher_info",this.info.info="teacherList"),log(this.tableData[this.toPage],99988877),this.tableData[this.toPage].forEach(function(i){i[e.info.type]&&t.push(i[e.info.type].id)}),this.$nextTick(function(i){e[e.info.info]&&e[e.info.info].forEach(function(i){t.includes(i.id)&&e.$refs.table.toggleRowSelection(i,!0)})})},sendInfo:function(){var e=this,t=[],i=[];this.tableData[this.toPage].forEach(function(i){i[e.info.type]&&(t.push(i[e.info.type].id),e.ids.includes(i[e.info.type].id)||(r.courseDel({id:i.id}),e.getList(n({key:e.toPage},e.query))))}),this.ids.forEach(function(e){t.includes(e)||i.push(e)}),i.length&&r.recommend({type:this.toPage,id:i}).then(function(t){e.getList(n({key:e.radio},e.query))}),this.dialogVisible=!1}},watch:{toPage:function(){this.getList(),"live"==this.toPage?this.names=[{name:"直播名称",type:"xx"},{name:"直播教师",type:"dd"}]:"teacher"==this.toPage?this.names=[{name:"教师名称",type:"xx"},{name:"电话",type:"dd"}]:(this.toPage="course")&&(this.names=[{name:"课程名称",type:"xx"},{name:"所属教师",type:"dd"}])}}}},637:function(e,t,i){}}]);