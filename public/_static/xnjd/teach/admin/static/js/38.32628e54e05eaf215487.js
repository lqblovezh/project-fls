(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{1211:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUserInfo=function(e){return(0,i.request_get)(r({id:e}))},t.userInfo=r,t.update=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.request_put)(r(e),e)};var a,i=n(51),s=n(85);var r=((a=s)&&a.__esModule?a:{default:a}).default.compile("/common/api/user/users/detail/:user_id");function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.request_put)("/common/api/user/users/detail",e)}},1212:function(e,t,n){"use strict";var a=n(649);n.n(a).a},1253:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"box"},[n("div",{staticClass:"div"},[n("div",{staticClass:"content1"},[n("VaForm",{ref:"detailForm"},[n("div",{staticClass:"left"},[n("div",{staticClass:"touxiang"},[n("img",{attrs:{src:e.userInfo.picture_absolute}})]),n("div",{staticClass:"name"},[n("span",[e._v(e._s(e.userInfo.nick_name))])]),n("div",{staticClass:"change"},[n("el-button",{attrs:{type:"mini",plain:""},on:{click:function(t){e.$refs.picture.click()}}},[e._v("修改")]),n("input",{ref:"picture",staticClass:"hide",attrs:{type:"file"},on:{change:function(t){e.previewImg(t)}}})],1)]),n("div",{staticClass:"right"},[n("el-form",{attrs:{"label-width":"80px"}},[n("el-form-item",{attrs:{label:"名称:"}},[n("el-input",{model:{value:e.userInfo.name,callback:function(t){e.$set(e.userInfo,"name",t)},expression:"userInfo.name"}})],1),n("el-form-item",{attrs:{label:"性别:"}},[n("el-input",{model:{value:e.userInfo.sex,callback:function(t){e.$set(e.userInfo,"sex",t)},expression:"userInfo.sex"}})],1),n("el-form-item",{attrs:{label:"出生日:"}},[n("el-input",{model:{value:e.userInfo.date_of_birth,callback:function(t){e.$set(e.userInfo,"date_of_birth",t)},expression:"userInfo.date_of_birth"}})],1),n("el-form-item",{attrs:{label:"学历:"}},[n("el-input",{model:{value:e.userInfo.education,callback:function(t){e.$set(e.userInfo,"education",t)},expression:"userInfo.education"}})],1),n("el-form-item",{attrs:{label:"电话:"}},[n("el-input",{model:{value:e.userInfo.phone,callback:function(t){e.$set(e.userInfo,"phone",t)},expression:"userInfo.phone"}})],1),n("el-form-item",{attrs:{label:"邮箱:"}},[n("el-input",{model:{value:e.userInfo.email,callback:function(t){e.$set(e.userInfo,"email",t)},expression:"userInfo.email"}})],1),n("el-form-item",{attrs:{label:"院系:"}},[n("el-input",{model:{value:e.userInfo.company,callback:function(t){e.$set(e.userInfo,"company",t)},expression:"userInfo.company"}})],1),n("el-form-item",{attrs:{label:"职务:"}},[n("el-input",{model:{value:e.userInfo.duties,callback:function(t){e.$set(e.userInfo,"duties",t)},expression:"userInfo.duties"}})],1),n("el-form-item",{attrs:{label:"简介:"}},[n("el-input",{model:{value:e.userInfo.education,callback:function(t){e.$set(e.userInfo,"education",t)},expression:"userInfo.education"}})],1),n("el-form-item",{attrs:{label:"提成比例:"}},[n("el-input",{model:{value:e.userInfo.education,callback:function(t){e.$set(e.userInfo,"education",t)},expression:"userInfo.education"}})],1),n("el-form-item",{attrs:{label:"钱包余额:"}},[n("el-input",{model:{value:e.userInfo.education,callback:function(t){e.$set(e.userInfo,"education",t)},expression:"userInfo.education"}}),n("el-button",{attrs:{type:"mini",plain:""}},[e._v("提现")])],1)],1),n("div",{staticClass:"changePass"},[n("el-button",{attrs:{type:"primary",plain:"",width:"60px"},on:{click:function(t){e.changePass()}}},[e._v("修改登录密码")]),n("el-dialog",{attrs:{visible:e.loginDialog,width:"420px","close-on-click-modal":!1,"lock-scroll":!1,"append-to-body":!0},on:{"update:visible":function(t){e.loginDialog=t}}},[n("div",{staticClass:"top",attrs:{slot:"title"},slot:"title"},[n("el-tabs",{attrs:{value:"pass"}},[n("el-tab-pane",{attrs:{label:"修改密码",name:"pass"}})],1)],1),n("form",{ref:"passForm",staticClass:"passContent"},[n("div",{staticClass:"group"},[n("div",{staticClass:"label"},[e._v("旧密码:")]),n("input",{staticClass:"form-control",attrs:{name:"old_pass",type:"password"}})]),n("div",{staticClass:"group"},[n("div",{staticClass:"label"},[e._v("新密码:")]),n("input",{staticClass:"form-control",attrs:{name:"new_pass",type:"password"}})]),n("div",{staticClass:"group"},[n("div",{staticClass:"label"},[e._v("新密码确认:")]),n("input",{staticClass:"form-control",attrs:{name:"new_pass_confirm",type:"password"}})])]),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.loginDialog=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.changePassword}},[e._v("确 定")])],1)])],1)],1),n("div",{staticClass:"teacher"},[n("div",{staticClass:"picture"},[n("img",{attrs:{src:e.userInfo.picture_absolute}})]),n("div",{staticClass:"select"},[n("input",{ref:"picture",staticClass:"hide",attrs:{type:"file",accept:e.$config.imgAccept},on:{change:function(t){e.previewImg(t)}}}),n("el-button",{attrs:{type:"small",plain:""},on:{click:function(t){e.$refs.picture.click()}}},[e._v("上传")])],1)])])],1),n("div",{staticClass:"bottom"},[n("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){e.submit("detailForm")}}},[e._v("确定")])],1)])])},i=[];n.d(t,"a",function(){return a}),n.d(t,"b",function(){return i})},293:function(e,t,n){"use strict";n.r(t);var a=n(1253),i=n(647);for(var s in i)"default"!==s&&function(e){n.d(t,e,function(){return i[e]})}(s);n(1212);var r=n(0),o=Object(r.a)(i.default,a.a,a.b,!1,null,"757f2d73",null);o.options.__file="index.vue",t.default=o.exports},308:function(e,t){var n=/^(?:submit|button|image|reset|file)$/i,a=/^(?:input|select|textarea|keygen)/i,i=/(\[[^\[\]]*\])/g;function s(e,t,n){if(t.match(i)){!function e(t,n,a){if(0===n.length)return t=a;var i=n.shift(),s=i.match(/^\[(.+?)\]$/);if("[]"===i)return t=t||[],Array.isArray(t)?t.push(e(null,n,a)):(t._values=t._values||[],t._values.push(e(null,n,a))),t;if(s){var r=s[1],o=+r;isNaN(o)?(t=t||{})[r]=e(t[r],n,a):(t=t||[])[o]=e(t[o],n,a)}else t[i]=e(t[i],n,a);return t}(e,function(e){var t=[],n=new RegExp(i),a=/^([^\[\]]*)/.exec(e);for(a[1]&&t.push(a[1]);null!==(a=n.exec(e));)t.push(a[1]);return t}(t),n)}else{var a=e[t];a?(Array.isArray(a)||(e[t]=[a]),e[t].push(n)):e[t]=n}return e}function r(e,t,n){return n=n.replace(/(\r)?\n/g,"\r\n"),n=(n=encodeURIComponent(n)).replace(/%20/g,"+"),e+(e?"&":"")+encodeURIComponent(t)+"="+n}e.exports=function(e,t){"object"!=typeof t?t={hash:!!t}:void 0===t.hash&&(t.hash=!0);for(var i=t.hash?{}:"",o=t.serializer||(t.hash?s:r),u=e&&e.elements?e.elements:[],l=Object.create(null),c=0;c<u.length;++c){var f=u[c];if((t.disabled||!f.disabled)&&f.name&&a.test(f.nodeName)&&!n.test(f.type)){var p=f.name,d=f.value;if("checkbox"!==f.type&&"radio"!==f.type||f.checked||(d=void 0),t.empty){if("checkbox"!==f.type||f.checked||(d=""),"radio"===f.type&&(l[f.name]||f.checked?f.checked&&(l[f.name]=!0):l[f.name]=!1),void 0==d&&"radio"==f.type)continue}else if(!d)continue;if("select-multiple"!==f.type)i=o(i,p,d);else{d=[];for(var m=f.options,v=!1,h=0;h<m.length;++h){var g=m[h],b=t.empty&&!g.value,_=g.value||b;g.selected&&_&&(v=!0,i=t.hash&&"[]"!==p.slice(p.length-2)?o(i,p+"[]",g.value):o(i,p,g.value))}!v&&t.empty&&(i=o(i,p,""))}}}if(t.empty)for(var p in l)l[p]||(i=o(i,p,""));return i}},314:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTask=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];return e.size,e.size>=1048576?(t.is_chunk=!0,(0,a.request_post)("/common/api/files/upload_task?r="+Math.random(5)).then(function(i){if(i.status)return t.task_id=i.data.task_id,(0,a.request_file)("/common/api/files/upload",{file:e,data:t},n);throw new Error(i.messages)}).catch(function(e){throw new Error("上传失败")})):(t.is_chunk=!1,(0,a.request_file)("/common/api/files/upload",{file:e,data:t}))},t.getAppId=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)("/common/api/app/search_name",e).then(function(e){return i.default.app_id=e.data.id,sessionStorage.app_id=e.data.id,e})},t.getClientToken=function(){return(0,a.request_post)("/common/api/auth/token/pcclient")},t.platInfo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)(o(e)).then(function(e){return i.default.app_id=e.data.id,sessionStorage.app_id=e.data.id,document.title=e.data.name,e})},t.commonPreview=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)(l(e))},t.commonPreviewCode=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)("/api/preview",e)},t.getQrcode=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)("/common/api/get_qrcode",e)},t.synchronization=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)(u(e)).then(function(e){return e})},t.getAuthor=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)("/api/ecommerce/author",e)},t.addAuthor=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)("/api/ecommerce/author",e)},t.getWeixinConfig=function(e){return(0,a.request_get)("/common/api/third/wx_js_sdk/config",e)};r(n(52));var a=n(51),i=r(n(53)),s=r(n(85));function r(e){return e&&e.__esModule?e:{default:e}}s.default.compile("/common/api/files/upload_task/:id"),s.default.compile("/common/api/manager/managers/:id"),s.default.compile("/common/api/manager/roles/:id");var o=s.default.compile("/common/api/app/apps/:id"),u=s.default.compile("/common/api/dragon_infos/:id");var l=s.default.compile("/api/preview/:id")},647:function(e,t,n){"use strict";n.r(t);var a=n(648),i=n.n(a);for(var s in a)"default"!==s&&function(e){n.d(t,e,function(){return a[e]})}(s);t.default=i.a},648:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=u(n(15)),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},s=u(n(308)),r=n(54),o=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(n(1211)),u(n(52)),n(87));n(314);function u(e){return e&&e.__esModule?e:{default:e}}t.default={data:function(){return{loginDialog:!1,user:{},previewImgUrl:null,imgFile:null}},created:function(){this.init()},methods:i({},(0,r.mapMutations)(["updateUser"]),{init:function(){this.userInfo()},userInfo:function(){this.userInfo=i({},this.$config.userInfo.user)},updateInfo:function(){},changePass:function(){this.loginDialog=!0},previewImg:function(e){var t=e.target.files[0],n=URL.createObjectURL(t);this.$set(this.userInfo,"picture_absolute",n)},submit:function(){var e,t=(e=a.default.mark(function e(t){var n,i,s,r,o=this;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.$refs.picture.files[0],this.$refs.detailForm.valiAll()){e.next=4;break}return e.abrupt("return");case 4:if(i=this.$loading({text:"正在上传",background:"rgba(0, 0, 0, 0.8)"}),e.prev=5,!n){e.next=9;break}return e.next=9,commonServices.getTask(n).then(function(e){o.userInfo.picture=e.data.path});case 9:return e.next=11,this.services.userInfo(this.userInfo).then(function(e){o.updateUser(e.data),e.status&&(o.$message.success("修改成功"),i.close()),sessionStorage.userInfo=JSON.stringify(e.data),o.$emit("detailBack")});case 11:e.next=25;break;case 13:if(e.prev=13,e.t0=e.catch(5),s=e.t0.payload){e.next=18;break}return e.abrupt("return");case 18:e.t1=a.default.keys(s.messages);case 19:if((e.t2=e.t1()).done){e.next=25;break}return r=e.t2.value,this.$message.error(s.messages[r]),e.abrupt("break",25);case 25:case"end":return e.stop()}},e,this,[[5,13]])}),function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function a(i,s){try{var r=t[i](s),o=r.value}catch(e){return void n(e)}if(!r.done)return Promise.resolve(o).then(function(e){a("next",e)},function(e){a("throw",e)});e(o)}("next")})});return function(e){return t.apply(this,arguments)}}(),changePassword:function(){var e=this,t=(0,s.default)(this.$refs.passForm,{hash:!0});(0,o.changePass)(t).then(function(t){e.$message.success("修改密码成功！"),e.loginDialog=!1,window.location.href="../"})}})}},649:function(e,t,n){}}]);