(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{1190:function(e,t,s){"use strict";var i=s(595);s.n(i).a},1270:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"exe"},[s("div",{staticClass:"tab-nav"},[s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.$router.back()}}},[e._v("返回")])],1),s("div",{staticClass:"left"},[s("div",{staticClass:"tab"},[s("el-button",{attrs:{size:"mini"},on:{click:function(t){e.tabChange()}}},[e._v("全部")]),s("el-button",{class:{active:"subjective_item"==e.currentType},attrs:{size:"mini"},on:{click:function(t){e.tabChange({type:"subjective_item"})}}},[e._v("主观题")]),s("el-button",{class:{active:"yes"==e.currentStatus},attrs:{size:"mini"},on:{click:function(t){e.tabChange({status:"yes"})}}},[e._v("已评分")]),s("el-button",{class:{active:"no"==e.currentStatus},attrs:{size:"mini"},on:{click:function(t){e.tabChange({status:"no"})}}},[e._v("未评分")])],1),s("div",{staticClass:"content"},[s("ul",{staticClass:"exerciseInfo"},e._l(e.newArr,function(t,i){return s("li",[s("div",{staticClass:"top"},[s("span",{staticClass:"title"},[e._v("第"+e._s(e._f("numberToChinese")(i+1))+"题")]),s("span",{staticClass:"score"},[e._v(e._s(t.score)+"分")]),s("span",{staticClass:"name"},[e._v(e._s(t.type_name))]),"subjective_item"!=t.type?s("span",{staticClass:"answer"},[e._v("正确答案："+e._s(e.getAnswer(t)))]):s("span",{staticClass:"answer"},[e._v("评分："),s("el-select",{attrs:{placeholder:"分数",size:"small"},model:{value:t.account,callback:function(s){e.$set(t,"account",s)},expression:"item.account"}},e._l(e.getScore(t.score),function(e){return s("el-option",{key:e,attrs:{label:e,value:e}})}))],1)]),s("div",{staticClass:"exercise"},[s("div",{staticClass:"title"},[e._v("题目："+e._s(t.question))]),"single"==t.type||"multi"==t.type?s("ul",{staticClass:"options"},e._l(t.option,function(i,n){return s("li",[s("span",[e._v(e._s(e.numberToLetter(n)))]),s("el-checkbox",{attrs:{checked:e.getUserAnswer(n,t),disabled:""}}),s("span",[e._v(e._s(i.title))])],1)})):e._e()]),"subjective_item"==t.type?s("div",{staticClass:"answer"},[s("div",{staticClass:"title"},[e._v("用户答案： "+e._s(t.user_answer))]),s("el-input",{attrs:{type:"textarea",placeholder:"教师回复："},model:{value:t.reply,callback:function(s){e.$set(t,"reply",s)},expression:"item.reply"}})],1):e._e()])})),s("div",{staticClass:"pageWrap"},[s("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.total,"page-size":e.pageSize},on:{"current-change":e.handleCurrentChange}})],1)])]),s("div",{staticClass:"right"},[s("div",{staticClass:"group"},[e._v(" 总分："+e._s(e.totalScore))]),s("div",{staticClass:"group"},[e._v(" 得分："+e._s("未知"))]),s("div",{staticClass:"group margin"},[s("div",{staticClass:"label"},[e._v("评价留言：")]),s("el-input",{attrs:{type:"textarea"},model:{value:e.details.text,callback:function(t){e.$set(e.details,"text",t)},expression:"details.text"}})],1),s("div",{staticClass:"group"},[s("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("发布")])],1),s("div",{staticClass:"group"},[s("el-checkbox",{model:{value:e.details.label,callback:function(t){e.$set(e.details,"label",t)},expression:"details.label"}},[e._v("要求重做")])],1)])])},n=[];s.d(t,"a",function(){return i}),s.d(t,"b",function(){return n})},276:function(e,t,s){"use strict";s.r(t);var i=s(1270),n=s(593);for(var a in n)"default"!==a&&function(e){s.d(t,e,function(){return n[e]})}(a);s(1190);var r=s(0),u=Object(r.a)(n.default,i.a,i.b,!1,null,"f894a04c",null);u.options.__file="exercise.vue",t.default=u.exports},308:function(e,t){var s=/^(?:submit|button|image|reset|file)$/i,i=/^(?:input|select|textarea|keygen)/i,n=/(\[[^\[\]]*\])/g;function a(e,t,s){if(t.match(n)){!function e(t,s,i){if(0===s.length)return t=i;var n=s.shift(),a=n.match(/^\[(.+?)\]$/);if("[]"===n)return t=t||[],Array.isArray(t)?t.push(e(null,s,i)):(t._values=t._values||[],t._values.push(e(null,s,i))),t;if(a){var r=a[1],u=+r;isNaN(u)?(t=t||{})[r]=e(t[r],s,i):(t=t||[])[u]=e(t[u],s,i)}else t[n]=e(t[n],s,i);return t}(e,function(e){var t=[],s=new RegExp(n),i=/^([^\[\]]*)/.exec(e);for(i[1]&&t.push(i[1]);null!==(i=s.exec(e));)t.push(i[1]);return t}(t),s)}else{var i=e[t];i?(Array.isArray(i)||(e[t]=[i]),e[t].push(s)):e[t]=s}return e}function r(e,t,s){return s=s.replace(/(\r)?\n/g,"\r\n"),s=(s=encodeURIComponent(s)).replace(/%20/g,"+"),e+(e?"&":"")+encodeURIComponent(t)+"="+s}e.exports=function(e,t){"object"!=typeof t?t={hash:!!t}:void 0===t.hash&&(t.hash=!0);for(var n=t.hash?{}:"",u=t.serializer||(t.hash?a:r),c=e&&e.elements?e.elements:[],l=Object.create(null),o=0;o<c.length;++o){var p=c[o];if((t.disabled||!p.disabled)&&p.name&&i.test(p.nodeName)&&!s.test(p.type)){var d=p.name,h=p.value;if("checkbox"!==p.type&&"radio"!==p.type||p.checked||(h=void 0),t.empty){if("checkbox"!==p.type||p.checked||(h=""),"radio"===p.type&&(l[p.name]||p.checked?p.checked&&(l[p.name]=!0):l[p.name]=!1),void 0==h&&"radio"==p.type)continue}else if(!h)continue;if("select-multiple"!==p.type)n=u(n,d,h);else{h=[];for(var f=p.options,v=!1,g=0;g<f.length;++g){var y=f[g],_=t.empty&&!y.value,m=y.value||_;y.selected&&m&&(v=!0,n=t.hash&&"[]"!==d.slice(d.length-2)?u(n,d+"[]",y.value):u(n,d,y.value))}!v&&t.empty&&(n=u(n,d,""))}}}if(t.empty)for(var d in l)l[d]||(n=u(n,d,""));return n}},309:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.main=void 0;var i,n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e},a=s(308);(i=a)&&i.__esModule;var r={data:function(){return{tableData:[],total:0,page:{pageOffset:10,pageNum:1},ids:[],isTeacher:"",dialogVisible:!1,detailVisible:!1,detailData:[],productType:null}},created:function(){this.isTeacher=this.$config.isTeacher,this.getList(n({},this.query,this.page))},methods:{seareHandeler:function(){this.page.pageNum=1,this.getList(n({},this.query))},getList:function(e){var t=this;this.service&&this.service.getList(e).then(function(e){e&&e.status&&(t.tableData=e.data,t.total=e.page.total)})},handleSelectionChange:function(e){this.ids=e.map(function(e){return e.id}),this.multipleSelection=e},update:function(e,t){this.$refs[t].src=URL.createObjectURL(e.target.files[0])},getTime:function(e){e||(e=["",""]),this.query.time_start=e[0],this.query.time_end=e[1],this.query.start_time=e[0],this.query.end_time=e[1]},handleSizeChange:function(e){this.page.pageOffset=e,this.getList(n({},this.page,this.query))},handleCurrentChange:function(e){this.page.pageNum=e,this.getList(n({},this.page,this.query))},handleClose:function(){this.detailVisible=!1,this.dialogVisible=!1},del:function(e){var t=this;this.$confirm("你真的要删除该数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.service.del({id:e}).then(function(e){e&&e.status&&(t.getList(n({},t.page,t.query)),t.$message.success("删除成功"))},function(e){var s=e.payload;t.$message.error(s.message)})}).catch(function(){})},save:function(e){var t=this;e||(e=this.form),this.service.save(e).then(function(e){e.status&&(t.$message.success("保存成功"),t.getList(t.query)),t.dialogVisible=!1,t.$refs.child.dialogVisible=!1},function(e){t.$message.error(e.payload.message)})},educe:function(e){this.service.educe({id:e}).then(function(e){window.location.href=e.data.url})},detail:function(e){var t=this;this.service.detail({id:e}).then(function(e){t.detailData=e.data,log(e,"detail")}),this.$refs.child.dialogVisible=!0},showDetail:function(e,t){var s=this;log("------------"),this.service.detail({id:e}).then(function(e){log(e,"detailInfo"),s.detailData=e.data,s.productType=t,s.detailVisible=!0})}}};t.main=r},591:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)("/api/course_paper",e)},t.detail=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)(r(e))},t.del=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/api/courses/delete",e)},t.save=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/api/courses/teach_paper_answer",e)};var i,n=s(51),a=s(85);var r=((i=a)&&i.__esModule?i:{default:i}).default.compile("/api/courses/user_paper/:id")},593:function(e,t,s){"use strict";s.r(t);var i=s(594),n=s.n(i);for(var a in i)"default"!==a&&function(e){s.d(t,e,function(){return i[e]})}(a);t.default=n.a},594:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e},a=s(308),r=((i=a)&&i.__esModule,s(309)),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t.default=e,t}(s(591));t.default={mixins:[r.main],props:[],data:function(){return{exerciseList:[{question:"中国人口多少人?",score:"2",type:"single",type_name:"单选题",answer:"C",id:"1",user_answer:"D",account:"2",option:[{title:"12亿",isAnswer:!1},{title:"13亿",isAnswer:!1},{title:"14亿",isAnswer:!0},{title:"15亿",isAnswer:!1}]},{question:"中国四大直辖市哪几个在沿海?",score:"2",type:"multi",type_name:"多选题",answer:"B,C,D",id:"2",user_answer:"B,C",account:"2",option:[{title:"重庆",isAnswer:!1},{title:"天津",isAnswer:!0},{title:"北京",isAnswer:!0},{title:"上海",isAnswer:!0}]},{question:"你觉得中国最美的城市是哪个你觉得中国最美的城市是哪个你觉得中国最美的城市是哪个你觉得中国最美的城市是哪个你觉得中国最美的城市是哪个你觉得中国最美的城市是哪个你觉得中国最美的城市是哪个你觉得中国最美的城市是哪个?",score:"5",type:"subjective_item",type_name:"主观题",user_answer:"我觉得是上海市，交通比较好，环境比较不错",account:null,answer:"上海市",reply:"",id:"3"},{question:"中国人口全世界最多?",score:"1",type:"judgment",type_name:"判断题",user_answer:"D",answer:"false",account:"1",id:"4"},{question:"中国的首都是__？",score:"2",type:"fill",type_name:"填空题",user_answer:"D",answer:"北京市",account:"2",id:"5"}],total:50,pageSize:5,newArr:[],currentStatus:null,currentType:null,details:{}}},created:function(){var e=this;this.$route.query.id?u.detail({id:this.$route.query.id}).then(function(t){e.exerciseList=t.data||[],e.newArr=e.getArray(),e.total=e.exerciseList.length}):this.$router.back()},methods:{numberToLetter:function(e){return["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"][e]},getAnswer:function(e){return"judgment"==e.type?e.answer&&"false"!==e.answer?"正确":"错误":"multi"==e.type?e.answer.replace(/,/g,""):e.answer},getArray:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.p,s=void 0===t?1:t,i=e.type,n=e.status,a=[].concat(function(e){if(Array.isArray(e)){for(var t=0,s=Array(e.length);t<e.length;t++)s[t]=e[t];return s}return Array.from(e)}(this.exerciseList));return log(i,n),i&&(a=a.filter(function(e){return e.type==i})),n&&(a=a.filter(function(e){return"yes"==n?e.account:!e.account})),this.total=a.length,a.splice((s-1)*this.pageSize,this.pageSize)},getScore:function(e){for(var t=[],s=0;s<=e;s++)t.push(s);return t},getUserAnswer:function(e,t){var s=this.numberToLetter(e);return!!t.user_answer&&t.user_answer.includes(s)},handleCurrentChange:function(e){this.newArr=this.getArray({p:e,type:this.currentType,status:this.currentStatus})},tabChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,s=e.status;this.currentType=t||null,this.currentStatus=s||null,this.newArr=this.getArray({type:t,status:s})},save:function(){u.save(n({exerciseList:this.exerciseList,id:this.$route.query.id},this.details)).then(function(e){})}},computed:{totalScore:function(){var e=0;return this.exerciseList.forEach(function(t){e+=parseInt(t.score)}),e}},filters:{numberToChinese:function(e){if(!/^\d*$/.test(e))return"Null";"number"==typeof e&&(e=e.toString());var t=new RegExp("([0]*)([1-9]+[0-9]+)","g"),s="千百十亿千百十万千百十个";if((e=e.replace(t,"$2")).length>s.length)return"Null";var i="",n=e.length;s=s.substr(s.length-n);for(var a=0;a<n;a++)i+="零一二三四五六七八九".charAt(e[a])+s.charAt(a);for(var r=(i=(i=i.substr(0,i.length-1)).replace(/零(千|百|十)/g,"零").replace(/(零)+/g,"零").replace(/零(亿|万)/g,"$1")).length-1;r>0&&"零"==i[r];r--)i=i.replace(i[r],"");return i}}}},595:function(e,t,s){}}]);