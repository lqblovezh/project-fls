(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{581:function(t,e,n){"use strict";n.r(e);var i=n(666),a=n(609);for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);n(650);var r=n(24),u=Object(r.a)(a.default,i.a,i.b,!1,null,"6c441d6a",null);u.options.__file="index.vue",e.default=u.exports},589:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.appInfo=void 0;var i,a,o=l(n(108));e.appInfo=(i=o.default.mark(function t(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:console.warn("待移除");case 1:case"end":return t.stop()}},t,this)}),a=function(){var t=i.apply(this,arguments);return new Promise(function(e,n){return function i(a,o){try{var r=t[a](o),u=r.value}catch(t){return void n(t)}if(!r.done)return Promise.resolve(u).then(function(t){i("next",t)},function(t){i("throw",t)});e(u)}("next")})},function(){return a.apply(this,arguments)});e.getUserInfo=function(){return r.default.parse(window.sessionStorage.getItem("userInfo"))},e.getDefaultCover=function(){return(0,u.request_get)("/api/videos/images")},e.commonPreview=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,u.request_get)(p(t))},e.commonPreviewCode=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,u.request_post)("/api/preview",t)},e.platInfo=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,u.request_get)(f(t)).then(function(t){return s.default.app_id=t.data.id,sessionStorage.app_id=t.data.id,document.title=t.data.application?t.data.application.name:t.data.publisher.name,t})},e.fileExport=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,u.request_get)(d(t))},e.groupsDelete=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,u.request_post)("/api/groups/delete",t)};var r=l(n(111)),u=n(109),s=l(n(168)),c=(n(233),l(n(110)));function l(t){return t&&t.__esModule?t:{default:t}}var f=c.default.compile("/api/current");var p=c.default.compile("/api/preview/:id");var d=c.default.compile("/api/content/export/:id")},609:function(t,e,n){"use strict";n.r(e);var i=n(610),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,function(){return i[t]})}(o);e.default=a.a},610:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s(n(108)),a=(s(n(588)),u(n(589)),u(n(645))),o=(n(646),n(648)),r=n(649);function u(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function s(t){return t&&t.__esModule?t:{default:t}}function c(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){return function i(a,o){try{var r=e[a](o),u=r.value}catch(t){return void n(t)}if(!r.done)return Promise.resolve(u).then(function(t){i("next",t)},function(t){i("throw",t)});t(u)}("next")})}}e.default={data:function(){return{info:{},previewImgUrl:null,formData:{}}},created:function(){this.getInfo(),this.getloginInfo()},methods:{getInfo:function(){var t=this;a.getInfo().then(function(e){t.info=e.data.publisher})},getUrl:function(t,e,n){log(n),n[t+"_absolute"]=URL.createObjectURL(e.target.files[0])},getloginInfo:function(){var t=c(i.default.mark(function t(){var e=this;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,o.getInfo)().then(function(t){e.loginInfo=t.data,t.data});case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),submit:function(){var t=c(i.default.mark(function t(e,n,o,u){var s=this;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=5;break}return t.next=3,(0,r.getTask)(n).then(function(t){s.formData.logo=t.data.path});case 3:t.next=6;break;case 5:this.formData.logo=e.logo;case 6:if(!o){t.next=11;break}return t.next=9,(0,r.getTask)(o).then(function(t){s.formData.icon=t.data.path});case 9:t.next=12;break;case 11:this.formData.icon=e.icon;case 12:this.formData.name=e.name,this.formData.exp=e.exp,u&&(this.formData.id=u),a.setting(this.formData).then(function(t){t&&t.status&&s.$message.success("保存成功")},function(t){s.$message.error("保存失败")});case 16:case"end":return t.stop()}},t,this)}));return function(e,n,i,a){return t.apply(this,arguments)}}()}}},611:function(t,e,n){},645:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getInfo=function(){return(0,u.platInfo)({id:"current"})},e.setting=function(t){if(t.id)return(0,a.request_put)(s(t),t);return(0,a.request_put)("/common/api/publisher/setting",t)};var i,a=n(109),o=n(110),r=(i=o)&&i.__esModule?i:{default:i},u=n(589);var s=r.default.compile("/common/api/publisher/setting/app/:id")},648:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.save=void 0;var i,a,o=u(n(108));e.save=(i=o.default.mark(function t(e){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.id){t.next=4;break}return t.abrupt("return",(0,r.request_put)(s({id:e.id}),e));case 4:if(!e.key){t.next=8;break}return t.next=7,(0,r.request_post)("/system/api/setting/add",e);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}},t,this)}),a=function(){var t=i.apply(this,arguments);return new Promise(function(e,n){return function i(a,o){try{var r=t[a](o),u=r.value}catch(t){return void n(t)}if(!r.done)return Promise.resolve(u).then(function(t){i("next",t)},function(t){i("throw",t)});e(u)}("next")})},function(t){return a.apply(this,arguments)});e.getInfo=function(){return(0,r.request_get)("/system/api/setting/get_set_list",{pageStart:0,pageOffset:100}).then(function(t){var e={loginInfo:{},contact:{},outlink:[],ewm:[]};return t.data.forEach(function(t){"info"==t.name?e.loginInfo[t.key]=t:"contact"==t.name?e.contact[t.key]=t:"outlink"==t.name?e.outlink.push(t):"ewm"==t.name&&e.ewm.push(t)}),!Object.values(e.loginInfo).length<3&&(e.loginInfo.title=e.loginInfo.title||{name:"info",key:"title",value:"",type:1},e.loginInfo.ico=e.loginInfo.ico||{name:"info",key:"ico",value:"",type:2},e.loginInfo.logo=e.loginInfo.logo||{name:"info",key:"logo",value:"",type:2},e.loginInfo.banner=e.loginInfo.banner||{name:"info",key:"banner",value:"",type:2}),!Object.values(e.contact).length<3&&(e.contact.phone=e.contact.phone||{name:"contact",key:"phone",value:"",type:1},e.contact.qq=e.contact.qq||{name:"contact",key:"qq",value:"",type:1},e.contact.email=e.contact.email||{name:"contact",key:"email",value:"",type:1}),e})},e.del=function(t){return(0,r.request_delete)(s(t),t)},e.getTask=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];return t.size,t.size>=1048576?(e.is_chunk=!0,(0,r.request_post)("/api/upload/tasks?r="+Math.random(5)).then(function(i){if(i.status)return e.task_id=i.data.task_id,(0,r.request_file)("/api/upload/files",{file:t,data:e},n);throw new Error(i.messages)}).catch(function(t){throw new Error("上传失败")})):(e.is_chunk=!1,(0,r.request_file)("/api/upload/files",{file:t,data:e}))};var r=n(109);function u(t){return t&&t.__esModule?t:{default:t}}var s=u(n(110)).default.compile("/system/api/setting/:id")},649:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getTask=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];return t.size,t.size>=1048576?(e.is_chunk=!0,(0,i.request_post)("/common/api/files/upload_task?r="+Math.random(5)).then(function(a){if(a.status)return e.task_id=a.data.task_id,(0,i.request_file)("/common/api/files/upload",{file:t,data:e},n);throw new Error(a.messages)}).catch(function(t){throw new Error("上传失败")})):(e.is_chunk=!1,(0,i.request_file)("/common/api/files/upload",{file:t,data:e}))},e.getAppId=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.request_get)("/common/api/app/search_name",t).then(function(t){return a.default.app_id=t.data.id,sessionStorage.app_id=t.data.id,t})},e.getClientToken=function(){return(0,i.request_post)("/common/api/auth/token/pcclient")},e.platInfo=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.request_get)(u(t)).then(function(t){return a.default.app_id=t.data.id,sessionStorage.app_id=t.data.id,document.title=t.data.name,t})},e.commonPreview=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.request_get)(c(t))},e.commonPreviewCode=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.request_post)("/api/preview",t)},e.getQrcode=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.request_get)("/common/api/get_qrcode",t)},e.synchronization=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.request_get)(s(t)).then(function(t){return t})},e.getAuthor=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.request_get)("/api/ecommerce/author",t)},e.addAuthor=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.request_post)("/api/ecommerce/author",t)},e.getWeixinConfig=function(t){return(0,i.request_get)("/common/api/third/wx_js_sdk/config",t)};r(n(111));var i=n(109),a=r(n(168)),o=r(n(110));function r(t){return t&&t.__esModule?t:{default:t}}o.default.compile("/common/api/files/upload_task/:id"),o.default.compile("/common/api/manager/managers/:id"),o.default.compile("/common/api/manager/roles/:id");var u=o.default.compile("/common/api/app/apps/:id"),s=o.default.compile("/common/api/dragon_infos/:id");var c=o.default.compile("/api/preview/:id")},650:function(t,e,n){"use strict";var i=n(611);n.n(i).a},666:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content-wrap"},[n("div",{staticClass:"content"},[n("div",{staticClass:"titleWrap"},[n("div",{staticClass:"tableTop"},[n("div",{staticClass:"title vel-line"},[n("span",{staticClass:"titleText"},[t._v("首页配置")]),n("div",{staticClass:"tableWrap"},[n("table",{staticClass:"table"},[t._m(0),n("tbody",[n("tr",[n("td",[t._v("出版社")]),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.info.name,expression:"info.name"}],attrs:{type:"text"},domProps:{value:t.info.name},on:{input:function(e){e.target.composing||t.$set(t.info,"name",e.target.value)}}})]),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.info.exp,expression:"info.exp"}],attrs:{type:"text"},domProps:{value:t.info.exp},on:{input:function(e){e.target.composing||t.$set(t.info,"exp",e.target.value)}}})]),n("td",[n("img",{staticClass:"scanImg",attrs:{src:t.info.logo_absolute}}),n("input",{ref:"logox",staticClass:"hide",attrs:{type:"file",accept:"image/jpeg,image/jpg,image/png"},on:{change:function(e){t.getUrl("logo",e,t.info)}}}),n("el-button",{attrs:{plain:"",type:"primary",size:"mini"},on:{click:function(e){t.$refs.logox.click()}}},[t._v("浏览")])],1),n("td",[n("img",{staticClass:"scanImg",attrs:{src:t.info.icon_absolute}}),n("input",{ref:"iconx",staticClass:"hide",attrs:{type:"file",accept:"image/jpeg,image/jpg,image/png"},on:{change:function(e){t.getUrl("icon",e,t.info)}}}),n("el-button",{attrs:{plain:"",type:"primary",size:"mini"},on:{click:function(e){t.$refs.iconx.click()}}},[t._v("浏览")])],1),n("td",[n("el-button",{attrs:{plain:"",type:"primary",size:"small"},on:{click:function(e){t.submit(t.info,t.$refs.logox.files[0],t.$refs.iconx.files[0])}}},[t._v("确认")])],1)]),t._l(t.info.apps,function(e,i){return n("tr",{key:e.id},[n("td",[t._v(t._s(e.type))]),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"item.name"}],attrs:{type:"text"},domProps:{value:e.name},on:{input:function(n){n.target.composing||t.$set(e,"name",n.target.value)}}})]),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.exp,expression:"item.exp"}],attrs:{type:"text"},domProps:{value:e.exp},on:{input:function(n){n.target.composing||t.$set(e,"exp",n.target.value)}}})]),n("td",[n("img",{staticClass:"scanImg",attrs:{src:e.logo_absolute}}),n("input",{ref:"logo"+i,refInFor:!0,staticClass:"hide",attrs:{type:"file",accept:"image/jpeg,image/jpg,image/png"},on:{change:function(n){t.getUrl("logo",n,e)}}}),n("el-button",{attrs:{plain:"",type:"primary",size:"mini"},on:{click:function(e){t.$refs["logo"+i][0].click()}}},[t._v("浏览")])],1),n("td",[n("img",{staticClass:"scanImg",attrs:{src:e.icon_absolute}}),n("input",{ref:"ico"+i,refInFor:!0,staticClass:"hide",attrs:{type:"file",accept:"image/jpeg,image/jpg,image/png"},on:{change:function(n){t.getUrl("icon",n,e)}}}),n("el-button",{attrs:{plain:"",type:"primary",size:"mini"},on:{click:function(e){t.$refs["ico"+i][0].click()}}},[t._v("浏览")])],1),n("td",[n("el-button",{attrs:{plain:"",type:"primary",size:"small"},on:{click:function(n){t.submit(e,t.$refs["logo"+i][0].files[0],t.$refs["ico"+i][0].files[0],e.id)}}},[t._v("确认")])],1)])})],2)])])])])])])])},a=[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",{attrs:{width:""}},[this._v("应用类型 ")]),e("th",[this._v("系统名称")]),e("th",[this._v("欢迎词")]),e("th",[this._v("LOGO")]),e("th",[this._v("网站 ico")]),e("th",[this._v("操作")])])])}];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return a})}}]);