(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{1160:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"indexs clearfix"},[s("Top",{attrs:{currentPlant:"X-PUBLISH"}}),s("Menu",{attrs:{curr:"/contentLibrary/transfer"}}),s("div",{staticClass:"mainRight"},[s("div",{staticClass:"contentWrap"},[s("div",{staticClass:"maindata"},[s("div",{staticClass:"groupList"},[s("div",{staticClass:"btns"},[s("div",{staticClass:"el-button",class:{"btn-active":"import"==t.name},attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){t.getTasks("import")}}},[t._v("导入列表")]),s("div",{staticClass:"el-button",class:{"btn-active":"export"==t.name},attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){t.getTasks("export")}}},[t._v("导出列表")])])]),s("div",{staticClass:"tableWrap"},[s("div",{staticClass:"tableTop"},[s("div",{staticClass:"title vel-line"},[s("span",[t._v("状态")]),s("span",{staticClass:"group-inline"},[s("el-select",{attrs:{name:"type"},on:{change:t.selectChange},model:{value:t.options.value,callback:function(e){t.$set(t.options,"value",e)},expression:"options.value"}},t._l(t.options.list,function(t){return s("el-option",{key:t.label,attrs:{value:t.value}})}))],1)])]),s("table",{staticClass:"table aProgress"},[t._m(0),t.list?s("tbody",t._l(t.list,function(e){return s("tr",{attrs:{"data-id":e._id}},[s("th",[t._v(t._s(e.info.res_total))]),s("th",[s("div",{staticClass:"th-name"},[t._v(t._s(e.create_time))])]),"success"==e.status?s("th",[s("el-progress",{staticClass:"tProgress",attrs:{percentage:parseInt(100),status:"success"}})],1):"failed"==e.status?s("th",[s("el-progress",{staticClass:"tProgress",attrs:{percentage:parseInt(0),status:"exception"}})],1):"sleep"==e.status&&void 0!==e.info.speed?s("th",[s("el-progress",{staticClass:"tProgress",attrs:{percentage:e.info.speed<=100?parseInt(e.info.speed):parseInt(0)}})],1):s("th",[s("el-progress",{staticClass:"tProgress",attrs:{percentage:parseInt(0)}})],1),"failed"==e.status&&"import"==t.name?s("th",[t._v(t._s(t.type[e.status])+"("+t._s(e.info.speed)+")")]):"import"==t.name?s("th",[t._v(t._s(t.type[e.status])+"("+t._s(e.info.data)+")")]):s("th",[t._v(t._s(t.type[e.status]))]),"export"==e.type?s("th",[t._v("导出")]):s("th",[t._v("导入")]),s("th",[t._v(t._s(t._f("formatSize")(e.info.zip_size)))]),s("th",[s("div",{staticClass:"btns"},["success"==e.status&&"export"==e.type?s("a",{staticClass:"download-btn",attrs:{href:e.info.url_zip,download:"files"}},[s("span",[t._v("下载")])]):t._e(),s("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(s){t.delTask(e.id)}}},[t._v("删除")])],1)])])})):t._e()])]),t.page?s("div",{staticClass:"pageWrap"},[s("el-pagination",{attrs:{small:!1,background:"","current-page":t.page.num,"page-sizes":[10,50,100],"page-size":t.page.offset,layout:"total,sizes ,prev, pager, next, jumper",total:t.page.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1):t._e()])])])],1)},i=[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("名称")]),e("th",{staticClass:"time"},[this._v("任务创建时间")]),e("th",[this._v("进度")]),e("th",[this._v("状态")]),e("th",[this._v("类型")]),e("th",[this._v("文件大小")]),e("th",{staticClass:"operate"},[this._v("操作")])])])}];s.d(e,"a",function(){return a}),s.d(e,"b",function(){return i})},331:function(t,e,s){"use strict";s.r(e);var a=s(1160),i=s(693);for(var n in i)"default"!==n&&function(t){s.d(e,t,function(){return i[t]})}(n);s(926);var r=s(0),l=Object(r.a)(i.default,a.a,a.b,!1,null,"b9a4bb1a",null);l.options.__file="index.vue",e.default=l.exports},693:function(t,e,s){"use strict";s.r(e);var a=s(694),i=s.n(a);for(var n in a)"default"!==n&&function(t){s.d(e,t,function(){return a[t]})}(n);e.default=i.a},694:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a])}return t},i=o(s(155)),n=o(s(154)),r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e.default=t,e}(s(925)),l=s(122);function o(t){return t&&t.__esModule?t:{default:t}}e.default={mixins:[l.main],components:{Menu:i.default,Top:n.default},data:function(){return{services:r,list:null,options:{value:"全部",list:[{label:0,value:"全部"},{label:1,value:"未开始"},{label:2,value:"进行中"},{label:3,value:"已完成"},{label:4,value:"失败"}]},type:{success:"成功",failed:"失败",sleep:"进行中",default:"未开始"},page:null,delay:1e4,timer:null,name:"export",status:-1}},methods:{getList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.page&&this.page.num||1,e=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.page&&this.page.offset||10,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];log("getList"),i=this.status<0?{name:this.name}:{name:this.name,status:this.status},this.timer&&clearTimeout(this.timer),r.getList(a({pageNum:t,pageOffset:s},i)).then(function(t){e.list=t.data,e.page=t.page,e.getTaskProgress()})},selectChange:function(t){var e=!0,s=!1,a=void 0;try{for(var i,n=this.options.list[Symbol.iterator]();!(e=(i=n.next()).done);e=!0){var r=i.value;r.value==t&&(this.page=null,this.status=r.label-1,this.getList())}}catch(t){s=!0,a=t}finally{try{!e&&n.return&&n.return()}finally{if(s)throw a}}},getTasks:function(t){this.name!==t&&(this.page=null,this.name=t,this.getList())},getTaskProgress:function(){this.timer=setTimeout(this.getList,this.delay),log("timer start: "+this.timer)},delTask:function(t){var e=this;r.delTask({id:t}).then(function(t){return e.getList()})}},destroyed:function(){this.timer&&(clearTimeout(this.timer),log("clear timer: "+this.timer))},filters:{formatSize:function(t){return void 0===t?"0MB":(t/1024/1024).toFixed(2)+"MB"}}}},695:function(t,e,s){},925:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getList=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.request_get)("/api/content/export/list",t)},e.delTask=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.request_get)(r(t),t)};var a,i=s(4),n=s(8);var r=((a=n)&&a.__esModule?a:{default:a}).default.compile("/api/tasks/:id")},926:function(t,e,s){"use strict";var a=s(695);s.n(a).a}}]);