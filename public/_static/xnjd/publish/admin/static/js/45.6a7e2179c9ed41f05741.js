(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{1154:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"indexs"},[i("Top",{attrs:{currentPlant:"X-PUBLISH"}}),i("Menu",{attrs:{curr:"/dataRelation"}}),i("div",{staticClass:"mainRight"},[i("div",{staticClass:"maindata"},[i("div",{staticClass:"serachWrap"},[i("div",{staticClass:"NavList"},[i("el-tabs",{on:{"tab-click":t.handleNavClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"繁简字管理",name:"fan"}}),i("el-tab-pane",{attrs:{label:"异体字管理",name:"yi"}}),i("el-tab-pane",{attrs:{label:"别称管理",name:"bie"}})],1)],1),i("form",{attrs:{id:"mainForm"}},[i("span",{staticClass:"group-inline"},[i("el-input",{attrs:{placeholder:"输入简体搜索",name:"simp",clearable:""}})],1),i("span",{staticClass:"group-inline"},[i("TimePick",{attrs:{inputsName:["start_time","end_time"]}})],1),i("span",{staticClass:"group-inline right",attrs:{span:10}},[i("el-button",{attrs:{type:"primary",icon:"el-icon-search",plain:""},on:{click:t.seareHandeler}},[t._v("搜索")]),i("el-button",{attrs:{type:"primary",icon:"el-icon-plus",plain:""},on:{click:function(e){t.showDetaile()}}},[t._v("新增")]),i("el-button",{attrs:{type:"primary",icon:"el-icon-delete",plain:""},on:{click:function(e){t.deleteHandeler()}}},[t._v("删除")])],1)])]),i("div",{staticClass:"tableWrap"},[i("table",{staticClass:"table"},[i("thead",[i("tr",[i("th",[t._v("全选"),i("input",{attrs:{type:"checkbox",name:"AllCheckbox"},on:{click:t.selcetAll}})]),i("th",[t._v("ID")]),i("th",[t._v("简体")]),i("th",[t._v("繁体")]),i("th",[t._v("创建时间")]),i("th",[t._v("操作")])])]),t.pageList.length?i("tbody",t._l(t.pageList,function(e){return i("tr",[i("td",[i("input",{ref:"ids",refInFor:!0,attrs:{type:"checkbox",name:"checkbox"},domProps:{value:e.id}})]),i("td",{domProps:{textContent:t._s(e.id)}}),i("td",{attrs:{title:e.simp},domProps:{textContent:t._s(e.simp)}}),i("td",{attrs:{title:e.trads},domProps:{textContent:t._s(e.trads)}}),i("td",{domProps:{textContent:t._s(e.create_time)}}),i("td",[i("span",{staticClass:"icon icon-detail",attrs:{type:"primary",title:"详情",plain:"",size:"mini"},on:{click:function(i){t.showDetaile(e.id,e.simp)}}}),i("span",{staticClass:"icon icon-delete",attrs:{type:"primary",title:"删除",plain:"",size:"mini"},on:{click:function(i){t.deleteHandeler([e.id])}}})])])})):t._e()])]),t.page?i("div",{staticClass:"pageWrap"},[i("el-pagination",{attrs:{small:!1,background:"","current-page":t.page.num,"page-sizes":[10,50,100],"page-size":t.page.offset,layout:"total, sizes, prev, pager, next, jumper",total:t.page.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1):t._e()]),i("el-dialog",{attrs:{visible:t.detailVisible},on:{"update:visible":function(e){t.detailVisible=e}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("el-tabs",{attrs:{value:"detail"}},[i("el-tab-pane",{attrs:{label:"详情",name:"detail"}})],1)],1),i("el-form",[i("el-form-item",{attrs:{label:"简体字:","label-width":"120px"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.detailDate.simp,expression:"detailDate.simp"}],staticClass:"form-control",domProps:{value:t.detailDate.simp},on:{input:function(e){e.target.composing||t.$set(t.detailDate,"simp",e.target.value)}}}),i("el-button",{staticClass:"addNew",attrs:{type:"primary",size:"mini",plain:""},on:{click:function(e){t.addTraditional()}}},[t._v("新增")])],1),i("el-form-item",{attrs:{label:"","label-width":"120px"}},[i("table",{staticClass:"table",attrs:{width:"100%"}},[i("thead",[i("tr",[i("th",[t._v("序号")]),i("th",[t._v("繁体字")]),i("th",[t._v("操作")])])]),t.detailDate.trad.length?i("tbody",t._l(t.detailDate.trad.filter(function(t){return"del"!=t.action}),function(e,a){return i("tr",[i("td",{attrs:{align:"center"},domProps:{textContent:t._s(a+1)}}),i("td",{attrs:{align:"center"}},[e.index?i("input",{directives:[{name:"model",rawName:"v-model",value:e.trad,expression:"item.trad"}],attrs:{type:"text"},domProps:{value:e.trad},on:{input:function(i){i.target.composing||t.$set(e,"trad",i.target.value)}}}):t._e(),e.index?t._e():i("span",{domProps:{textContent:t._s(e.trad)}})]),i("td",{attrs:{align:"center"}},[i("el-button",{attrs:{type:"danger",plain:"",size:"mini"},on:{click:function(i){t.deleteTraditional(e.id,a)}}},[t._v("删除")])],1)])})):t._e()])])],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"info"},on:{click:function(e){t.detailVisible=!1}}},[t._v("取消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.save()}}},[t._v("确定")])],1)],1)],1)],1)},n=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},335:function(t,e,i){"use strict";i.r(e);var a=i(1154),n=i(715);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);i(938);var s=i(0),l=Object(s.a)(n.default,a.a,a.b,!1,null,"5db10ff9",null);l.options.__file="fan.vue",e.default=l.exports},515:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.modifyFont=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,i=l(t,["id"]),a={id:[]},r=[];for(var s in i.trad)"del"==i.trad[s].action?a.id.push(i.trad[s].id):r.push(i.trad[s].trad);return a.id.length>0?c(a).then(function(t){if(t.status)return i.trad=r,(0,n.request_put)(o({id:e}),i)}):(i.trad=r,(0,n.request_put)(o({id:e}),i))},e._delFont=c,e.deleteFont=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/api/simp/delete",t)},e.addFont=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/api/simp",t)},e.listFont=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)("/api/simp",t)},e.detailFont=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,i=l(t,["id"]);return(0,n.request_get)(o({id:e}),i)},e.deleteNickName=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/api/nickname/delete",t)},e.listNickName=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)("/api/nickname",t)},e.detailNickName=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,i=l(t,["id"]);return(0,n.request_get)(d({id:e}),i)},e.addNickName=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/api/nickname",t)},e._delNickName=p,e.modifyNickName=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,i=l(t,["id"]),a={id:[]},r=[];for(var s in i.nick)"del"==i.nick[s].action?a.id.push(i.nick[s].id):r.push(i.nick[s].nick);return a.id.length>0?p(a).then(function(t){if(t.status)return i.nick=r,(0,n.request_put)(d({id:e}),i)}):(i.nick=r,(0,n.request_put)(d({id:e}),i))},e.modifyVariant=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,i=l(t,["id"]);return(0,n.request_put)(u({id:e}),i)},e.deleteVariant=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/api/variant/delete",t)},e.listVariant=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)("/api/variant",t)},e.detailVariant=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,i=l(t,["id"]);return(0,n.request_get)(u({id:e}),i)},e.addVariant=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/api/variant",t)},e.editVariant=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,i=l(t,["id"]);return(0,n.request_put)(u({id:e}),i)};var a,n=i(4),r=i(8),s=(a=r)&&a.__esModule?a:{default:a};function l(t,e){var i={};for(var a in t)e.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(t,a)&&(i[a]=t[a]);return i}var o=s.default.compile("/api/simp/:id"),d=s.default.compile("/api/nickname/:id"),u=s.default.compile("/api/variant/:id");function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/api/simp/id/delete",t)}function p(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/api/nickname/id/delete",t)}},715:function(t,e,i){"use strict";i.r(e);var a=i(716),n=i.n(a);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);e.default=n.a},716:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=d(i(3)),n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},r=(d(i(82)),d(i(155))),s=d(i(154)),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(515)),o=i(122);function d(t){return t&&t.__esModule?t:{default:t}}e.default={mixins:[o.publicMixin],data:function(){return{pageList:[],page:null,query:null,path:"dataRelation",activeName:"fan",timeValue:null,detailVisible:!1,detailDate:{id:"",simp:"",trad:[]}}},methods:{getList:function(){var t,e=(t=a.default.mark(function t(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.page&&this.page.num||1,r=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.page&&this.page.offset||10,o=arguments[2];return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=n({pageNum:i,pageOffset:s},o),t.next=3,l.listFont(e).then(function(t){r.page=t.page,r.pageList=t.data});case 3:case"end":return t.stop()}},t,this)}),function(){var e=t.apply(this,arguments);return new Promise(function(t,i){return function a(n,r){try{var s=e[n](r),l=s.value}catch(t){return void i(t)}if(!s.done)return Promise.resolve(l).then(function(t){a("next",t)},function(t){a("throw",t)});t(l)}("next")})});return function(){return e.apply(this,arguments)}}(),clear:function(){document.getElementById("text").value=""},showDetaile:function(t,e){var i=this;this.detailDate.trad=[],this.detailDate.id=this.detailDate.simp="",t?l.detailFont({id:t}).then(function(a){i.detailDate.id=t,i.detailDate.simp=e,i.detailDate.trad=a.data,i.detailVisible=!0}):this.detailVisible=!0},deleteHandeler:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e.length||Array.from(document.querySelectorAll("[name='checkbox']:checked")).forEach(function(t){e.push(t.value)}),!e.length)return this.$message.error("请确认你要删除的内容！");this.$confirm("确认删除？").then(function(i){var a=t.page,n=a.total,r=a.start,s=a.num;n-e.length==r&&(t.page.num=r?s-1:1),l.deleteFont({id:e}).then(function(e){t.$message.success("删除成功"),t.getList()})}).catch(function(t){})},addTraditional:function(){var t=this.detailDate.trad.length+1;this.detailDate.trad.push({index:t,id:"",trad:"",action:"add"})},deleteTraditional:function(t,e){var i=t?this.detailDate.trad.filter(function(t){return"del"!=t.action}).findIndex(function(e){return e.id===t}):e;this.$set(this.detailDate.trad.filter(function(t){return"del"!=t.action})[i],"action","del")},save:function(){var t=this,e=this.detailDate.id;this.detailDate.trad.findIndex(function(t){return!t.trad})>-1?this.$message({message:"请输入完整信息",type:"warning"}):e?(log(this.detailDate),l.modifyFont(this.detailDate).then(function(e){t.$message.success("修改成功"),t.getList(),t.detailVisible=!1}).catch(function(e){var i=e.payload;for(var a in i.messages){t.$message.error(i.messages[a]);break}})):l.addFont({simp:this.detailDate.simp,trad:this.detailDate.trad.filter(function(t){return"del"!=t.action}).map(function(t){return t.trad})}).then(function(e){t.$message.success("新增成功"),t.getList(),t.detailVisible=!1}).catch(function(e){var i=e.payload;for(var a in i.messages){t.$message.error(i.messages[a]);break}})}},components:{Menu:r.default,Top:s.default}}},717:function(t,e,i){},938:function(t,e,i){"use strict";var a=i(717);i.n(a).a}}]);