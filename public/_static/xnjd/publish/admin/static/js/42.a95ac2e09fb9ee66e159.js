(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{1152:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"indexs"},[i("Top",{attrs:{currentPlant:"X-PUBLISH"}}),i("Menu",{attrs:{curr:"/dataRelation"}}),i("div",{staticClass:"mainRight"},[i("div",{staticClass:"maindata"},[i("div",{staticClass:"serachWrap"},[i("div",{staticClass:"NavList"},[i("el-tabs",{on:{"tab-click":t.handleNavClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"繁简字管理",name:"fan"}}),i("el-tab-pane",{attrs:{label:"异体字管理",name:"yi"}}),i("el-tab-pane",{attrs:{label:"别称管理",name:"bie"}})],1)],1),i("form",{attrs:{id:"mainForm"}},[i("span",{staticClass:"group-inline"},[i("el-input",{attrs:{placeholder:"输入简体搜索",name:"simp",clearable:""}})],1),i("span",{staticClass:"group-inline"},[i("TimePick",{attrs:{inputsName:["start_time","end_time"]}})],1),i("span",{staticClass:"group-inline right"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-search",plain:""},on:{click:t.seareHandeler}},[t._v("搜索")]),i("el-button",{attrs:{type:"primary",icon:"el-icon-plus",plain:""},on:{click:function(e){t.showDetaile()}}},[t._v("新增")]),i("el-button",{attrs:{type:"primary",icon:"el-icon-delete",plain:""},on:{click:function(e){t.deleteHandeler()}}},[t._v("删除")])],1)])]),i("div",{staticClass:"tableWrap"},[i("div",{domProps:{innerHTML:t._s(t.style)}}),i("table",{staticClass:"table"},[i("thead",[i("tr",[i("th",[t._v("全选"),i("input",{attrs:{type:"checkbox",name:"AllCheckbox"},on:{click:t.selcetAll}})]),i("th",[t._v("ID")]),i("th",[t._v("简体")]),i("th",[t._v("别字")]),i("th",[t._v("预览图")]),i("th",[t._v("创建时间")]),i("th",[t._v("操作")])])]),t.pageList.length?i("tbody",t._l(t.pageList,function(e){return i("tr",[i("td",[i("input",{ref:"ids",refInFor:!0,attrs:{type:"checkbox",name:"checkbox"},domProps:{value:e.id}})]),i("td",{domProps:{textContent:t._s(e.id)}}),i("td",{attrs:{title:e.simp},domProps:{textContent:t._s(e.simp)}}),i("td",{attrs:{title:e.xc_variant},domProps:{innerHTML:t._s(e.xc_variant)}}),i("td",[i("img",{staticStyle:{"max-width":"40px"},attrs:{src:e.img,alt:"没图"}})]),i("td",{domProps:{textContent:t._s(e.create_time)}}),i("td",[i("span",{staticClass:"icon icon-detail",attrs:{type:"primary",title:"详情",plain:"",size:"mini"},on:{click:function(i){t.showDetaile(e.id,e.simp)}}}),i("span",{staticClass:"icon icon-delete",attrs:{type:"primary",title:"删除",plain:"",size:"mini"},on:{click:function(i){t.deleteHandeler([e.id])}}})])])})):t._e()])]),t.page?i("div",{staticClass:"pageWrap"},[i("el-pagination",{attrs:{small:!1,background:"","current-page":t.page.num,"page-sizes":[10,50,100],"page-size":t.page.offset,layout:"total, sizes, prev, pager, next, jumper",total:t.page.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1):t._e()]),t.detailVisible?i("el-dialog",{attrs:{visible:t.detailVisible},on:{"update:visible":function(e){t.detailVisible=e}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("el-tabs",{attrs:{value:"detail"}},[i("el-tab-pane",{attrs:{label:"详情",name:"detail"}})],1)],1),i("VaForm",{ref:"detailForm"},[i("form",{staticClass:"detailForm"},[i("div",{staticClass:"group"},[i("div",{staticClass:"label"},[t._v("简体字")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.detailDate.simp,expression:"detailDate.simp"},{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"}],staticClass:"form-control",domProps:{value:t.detailDate.simp},on:{input:function(e){e.target.composing||t.$set(t.detailDate,"simp",e.target.value)}}})]),i("div",{staticClass:"group"},[i("div",{staticClass:"label"},[t._v("异体字图片")]),i("img",{staticClass:"previewImgUrl",attrs:{src:t.previewImgUrl,alt:"暂无图片"}}),i("el-button",{staticStyle:{"margin-left":"20px"},attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){t.$refs.fenmian.click()}}},[t._v("上传")]),i("input",{ref:"fenmian",staticClass:"hide",attrs:{type:"file",accept:"image/jpeg,image/jpg,image/png"},on:{change:function(e){t.previewImg(e)}}}),i("input",{staticClass:"hide",attrs:{name:"img",type:"text"},domProps:{value:t.detailDate.img}})],1),i("div",{staticClass:"group"},[i("div",{staticClass:"label"},[t._v("异体字文件")]),i("input",{staticClass:"form-control",attrs:{type:"text",name:""},domProps:{value:t.previewFileUrl}}),i("input",{ref:"file",staticClass:"hide",attrs:{type:"file",accept:".eot,.svg,.ttf,.woff"},on:{change:t.previewFile}}),i("el-button",{staticStyle:{"margin-left":"20px"},attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){t.$refs.file.click()}}},[t._v("上传")])],1)])]),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"info"},on:{click:function(e){t.detailVisible=!1}}},[t._v("取消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("确定")])],1)],1):t._e()],1)],1)},n=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},336:function(t,e,i){"use strict";i.r(e);var a=i(1152),n=i(718);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);i(942);var s=i(0),l=Object(s.a)(n.default,a.a,a.b,!1,null,"4ed13471",null);l.options.__file="yi.vue",e.default=l.exports},515:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.modifyFont=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,i=l(t,["id"]),a={id:[]},r=[];for(var s in i.trad)"del"==i.trad[s].action?a.id.push(i.trad[s].id):r.push(i.trad[s].trad);return a.id.length>0?d(a).then(function(t){if(t.status)return i.trad=r,(0,n.request_put)(o({id:e}),i)}):(i.trad=r,(0,n.request_put)(o({id:e}),i))},e._delFont=d,e.deleteFont=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/api/simp/delete",t)},e.addFont=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/api/simp",t)},e.listFont=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)("/api/simp",t)},e.detailFont=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,i=l(t,["id"]);return(0,n.request_get)(o({id:e}),i)},e.deleteNickName=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/api/nickname/delete",t)},e.listNickName=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)("/api/nickname",t)},e.detailNickName=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,i=l(t,["id"]);return(0,n.request_get)(u({id:e}),i)},e.addNickName=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/api/nickname",t)},e._delNickName=p,e.modifyNickName=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,i=l(t,["id"]),a={id:[]},r=[];for(var s in i.nick)"del"==i.nick[s].action?a.id.push(i.nick[s].id):r.push(i.nick[s].nick);return a.id.length>0?p(a).then(function(t){if(t.status)return i.nick=r,(0,n.request_put)(u({id:e}),i)}):(i.nick=r,(0,n.request_put)(u({id:e}),i))},e.modifyVariant=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,i=l(t,["id"]);return(0,n.request_put)(c({id:e}),i)},e.deleteVariant=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/api/variant/delete",t)},e.listVariant=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)("/api/variant",t)},e.detailVariant=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,i=l(t,["id"]);return(0,n.request_get)(c({id:e}),i)},e.addVariant=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/api/variant",t)},e.editVariant=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,i=l(t,["id"]);return(0,n.request_put)(c({id:e}),i)};var a,n=i(4),r=i(8),s=(a=r)&&a.__esModule?a:{default:a};function l(t,e){var i={};for(var a in t)e.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(t,a)&&(i[a]=t[a]);return i}var o=s.default.compile("/api/simp/:id"),u=s.default.compile("/api/nickname/:id"),c=s.default.compile("/api/variant/:id");function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/api/simp/id/delete",t)}function p(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/api/nickname/id/delete",t)}},718:function(t,e,i){"use strict";i.r(e);var a=i(719),n=i.n(a);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);e.default=n.a},719:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=p(i(3)),n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},r=(p(i(82)),p(i(155))),s=p(i(154)),l=i(27),o=p(i(158)),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(515)),c=p(i(939)),d=i(122);function p(t){return t&&t.__esModule?t:{default:t}}function f(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,i){return function a(n,r){try{var s=e[n](r),l=s.value}catch(t){return void i(t)}if(!s.done)return Promise.resolve(l).then(function(t){a("next",t)},function(t){a("throw",t)});t(l)}("next")})}}e.default={mixins:[d.publicMixin],data:function(){return{pageList:[],page:null,query:null,styleFile:null,path:"dataRelation",activeName:"yi",timeValue:null,detailVisible:!1,previewImgUrl:null,previewFileUrl:null,detailDate:{id:"",simp:"",img:null,fonts:[]}}},computed:{style:function(){return(0,c.default)({name:this.styleFile})}},methods:{getList:function(){var t=f(a.default.mark(function t(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.page&&this.page.num||1,r=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.page&&this.page.offset||10,l=arguments[2];return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=n({pageNum:i,pageOffset:s},l),t.next=3,u.listVariant(e).then(function(t){r.page=t.page,r.styleFile=t.data.style,r.pageList=t.data.list});case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),clear:function(){document.getElementById("text").value=""},previewImg:function(t){var e=t.target.files[0];this.previewImgUrl=URL.createObjectURL(e)},previewFile:function(t){this.previewFileUrl=URL.createObjectURL(t.target.files[0])},showDetaile:function(t,e){var i=this;this.detailDate.fonts=[],this.detailDate.img=this.detailDate.id=this.detailDate.simp="",this.previewFileUrl=null,this.previewImgUrl=null,t?u.detailVariant({id:t}).then(function(a){i.detailDate.id=t,i.detailDate.simp=e,i.detailDate.fonts=i.previewFileUrl=a.data.fonts,i.detailDate.img=i.previewImgUrl=a.data.img,i.detailVisible=!0}):this.detailVisible=!0},deleteHandeler:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e.length||Array.from(document.querySelectorAll("[name='checkbox']:checked")).forEach(function(t){e.push(t.value)}),!e.length)return this.$message.error("请确认你要删除的内容！");this.$confirm("确认删除？").then(function(i){var a=t.page,n=a.total,r=a.start,s=a.num;n-e.length==r&&(t.page.num=r?s-1:1),u.deleteVariant({id:e}).then(function(e){t.getList()})}).catch(function(t){})},save:function(){var t=f(a.default.mark(function t(){var e,i,n,r,s,o=this;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.$refs.detailForm.valiAll()){t.next=4;break}return log("验证失败"),t.abrupt("return");case 4:if(e=this.$refs.fenmian.files[0],i=this.$refs.file.files[0],n=this.$loading({text:"正在上传",background:"rgba(0, 0, 0, 0.8)"}),t.prev=7,!e){t.next=11;break}return t.next=11,(0,l.getTask)(e).then(function(t){o.detailDate.img=t.data.path});case 11:if(!i){t.next=14;break}return t.next=14,(0,l.getTask)(i).then(function(t){o.detailDate.fonts.push(t.data.path)});case 14:if(log(this.detailDate),this.detailDate.id){t.next=20;break}return t.next=18,u.addVariant(this.detailDate).then(function(t){o.getList(),n.close(),o.detailVisible=!1});case 18:t.next=23;break;case 20:return log("test"),t.next=23,u.modifyVariant(this.detailDate).then(function(t){o.getList(),n.close(),o.detailVisible=!1});case 23:t.next=36;break;case 25:t.prev=25,t.t0=t.catch(7),r=t.t0.payload,n.close(),t.t1=a.default.keys(r.messages);case 30:if((t.t2=t.t1()).done){t.next=36;break}return s=t.t2.value,this.$message.error(r.messages[s]),t.abrupt("break",36);case 36:case"end":return t.stop()}},t,this,[[7,25]])}));return function(){return t.apply(this,arguments)}}()},components:{Menu:r.default,Top:s.default,VaForm:o.default}}},720:function(t,e,i){},939:function(t,e,i){var a=i(940);t.exports=function(t){var e,i="",n=t||{};return function(t){i=i+'<style type="text/css">'+a.escape(null==(e=t)?"":e)+"</style>"}.call(this,"name"in n?n.name:"undefined"!=typeof name?name:void 0),i}},940:function(t,e,i){"use strict";var a=Object.prototype.hasOwnProperty;function n(t,e){return Array.isArray(t)?function(t,e){for(var i,a="",r="",s=Array.isArray(e),l=0;l<t.length;l++)(i=n(t[l]))&&(s&&e[l]&&(i=o(i)),a=a+r+i,r=" ");return a}(t,e):t&&"object"==typeof t?function(t){var e="",i="";for(var n in t)n&&t[n]&&a.call(t,n)&&(e=e+i+n,i=" ");return e}(t):t||""}function r(t){if(!t)return"";if("object"==typeof t){var e="";for(var i in t)a.call(t,i)&&(e=e+i+":"+t[i]+";");return e}return t+""}function s(t,e,i,a){return!1!==e&&null!=e&&(e||"class"!==t&&"style"!==t)?!0===e?" "+(a?t:t+'="'+t+'"'):("function"==typeof e.toJSON&&(e=e.toJSON()),"string"==typeof e||(e=JSON.stringify(e),i||-1===e.indexOf('"'))?(i&&(e=o(e))," "+t+'="'+e+'"'):" "+t+"='"+e.replace(/'/g,"&#39;")+"'"):""}e.merge=function t(e,i){if(1===arguments.length){for(var a=e[0],n=1;n<e.length;n++)a=t(a,e[n]);return a}for(var s in i)if("class"===s){var l=e[s]||[];e[s]=(Array.isArray(l)?l:[l]).concat(i[s]||[])}else if("style"===s){var l=r(e[s]);l=l&&";"!==l[l.length-1]?l+";":l;var o=r(i[s]);o=o&&";"!==o[o.length-1]?o+";":o,e[s]=l+o}else e[s]=i[s];return e},e.classes=n,e.style=r,e.attr=s,e.attrs=function(t,e){var i="";for(var l in t)if(a.call(t,l)){var o=t[l];if("class"===l){o=n(o),i=s(l,o,!1,e)+i;continue}"style"===l&&(o=r(o)),i+=s(l,o,!1,e)}return i};var l=/["&<>]/;function o(t){var e=""+t,i=l.exec(e);if(!i)return t;var a,n,r,s="";for(a=i.index,n=0;a<e.length;a++){switch(e.charCodeAt(a)){case 34:r="&quot;";break;case 38:r="&amp;";break;case 60:r="&lt;";break;case 62:r="&gt;";break;default:continue}n!==a&&(s+=e.substring(n,a)),n=a+1,s+=r}return n!==a?s+e.substring(n,a):s}e.escape=o,e.rethrow=function t(e,a,n,r){if(!(e instanceof Error))throw e;if(!("undefined"==typeof window&&a||r))throw e.message+=" on line "+n,e;try{r=r||i(941).readFileSync(a,"utf8")}catch(i){t(e,null,n)}var s=3,l=r.split("\n"),o=Math.max(n-s,0),u=Math.min(l.length,n+s);var s=l.slice(o,u).map(function(t,e){var i=e+o+1;return(i==n?"  > ":"    ")+i+"| "+t}).join("\n");e.path=a;e.message=(a||"Pug")+":"+n+"\n"+s+"\n\n"+e.message;throw e}},941:function(t,e){},942:function(t,e,i){"use strict";var a=i(720);i.n(a).a}}]);