(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{1086:function(t,e,a){"use strict";a.r(e);var i=a(1180),n=a(784);for(var r in n)"default"!==r&&function(t){a.d(e,t,function(){return n[t]})}(r);a(1088);var s=a(0),l=Object(s.a)(n.default,i.a,i.b,!1,null,"3a9ab13e",null);l.options.__file="detail.vue",e.default=l.exports},1087:function(t){t.exports={status:!0,msg:"",data:[{id:"17",name:"历史文献学",parent_id:"9"},{id:"52",name:"世界古代通史",parent_id:"51"},{id:"50",name:"世界史学理论与史学史",parent_id:"15"},{id:"63",name:"世界近现代通史",parent_id:"62"},{id:"19",name:"先秦史",parent_id:"18"},{id:"16",name:"史学理论及中国史学史",parent_id:"10"},{id:"15",name:"世界史学理论与史学史",parent_id:"5"},{id:"48",name:"鸦片战争至辛亥革命史",parent_id:"30"},{id:"47",name:"中国现代史",parent_id:"35"},{id:"81",name:"一带一路研究",parent_id:"80"},{id:"38",name:"思想史",parent_id:"37"},{id:"96",name:"古代史-下册",parent_id:"91"},{id:"51",name:"世界古代中古史",parent_id:"5"},{id:"39",name:"文化史",parent_id:"37"},{id:"49",name:"中华民国史",parent_id:"30"},{id:"20",name:"秦汉史",parent_id:"18"},{id:"64",name:"日本史",parent_id:"62"},{id:"82",name:"全球史",parent_id:"80"},{id:"53",name:"欧洲古代史",parent_id:"51"},{id:"65",name:"南亚史",parent_id:"62"},{id:"33",name:"中国共产党史",parent_id:"30"},{id:"40",name:"科技史",parent_id:"37"},{id:"92",name:"历史",parent_id:"6"},{id:"62",name:"世界近现代史",parent_id:"5"},{id:"22",name:"魏晋南北朝史",parent_id:"18"},{id:"54",name:"中东近东北非的古代史",parent_id:"51"},{id:"83",name:"环境史",parent_id:"80"},{id:"84",name:"思想史",parent_id:"80"},{id:"80",name:"专门史",parent_id:"5"},{id:"66",name:"中亚史",parent_id:"62"},{id:"55",name:"亚洲古代史",parent_id:"51"},{id:"3",name:"年度报告",parent_id:"0"},{id:"41",name:"社会史",parent_id:"37"},{id:"7",name:"政法",parent_id:"6"},{id:"21",name:"隋唐五代十国史",parent_id:"18"},{id:"34",name:"中国近代通史",parent_id:"30"},{id:"8",name:"历史地理学",parent_id:"4"},{id:"23",name:"宋史",parent_id:"18"},{id:"67",name:"西亚史",parent_id:"62"},{id:"9",name:"历史文献学",parent_id:"4"},{id:"42",name:"城市史",parent_id:"37"},{id:"85",name:"文化史",parent_id:"80"},{id:"56",name:"美洲古代中古史",parent_id:"51"},{id:"4",name:"中国史",parent_id:"3"},{id:"97",name:"经济",parent_id:"6"},{id:"5",name:"世界史",parent_id:"3"},{id:"98",name:"哲学",parent_id:"6"},{id:"68",name:"非洲史",parent_id:"62"},{id:"43",name:"中外文化交流史",parent_id:"37"},{id:"57",name:"非洲古代中古史",parent_id:"51"},{id:"24",name:"辽金史",parent_id:"18"},{id:"86",name:"科技史",parent_id:"80"},{id:"69",name:"美国史",parent_id:"62"},{id:"87",name:"社会史",parent_id:"80"},{id:"99",name:"语言",parent_id:"6"},{id:"6",name:"\r\n数字图书",parent_id:"0"},{id:"25",name:"元史",parent_id:"18"},{id:"44",name:"人物研究",parent_id:"37"},{id:"58",name:"世界中古史通史",parent_id:"51"},{id:"26",name:"明史",parent_id:"18"},{id:"88",name:"城市史",parent_id:"80"},{id:"70",name:"拉丁美洲史",parent_id:"62"},{id:"45",name:"方志学",parent_id:"37"},{id:"59",name:"欧洲中古史",parent_id:"51"},{id:"100",name:"十三辑",parent_id:"6"},{id:"101",name:"十四辑",parent_id:"6"},{id:"10",name:"史学理论及中国史学史",parent_id:"4"},{id:"46",name:"谱牒学",parent_id:"37"},{id:"89",name:"历史地理学",parent_id:"80"},{id:"102",name:"国图",parent_id:"6"},{id:"27",name:"清史",parent_id:"18"},{id:"18",name:"中国古代史",parent_id:"4"},{id:"60",name:"中东近东及北非的中古史",parent_id:"51"},{id:"71",name:"俄国史",parent_id:"62"},{id:"30",name:"中国近代史",parent_id:"4"},{id:"72",name:"英国史",parent_id:"62"},{id:"90",name:"人物研究",parent_id:"80"},{id:"35",name:"中国现代史",parent_id:"4"},{id:"28",name:"中国古文字",parent_id:"18"},{id:"61",name:"亚洲中古史",parent_id:"51"},{id:"29",name:"中国古代契约文书",parent_id:"18"},{id:"37",name:"专门史",parent_id:"4"},{id:"73",name:"法国史",parent_id:"62"},{id:"74",name:"德国史",parent_id:"62"},{id:"12",name:"历史地理学",parent_id:"8"},{id:"75",name:"意大利史",parent_id:"62"},{id:"76",name:"西班牙史",parent_id:"62"},{id:"77",name:"东欧国家史",parent_id:"62"},{id:"78",name:"北欧国家史",parent_id:"62"},{id:"79",name:"近现代国际关系史",parent_id:"62"}]}},1088:function(t,e,a){"use strict";var i=a(786);a.n(i).a},1089:function(t,e,a){"use strict";var i=a(787);a.n(i).a},1136:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"index clearfix"},[a("Top",{attrs:{currentPlant:"X-PUBLISH"}}),a("Menu",{attrs:{curr:"/digitalProductLibrary/polymorph"}}),a("div",{staticClass:"mainRight"},[a("div",{staticClass:"contentWrap"},[a("div",{staticClass:"contentLeft"},[a("div",{staticClass:"maindata"},[a("div",{staticClass:"serachWrap"},[a("div",{staticClass:"title"}),a("form",{staticClass:"clearfix",attrs:{id:"mainForm"}},[a("span",{staticClass:"group-inline"},[a("el-input",{attrs:{placeholder:"书名",name:"name",clearable:""}})],1),a("span",{staticClass:"group-inline"},[a("el-input",{attrs:{placeholder:"作者",name:"author",clearable:""}})],1),a("span",{staticClass:"group-inline"},[a("el-input",{attrs:{placeholder:"标签",name:"tag",clearable:""}})],1),t._m(0),a("span",{staticClass:"group-inline"},[a("TimePick",{attrs:{inputsName:["start_time","end_time"]}})],1),a("span",{staticClass:"group-inline right"},[a("el-button",{attrs:{size:"mediu",type:"primary",icon:"el-icon-search",plain:""},on:{click:t.query}},[t._v("搜索")])],1)])]),a("div",{staticClass:"tableWrap"},[a("div",{staticClass:"tableTop"},[a("div",{staticClass:"title vel-line"},[a("span",[t._v("全部 "),t.page?a("span",{staticClass:"totalNum"},[t._v("("+t._s(t.page.total)+")")]):t._e()]),a("div",{staticClass:"btns"},[a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:t.moveToOther}},[t._v("移动分组")]),a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:t.exportSomething}},[t._v("导出")]),a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){t.delChoosen(!1)}}},[t._v("删除")])],1)])]),a("table",{staticClass:"table"},[a("thead",[a("tr",[a("th",{staticClass:"allBtn"},[a("input",{attrs:{type:"checkbox"},on:{click:function(e){t.checkAll(e)}}})]),a("th",[t._v("书名")]),a("th",[t._v("作者")]),a("th",[t._v("标签")]),a("th",[t._v("形态")]),a("th",{staticClass:"time"},[t._v("创建时间")]),a("th",{staticClass:"operate"},[t._v("操作")])])]),t.list?a("tbody",t._l(t.list,function(e){return a("tr",[a("th",[a("input",{ref:"ids",refInFor:!0,attrs:{type:"checkbox",name:"ids"},domProps:{value:e.id}})]),a("th",[a("img",{staticClass:"cover-photo",attrs:{src:e.img_src}}),a("div",{staticClass:"th-name bookName",attrs:{title:e.name}},[t._v(t._s(e.name))])]),a("th",[a("div",{staticClass:"th-name",attrs:{title:e.author}},[t._v(t._s(e.author))])]),a("th",[a("div",{staticClass:"th-name",attrs:{title:e.tag}},[t._v(t._s(e.tag))])]),a("th",[a("div",{staticClass:"th-name",attrs:{title:e.type}},[t._v(t._s(e.type))])]),a("th",[a("div",{staticClass:"th-name"},[t._v(t._s(e.create_time))])]),a("th",[a("div",{staticClass:"btns"},[a("span",{staticClass:"icon icon-detail",attrs:{size:"mini",title:"详情",type:"primary",plain:""},on:{click:function(a){t.opneDetailDialog("info",e)}}}),a("span",{staticClass:"icon el-icon-download",attrs:{size:"mini",title:"导出",type:"primary",plain:""},on:{click:function(a){t.opnePublishDialog(e)}}}),a("span",{staticClass:"icon icon-delete",attrs:{size:"mini",title:"删除",type:"primary",plain:""},on:{click:function(a){t.delChoosen(e.id)}}})])])])})):t._e()]),t.page?a("div",{staticClass:"pageWrap"},[a("el-pagination",{attrs:{small:!1,background:"","current-page":t.page.num,"page-sizes":[10,50,100],"page-size":t.page.offset,layout:"total, sizes,prev, pager, next, jumper",total:t.page.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1):t._e()]),a("div",{staticClass:"gruopList"},[a("GroupList",{attrs:{groupList:t.groupList,currGroup:t.currGroup},on:{addGroup:t.addGroup,updateGroup:t.updateGroup,delGroup:t.delGroup,groupChange:t.groupChange}})],1)])])])]),a("div",{staticClass:"dialogs"},[a("Examine",{attrs:{examineDialog:t.examineDialog},on:{"update:examineDialog":function(e){t.examineDialog=e},saveExamine:t.saveExamine}}),a("el-dialog",{attrs:{center:!1,visible:t.detailDialog,"close-on-click-modal":!1,top:"50px",width:"1000px"},on:{"update:visible":function(e){t.detailDialog=e}}},[a("div",{staticClass:"content",attrs:{slot:"title"},slot:"title"},[t.detailDialog?a("Detail",{attrs:{type:t.detailDialoaType,detailDialog:t.detailDialog,detailData:t.detailData},on:{detailBack:t.detailBack,"update:detailDialog":function(e){t.detailDialog=e}}}):t._e()],1)]),a("el-dialog",{attrs:{center:!1,visible:t.publishDialog,"close-on-click-modal":!1,top:"50px",width:"1000px",title:"发布"},on:{"update:visible":function(e){t.publishDialog=e}}},[a("Release",{on:{cancle:function(e){t.publishDialog=!1}}})],1),a("el-dialog",{attrs:{center:!1,visible:t.imgLinkDialog,"close-on-click-modal":!1,width:"800px"},on:{"update:visible":function(e){t.imgLinkDialog=e}}},[t.detailData?a("div",{staticClass:"content",attrs:{slot:"title"},slot:"title"},[a("div",{staticClass:"imgWrap"},[a("img",{attrs:{src:t.detailData.id,alt:"alt"}})]),a("div",{staticClass:"btns"},[a("el-button",[t._v("下载图片")]),a("el-button",{on:{click:function(e){t.copyLink("copy"+t.detailData.id)}}},[t._v("复制链接")]),a("input",{staticClass:"zhide",attrs:{id:"copy"+t.detailData.id},domProps:{value:t.detailData.id}})],1)]):t._e(),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.imgLinkDialog=!1}}},[t._v("返回")])],1)]),a("el-dialog",{attrs:{center:!1,visible:t.moveToOtherDiaolog,"close-on-click-modal":!1,title:"移动分组",width:"500px"},on:{"update:visible":function(e){t.moveToOtherDiaolog=e}}},[a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("移动到")]),a("select",{ref:"moveToId",staticClass:"form-control",attrs:{placeholder:"请选择"}},t._l(t.groupList,function(e,i){return e.id!=t.currGroup&&""!=e.id?a("option",{domProps:{value:e.id,textContent:t._s(e.name)}}):t._e()}))]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info"},on:{click:function(e){t.moveToOtherDiaolog=!1}}},[t._v("返回")]),a("el-button",{attrs:{type:"primary"},on:{click:t.moveToSubmit}},[t._v(" 确定")])],1)])],1)],1)},n=[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"group-inline"},[e("select",{staticClass:"form-control",attrs:{name:"type"}},[e("option",{attrs:{value:""}},[this._v("选择形态")]),e("option",{attrs:{value:"epub"}},[this._v("epub")]),e("option",{attrs:{value:"mobi"}},[this._v("mobi")]),e("option",{attrs:{value:"pdf"}},[this._v("pdf")]),e("option",{attrs:{value:"word"}},[this._v("word")]),e("option",{attrs:{value:"html"}},[this._v("html")])])])}];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n})},1180:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"div"},[a("el-tabs",{attrs:{value:t.type},on:{"tab-click":t.handleClick}},[a("el-tab-pane",{attrs:{label:"详情",name:"info"}},[a("div",{staticClass:"div"},[a("VaForm",{ref:"detailForm"},[a("form",{ref:"detailForm",staticClass:"detailForm"},[a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("*名称:")]),a("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"},{name:"model",rawName:"v-model",value:t.detailDataOwn.name,expression:"detailDataOwn.name"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.detailDataOwn.name},on:{input:function(e){e.target.composing||t.$set(t.detailDataOwn,"name",e.target.value)}}})]),a("TypeMsg",{attrs:{detailDataOwn:t.detailDataOwn,name:t.detailDataOwn.type}}),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("作者:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.detailDataOwn.author,expression:"detailDataOwn.author"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.detailDataOwn.author},on:{input:function(e){e.target.composing||t.$set(t.detailDataOwn,"author",e.target.value)}}})]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("标签:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.detailDataOwn.tag,expression:"detailDataOwn.tag"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.detailDataOwn.tag},on:{input:function(e){e.target.composing||t.$set(t.detailDataOwn,"tag",e.target.value)}}})]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("简介:")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.detailDataOwn.abs,expression:"detailDataOwn.abs"}],staticClass:"textarea",attrs:{type:"text"},domProps:{value:t.detailDataOwn.abs},on:{input:function(e){e.target.composing||t.$set(t.detailDataOwn,"abs",e.target.value)}}})]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("设置封面:")]),a("label",[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){t.$refs.fenmian.click()}}},[t._v("导入封面")]),a("input",{ref:"fenmian",staticClass:"hide",attrs:{type:"file",accept:"image/jpeg,image/jpg,image/png"},on:{change:t.previewImg}}),a("input",{ref:"tushu",staticClass:"hide",attrs:{type:"file"},on:{change:t.previewBook}})],1)]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"}),a("img",{staticClass:"previewImgUrl",attrs:{src:t.previewImgUrl||t.detailDataOwn.img_src}})]),a("p",{staticClass:"imgSizeWrap"},[a("span",{staticClass:"imgSize"},[t._v("建议图片大小：118*160px")])]),t.file?a("div",{staticClass:"label"},[t._v("图书稿件:"),a("span",{domProps:{textContent:t._s(t.file.name)}}),a("el-button",{attrs:{size:"mini ",type:"primary"},on:{click:t.upLoadXml}},[t._v("确定导入")])],1):t._e(),a("p"),a("div",{staticClass:"group"},[a("div",{staticClass:"label"}),a("a",{attrs:{href:t.detailData.path_src,download:"e"}},[a("el-button",{attrs:{size:"mini",type:"primary"}},[t._v("导出")])],1)]),a("div",{staticClass:"btns"},[a("el-button",{attrs:{type:"info"},on:{click:function(e){t.$emit("update:detailDialog",!1)}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitDetail("detailForm")}}},[t._v("确定")])],1)],1)])],1)]),a("el-tab-pane",{attrs:{label:"元数据",name:"data"}},[a("MetaData",{attrs:{metadata:t.metadata},on:{submit:t.submitDetail,back:function(e){t.$emit("update:detailDialog",!1)}}})],1),a("el-tab-pane",{attrs:{label:"目录",name:"ml"}},[a("div",{staticClass:"muluWrap"},[a("div",{staticClass:"left"},[a("el-tree",{staticClass:"muluList",attrs:{data:t.ml,props:t.defaultProps,"node-key":"id"},on:{"node-click":t.handleNodeClick}})],1),a("div",{staticClass:"right"},[a("table",{staticClass:"table"},[a("thead",[a("tr",[a("th",{attrs:{width:"50"}},[t._v("序号")]),a("th",[t._v(" 名称")])])]),a("tbody",t._l(t.currMulu,function(e,i){return a("tr",[a("th",{domProps:{textContent:t._s(i+1)}}),a("th",{domProps:{textContent:t._s(e.chapter_name)}})])}))])])])])],1)],1)},n=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n})},346:function(t,e,a){"use strict";a.r(e);var i=a(1136),n=a(782);for(var r in n)"default"!==r&&function(t){a.d(e,t,function(){return n[t]})}(r);a(1089);var s=a(0),l=Object(s.a)(n.default,i.a,i.b,!1,null,"fbccfefa",null);l.options.__file="index.vue",e.default=l.exports},782:function(t,e,a){"use strict";a.r(e);var i=a(783),n=a.n(i);for(var r in i)"default"!==r&&function(t){a.d(e,t,function(){return i[t]})}(r);e.default=n.a},783:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},n=p(a(82)),r=p(a(155)),s=p(a(154)),l=p(a(611)),o=p(a(365)),d=p(a(1086)),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}(a(871)),c=a(122);function p(t){return t&&t.__esModule?t:{default:t}}e.default={mixins:[c.main],components:{Menu:r.default,Top:s.default,GroupList:o.default,Detail:d.default,Release:l.default},data:function(){return{services:u,list:null,page:null,groupList:null,detailDialog:!1,detailDialoaType:"info",detailData:null,timePick:null,imgLinkDialog:!1,publishDialog:!1,moveToOtherDiaolog:!1,moveIds:null,toId:null}},methods:{getList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.page&&this.page.num||1,e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.page&&this.page.offset||10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;u.list(i({pageNum:t,pageOffset:a,group_id:this.currGroup},n)).then(function(t){log("list",t),e.list=t.data,e.page=t.page})},delGroup:function(t){var e=this;log("删除分组",t),this.services.deleteGroup({id:t}).then(function(a){t===e.currGroup&&e.$router.push({path:e.$route.path,query:{id:"non"}}),e.getGroupList()})},opnePublishDialog:function(t){log(t),1===t.status?location.href=t.path_src:this.$message.error("导出失败")},exportSomething:function(t){var e=this,a=(0,n.default)(document.querySelector("#mainForm"),{hash:!0}),i=this.getChecked2();i&&(a.id=i),this.services.educe(a).then(function(t){location.href=t.data.url}).catch(function(t){e.$message.error("导出失败!")})},delChoosens:function(t){var e=this,a=[];if(log(t),t)a.push(t);else{var i=Array.from(document.querySelectorAll('input[name="ids"]:checked'));if(i.forEach(function(t){a.push(t.value)}),!i.length)return void this.$message.error("请先选中!")}a.length>0&&this.$confirm("是否删除?").then(function(t){var i=(0,n.default)(document.querySelector("#mainForm"),{hash:!0});e.services.del({id:a}).then(function(t){e.getList(e.page.num,e.page.offset,i),e.getGroupList()}).catch(function(t){var a=t.payload;for(var i in a.messages){e.$message.error(a.messages[i]);break}})}).catch(function(t){})},clear:function(){document.getElementById("text").value=""},clear2:function(){document.getElementById("text2").value=""},clear3:function(){document.getElementById("text3").value=""}}}},784:function(t,e,a){"use strict";a.r(e);var i=a(785),n=a.n(i);for(var r in i)"default"!==r&&function(t){a.d(e,t,function(){return i[t]})}(r);e.default=n.a},785:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=d(a(3)),n=d(a(158)),r=(d(a(1087)),a(156)),s=o(a(27)),l=o(a(871));function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}function d(t){return t&&t.__esModule?t:{default:t}}e.default={props:["type","detailData","detailDialog"],created:function(){log("detail",this.detailData),this.detailData?(this.getDetail(),this.getMulu()):this.metadata=this.detailDataOwn.attributes},data:function(){return{services:l,detailDataOwn:{attributes:[]},metadata:[],ml:null,defaultProps:{children:"children",label:"chapter_name"},currMulu:null,previewImgUrl:null,imgUrl:null,file:null}},methods:{getDetail:function(){var t=this;l.detail({id:this.detailData.id}).then(function(e){log(111,e),t.detailDataOwn=e.data,e.data.attributes||(e.data.attributes=[]),t.metadata=e.data.attributes})},getMulu:function(){var t=this;l.getCatalog({id:this.detailData.id}).then(function(e){log("目录",e);var a=(0,r.recursionTree)(e.data,"pid","root");t.ml=a,t.currMulu=a})},handleClick:function(t,e){"ml"==t.name&&(this.currMulu=this.ml)},handleNodeClick:function(t,e,a){this.currMulu=e.data.children},muluSort:function(t,e,a){var i=this.currMulu;"up"===a?e>0&&(i.splice(e,1),i.splice(e-1,0,t)):(i.splice(e,1),i.splice(e+1,0,t)),l.siblingSort({id:t.id,sort:a}),log("发送请求",a)},addMetadata:function(){this.metadata.push({name:"",value:""})},delMetadata:function(t){this.metadata.splice(t,1)},submitDetail:function(){var t,e=(t=i.default.mark(function t(e){var a,n=this;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.$refs.detailForm.valiAll()){t.next=3;break}return t.abrupt("return");case 3:if(a=this.$progress(),t.prev=4,!this.imgFile){t.next=8;break}return t.next=8,s.getTask(this.imgFile).then(function(t){n.detailDataOwn.img=t.data.path});case 8:if(!this.detailDataOwn.id){t.next=11;break}return t.next=11,l.modify(this.detailDataOwn);case 11:this.$emit("detailBack",!0),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(4),this.$message.error("上传出错!");case 17:a.close();case 18:case"end":return t.stop()}},t,this,[[4,14]])}),function(){var e=t.apply(this,arguments);return new Promise(function(t,a){return function i(n,r){try{var s=e[n](r),l=s.value}catch(t){return void a(t)}if(!s.done)return Promise.resolve(l).then(function(t){i("next",t)},function(t){i("throw",t)});t(l)}("next")})});return function(t){return e.apply(this,arguments)}}(),submitMetadata:function(){},previewImg:function(t){var e=t.target.files[0];this.imgFile=e,log(1111111111),this.previewImgUrl=URL.createObjectURL(e)},previewBook:function(t){var e=t.target.files[0];this.file=e,dir(e,"file")},exportFile:function(){}},components:{VaForm:n.default}}},786:function(t,e,a){},787:function(t,e,a){},871:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.startStorage=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/api/mult_books",t)},e.modify=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,a=o(t,["id"]);return(0,n.request_put)(d({id:e}),a)},e.list=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)("/api/mult_books",t)},e.educe=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,l.educeResListener)({res_url:getFullPath("/api/mult_books/export"+qs.stringify(t,{addQueryPrefix:!0}))}),(0,n.request_get)("/api/mult_books/export",t)},e.del=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/api/mult_books/delete",t)},e.detail=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)(d(t))},e.getCatalog=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,a=o(t,["id"]);return(0,n.request_get)(c({id:e}),a)},e.deleteGroup=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id;o(t,["id"]);return log("del"),(0,n.request_delete)(u({id:e}))},e.modifyGroup=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,a=o(t,["id"]);return(0,n.request_put)(u({id:e}),a)},e.addGroup=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/api/mult_books/groups",t)},e.listGroup=function(){return(0,n.request_get)("/api/mult_books/groups")},e.moveGroup=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_put)("/api/groups/books",t)},e.siblingSort=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,a=o(t,["id"]);return(0,n.request_put)(p({id:e}),a)};var i,n=a(4),r=a(8),s=(i=r)&&i.__esModule?i:{default:i},l=a(83);function o(t,e){var a={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(a[i]=t[i]);return a}var d=s.default.compile("/api/mult_books/:id"),u=s.default.compile("/api/mult_books/groups/:id"),c=s.default.compile("/api/books/:id/catalogs"),p=s.default.compile("/api/catalogs/sort/:id")}}]);