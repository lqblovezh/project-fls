(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{1077:function(t,a,e){"use strict";e.r(a);var i=e(1185),s=e(769);for(var n in s)"default"!==n&&function(t){e.d(a,t,function(){return s[t]})}(n);e(1080);var o=e(0),r=Object(o.a)(s.default,i.a,i.b,!1,null,"3a6074ec",null);r.options.__file="detail.vue",a.default=r.exports},1078:function(t,a,e){"use strict";e.r(a);var i=e(1189),s=e(771);for(var n in s)"default"!==n&&function(t){e.d(a,t,function(){return s[t]})}(n);e(1079);var o=e(0),r=Object(o.a)(s.default,i.a,i.b,!1,null,"81a68ae0",null);r.options.__file="addConstitue.vue",a.default=r.exports},1079:function(t,a,e){"use strict";var i=e(773);e.n(i).a},1080:function(t,a,e){"use strict";var i=e(774);e.n(i).a},1081:function(t,a,e){"use strict";var i=e(775);e.n(i).a},1139:function(t,a,e){"use strict";var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"index clearfix"},[e("Top",{attrs:{currentPlant:"X-PUBLISH"}}),e("Menu",{attrs:{curr:"/digitalProductLibrary/book"}}),e("div",{staticClass:"mainRight"},[e("div",{staticClass:"contentWrap"},[e("div",{staticClass:"contentLeft"},[e("div",{staticClass:"maindata"},[e("div",{staticClass:"serachWrap"},[e("div",{staticClass:"title"}),e("form",{staticClass:"clearfix",attrs:{id:"mainForm"}},[t._m(0),t._m(1),t._m(2),e("span",{staticClass:"group-inline"},[e("TimePick",{attrs:{inputsName:["start_time","end_time"]}})],1),t._m(3),e("span",{staticClass:"group-inline form-content",class:t.showContent?"content-active":"content-default",on:{click:function(a){t.showContent=!t.showContent}}},[t._v("   筛选")]),t.showContent?e("span",{staticClass:"group-inline inputBoxs"},[e("input",{attrs:{type:"checkbox",value:"1",name:"type"}}),e("span",[t._v("阅读")]),e("input",{attrs:{type:"checkbox",value:"4",name:"type"}}),e("span",[t._v("音频")]),e("input",{attrs:{type:"checkbox",value:"3",name:"type"}}),e("span",[t._v("图片")]),e("input",{attrs:{type:"checkbox",value:"5",name:"type"}}),e("span",[t._v("视频")])]):t._e(),e("span",{staticClass:"group-inline float-right"},[e("el-button",{attrs:{size:"mediu",type:"primary",icon:"el-icon-search",plain:""},on:{click:t.query}},[t._v("搜索")]),e("el-button",{attrs:{size:"mediu",type:"primary",icon:"el-icon-plus",plain:""},on:{click:function(a){t.opneDetailDialogAdd("info",!0)}}},[t._v("新建")])],1)])]),e("div",{staticClass:"tableWrap"},[e("div",{staticClass:"tableTop"},[e("div",{staticClass:"title vel-line"},[e("span",[t._v("全部")]),e("div",{staticClass:"btns"},[e("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:t.urgentDigitalBook}},[t._v("加急审核")]),e("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:t.moveToOther}},[t._v("移动分组")]),e("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(a){t.delChoosen(!1)}}},[t._v("删除")])],1)])]),e("table",{staticClass:"table"},[e("thead",[e("tr",[e("th",{staticClass:"allBtn"},[e("input",{attrs:{type:"checkbox"},on:{click:function(a){t.checkAll(a)}}})]),e("th",[t._v("书名")]),e("th",[t._v("作者")]),e("th",[t._v("标签")]),e("th",{staticStyle:{width:"150px"}},[t._v("所含内容")]),e("th",{staticClass:"time"},[t._v("创建时间")]),e("th",{staticStyle:{width:"80px"}},[t._v("发布状态")]),e("th",{staticClass:"time"},[t._v("分发时间")]),e("th",{staticClass:"operate"},[t._v("操作")])])]),t.list?e("tbody",t._l(t.list,function(a){return e("tr",[e("th",[e("input",{ref:"ids",refInFor:!0,attrs:{type:"checkbox",name:"ids"},domProps:{value:a.id}})]),e("th",[e("img",{staticClass:"cover-photo",attrs:{src:a.img_src}}),e("div",{staticClass:"th-name bookName",attrs:{title:a.name}},[t._v(t._s(a.name))])]),e("th",[e("div",{staticClass:"th-name",attrs:{title:a.author}},[t._v(t._s(a.author))])]),e("th",[e("div",{staticClass:"th-name",attrs:{title:a.tag}},[t._v(t._s(a.tag))])]),e("th",[a.contents?e("ul",{staticClass:"mediaList"},[e("li",{class:{had:a.contents.book.count}},[t._v("阅读")]),e("li",{class:{had:a.contents.img.count}},[t._v("图片")]),e("li",{class:{had:a.contents.audio.count}},[t._v("音频")]),e("li",{class:{had:a.contents.video.count}},[t._v("视频")])]):t._e()]),e("th",[t._v(t._s(a.create_time))]),e("th",[e("div",{staticClass:"th-name",class:{"already-color":"3"==a.audits_status,"wait-color":"1"==a.audits_status,"danger-color":"2"==a.audits_status||"0"==a.audits_status}},[t._v(t._s(a.status))])]),e("th",[t._v(t._s(a.audits_time))]),e("th",[e("div",{staticClass:"btns"},[e("span",{staticClass:"icon icon-detail",attrs:{size:"mini",title:"详情",type:"primary",plain:""},on:{click:function(e){t.opneDetailDialog("info",a)}}}),e("span",{staticClass:"icon icon-data",attrs:{size:"mini",title:"元数据",type:"primary",plain:""},on:{click:function(e){t.opneDetailDialog("data",a)}}}),"1"!=a.audits_status?e("span",{staticClass:"icon icon-fenfa",attrs:{size:"mini",title:"分发",type:"primary",plain:""},on:{click:function(e){t.opnePublishDialog(a)}}}):t._e(),e("span",{staticClass:"icon icon-delete",attrs:{size:"mini",title:"删除",type:"primary",plain:""},on:{click:function(e){t.delChoosen(a.id)}}})])])])})):t._e()]),t.page?e("div",{staticClass:"pageWrap"},[e("el-pagination",{attrs:{small:!1,background:"","current-page":t.page.num,"page-sizes":[10,50,100],"page-size":t.page.offset,layout:"total, sizes,prev, pager, next, jumper",total:t.page.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1):t._e()]),e("div",{staticClass:"gruopList"},[e("GroupList",{attrs:{groupList:t.groupList,currGroup:t.currGroup},on:{addGroup:t.addGroup,updateGroup:t.updateGroup,delGroup:t.delGroup,groupChange:t.groupChange}})],1)])])])]),e("div",{staticClass:"dialogs"},[e("Examine",{attrs:{examineDialog:t.examineDialog},on:{"update:examineDialog":function(a){t.examineDialog=a},saveExamine:t.saveExamine}}),t.publishDialog?e("Dispense",{attrs:{publishDialog:t.publishDialog,item:t.detailData},on:{"update:publishDialog":function(a){t.publishDialog=a},dispenseOk:t.dispenseOk}}):t._e(),e("el-dialog",{attrs:{center:!1,visible:t.detailDialog,"close-on-click-modal":!1,top:"50px",width:"1000px"},on:{"update:visible":function(a){t.detailDialog=a}}},[e("div",{staticClass:"content",attrs:{slot:"title"},slot:"title"},[t.detailDialog?e("Detail",{attrs:{type:t.detailDialoaType,detailDialog:t.detailDialog,detailData:t.detailData},on:{detailBack:t.detailBack,"update:detailDialog":function(a){t.detailDialog=a}}}):t._e()],1)]),e("el-dialog",{attrs:{center:!1,visible:t.imgLinkDialog,"close-on-click-modal":!1,width:"800px"},on:{"update:visible":function(a){t.imgLinkDialog=a}}},[t.detailData?e("div",{staticClass:"content",attrs:{slot:"title"},slot:"title"},[e("div",{staticClass:"imgWrap"},[e("img",{attrs:{src:t.detailData.id,alt:"alt"}})]),e("div",{staticClass:"btns"},[e("el-button",[t._v("下载图片")]),e("el-button",{on:{click:function(a){t.copyLink("copy"+t.detailData.id)}}},[t._v("复制链接")]),e("input",{staticClass:"zhide",attrs:{id:"copy"+t.detailData.id},domProps:{value:t.detailData.id}})],1)]):t._e(),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(a){t.imgLinkDialog=!1}}},[t._v("返回")])],1)]),e("el-dialog",{attrs:{center:!1,visible:t.moveToOtherDiaolog,"close-on-click-modal":!1,title:"移动分组",width:"500px"},on:{"update:visible":function(a){t.moveToOtherDiaolog=a}}},[e("div",{staticClass:"group"},[e("div",{staticClass:"label"},[t._v("移动到")]),e("select",{ref:"moveToId",staticClass:"form-control",attrs:{placeholder:"请选择"}},t._l(t.groupList,function(a,i){return a.id!=t.currGroup&&""!=a.id?e("option",{domProps:{value:a.id,textContent:t._s(a.name)}}):t._e()}))]),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"info"},on:{click:function(a){t.moveToOtherDiaolog=!1}}},[t._v("返回")]),e("el-button",{attrs:{type:"primary"},on:{click:t.moveToSubmit}},[t._v(" 确定")])],1)])],1)],1)},s=[function(){var t=this.$createElement,a=this._self._c||t;return a("span",{staticClass:"group-inline"},[a("input",{staticClass:"form-control",attrs:{placeholder:"书名",name:"name"}})])},function(){var t=this.$createElement,a=this._self._c||t;return a("span",{staticClass:"group-inline"},[a("input",{staticClass:"form-control",attrs:{placeholder:"作者",name:"author"}})])},function(){var t=this.$createElement,a=this._self._c||t;return a("span",{staticClass:"group-inline"},[a("input",{staticClass:"form-control",attrs:{placeholder:"标签",name:"tag"}})])},function(){var t=this.$createElement,a=this._self._c||t;return a("span",{staticClass:"group-inline"},[a("select",{staticClass:"form-control",staticStyle:{width:"110px"},attrs:{placeholder:"状态",name:"status"}},[a("option",{attrs:{value:""}},[this._v("状态")]),a("option",{attrs:{value:"3"}},[this._v("已发布")]),a("option",{attrs:{value:"1"}},[this._v("待审核")]),a("option",{attrs:{value:"2"}},[this._v("审核未通过")]),a("option",{attrs:{value:"0"}},[this._v("未分发")])])])}];e.d(a,"a",function(){return i}),e.d(a,"b",function(){return s})},1185:function(t,a,e){"use strict";var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"div"},[e("div",{staticClass:"dialogs"},[e("el-dialog",{attrs:{visible:t.infoDialog,width:"70%","append-to-body":""},on:{"update:visible":function(a){t.infoDialog=a}}},[e("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[e("Info",{attrs:{type:t.infoValue,infoDialog:t.infoDialog,infoData:t.infoData},on:{infoClick:t.infoHandleClick}})],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"info"},on:{click:function(a){t.infoDialog=!1}}},[t._v("取消")])],1)]),e("el-dialog",{attrs:{center:!1,visible:t.detailAddDialog,"close-on-click-modal":!1,top:"50px",width:"1000px","append-to-body":"",title:"添加"},on:{"update:visible":function(a){t.detailAddDialog=a}}},[t.detailAddDialog?e("Add",{attrs:{type:t.currType,detailId:t.detailDataOwn.id,constitute:t.detailDataOwn.constitute},on:{cancleBack:function(a){t.detailAddDialog=!1},addback:t.addback}}):t._e()],1)],1),e("el-tabs",{attrs:{value:t.type},on:{"tab-click":t.handleClick}},[e("el-tab-pane",{attrs:{label:"详情",name:"info"}},[e("div",{staticClass:"div"},[e("VaForm",{ref:"detailForm"},[e("form",{staticClass:"detailForm"},[e("div",{staticClass:"group"},[e("div",{staticClass:"label"},[t._v("*名称:")]),e("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"},{name:"model",rawName:"v-model",value:t.detailDataOwn.name,expression:"detailDataOwn.name"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.detailDataOwn.name},on:{input:function(a){a.target.composing||t.$set(t.detailDataOwn,"name",a.target.value)}}})]),e("TypeMsg",{attrs:{detailDataOwn:t.detailDataOwn,name:"阅读"}}),e("div",{staticClass:"group"},[e("div",{staticClass:"label"},[t._v("作者:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.detailDataOwn.author,expression:"detailDataOwn.author"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.detailDataOwn.author},on:{input:function(a){a.target.composing||t.$set(t.detailDataOwn,"author",a.target.value)}}})]),e("div",{staticClass:"group"},[e("div",{staticClass:"label"},[t._v("标签:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.detailDataOwn.tag,expression:"detailDataOwn.tag"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.detailDataOwn.tag},on:{input:function(a){a.target.composing||t.$set(t.detailDataOwn,"tag",a.target.value)}}})]),e("div",{staticClass:"group"},[e("div",{staticClass:"label"},[t._v("简介:")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.detailDataOwn.abs,expression:"detailDataOwn.abs"}],staticClass:"textarea",attrs:{type:"text"},domProps:{value:t.detailDataOwn.abs},on:{input:function(a){a.target.composing||t.$set(t.detailDataOwn,"abs",a.target.value)}}})]),e("div",{staticClass:"group"},[e("div",{staticClass:"label"},[t._v("设置封面:")]),e("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){t.$refs.fenmian.click()}}},[t._v("导入")]),e("input",{ref:"fenmian",staticClass:"hide",attrs:{type:"file",accept:"image/jpeg,image/jpg,image/png"},on:{change:function(a){t.previewImg(a)}}})],1),e("div",{staticClass:"group"},[e("div",{staticClass:"label"}),e("img",{staticClass:"previewImgUrl",attrs:{src:t.previewImgUrl||t.detailDataOwn.img_src}})])],1)]),e("div",{staticClass:"group constiuteGroup"},[e("div",{staticClass:"label"},[t._v("图书构成:")]),e("span",{staticClass:"constiute"},[e("span",{staticClass:"li",class:{isCurrType:"1"==t.currType},on:{click:function(a){t.changeCurrType("1")}}},[t._v("阅读")]),e("span",{staticClass:"li",class:{isCurrType:"3"==t.currType},on:{click:function(a){t.changeCurrType("3")}}},[t._v("图片")]),e("span",{staticClass:"li",class:{isCurrType:"4"==t.currType},on:{click:function(a){t.changeCurrType("4")}}},[t._v("音频")]),e("span",{staticClass:"li",class:{isCurrType:"5"==t.currType},on:{click:function(a){t.changeCurrType("5")}}},[t._v(" 视频")])]),e("div",{staticClass:"btns"},[e("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:t.setTop}},[t._v("置顶")]),e("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:t.delConstituteAll}},[t._v("移除")]),e("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(a){t.detailAddDialog=!0}}},[t._v("添加")])],1)]),t.detailDataOwn?e("div",{staticClass:"tableWrap"},[e("table",{staticClass:"table"},[e("thead",[e("tr",[e("th",{staticClass:"table-check"},[e("input",{attrs:{type:"checkbox"},on:{click:function(a){t.checkedAll=!t.checkedAll}}})]),e("th",[t._v("标签")]),e("th",[t._v("类型")]),e("th",[t._v("创建时间")]),e("th",{directives:[{name:"show",rawName:"v-show",value:"1"!=t.currType,expression:"currType != '1' "}]},[t._v("调序")]),e("th",[t._v("操作")])])]),e("tbody",t._l(t.detailDataOwn.constitute,function(a,i){return a.type==t.currType?e("tr",[e("th",[e("input",{ref:"idsConstitute",refInFor:!0,attrs:{type:"checkbox",name:"ids"},domProps:{checked:t.checkedAll,value:i}})]),e("th",[e("div",{staticClass:"th-name"},[t._v(t._s(a.name))])]),e("th",[e("div",{staticClass:"th-name"},[t._v(t._s(a.type_name))])]),e("th",[e("div",{staticClass:"th-name"},[t._v(t._s(a.create_time))])]),e("th",{directives:[{name:"show",rawName:"v-show",value:"1"!=t.currType,expression:"currType != '1' "}]},[e("div",{staticClass:"icon el-icon-sort-up",attrs:{icon:"el-icon-sort-up",size:"mini"},on:{click:function(e){t.sortByType(a,i,"up")}}}),e("div",{staticClass:"icon el-icon-sort-down",attrs:{icon:"el-icon-sort-down",size:"mini"},on:{click:function(e){t.sortByType(a,i,"down")}}})]),e("th",[e("div",{staticClass:"th-name"},["1"==a.type?e("div",{staticClass:"icon icon-sync",attrs:{size:"mini",title:"同步信息",type:"primary",plain:""},on:{click:function(e){t.syncInfo(a)}}}):t._e(),e("div",{staticClass:"icon icon-detail",attrs:{size:"mini",title:"详情",type:"primary",plain:""},on:{click:function(e){t.bookDetailInfo(a,a.type,"info")}}}),e("div",{staticClass:"icon icon-data",attrs:{size:"mini",title:"元数据",type:"primary",plain:""},on:{click:function(e){t.bookDetailInfo(a,a.type,"data")}}}),e("div",{staticClass:"icon icon-delete",attrs:{size:"mini",type:"primary",title:"删除",plain:""},on:{click:function(a){t.delConstitute(i)}}})])])]):t._e()}))])]):t._e()],1),e("div",{staticClass:"btns"},[e("el-button",{attrs:{type:"info"},on:{click:function(a){t.$emit("update:detailDialog",!1)}}},[t._v("取消")]),e("el-button",{attrs:{type:"primary"},on:{click:function(a){t.submitDetail("detailForm")}}},[t._v("确定")])],1)]),e("el-tab-pane",{attrs:{label:"元数据",name:"data"}},[e("MetaData",{attrs:{metadata:t.metadata},on:{submit:t.submitDetail,back:function(a){t.$emit("update:detailDialog",!1)}}}),t.detailData?e("el-tab-pane",{attrs:{label:"知识点",name:"ml"}},[e("Knowledge",{attrs:{detailId:t.detailData.id,detailData:t.detailData},on:{knowback:function(a){t.$emit("update:detailDialog",!1)}}})],1):t._e()],1)],1)],1)},s=[];e.d(a,"a",function(){return i}),e.d(a,"b",function(){return s})},1189:function(t,a,e){"use strict";var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"div"},[e("div",{staticClass:"serachWrap"},[e("div",{staticClass:"title"}),e("form",{attrs:{id:"detailAddForm"}},[t._m(0),t._m(1),e("span",{staticClass:"group-inline"},[e("TimePick",{attrs:{inputsName:["start_time","end_time"]}})],1),e("span",{staticClass:"group-inline"},[e("el-button",{attrs:{size:"mediu",type:"primary",icon:"el-icon-search",plain:""},on:{click:t.query}},[t._v("搜索")])],1)])]),e("div",{staticClass:"tableWrap"},[e("table",{staticClass:"table"},[e("thead",[e("tr",[e("th",{staticClass:"table-check"},["1"!=t.type?e("input",{attrs:{type:"checkbox"},on:{click:t.checkedAll}}):t._e()]),e("th",[t._v("名称")]),e("th",[t._v("标签")]),e("th",[t._v("创建时间")])])]),e("tbody",t._l(t.list,function(a){return e("tr",[e("th",["1"!=t.type?e("input",{ref:"ids",refInFor:!0,attrs:{type:"checkbox",name:"ids"},domProps:{checked:t.hadData[a.id],value:a.id},on:{click:function(e){t.choose(e,a)}}}):t._e(),"1"==t.type?e("input",{ref:"ids",refInFor:!0,attrs:{type:"checkbox",name:"ids"},domProps:{checked:t.hadData[a.id],value:a.id},on:{click:function(e){t.chooseBook(e,a)}}}):t._e()]),e("th",[e("div",{staticClass:"th-name"},[t._v(t._s(a.name))])]),e("th",[e("div",{staticClass:"th-name"},[t._v(t._s(a.tag))])]),e("th",[e("div",{staticClass:"th-name"},[t._v(t._s(a.create_time))])])])}))]),t.page?e("div",{staticClass:"pageWrap"},[e("el-pagination",{attrs:{small:!1,background:"","current-page":1,"page-sizes":[10,50,100],"page-size":t.page.offset,layout:"total, prev, pager, next, jumper",total:t.page.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1):t._e()]),e("div",{staticClass:"btns"},[e("el-button",{on:{click:function(a){t.$emit("cancleBack")}}},[t._v("取消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.addCommit}},[t._v("确定")])],1)])},s=[function(){var t=this.$createElement,a=this._self._c||t;return a("span",{staticClass:"group-inline"},[a("input",{staticClass:"form-control",attrs:{placeholder:"名称",name:"name"}})])},function(){var t=this.$createElement,a=this._self._c||t;return a("span",{staticClass:"group-inline"},[a("input",{staticClass:"form-control",attrs:{placeholder:"标签",name:"tag"}})])}];e.d(a,"a",function(){return i}),e.d(a,"b",function(){return s})},344:function(t,a,e){"use strict";e.r(a);var i=e(1139),s=e(767);for(var n in s)"default"!==n&&function(t){e.d(a,t,function(){return s[t]})}(n);e(1081);var o=e(0),r=Object(o.a)(s.default,i.a,i.b,!1,null,"0b0932f8",null);r.options.__file="index.vue",a.default=r.exports},362:function(t,a,e){"use strict";e.r(a);var i=e(363),s=e.n(i);for(var n in i)"default"!==n&&function(t){e.d(a,t,function(){return i[t]})}(n);a.default=s.a},363:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default={props:["groupList","currGroup"],data:function(){return{newGroupDialogOpen:!1,updateGroupDialogOpen:!1,currEditGroup:null}},created:function(){},computed:{},methods:{groupChange:function(t){this.$emit("groupChange",t)},addGroupDialog:function(){},delGroup:function(t){var a=this;this.$confirm("是否删除分组:"+t.name).then(function(e){dir(e),a.$emit("delGroup",t.id)}).catch(function(t){dir(t)})},updateGroupDialog:function(t){this.updateGroupDialogOpen=!0,this.currEditGroup=t},addGroup:function(){if(this.$refs.addGroupForm.valiAll()){var t=document.querySelector("#addGroupForm");this.$emit("addGroup",t),this.newGroupDialogOpen=!1}},updateGroup:function(){if(this.$refs.updateGroupForm.valiAll()){var t=document.querySelector("#updateGroupForm");this.$emit("updateGroup",t),this.updateGroupDialogOpen=!1}}}}},364:function(t,a,e){},365:function(t,a,e){"use strict";e.r(a);var i=e(370),s=e(362);for(var n in s)"default"!==n&&function(t){e.d(a,t,function(){return s[t]})}(n);e(366);var o=e(0),r=Object(o.a)(s.default,i.a,i.b,!1,null,"176cd962",null);r.options.__file="GroupList.vue",a.default=r.exports},366:function(t,a,e){"use strict";var i=e(364);e.n(i).a},367:function(t,a,e){"use strict";e.r(a);var i=e(368),s=e.n(i);for(var n in i)"default"!==n&&function(t){e.d(a,t,function(){return i[t]})}(n);a.default=s.a},368:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e(122),s=e(123);a.default={mixins:[i.getIconStyle],props:{publishDialog:{type:Boolean,default:!1},item:{type:Object,default:{}},is_release:Boolean},data:function(){return{list:null,coverDialog:!1,choiceDialog:!1,currentItem:null,currentVersion:null}},created:function(){this.getList()},methods:{getList:function(){var t=this;(0,s.getDispense)({entity_type:this.item.type_number||this.item.type,id:this.item.id}).then(function(a){t.list=a.data}).catch(function(a){var e=a.payload;for(var i in e.messages){t.$message.error(e.messages[i]);break}})},colse:function(){this.$emit("update:publishDialog",!1)},save:function(){var t=[];this.$refs.dispense.querySelectorAll("input[type=checkbox]:checked").forEach(function(a){t.push(a.value)}),t.length?this.$emit("dispenseSave",t):this.$message.error("请选择你要发布的平台")},pushTime:function(t){return t?"最近"+t+"发布过":"最近暂无分发"},push:function(t){var a=this;this.currentItem=t,this.is_release&&t.release_msg.length?this.$confirm("信息不全是否分发?").then(function(e){t.version?a.coverDialog=!0:a.dispense()},function(t){var a=t.payload;log(a.message)}).catch(function(t){log("cancel")}):t.version&&t.version.length?this.coverDialog=!0:this.dispense()},dispense:function(t,a){var e=this;(0,s.dispense)({platform_id:this.currentItem.id,audits_id:this.item.audits_id,is_cover:t,version_id:a}).then(function(t){e.$message.success("分发提交成功,请稍后查看结果!"),e.$emit("dispenseOk")}).catch(function(t){var a=t.payload;for(var i in a.messages){e.$message.error(a.messages[i]);break}})},getdefect:function(t){return"缺失字段: "+t.release_msg.join("/")},getBtnName:function(t){return this.is_release&&!t.is_release?"缺少关键信息不能分发":t.release_msg&&t.release_msg.length?"确认分发":"分发"},coverDispense:function(){var t=this;if(!this.currentVersion)return this.$message.warning("请选择你要覆盖的版本号!");var a=this.currentItem.version.find(function(a){return a.xread_book_id===t.currentVersion}).version_id;this.dispense(this.currentVersion,a)}}}},369:function(t,a,e){},370:function(t,a,e){"use strict";var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"div"},[e("div",{staticClass:"groupWrap"},[e("div",{staticClass:"list"},[e("ul",t._l(t.groupList,function(a){return e("li",{staticClass:"licontent",class:{red:a.id==t.currGroup}},[e("div",{staticClass:"name ellipsis",attrs:{title:a.name+"("+a.num+")"},on:{click:function(e){t.groupChange(a.id)}}},[e("span",{staticClass:"title"},[t._v(t._s(a.name))]),e("span",[t._v(t._s("("+a.num+")"))])]),""!=a.id&&"non"!=a.id?e("div",{staticClass:"btns"},[e("span",{on:{click:function(e){t.updateGroupDialog(a)}}},[e("i",{staticClass:"el-icon-edit"})]),e("span",{on:{click:function(e){t.delGroup(a)}}},[e("i",{staticClass:"el-icon-delete"})])]):t._e()])}))]),e("div",{staticClass:"addGroupBtnWrap"},[e("el-button",{attrs:{type:"primary",plain:""},on:{click:function(a){t.newGroupDialogOpen=!0}}},[e("i",{staticClass:"el-icon-plus"},[t._v("新建分组")])])],1)]),e("div",{staticClass:"dialogs"},[t.newGroupDialogOpen?e("el-dialog",{attrs:{title:"新增",visible:t.newGroupDialogOpen,width:"500px"},on:{"update:visible":function(a){t.newGroupDialogOpen=a}}},[e("div",{staticClass:"formWrap"},[e("VaForm",{ref:"addGroupForm"},[e("form",{attrs:{id:"addGroupForm"}},[e("div",{staticClass:"group"},[e("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"}],staticClass:"form-control",attrs:{name:"name"}})])])])],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"info"},on:{click:function(a){t.newGroupDialogOpen=!1}}},[t._v("取消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.addGroup}},[t._v("确定")])],1)]):t._e(),t.updateGroupDialogOpen?e("el-dialog",{attrs:{title:"修改",visible:t.updateGroupDialogOpen,width:"500px"},on:{"update:visible":function(a){t.updateGroupDialogOpen=a}}},[e("div",{staticClass:"formWrap"},[e("VaForm",{ref:"updateGroupForm"},[t.currEditGroup?e("form",{attrs:{id:"updateGroupForm"}},[e("div",{staticClass:"group"},[e("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"}],staticClass:"form-control",attrs:{name:"name"},domProps:{value:t.currEditGroup.name}}),e("input",{staticClass:"hide",attrs:{name:"id"},domProps:{value:t.currEditGroup.id}})])]):t._e()])],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"info"},on:{click:function(a){t.updateGroupDialogOpen=!1}}},[t._v("取消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.updateGroup}},[t._v("确定")])],1)]):t._e()],1)])},s=[];e.d(a,"a",function(){return i}),e.d(a,"b",function(){return s})},376:function(t,a,e){"use strict";e.r(a);var i=e(378),s=e(367);for(var n in s)"default"!==n&&function(t){e.d(a,t,function(){return s[t]})}(n);e(377);var o=e(0),r=Object(o.a)(s.default,i.a,i.b,!1,null,"1fd5a38b",null);r.options.__file="Dispense.vue",a.default=r.exports},377:function(t,a,e){"use strict";var i=e(369);e.n(i).a},378:function(t,a,e){"use strict";var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("el-dialog",{attrs:{center:!1,visible:t.coverDialog,top:"50px",width:"500px","show-close":!1,title:"x-read系统中已有该产品，选择你的操作"}},[e("div",{staticClass:"coverContent"},[e("el-button",{attrs:{type:"primary"},on:{click:function(a){t.choiceDialog=!0}}},[t._v("覆盖原有产品")]),e("el-button",{attrs:{type:"primary"},on:{click:function(a){t.dispense()}}},[t._v("创建新的产品版本")])],1),e("div",{staticClass:"footer dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"info"},on:{click:function(a){t.coverDialog=!1}}},[t._v("取消")])],1)]),t.choiceDialog?e("el-dialog",{attrs:{center:!1,visible:t.choiceDialog,top:"50px",width:"500px","show-close":!1,title:"选择版本号"}},[e("div",{staticClass:"coverContent"},[e("el-radio-group",{model:{value:t.currentVersion,callback:function(a){t.currentVersion=a},expression:"currentVersion"}},t._l(t.currentItem.version,function(a){return e("el-radio",{key:a.xread_book_id,attrs:{label:a.xread_book_id}},[t._v(t._s(a.version_id))])}))],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:t.coverDispense}},[t._v("确定")]),e("el-button",{attrs:{type:"info"},on:{click:function(a){t.choiceDialog=!1}}},[t._v("取消")])],1)]):t._e(),e("el-dialog",{attrs:{center:!1,visible:t.publishDialog,top:"50px",width:"1000px","show-close":!1}},[e("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[e("div",{staticClass:"el-icon-close",on:{click:t.colse}}),e("el-tabs",{attrs:{value:"ff"}},[e("el-tab-pane",{attrs:{label:"分发",name:"ff"}})],1)],1),e("ul",{ref:"dispense",staticClass:"content modular"},t._l(t.list,function(a){return e("li",[e("div",{staticClass:"icon"},[e("div",{class:t.getStyle(a.type)}),e("span",{domProps:{textContent:t._s(a.name)}})]),e("ul",{staticClass:"defect"},[a.release_msg&&!a.release_msg.length?e("li",{staticClass:"pass"},[t._v("可正常分发")]):t._e(),a.release_msg&&a.release_msg.length?e("li",{domProps:{textContent:t._s(t.getdefect(a))}}):t._e()]),e("el-button",{attrs:{type:!t.is_release||a.is_release?"primary":"info",size:"mini",plain:""},domProps:{textContent:t._s(t.getBtnName(a))},on:{click:function(e){(!t.is_release||a.is_release)&&t.push(a)}}})],1)})),e("div",{staticClass:"footer dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"info"},on:{click:t.colse}},[t._v("取消")])],1)])],1)},s=[];e.d(a,"a",function(){return i}),e.d(a,"b",function(){return s})},386:function(t,a,e){"use strict";e.r(a);var i=e(387),s=e.n(i);for(var n in i)"default"!==n&&function(t){e.d(a,t,function(){return i[t]})}(n);a.default=s.a},387:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});e(156),s(e(82)),function(t){if(t&&t.__esModule)return t;var a={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e]);a.default=t}(e(408));var i=s(e(407));function s(t){return t&&t.__esModule?t:{default:t}}a.default={props:["type","infoData","infoDialog","isAuthor"],data:function(){return{readerDialog:!1,readerId:null}},computed:{detailType:function(){return this.infoData.img_status},hassVideo:function(){return 6==this.infoData.type||5==this.infoData.type||8==this.infoData.type}},methods:{handleClick:function(t,a){this.$emit("infoClick",t)},openReader:function(t){log(t),this.readerId=t.b_id,this.readerDialog=!0}},components:{Reader:i.default}}},388:function(t,a,e){},430:function(t,a,e){"use strict";e.r(a);var i=e(480),s=e(386);for(var n in s)"default"!==n&&function(t){e.d(a,t,function(){return s[t]})}(n);e(478);var o=e(0),r=Object(o.a)(s.default,i.a,i.b,!1,null,"1f2d0f19",null);r.options.__file="info.vue",a.default=r.exports},478:function(t,a,e){"use strict";var i=e(388);e.n(i).a},480:function(t,a,e){"use strict";var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"div"},[e("div",{staticClass:"dialogs"},[t.readerDialog?e("Reader",{attrs:{readerDialog:t.readerDialog,readerId:t.readerId,version:"draft"},on:{"update:readerDialog":function(a){t.readerDialog=a}}}):t._e()],1),e("el-tabs",{attrs:{value:t.type},on:{"tab-click":t.handleClick}},[e("el-tab-pane",{attrs:{label:"详情",name:"info"}},[e("div",{staticClass:"div"},[e("form",{ref:"infoForm",staticClass:"infoForm"},[e("div",{staticClass:"group"},[e("div",{staticClass:"label"},[t._v("名称:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.infoData.name,expression:"infoData.name"}],staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.infoData.name},on:{input:function(a){a.target.composing||t.$set(t.infoData,"name",a.target.value)}}})]),e("div",{staticClass:"group"},[e("div",{staticClass:"label"},[t._v("类型:")]),e("span",{staticClass:"types"},[e("span",[t._v(" "+t._s(t.infoData.type_name))]),e("span",[t._v(" 创建时间: "+t._s(t.infoData.create_time))])])]),t.isAuthor?t._e():e("div",{staticClass:"group"},[e("div",{staticClass:"label"},[t._v("作者:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.infoData.author,expression:"infoData.author"}],staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.infoData.author},on:{input:function(a){a.target.composing||t.$set(t.infoData,"author",a.target.value)}}})]),e("div",{staticClass:"group"},[e("div",{staticClass:"label"},[t._v("标签:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.infoData.tag,expression:"infoData.tag"}],staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.infoData.tag},on:{input:function(a){a.target.composing||t.$set(t.infoData,"tag",a.target.value)}}})]),e("div",{staticClass:"group"},[e("div",{staticClass:"label"},[t._v("简介:")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.infoData.abs,expression:"infoData.abs"}],staticClass:"textarea",attrs:{type:"text",disabled:""},domProps:{value:t.infoData.abs},on:{input:function(a){a.target.composing||t.$set(t.infoData,"abs",a.target.value)}}})]),e("div",{staticClass:"group"},[e("div",{staticClass:"label"},[t._v("详情:")]),1==t.infoData.type?e("el-button",{attrs:{title:"预览",size:"mini",type:"primary",plain:""},on:{click:function(a){t.openReader(t.infoData)}}},[t._v("预览")]):t._e()],1),t.detailType&&3!=t.infoData.type?e("div",{staticClass:"group wailianinput"},[e("div",{staticClass:"label"}),e("span",[e("input",{ref:"otherImgInput",staticClass:"form-control",attrs:{disabled:""},domProps:{value:t.infoData.preview}})])]):t._e(),t.hassVideo||4==t.infoData.type?e("div",{staticClass:"group detailmain wailian"},[e("div",{staticClass:"label"}),e("span",{staticClass:"wrap"},[t.hassVideo?e("video",{attrs:{src:t.infoData.preview,controls:""}}):t._e(),4==t.infoData.type?e("audio",{attrs:{src:t.infoData.preview,controls:""}}):t._e(),e("span",{staticClass:"msg"},[e("div",{staticClass:"type"},[t._v("格式:"),e("span",{staticClass:"val",domProps:{textContent:t._s(t.infoData.format)}})]),e("div",{staticClass:"size"},[t._v("大小:"),e("span",{staticClass:"val",domProps:{textContent:t._s((t.infoData.size/1024).toFixed(2)+"KB")}})])])])]):t._e(),e("div",{staticClass:"group detailmain"},[e("div",{staticClass:"label"}),e("span",{staticClass:"wrap"},[e("img",{staticClass:"coverImg",attrs:{src:t.infoData.img_src||t.infoData.img}}),3==t.infoData.type?e("img",{staticClass:"coverImg",attrs:{src:t.infoData.preview}}):t._e()])]),10==t.infoData.type?e("div",{staticClass:"group"},[e("table",{staticClass:"table border",attrs:{width:"100%"}},[e("thead",[e("tr",[e("th",[t._v("名称")]),e("th",[t._v("标签")]),e("th",[t._v("作者")]),e("th",[t._v("发布时间")])])]),e("tbody",t._l(t.infoData.constitute,function(a,i){return e("tr",[e("td",{domProps:{textContent:t._s(a.name)}}),e("td",{domProps:{textContent:t._s(a.tag)}}),e("td",{domProps:{textContent:t._s(a.author)}}),e("td",{domProps:{textContent:t._s(a.create_time)}})])}))])]):t._e()])])]),e("el-tab-pane",{attrs:{label:"元数据",name:"data"}},[e("div",{staticClass:"meta"},t._l(t.infoData.attributes,function(a,i){return t.infoData?e("div",{staticClass:"group rowWrap"},[e("div",{staticClass:"label",domProps:{textContent:t._s(i+1)}}),e("span",{staticClass:"form-control left",domProps:{textContent:t._s(a.key)}}),e("span",{staticClass:"form-control right",domProps:{textContent:t._s(a.value)}})]):t._e()}))])],1)],1)},s=[];e.d(a,"a",function(){return i}),e.d(a,"b",function(){return s})},767:function(t,a,e){"use strict";e.r(a);var i=e(768),s=e.n(i);for(var n in i)"default"!==n&&function(t){e.d(a,t,function(){return i[t]})}(n);a.default=s.a},768:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=Object.assign||function(t){for(var a=1;a<arguments.length;a++){var e=arguments[a];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},s=p(e(82)),n=p(e(376)),o=p(e(155)),r=p(e(154)),l=p(e(365)),c=p(e(1077)),u=e(122),d=function(t){if(t&&t.__esModule)return t;var a={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e]);return a.default=t,a}(e(379));function p(t){return t&&t.__esModule?t:{default:t}}a.default={mixins:[u.main],components:{Menu:o.default,Top:r.default,GroupList:l.default,Detail:c.default,Dispense:n.default},data:function(){return{services:d,list:null,page:null,groupList:null,detailDialog:!1,detailDialoaType:"info",detailData:null,timePick:null,imgLinkDialog:!1,publishDialog:!1,moveToOtherDiaolog:!1,moveIds:null,toId:null,showContent:!1}},methods:{getList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.page&&this.page.num||1,a=this,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.page&&this.page.offset||10,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;d.listDigitalBook(i({pageNum:t,pageOffset:e,group_id:this.currGroup},s)).then(function(t){a.list=t.data,a.page=t.page})},urgentDigitalBook:function(){for(var t=this,a=this.getChecked(),e=0,i=a.length;e<i;e++)for(var s=0,n=this.list.length;s<n;s++)if(this.list[s].id==a[e]&&1!=this.list[s].audits_status)return void this.$message.error("只能勾选待审核数据");a&&this.services.urgentDigitalBook({id:a}).then(function(a){return t.$message.success("已提交加急审核")})},opneDetailDialogAdd:function(t){this.detailDialog=!0,this.detailDialoaType=t,this.detailData=null,this.metadata=null},opnePublishDialog:function(t){this.detailData=t,this.publishDialog=!0},exportSomething:function(t){log("导出操作!")},delChoosens:function(t){var a=this,e=[];if(log(t),t)e.push(t);else{var i=Array.from(document.querySelectorAll('input[name="ids"]:checked'));if(i.forEach(function(t){e.push(t.value)}),!i.length)return void this.$message.error("请先选中!")}e.length>0&&this.$confirm("是否删除?").then(function(t){var i=(0,s.default)(document.querySelector("#mainForm"),{hash:!0});a.services.deleteDigitalBook({id:e}).then(function(t){a.getList(a.page.num,a.page.offset,i),a.getGroupList()})}).catch(function(t){})}}}},769:function(t,a,e){"use strict";e.r(a);var i=e(770),s=e.n(i);for(var n in i)"default"!==n&&function(t){e.d(a,t,function(){return i[t]})}(n);a.default=s.a},770:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=f(e(3)),s=Object.assign||function(t){for(var a=1;a<arguments.length;a++){var e=arguments[a];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},n=f(e(1078)),o=f(e(402)),r=f(e(430)),l=(e(156),e(27)),c=p(l),u=p(e(379)),d=p(e(390));function p(t){if(t&&t.__esModule)return t;var a={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e]);return a.default=t,a}function f(t){return t&&t.__esModule?t:{default:t}}a.default={components:{Add:n.default,Knowledge:o.default,Info:r.default},props:["type","detailData","detailDialog"],created:function(){var t=this;this.detailData&&this.detailData.id?(log("查询元数据, 目录 , 数据本地化"),u.detailDigitalBook({id:this.detailData.id}).then(function(a){log(a),t.detailDataOwn=a.data,t.metadata=a.data.attributes||[]})):this.metadata=this.detailDataOwn.attributes},data:function(){return{detailDataOwn:{img_status:!1,attributes:[],constitute:[]},metadata:[],ml:null,defaultProps:{children:"children",label:"name"},currMulu:null,previewImgUrl:null,imgUrl:null,currType:"1",checkedAll:!1,detailAddDialog:!1,infoDialog:!1,infoValue:"info",infoData:{}}},methods:{test2:function(){},syncInfo:function(t){var a=this;(0,l.synchronization)({id:t.b_id?t.b_id:t.id}).then(function(t){t.data.constitute=a.detailDataOwn.constitute,a.detailDataOwn=t.data,a.metadata=a.detailDataOwn.attributes}).catch(function(t){var e=t.payload;a.$message.error(e.messages[0])})},handleClick:function(t,a){},handleNodeClick:function(t,a,e){this.currMulu=a.data.children},muluSort:function(t,a,e){var i=this.currMulu;"up"===e?a>0&&(i.splice(a,1),i.splice(a-1,0,t)):(i.splice(a,1),i.splice(a+1,0,t)),log("发送请求",e)},addMetadata:function(){this.metadata.push({key:"",value:""})},delMetadata:function(t){this.metadata.splice(t,1)},submitDetail:function(){var t,a=(t=i.default.mark(function t(a){var e,n=this;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.$refs.detailForm.valiAll()){t.next=3;break}return t.abrupt("return");case 3:if(e=this.$progress(),t.prev=4,!this.imgFile){t.next=8;break}return t.next=8,c.getTask(this.imgFile).then(function(t){n.detailDataOwn.img=t.data.path});case 8:if(!this.detailData){t.next=13;break}return t.next=11,u.modify(s({},this.detailDataOwn,{id:this.detailData.id}));case 11:t.next=15;break;case 13:return t.next=15,u.add(this.detailDataOwn);case 15:this.$emit("detailBack",!0),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(4),this.$message.error("上传出错!");case 21:this.$emit("detailBack",!0),e.close();case 23:case"end":return t.stop()}},t,this,[[4,18]])}),function(){var a=t.apply(this,arguments);return new Promise(function(t,e){return function i(s,n){try{var o=a[s](n),r=o.value}catch(t){return void e(t)}if(!o.done)return Promise.resolve(r).then(function(t){i("next",t)},function(t){i("throw",t)});t(r)}("next")})});return function(t){return a.apply(this,arguments)}}(),submitMetadata:function(){},previewImg:function(t){var a=t.target.files[0];this.imgFile=a,this.previewImgUrl=URL.createObjectURL(a)},sortByType:function(t,a,e){log(t,a,e);var i=this.detailDataOwn.constitute,s=null,n=!0,o=a;if("up"==e){for(;n;){if(!i[--o]){n=!1;break}if(i[o].type===t.type){n=!1;s=o}}log(s,a)}else for(;n;){if(!i[++o]){n=!1;break}if(i[o].type===t.type){n=!1;s=o}}if(null!==s){log("change",i[s],i[a]);var r=i[s];i.splice(s,1,i[a]),i.splice(a,1,r)}log(this.detailDataOwn.constitute)},changeCurrType:function(t){this.currType=t},addback:function(t){var a=t.arr;this.detailAddDialog=!1,log("返回",t);var e=this.detailDataOwn.constitute,i=!1;e.forEach(function(t,a){"1"==t.type&&(i=a)}),t.book&&(!1!==i?e[i]=t.book:(log("没书"),a.push(t.book))),log(a),this.detailDataOwn.constitute=e.concat(a),log("this",this.detailDataOwn.constitute)},setTop:function(){var t=this.getChecked("idsConstitute");if(t){var a=this.detailDataOwn.constitute,e=[];t.forEach(function(t){e.push(a[t]),a[t]=null}),e.reverse(),this.detailDataOwn.constitute=e.concat(a).filter(function(t){return t})}},delConstitute:function(t){this.detailDataOwn.constitute.splice(t,1)},delConstituteAll:function(){var t=this.getChecked("idsConstitute");if(t){log(t);var a=this.detailDataOwn.constitute;t.forEach(function(t){a[t]=null}),this.detailDataOwn.constitute=a.filter(function(t){return t})}},getChecked:function(t){if(void 0==t)throw new Error("获取选中,请先传入ref");var a=[];return this.$refs[t].forEach(function(t){t.checked&&a.push(t.value)}),a.length>0?a:(this.$message.error("请先选中"),!1)},infoHandleClick:function(t){this.infoValue=t.name},bookDetailInfo:function(t,a,e){var i=this,s=t.id,n=t.c_id;d._themeDetail({c_id:n,id:s,type:a}).then(function(t){i.infoData=t.data,i.infoValue=e,i.infoDialog=!0}).catch(function(t){var a=t.payload;for(var e in a.messages){i.$message.error(a.messages[e]);break}})}}}},771:function(t,a,e){"use strict";e.r(a);var i=e(772),s=e.n(i);for(var n in i)"default"!==n&&function(t){e.d(a,t,function(){return i[t]})}(n);a.default=s.a},772:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i,s=Object.assign||function(t){for(var a=1;a<arguments.length;a++){var e=arguments[a];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},n=e(82),o=(i=n)&&i.__esModule?i:{default:i},r=function(t){if(t&&t.__esModule)return t;var a={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e]);return a.default=t,a}(e(379));a.default={components:{},props:["type","constitute","detailId"],created:function(){if(log(this.type),this.getList(),this.constitute){var t={};this.constitute.forEach(function(a){t[a.id]=a}),this.choosenData={},this.hadData=t,log("has",t)}},data:function(){return{services:r,list:[],page:null,book:null,hadData:{},choosenData:{},timePick:null}},computed:{},methods:{getList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.page&&this.page.num||1,a=this,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.page&&this.page.offset||10,i=arguments[2];this.services._addBooks(s({pageNum:t,pageOffset:e,type:this.type},i)).then(function(t){a.list=t.data,a.page=t.page})},checkedAll:function(t){var a=this;this.$refs.ids.forEach(function(e){e.checked=t.target.checked,a.list.forEach(function(e){a.hadData[e.id]||(t.target.checked?a.choosenData[e.id]=e:a.choosenData[e.id]=null)})}),log(this.choosenData)},choose:function(t,a){t.target.checked?this.hadData[a.id]||(this.choosenData[a.id]=a):this.choosenData[a.id]=null,log(this.choosenData)},chooseBook:function(t,a){t.target.checked?(this.uncheckedAll("ids"),t.target.checked=!0,this.book=a):this.book=null,log(this.choosenData)},query:function(){this.getList(1,this.page.offset,(0,o.default)(document.querySelector("#detailAddForm"),{hash:!0}))},uncheckedAll:function(t){this.$refs[t].forEach(function(t){return t.checked=!1})},addCommit:function(){var t=this.getRes();log(t),this.$emit("addback",t)},getRes:function(){var t=[];for(var a in this.choosenData)this.choosenData.hasOwnProperty(a)&&this.choosenData[a]&&this.choosenData[a].type==this.type&&t.push(this.choosenData[a]);return{arr:t,book:this.book}},handleSizeChange:function(t){var a=(0,o.default)(document.querySelector("#detailAddForm"),{hash:!0});this.getList(1,t,a)},handleCurrentChange:function(t){this.getList(t)}}}},773:function(t,a,e){},774:function(t,a,e){},775:function(t,a,e){}}]);