(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{1076:function(t,e,a){"use strict";var i=a(766);a.n(i).a},1140:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"index clearfix"},[a("Top",{attrs:{currentPlant:"X-PUBLISH"}}),a("Menu",{attrs:{curr:"/digitalProductLibrary/release"}}),a("div",{staticClass:"mainRight"},[a("div",{staticClass:"contentWrap"},[a("div",{staticClass:"contentLeft"},[a("div",{staticClass:"maindata"},[a("div",{staticClass:"serachWrap"},[a("div",{staticClass:"title"}),a("form",{staticClass:"clearfix",attrs:{id:"mainForm"}},[a("span",{staticClass:"group-inline"},[a("el-input",{attrs:{placeholder:"书籍名称",name:"name",clearable:""}})],1),a("span",{staticClass:"group-inline"},[a("el-input",{attrs:{placeholder:"ISBN",name:"book_isbn",clearable:""}})],1),a("span",{staticClass:"group-inline"},[a("el-input",{attrs:{placeholder:"作者",name:"author",clearable:""}})],1),a("span",{staticClass:"group-inline"},[a("select",{staticClass:"form-control",staticStyle:{width:"110px"},attrs:{placeholder:"分发平台",name:"platforms"}},[a("option",{attrs:{value:""}},[t._v("分发平台")]),a("option",{attrs:{value:"x_read"}},[t._v("XRead")]),t.$config.isShowRetailers?a("option",{attrs:{value:"ecommerce"}},[t._v("电商平台")]):t._e()])]),a("span",{staticClass:"group-inline"},[a("TimePick",{attrs:{inputsName:["start_time","end_time"]}})],1),t._m(0),a("span",{staticClass:"group-inline right"},[a("el-button",{attrs:{size:"mediu",type:"primary",icon:"el-icon-search",plain:""},on:{click:t.query}},[t._v("搜索")]),a("el-button",{attrs:{size:"mediu",type:"primary",icon:"el-icon-plus"},on:{click:function(e){t.opneDetailDialog("info")}}},[t._v("新建")])],1)])]),a("div",{staticClass:"tableWrap"},[a("div",{staticClass:"tableTop"},[a("div",{staticClass:"title vel-line"},[a("span",[t._v("全部 "),t.page?a("span",{staticClass:"totalNum"},[t._v("("+t._s(t.page.total)+")")]):t._e()]),a("div",{staticClass:"btns"},[a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){t.audits()}}},[t._v("审核")]),a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:t.urgentDigitalBook}},[t._v("加急审核")]),a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:t.moveToOther}},[t._v("移动分组")]),a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){t.delChoosen(!1)}}},[t._v("删除")])],1)])]),a("table",{staticClass:"table"},[a("thead",[a("tr",[a("th",{staticClass:"allBtn"},[a("input",{attrs:{type:"checkbox"},on:{click:function(e){t.checkAll(e)}}})]),a("th",[t._v("名称")]),a("th",[t._v("ISBN")]),a("th",[t._v("作者")]),a("th",{staticStyle:{width:"150px"}},[t._v("可分发平台")]),a("th",{attrs:{width:"70"}},[t._v("审核状态")]),a("th",{attrs:{width:"70"}},[t._v("分发状态")]),a("th",{staticClass:"time"},[t._v("分发时间")]),a("th",{staticClass:"operate"},[t._v("操作")])])]),t.list?a("tbody",t._l(t.list,function(e){return a("tr",[a("td",[a("input",{ref:"ids",refInFor:!0,attrs:{type:"checkbox",name:"ids","data-type":e.status},domProps:{value:e.id}})]),a("td",[a("img",{staticClass:"cover-photo",attrs:{src:e.img_src}}),a("div",{staticClass:"th-name bookName",attrs:{title:e.name}},[t._v(t._s(e.name))])]),a("td",[a("div",{staticClass:"th-name",attrs:{title:e.book_isbn}},[t._v(t._s(e.book_isbn))])]),a("td",[a("div",{staticClass:"th-name",attrs:{title:e.author}},[t._v(t._s(e.author))])]),a("td",[a("ul",{staticClass:"contList"},t._l(e.platforms,function(i,s){return!e.platforms||"retailer"!=s||t.$config.isShowRetailers?a("li",[a("span",{class:{disabled:0==i},domProps:{textContent:t._s("retailer"==s?"电商平台":s)}})]):t._e()}))]),a("td",{class:t.getColor(e.status)},[t._v(t._s(e.status))]),a("td",[t._v(t._s(e.release_status_name||"-"))]),a("td",[t._v(t._s(e.release_time||"-"))]),a("td",[a("div",{staticClass:"btns"},[a("span",{staticClass:"icon icon-detail",attrs:{size:"mini",title:"详情",type:"primary",plain:""},on:{click:function(a){t.opneDetailDialog("info",e)}}}),1!=e.audits_status?a("span",{staticClass:"icon icon-publish",attrs:{size:"mini",title:"审核",type:"primary",plain:""},on:{click:function(a){t.audits(e.id)}}}):t._e(),3==e.audits_status?a("span",{staticClass:"icon icon-fenfa",attrs:{size:"mini",title:"分发",type:"primary",plain:""},on:{click:function(a){t.opnePublishDialog(e)}}}):t._e(),1!=e.audits_status?a("span",{staticClass:"icon icon-delete",attrs:{size:"mini",title:"删除",type:"primary",plain:""},on:{click:function(a){t.delChoosen(e.id)}}}):t._e()])])])})):t._e()]),t.page?a("div",{staticClass:"pageWrap"},[a("el-pagination",{attrs:{small:!1,background:"","current-page":t.page.num,"page-sizes":[10,50,100],"page-size":t.page.offset,layout:"total, sizes,prev, pager, next, jumper",total:t.page.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1):t._e()]),a("div",{staticClass:"gruopList"},[a("GroupList",{attrs:{groupList:t.groupList,currGroup:t.currGroup},on:{addGroup:t.addGroup,updateGroup:t.updateGroup,delGroup:t.delGroup,groupChange:t.groupChange}})],1)])])])]),a("div",{staticClass:"dialogs"},[a("Examine",{attrs:{examineDialog:t.examineDialog},on:{"update:examineDialog":function(e){t.examineDialog=e},saveExamine:t.saveExamine}}),t.publishDialog?a("Dispense",{attrs:{publishDialog:t.publishDialog,item:t.detailData,is_release:!0},on:{"update:publishDialog":function(e){t.publishDialog=e},dispenseOk:t.dispenseOk}}):t._e(),a("el-dialog",{staticClass:"no-footer",attrs:{center:!1,visible:t.detailDialog,"close-on-click-modal":!1,"before-close":t.handleClose,top:"50px",width:"1200px"},on:{"update:visible":function(e){t.detailDialog=e}}},[a("div",{staticClass:"content",attrs:{slot:"title"},slot:"title"},[t.detailDialog?a("Detail",{attrs:{type:t.detailDialoaType,detailDialog:t.detailDialog,detailData:t.detailData,readOnly:t.readOnly},on:{saveok:t.saveOk,Knowledgeclick:t.KnowledgeClick,"update:detailDialog":function(e){t.detailDialog=e}}}):t._e()],1)]),a("el-dialog",{attrs:{center:!1,visible:t.moveToOtherDiaolog,"close-on-click-modal":!1,title:"移动分组",width:"500px"},on:{"update:visible":function(e){t.moveToOtherDiaolog=e}}},[a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("移动到")]),a("select",{ref:"moveToId",staticClass:"form-control",attrs:{placeholder:"请选择"}},t._l(t.groupList,function(e,i){return e.id!=t.currGroup&&""!=e.id?a("option",{domProps:{value:e.id,textContent:t._s(e.name)}}):t._e()}))]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info"},on:{click:function(e){t.moveToOtherDiaolog=!1}}},[t._v("返回")]),a("el-button",{attrs:{type:"primary"},on:{click:t.moveToSubmit}},[t._v(" 确定")])],1)])],1)],1)},s=[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"group-inline"},[e("select",{staticClass:"form-control",staticStyle:{width:"110px"},attrs:{name:"audits_status"}},[e("option",{attrs:{value:""}},[this._v("审核状态")]),e("option",{attrs:{value:"0"}},[this._v("未审核")]),e("option",{attrs:{value:"1"}},[this._v("待审核")]),e("option",{attrs:{value:"2"}},[this._v("未通过")]),e("option",{attrs:{value:"3"}},[this._v("已通过")])])])}];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return s})},343:function(t,e,a){"use strict";a.r(e);var i=a(1140),s=a(764);for(var o in s)"default"!==o&&function(t){a.d(e,t,function(){return s[t]})}(o);a(1076);var r=a(0),n=Object(r.a)(s.default,i.a,i.b,!1,null,"e6cbdd46",null);n.options.__file="index.vue",e.default=n.exports},362:function(t,e,a){"use strict";a.r(e);var i=a(363),s=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(e,t,function(){return i[t]})}(o);e.default=s.a},363:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["groupList","currGroup"],data:function(){return{newGroupDialogOpen:!1,updateGroupDialogOpen:!1,currEditGroup:null}},created:function(){},computed:{},methods:{groupChange:function(t){this.$emit("groupChange",t)},addGroupDialog:function(){},delGroup:function(t){var e=this;this.$confirm("是否删除分组:"+t.name).then(function(a){dir(a),e.$emit("delGroup",t.id)}).catch(function(t){dir(t)})},updateGroupDialog:function(t){this.updateGroupDialogOpen=!0,this.currEditGroup=t},addGroup:function(){if(this.$refs.addGroupForm.valiAll()){var t=document.querySelector("#addGroupForm");this.$emit("addGroup",t),this.newGroupDialogOpen=!1}},updateGroup:function(){if(this.$refs.updateGroupForm.valiAll()){var t=document.querySelector("#updateGroupForm");this.$emit("updateGroup",t),this.updateGroupDialogOpen=!1}}}}},364:function(t,e,a){},365:function(t,e,a){"use strict";a.r(e);var i=a(370),s=a(362);for(var o in s)"default"!==o&&function(t){a.d(e,t,function(){return s[t]})}(o);a(366);var r=a(0),n=Object(r.a)(s.default,i.a,i.b,!1,null,"176cd962",null);n.options.__file="GroupList.vue",e.default=n.exports},366:function(t,e,a){"use strict";var i=a(364);a.n(i).a},367:function(t,e,a){"use strict";a.r(e);var i=a(368),s=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(e,t,function(){return i[t]})}(o);e.default=s.a},368:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(122),s=a(123);e.default={mixins:[i.getIconStyle],props:{publishDialog:{type:Boolean,default:!1},item:{type:Object,default:{}},is_release:Boolean},data:function(){return{list:null,coverDialog:!1,choiceDialog:!1,currentItem:null,currentVersion:null}},created:function(){this.getList()},methods:{getList:function(){var t=this;(0,s.getDispense)({entity_type:this.item.type_number||this.item.type,id:this.item.id}).then(function(e){t.list=e.data}).catch(function(e){var a=e.payload;for(var i in a.messages){t.$message.error(a.messages[i]);break}})},colse:function(){this.$emit("update:publishDialog",!1)},save:function(){var t=[];this.$refs.dispense.querySelectorAll("input[type=checkbox]:checked").forEach(function(e){t.push(e.value)}),t.length?this.$emit("dispenseSave",t):this.$message.error("请选择你要发布的平台")},pushTime:function(t){return t?"最近"+t+"发布过":"最近暂无分发"},push:function(t){var e=this;this.currentItem=t,this.is_release&&t.release_msg.length?this.$confirm("信息不全是否分发?").then(function(a){t.version?e.coverDialog=!0:e.dispense()},function(t){var e=t.payload;log(e.message)}).catch(function(t){log("cancel")}):t.version&&t.version.length?this.coverDialog=!0:this.dispense()},dispense:function(t,e){var a=this;(0,s.dispense)({platform_id:this.currentItem.id,audits_id:this.item.audits_id,is_cover:t,version_id:e}).then(function(t){a.$message.success("分发提交成功,请稍后查看结果!"),a.$emit("dispenseOk")}).catch(function(t){var e=t.payload;for(var i in e.messages){a.$message.error(e.messages[i]);break}})},getdefect:function(t){return"缺失字段: "+t.release_msg.join("/")},getBtnName:function(t){return this.is_release&&!t.is_release?"缺少关键信息不能分发":t.release_msg&&t.release_msg.length?"确认分发":"分发"},coverDispense:function(){var t=this;if(!this.currentVersion)return this.$message.warning("请选择你要覆盖的版本号!");var e=this.currentItem.version.find(function(e){return e.xread_book_id===t.currentVersion}).version_id;this.dispense(this.currentVersion,e)}}}},369:function(t,e,a){},370:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"div"},[a("div",{staticClass:"groupWrap"},[a("div",{staticClass:"list"},[a("ul",t._l(t.groupList,function(e){return a("li",{staticClass:"licontent",class:{red:e.id==t.currGroup}},[a("div",{staticClass:"name ellipsis",attrs:{title:e.name+"("+e.num+")"},on:{click:function(a){t.groupChange(e.id)}}},[a("span",{staticClass:"title"},[t._v(t._s(e.name))]),a("span",[t._v(t._s("("+e.num+")"))])]),""!=e.id&&"non"!=e.id?a("div",{staticClass:"btns"},[a("span",{on:{click:function(a){t.updateGroupDialog(e)}}},[a("i",{staticClass:"el-icon-edit"})]),a("span",{on:{click:function(a){t.delGroup(e)}}},[a("i",{staticClass:"el-icon-delete"})])]):t._e()])}))]),a("div",{staticClass:"addGroupBtnWrap"},[a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){t.newGroupDialogOpen=!0}}},[a("i",{staticClass:"el-icon-plus"},[t._v("新建分组")])])],1)]),a("div",{staticClass:"dialogs"},[t.newGroupDialogOpen?a("el-dialog",{attrs:{title:"新增",visible:t.newGroupDialogOpen,width:"500px"},on:{"update:visible":function(e){t.newGroupDialogOpen=e}}},[a("div",{staticClass:"formWrap"},[a("VaForm",{ref:"addGroupForm"},[a("form",{attrs:{id:"addGroupForm"}},[a("div",{staticClass:"group"},[a("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"}],staticClass:"form-control",attrs:{name:"name"}})])])])],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info"},on:{click:function(e){t.newGroupDialogOpen=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.addGroup}},[t._v("确定")])],1)]):t._e(),t.updateGroupDialogOpen?a("el-dialog",{attrs:{title:"修改",visible:t.updateGroupDialogOpen,width:"500px"},on:{"update:visible":function(e){t.updateGroupDialogOpen=e}}},[a("div",{staticClass:"formWrap"},[a("VaForm",{ref:"updateGroupForm"},[t.currEditGroup?a("form",{attrs:{id:"updateGroupForm"}},[a("div",{staticClass:"group"},[a("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"}],staticClass:"form-control",attrs:{name:"name"},domProps:{value:t.currEditGroup.name}}),a("input",{staticClass:"hide",attrs:{name:"id"},domProps:{value:t.currEditGroup.id}})])]):t._e()])],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info"},on:{click:function(e){t.updateGroupDialogOpen=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.updateGroup}},[t._v("确定")])],1)]):t._e()],1)])},s=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return s})},375:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getList=function(t){var e=t.type,a=t.id,i=t.resource_type;if("book"==e)return h({id:a});if("video"==e)return _({id:a});if("resource"==e)return C({id:a,resource_type:i})},e.del=function(t){var e=t.type,a=n(t,["type"]);if("book"==e)return g(a);if("video"==e)return y(a);if("resource"==e)return D(a);if("audio"==e)return x(a)},e.add=function(t){var e=t.type,a=n(t,["type"]);if("book"==e)return g(a);if("video"==e)return b(a);if("resource"==e)return k(a)},e.check=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.request_get)(v(t))},e.bookList=h,e.bookInfo=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.request_get)(l(t))},e.bookDel=g,e.bookSave=function(t){var e=t.id,a=n(t,["id"]);if(e)return(0,s.request_put)(l({id:e}),a);return(0,s.request_post)("/api/components_paper",a)},e.videoList=_,e.videoAdd=b,e.videoDel=y,e.resourceList=C,e.resourceAdd=k,e.resourceDel=D,e.groupList=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.request_get)(p(t),t)},e.groupSave=function(t){var e=t.id,a=n(t,["id"]);if(e)return(0,s.request_put)(f({id:e}),a);return(0,s.request_post)("/api/components_groups",a)},e.groupDetail=function(t){var e=t.id;return(0,s.request_get)(f({id:e}))},e.audioDel=x,e.saveEBook=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.current_id)return(0,s.request_put)(m({id:t.current_id}),t);return(0,s.request_post)("/api/components_ebooks",t)},e.getEBook=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.request_get)(m(t))};var i,s=a(4),o=a(8),r=(i=o)&&i.__esModule?i:{default:i};function n(t,e){var a={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(a[i]=t[i]);return a}var l=r.default.compile("/api/components_paper/:id"),u=r.default.compile("/api/components_paper/:id/list"),c=r.default.compile("/api/components/:id/video"),d=r.default.compile("/api/components/:id/resource"),p=r.default.compile("/api/components_groups/:id/list"),f=r.default.compile("/api/components_groups/:id"),v=r.default.compile("/api/components_paper/:id/check"),m=r.default.compile("/api/components_ebooks/:id");function h(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.request_get)(u(t))}function g(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.request_delete)(l(t))}function _(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.request_get)(c(t))}function b(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.request_post)("/api/components/video",t)}function y(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.request_delete)(c({id:t.constitute_id}))}function C(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.request_get)(d(t),t)}function k(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.request_post)("/api/components/resource",t)}function D(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.request_delete)(d({id:t.constitute_id}))}function x(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.request_delete)(f(t),t)}},376:function(t,e,a){"use strict";a.r(e);var i=a(378),s=a(367);for(var o in s)"default"!==o&&function(t){a.d(e,t,function(){return s[t]})}(o);a(377);var r=a(0),n=Object(r.a)(s.default,i.a,i.b,!1,null,"1fd5a38b",null);n.options.__file="Dispense.vue",e.default=n.exports},377:function(t,e,a){"use strict";var i=a(369);a.n(i).a},378:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{attrs:{center:!1,visible:t.coverDialog,top:"50px",width:"500px","show-close":!1,title:"x-read系统中已有该产品，选择你的操作"}},[a("div",{staticClass:"coverContent"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.choiceDialog=!0}}},[t._v("覆盖原有产品")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dispense()}}},[t._v("创建新的产品版本")])],1),a("div",{staticClass:"footer dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info"},on:{click:function(e){t.coverDialog=!1}}},[t._v("取消")])],1)]),t.choiceDialog?a("el-dialog",{attrs:{center:!1,visible:t.choiceDialog,top:"50px",width:"500px","show-close":!1,title:"选择版本号"}},[a("div",{staticClass:"coverContent"},[a("el-radio-group",{model:{value:t.currentVersion,callback:function(e){t.currentVersion=e},expression:"currentVersion"}},t._l(t.currentItem.version,function(e){return a("el-radio",{key:e.xread_book_id,attrs:{label:e.xread_book_id}},[t._v(t._s(e.version_id))])}))],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.coverDispense}},[t._v("确定")]),a("el-button",{attrs:{type:"info"},on:{click:function(e){t.choiceDialog=!1}}},[t._v("取消")])],1)]):t._e(),a("el-dialog",{attrs:{center:!1,visible:t.publishDialog,top:"50px",width:"1000px","show-close":!1}},[a("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[a("div",{staticClass:"el-icon-close",on:{click:t.colse}}),a("el-tabs",{attrs:{value:"ff"}},[a("el-tab-pane",{attrs:{label:"分发",name:"ff"}})],1)],1),a("ul",{ref:"dispense",staticClass:"content modular"},t._l(t.list,function(e){return a("li",[a("div",{staticClass:"icon"},[a("div",{class:t.getStyle(e.type)}),a("span",{domProps:{textContent:t._s(e.name)}})]),a("ul",{staticClass:"defect"},[e.release_msg&&!e.release_msg.length?a("li",{staticClass:"pass"},[t._v("可正常分发")]):t._e(),e.release_msg&&e.release_msg.length?a("li",{domProps:{textContent:t._s(t.getdefect(e))}}):t._e()]),a("el-button",{attrs:{type:!t.is_release||e.is_release?"primary":"info",size:"mini",plain:""},domProps:{textContent:t._s(t.getBtnName(e))},on:{click:function(a){(!t.is_release||e.is_release)&&t.push(e)}}})],1)})),a("div",{staticClass:"footer dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info"},on:{click:t.colse}},[t._v("取消")])],1)])],1)},s=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return s})},380:function(t,e,a){"use strict";a.r(e);var i=a(381),s=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(e,t,function(){return i[t]})}(o);e.default=s.a},381:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["infoData","mediaType","infoDialog"],data:function(){return{metadata:this.infoData.attributes||[]}},computed:{hassVideo:function(){return 6==this.infoData.type||5==this.infoData.type||8==this.infoData.type}},methods:{detailType:function(){return this.infoData.img_status}},created:function(){}}},382:function(t,e,a){},383:function(t,e,a){"use strict";a.r(e);var i=a(384),s=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(e,t,function(){return i[t]})}(o);e.default=s.a},384:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,s=a(82),o=((i=s)&&i.__esModule,function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}(a(375)));e.default={props:["dataType","isShow","detailData","defaultList","isLabelHide","onlyShow"],data:function(){return{services:o,type:"1",list:[]}},created:function(){this.defaultList?this.list=this.defaultList:this.getList(this.dataType)},computed:{},methods:function(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}({handleClick:function(){},getList:function(t){var e=this;this.detailData&&this.detailData.id&&this.services.getList({type:t,id:this.detailData.id,resource_type:this.type}).then(function(t){e.list=t.data})}},"handleClick",function(t){log(t)}),watch:{defaultList:function(){this.list=this.defaultList},type:function(t){this.getList(this.dataType)}}}},385:function(t,e,a){},391:function(t,e,a){"use strict";a.r(e);var i=a(481),s=a(383);for(var o in s)"default"!==o&&function(t){a.d(e,t,function(){return s[t]})}(o);a(476);var r=a(0),n=Object(r.a)(s.default,i.a,i.b,!1,null,"68ca030c",null);n.options.__file="tab.vue",e.default=n.exports},396:function(t,e,a){"use strict";a.r(e);var i=a(397),s=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(e,t,function(){return i[t]})}(o);e.default=s.a},397:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}(a(375)),r=a(391),n=(i=r)&&i.__esModule?i:{default:i};e.default={components:{Tab:n.default},props:{groupDialog:{type:Boolean,default:!1},detailData:Object,item:{type:Object,default:{}},isMedia:{type:Number,default:1},onlyShow:Boolean,defaultData:Object},data:function(){return{information:{},list:[],addMediaType:"4"}},created:function(){Object.entries(this.item).length&&this.defaultData,this.information=this.item,this.list=this.item.children||[],2==this.isMedia&&(this.addMediaType="5")},computed:{setTitle:function(){return Object.entries(this.item).length?this.item.name||"修改组":"新增组"}},methods:{getInfo:function(){var t=this;o.groupDetail({id:this.item.id,type:this.isMedia}).then(function(e){t.information=e.data,t.list=e.data.constitute}).catch(function(e){var a=e.payload;for(var i in a.messages){t.$message.error(a.messages[i]);break}})},update:function(t){this.list=t},colse:function(){this.$emit("update:groupDialog",!1)},save:function(){var t=this;this.$refs.detailForm.valiAll()&&o.groupSave(s({id:this.item?this.item.id:""},this.information,{product_id:this.detailData.id,type:this.isMedia,constitute:this.list})).then(function(e){log(e),t.$message.success("保存成功"),t.$emit("save"),t.colse()}).catch(function(e){var a=e.payload;for(var i in a.messages){t.$message.error(a.messages[i]);break}})},del:function(t){var e=this.list.findIndex(function(e){return e.id===t.id});e>-1&&this.list.splice(e,1)}}}},398:function(t,e,a){},399:function(t,e,a){"use strict";a.r(e);var i=a(400),s=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(e,t,function(){return i[t]})}(o);e.default=s.a},400:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}(a(375));e.default={props:{detailData:Object,media:{type:Number,default:1},readOnly:{type:Boolean,default:!1},defaultData:Array},data:function(){return{audioList:[]}},created:function(){this.detailData&&this.detailData.id&&this.getAudio(),this.defaultData&&(this.audioList=this.defaultData)},computed:{},methods:{getAudio:function(){var t=this;s.groupList({id:this.detailData.id,type:this.media}).then(function(e){t.audioList=e.data})},del:function(t,e){var a=this,o=null,r=null;"object"==i(t.children)?o=t.id:(o=e.parent.data.id,r=t.id),log(o),s.audioDel({id:o,resource_id:r,product_id:this.detailData.id}).then(function(t){a.getAudio()})}}}},401:function(t,e,a){},405:function(t,e,a){"use strict";a.r(e);var i=a(482),s=a(380);for(var o in s)"default"!==o&&function(t){a.d(e,t,function(){return s[t]})}(o);a(474);var r=a(0),n=Object(r.a)(s.default,i.a,i.b,!1,null,"f62c4482",null);n.options.__file="contentDetail.vue",e.default=n.exports},409:function(t,e,a){"use strict";a.r(e);var i=a(410),s=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(e,t,function(){return i[t]})}(o);e.default=s.a},410:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});!function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);e.default=t}(a(379));var i=r(a(517)),s=r(a(402)),o=r(a(521));function r(t){return t&&t.__esModule?t:{default:t}}e.default={components:{Info:i.default,Structure:o.default,Knowledge:s.default},props:["type","detailData","detailDialog","readOnly","defaultData"],created:function(){},data:function(){return{}},computed:{},methods:{handleClick:function(t,e){this.activeName=t.name}}}},411:function(t,e,a){"use strict";a.r(e);var i=a(412),s=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(e,t,function(){return i[t]})}(o);e.default=s.a},412:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=l(a(3)),s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},o=(l(a(82)),function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}(a(27))),r=a(518),n=a(736);function l(t){return t&&t.__esModule?t:{default:t}}function u(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,a){return function i(s,o){try{var r=e[s](o),n=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(n).then(function(t){i("next",t)},function(t){i("throw",t)});t(n)}("next")})}}e.default={props:["detailData","readOnly","defaultData"],data:function(){return{information:{},previewImgUrl:null,retailers:{clc_category:"",clc_category_id:"",cp_category:"",cp_category_id:"",describe:"",editor_recommend:"",book_directory:""},xRead:{},activeName:"1",keyWord:"",title:"作者",metadata:[],creatAuthorInfo:{},choiceDialog:!1,creatDialog:!1,authorList:[],authorInfo:{},authorOptions:[],authorValue:[],translatorOptions:[],translatorValue:[],out_print:"2",have_print:"2"}},created:function(){this.detailData&&Object.entries(this.detailData).length&&this.getInfo(),this.defaultData&&this.setInfo(),this.init()},computed:{detailType:function(){return this.infoData.img_status},hassVideo:function(){return 6==this.infoData.type||5==this.infoData.type||8==this.infoData.type},gauthorList:function(){return this.authorList}},methods:{init:function(){var t=this;this.searchAuthor=(0,n.debounce)(function(){return t.getAuthors()},500)},setInfo:function(){this.information=this.xRead=this.defaultData.base||{},this.metadata=this.defaultData.attributes||[],this.retailers=this.defaultData.retailers||{},this.setEbookInfo()},getInfo:function(){var t=this;(0,r.getInfo)({id:this.detailData.id}).then(function(e){t.information=e.data,t.retailers=e.data.retailers,t.xRead=e.data["x-read"],t.metadata=e.data.pro_attributes,t.setEbookInfo()})},setEbookInfo:function(){this.out_print=this.retailers.out_print||"2",this.have_print=this.retailers.have_print||"2";var t=this.retailers.author?this.retailers.author.split(","):[],e=this.retailers.author_id?this.retailers.author_id.split(","):[],a=this.retailers.translator?this.retailers.translator.split(","):[],i=this.retailers.translator_id?this.retailers.translator_id.split(","):[];this.authorOptions=t.map(function(t,a){var i={};return i.value=e[a],i.label=t,i}),this.translatorOptions=a.map(function(t,e){var a={};return a.value=i[e],a.label=t,a}),this.authorValue=e,this.translatorValue=i},handleClick:function(t,e){this.$emit("infoClick",t)},previewImg:function(t,e){var a=t.target.files[0];this.imgFile=a,this.previewImgUrl=URL.createObjectURL(a)},addAuthor:function(t){this.title=t,this.keyWord="",this.authorList=[],this.choiceDialog=!0},choiceAuthor:function(){var t=this,e="作者"==this.title?"author":"translator",a=document.querySelector(".authorListForm").querySelectorAll('input[name="ids"]:checked');a.length||this.$message.warning("请选择你要添加的"+this.title);var i=!0,s=!1,o=void 0;try{for(var r,n=function(){var a=r.value;if(t[e+"Options"].find(function(t){return a.value==t.value}))return"continue";t[e+"Options"].push({value:a.value,label:a.getAttribute("label")}),t[e+"Value"].push(a.value)},l=a[Symbol.iterator]();!(i=(r=l.next()).done);i=!0)n()}catch(t){s=!0,o=t}finally{try{!i&&l.return&&l.return()}finally{if(s)throw o}}this.$message.success("添加"+this.title+"成功!")},saveAuthor:function(){var t=u(i.default.mark(function t(){var e=this;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return log(1),t.next=3,o.addAuthor({author_name:this.creatAuthorInfo.name}).then(function(t){e.$message.success("创建成功")}).catch(function(t){e.$message.error(t.messages)});case 3:this.creatDialog=!1;case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),searchAuthor:function(){log(11)},getAuthors:function(){var t=this;log(this.title),o.getAuthor({author_name:this.keyWord}).then(function(e){t.authorList=e.data,log(t.authorList)})},creatAuthor:function(){this.creatAuthorInfo={},this.creatDialog=!0},syncInfo:function(t){var e=this;this.$refs.isbn.value&&o.synchronization({id:this.$refs.isbn.value}).then(function(t){log(t);var a=t.data,i=a.bookname,s=a.writer,o=a.isbn,r=a.bookcatalog,n=a.majorword,l=a.bookbrief,u=a.readership,c=a.editornote,d=(a.price,a.price_min,a.weight,a.bookcategory),p=a.bookcategory2;e.information={name:i,book_isbn:o,abs:l},e.xRead={tag:"",author:s},e.retailers={subject_terms:n,target_audience:u,clc_category:d,cp_category:p,describe:l,editor_recommend:c,book_directory:r}}).catch(function(t){var a=t.payload;for(var i in a.messages){e.$message.error(a.messages[i]);break}})},submitDetail:function(){var t=u(i.default.mark(function t(){var e,a,n,l,u=this;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.$refs.fenmian.files[0],this.$refs.detailForm.valiAll()){t.next=4;break}return t.abrupt("return");case 4:if(a=this.$loading({text:"正在上传",background:"rgba(0, 0, 0, 0.8)"}),t.prev=5,!e){t.next=9;break}return t.next=9,o.getTask(e).then(function(t){u.information.img=t.data.path});case 9:return t.next=11,(0,r.save)(s({id:this.detailData.id},this.information)).then(function(t){u.$message.success("保存成功"),a.close(),u.$emit("saveok",t.data)});case 11:t.next=24;break;case 13:t.prev=13,t.t0=t.catch(5),n=t.t0.payload,a.close(),t.t1=i.default.keys(n.messages);case 18:if((t.t2=t.t1()).done){t.next=24;break}return l=t.t2.value,this.$message.error(n.messages[l]),t.abrupt("break",24);case 24:case"end":return t.stop()}},t,this,[[5,13]])}));return function(){return t.apply(this,arguments)}}(),submitInfo:function(){var t=u(i.default.mark(function t(){var e,a,n,l=this;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.$refs.detailForm.valiAll()){t.next=3;break}return t.abrupt("return");case 3:if(e=this.$refs.fenmian.files[0],a=this.$loading({text:"正在上传",background:"rgba(0, 0, 0, 0.8)"}),n=s({},this.information,{pro_attributes:this.metadata,attributes:{xRead:s({},this.xRead),eCommerce:s({},this.retailers,{author_id:this.authorValue.join(","),translator_id:this.translatorValue.join(","),author:this.authorOptions.map(function(t){if(l.authorValue.indexOf(t.value)>-1)return t.label}).filter(function(t){if(t)return t}).join(","),translator:this.translatorOptions.map(function(t){if(l.translatorValue.indexOf(t.value)>-1)return t.label}).filter(function(t){if(t)return t}).join(","),out_print:this.have_print,have_print:this.have_print})}}),!e){t.next=9;break}return t.next=9,o.getTask(e).then(function(t){n.img=t.data.path});case 9:return t.next=11,(0,r.save)(n).then(function(t){l.detailData.id||(l.information=t.data),a.close(),l.$message.success("操作成功!"),l.$emit("saveok",t.data)}).catch(function(t){a.close(),l.$message({message:t.message||"错误!",type:"error"})});case 11:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}}},413:function(t,e,a){},414:function(t,e,a){"use strict";a.r(e);var i=a(415),s=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(e,t,function(){return i[t]})}(o);e.default=s.a},415:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=_(a(3)),s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=_(a(82)),n=g(a(375)),l=g(a(379)),u=_(a(405)),c=a(390),d=_(a(402)),p=_(a(522)),f=_(a(524)),v=_(a(475)),m=_(a(391)),h=_(a(477));function g(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}function _(t){return t&&t.__esModule?t:{default:t}}function b(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,a){return function i(s,o){try{var r=e[s](o),n=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(n).then(function(t){i("next",t)},function(t){i("throw",t)});t(n)}("next")})}}e.default={props:["detailData","readOnly","defaultData"],components:{Tab:m.default,Book:p.default,Group:v.default,ContentDetail:u.default,EBook:f.default,Audio:h.default,Knowledge:d.default},data:function(){return{type:"book",soucesType:"1",audioInfo:{},detailAddDialog:!1,bookDialog:!1,groupDialog:!1,infoDialog:!1,currentItem:{},curSoucesList:{},dataList:[],page:null,infoData:{},mediaType:null,optional:[],singleElection:!0,defaultBList:null,defaultEList:null,defaultAList:null,defaultVList:null,defaultRList:null}},created:function(){this.detailData&&this.detailData.id&&this.check(),this.defaultData&&(this.defaultBList=this.defaultData.structure.book,this.defaultEList=this.defaultData.structure.ebooks[0],this.defaultAList=this.defaultData.structure.audios,this.defaultVList=this.defaultData.structure.videos,this.defaultRList=this.defaultData.structure.resources)},computed:{isShowBtn:function(){return this.optional.length>0}},methods:{handleClick:function(t){this.type=t.name},check:function(){var t=this;this.detailData&&n.check({id:this.detailData.id}).then(function(e){t.optional=e.data})},getAudio:function(){var t=this;n.groupList({id:this.detailData.id,type:"1"}).then(function(e){t.audioList=e.data})},detail:function(t,e){"book"!=this.type?"audio"!=this.type||"object"!=(void 0===e?"undefined":o(e))?this.bookDetailInfo(t,t.type):this.addVideo(t):this.addBook(t)},del:function(t,e){var a=this;n.del(s({},t,{type:this.type})).then(function(t){a.getList()})},bookDetailInfo:function(t,e,a){var i=this,s=t.id,o=t.c_id;(0,c._themeDetail)({c_id:o,id:s,type:e}).then(function(t){i.infoData=t.data,i.infoDialog=!0}).catch(function(t){var e=t.payload;for(var a in e.messages){i.$message.error(e.messages[a]);break}})},getList:function(){this.$refs[this.type].getList(this.type),this.check()},query:function(){var t=(0,r.default)(document.querySelector("#detailSearchForm"),{hash:!0});this.getAddList(1,this.page.offset,t)},openResources:function(){var t=b(i.default.mark(function t(e){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.singleElection=!0,this.soucesType=e,this.dataList=[],this.page=null,"audio"==this.type?this.curSoucesList=this.$refs.group.list:"e-book"==this.type?(this.singleElection=!1,this.curSoucesList=[]):this.curSoucesList=this.$refs[this.type].list,t.next=7,this.getAddList();case 7:this.detailAddDialog=!0;case 8:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),getAddList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.page&&this.page.num||1,e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.page&&this.page.offset||10,i=arguments[2],o=this.soucesType,r=this.$refs.resource.type;if(14==o)switch(r){case"1":o="3";break;case"2":o="5";break;case"3":o="4";break;default:o="3"}l._addBooks(s({pageNum:t,pageOffset:a,type:o},i)).then(function(t){e.dataList=t.data,e.page=t.page})},addBook:function(){var t=b(i.default.mark(function t(e){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.check();case 2:this.currentItem=e||{},this.bookDialog=!0;case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),addVideo:function(t){if(this.detailData&&!this.detailData.id)return this.$message.error("请保存产品信息后再做添加");t||(this.curSoucesList=[]),this.currentItem=t||{},this.groupDialog=!0},saveOk:function(){this.bookDialog=!1,this.getList()},handleSizeChange:function(t){var e=(0,r.default)(document.querySelector("#detailSearchForm"),{hash:!0});this.getAddList(1,t,e)},handleCurrentChange:function(t){var e=(0,r.default)(document.querySelector("#detailSearchForm"),{hash:!0});this.getAddList(t,this.page.offset,e)},isChecked:function(t){return this.curSoucesList.findIndex(function(e){return e.id===t})>-1},checkAll:function(t,e){document.querySelector("."+e).querySelectorAll('input[name="ids"]').forEach(function(e,a){e.checked=t.target.checked})},addSelection:function(){var t=b(i.default.mark(function t(){var e,a,o,r,l,u,c,d,p=this;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.detailData.id){t.next=2;break}return t.abrupt("return",this.$message.error("请保存产品信息后再做添加"));case 2:if(e=document.querySelector(".addBookForm"),(a=e.querySelectorAll('input[name="ids"]:checked')).length){t.next=6;break}return t.abrupt("return",this.$message.warning("请选择添加内容"));case 6:o=!0,r=!1,l=void 0,t.prev=9,u=function(){var t=d.value;if(p.curSoucesList.findIndex(function(e){return e.id==t.value})>-1)return"continue";p.curSoucesList.push(s({},p.dataList.find(function(e){return e.id==t.value}),{action:"add"}))},c=a[Symbol.iterator]();case 12:if(o=(d=c.next()).done){t.next=19;break}if("continue"!==u()){t.next=16;break}return t.abrupt("continue",16);case 16:o=!0,t.next=12;break;case 19:t.next=25;break;case 21:t.prev=21,t.t0=t.catch(9),r=!0,l=t.t0;case 25:t.prev=25,t.prev=26,!o&&c.return&&c.return();case 28:if(t.prev=28,!r){t.next=31;break}throw l;case 31:return t.finish(28);case 32:return t.finish(25);case 33:if("audio"!=this.type){t.next=37;break}return this.$refs.group.update(this.curSoucesList),this.detailAddDialog=!1,t.abrupt("return");case 37:if("e-book"!=this.type){t.next=42;break}return t.next=40,this.$refs.ebook.getRelation(this.curSoucesList);case 40:return this.detailAddDialog=!1,t.abrupt("return");case 42:n.add({type:this.type,product_id:this.detailData.id,constitute:this.curSoucesList,resource_type:this.$refs.resource.type}).then(function(t){p.getList(),p.detailAddDialog=!1});case 43:case"end":return t.stop()}},t,this,[[9,21,25,33],[26,,28,32]])}));return function(){return t.apply(this,arguments)}}(),uncheckedAll:function(t){this.singleElection||(this.$refs.ids.forEach(function(t){return t.checked=!1}),t.target.checked=!0)},saveAudioOK:function(){this.$refs.audio.getAudio()},clear:function(){document.getElementById("text").value=""},clear2:function(){document.getElementById("text2").value=""}},watch:{detailData:function(){this.check()}}}},416:function(t,e,a){"use strict";a.r(e);var i=a(417),s=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(e,t,function(){return i[t]})}(o);e.default=s.a},417:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(a(3)),s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},o=(n(a(82)),function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}(a(27))),r=a(375);function n(t){return t&&t.__esModule?t:{default:t}}e.default={props:{bookDialog:{type:Boolean,default:!1},item:{type:Object,default:{}},detailData:Object,optional:Array,readOnly:Boolean},data:function(){return{information:{},previewImgUrl:null,metadata:[],radio:"paperback"}},created:function(){Object.entries(this.item).length?this.getInfo():this.radio=this.optional.length&&this.optional[0]||"paperback"},computed:{setTitle:function(){return Object.entries(this.item).length?this.item.name||"修改纸质书":"新增纸质书"}},methods:{getInfo:function(){var t=this;(0,r.bookInfo)({id:this.item.id}).then(function(e){t.information=e.data,t.metadata=e.data.attributes,t.radio=e.data.type}).catch(function(e){var a=e.payload;for(var i in a.messages){t.$message.error(a.messages[i]);break}})},colse:function(){this.$emit("update:bookDialog",!1)},save:function(){var t,e=(t=i.default.mark(function t(){var e,a,n=this;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.$refs.detailForm.valiAll()){t.next=4;break}return log("验证失败"),t.abrupt("return");case 4:if(e=this.$refs.fenmian.files[0],a=this.$loading({text:"正在上传",background:"rgba(0, 0, 0, 0.8)"}),t.prev=6,!e){t.next=10;break}return t.next=10,o.getTask(e).then(function(t){n.information.img=t.data.path});case 10:if(this.information.img){t.next=14;break}return this.$message.error("封面必填"),a.close(),t.abrupt("return");case 14:return t.next=16,(0,r.bookSave)(s({},this.information,{attributes:this.metadata,product_id:this.detailData.id,type:this.radio})).then(function(t){a.close(),n.$emit("saveok")});case 16:t.next=22;break;case 18:t.prev=18,t.t0=t.catch(6),t.t0.payload,a.close();case 22:case"end":return t.stop()}},t,this,[[6,18]])}),function(){var e=t.apply(this,arguments);return new Promise(function(t,a){return function i(s,o){try{var r=e[s](o),n=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(n).then(function(t){i("next",t)},function(t){i("throw",t)});t(n)}("next")})});return function(){return e.apply(this,arguments)}}(),previewImg:function(t,e){var a=t.target.files[0];this.imgFile=a,e?this.previewPhotoUrl=URL.createObjectURL(a):this.previewImgUrl=URL.createObjectURL(a)},syncInfo:function(){var t=this;this.$refs.isbn.value&&o.synchronization({id:this.$refs.isbn.value}).then(function(e){log(e);var a=e.data,i=a.bookname,s=(a.writer,a.isbn),o=a.price,r=a.price_min,n=a.weight,l=a.isbn_ext;switch(a.bookbinding){case"平":t.radio="paperback";break;case"精":t.radio="hardcover";break;case"软":t.radio="soft_hardcover";break;case"线":t.radio="thread_bound"}t.information={name:i,book_isbn:s,price:o,sales_price_min:r,book_isbn_extension:l,book_weight:n}}).catch(function(e){var a=e.payload;for(var i in log(111,a),log(a),a.messages){t.$message.error(a.messages[i]);break}})},isShow:function(t){return!(this.optional.indexOf(t)>-1)}}}},418:function(t,e,a){},419:function(t,e,a){"use strict";a.r(e);var i=a(420),s=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(e,t,function(){return i[t]})}(o);e.default=s.a},420:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(a(3)),s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},o=(n(a(82)),function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}(a(375))),r=(a(27),a(390));function n(t){return t&&t.__esModule?t:{default:t}}e.default={props:["detailData","readOnly","defaultData"],data:function(){return{information:{},activeName:"first",metadata:[],shopMetadata:[],book_id:null,retailer_id:null,constitute_id:null,ebook_shop:{},current_id:null}},created:function(){this.detailData&&this.detailData.id&&this.getEBook(),this.defaultData&&(this.information=this.defaultData,this.metadata=this.defaultData.attributes,this.ebook_shop=this.defaultData.ebook_shop||{},this.shopMetadata=this.defaultData.ebook_shop?this.defaultData.ebook_shop.attributes:[])},methods:{getEBook:function(){var t=this;o.getEBook({id:this.detailData.id}).then(function(e){var a=e.data;t.information=a,t.current_id=a.id,a.length||Object.entries(a).length?(t.constitute_id=a.constitute_id,t.book_id=a.book_id,t.metadata=a.attributes||[],t.ebook_shop=a.ebook_shop||{},a.ebook_shop&&(t.retailer_id=a.ebook_shop.id,t.shopMetadata=a.ebook_shop.attributes||[])):t.retailer_id=t.constitute_id=null})},getRelation:function(t){var e=this;if(t.length){var a=t[0],i=a.c_id,s=a.id,o=a.type;log(i,s,o),(0,r._themeDetail)({c_id:i,id:s,type:o}).then(function(t){e.information=t.data,e.metadata=e.information.attributes,e.constitute_id=null,e.book_id=s,log(e.information)}).catch(function(t){var a=t.payload;for(var i in a.messages){e.$message.error(a.messages[i]);break}})}},submit:function(){var t,e=(t=i.default.mark(function t(){var e,a,r,n=this;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.$refs.detailForm.valiAll()){t.next=3;break}return t.abrupt("return",this.$message.error("电子书信息不全!"));case 3:return log(s({},this.information,this.ebook_shop,{book_id:this.book_id,components_id:this.detailData.id,attributes:this.metadata,shop_attributes:this.shopMetadata,constitute_id:this.constitute_id,retailer_id:this.retailer_id,current_id:this.current_id})),e=this.$progress(),t.prev=5,t.next=8,o.saveEBook(s({},this.information,this.ebook_shop,{book_id:this.book_id,components_id:this.detailData.id,attributes:this.metadata,shop_attributes:this.shopMetadata,constitute_id:this.constitute_id,retailer_id:this.retailer_id,id:this.information.id,current_id:this.current_id})).then(function(t){!n.current_id&&t.data&&(n.current_id=t.data.id)});case 8:this.$message.success("保存成功"),t.next=21;break;case 11:t.prev=11,t.t0=t.catch(5),a=t.t0.payload,t.t1=i.default.keys(a.messages);case 15:if((t.t2=t.t1()).done){t.next=21;break}return r=t.t2.value,this.$message.error(a.messages[r]),t.abrupt("break",21);case 21:e.close();case 22:case"end":return t.stop()}},t,this,[[5,11]])}),function(){var e=t.apply(this,arguments);return new Promise(function(t,a){return function i(s,o){try{var r=e[s](o),n=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(n).then(function(t){i("next",t)},function(t){i("throw",t)});t(n)}("next")})});return function(){return e.apply(this,arguments)}}()},computed:{detailType:function(){return this.infoData.img_status},hassVideo:function(){return 6==this.infoData.type||5==this.infoData.type||8==this.infoData.type}}}},421:function(t,e,a){},422:function(t,e,a){},423:function(t,e,a){},474:function(t,e,a){"use strict";var i=a(382);a.n(i).a},475:function(t,e,a){"use strict";a.r(e);var i=a(505),s=a(396);for(var o in s)"default"!==o&&function(t){a.d(e,t,function(){return s[t]})}(o);a(495);var r=a(0),n=Object(r.a)(s.default,i.a,i.b,!1,null,"5f842abc",null);n.options.__file="group.vue",e.default=n.exports},476:function(t,e,a){"use strict";var i=a(385);a.n(i).a},477:function(t,e,a){"use strict";a.r(e);var i=a(504),s=a(399);for(var o in s)"default"!==o&&function(t){a.d(e,t,function(){return s[t]})}(o);a(496);var r=a(0),n=Object(r.a)(s.default,i.a,i.b,!1,null,"cdfb2aa0",null);n.options.__file="audio.vue",e.default=n.exports},481:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.list?a("div",{staticClass:"tableWrap"},[t.isShow&&!t.onlyShow?a("el-radio-group",{staticStyle:{"margin-bottom":"20px"},attrs:{size:"small"},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[a("el-radio-button",{attrs:{label:"1"}},[t._v("图集")]),a("el-radio-button",{attrs:{label:"2"}},[t._v("视频集")]),a("el-radio-button",{attrs:{label:"3"}},[t._v("音频集")])],1):t._e(),a("table",{staticClass:"table"},[a("thead",[a("tr",[a("th",[t._v("名称")]),a("th",[t._v("类型")]),t.isLabelHide?t._e():a("th",[t._v("标签")]),a("th",[t._v("创建时间")]),a("th",{attrs:{width:"100"}},[t._v("操作")])])]),a("tbody",[t.list.length?t._e():a("tr",[a("td",{staticClass:"colspan",attrs:{colspan:t.isLabelHide?4:5}},[t._v("暂无数据")])]),t._l(t.list,function(e,i){return a("tr",[a("th",[a("div",{staticClass:"th-name"},[t._v(t._s(e.name))])]),a("th",[a("div",{staticClass:"th-name"},[t._v(t._s(e.type_name))])]),t.isLabelHide?t._e():a("th",[a("div",{staticClass:"th-name"},[t._v(t._s(e.tag))])]),a("th",[a("div",{staticClass:"th-name"},[t._v(t._s(e.create_time))])]),a("th",[a("div",{staticClass:"icon icon-detail",attrs:{title:"详情"},on:{click:function(a){t.$emit("detail",e)}}}),t.onlyShow?t._e():a("div",{staticClass:"icon icon-delete",attrs:{title:"删除"},on:{click:function(a){t.$emit("del",e)}}})])])})],2)])],1):t._e()},s=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return s})},482:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"div"},[a("el-dialog",{staticClass:"restBody2",attrs:{center:!1,visible:t.infoDialog,top:"50px",width:"1200px","show-close":!1,"append-to-body":""}},[a("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"el-icon-close",on:{click:function(e){t.$emit("update:infoDialog",!1)}}}),a("el-tabs",{attrs:{value:"ff"}},[a("el-tab-pane",{attrs:{label:"详情",name:"ff"}})],1)],1),a("form",{ref:"infoForm",staticClass:"infoForm"},[a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("名称:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.infoData.name,expression:"infoData.name"}],staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.infoData.name},on:{input:function(e){e.target.composing||t.$set(t.infoData,"name",e.target.value)}}})]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("类型:")]),a("span",{staticClass:"types"},[a("span",[t._v(" "+t._s(t.infoData.type_name))]),a("span",[t._v(" 创建时间: "+t._s(t.infoData.create_time))])])]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("标签:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.infoData.tag,expression:"infoData.tag"}],staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.infoData.tag},on:{input:function(e){e.target.composing||t.$set(t.infoData,"tag",e.target.value)}}})]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("简介:")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.infoData.abs,expression:"infoData.abs"}],staticClass:"textarea",attrs:{type:"text",disabled:""},domProps:{value:t.infoData.abs},on:{input:function(e){e.target.composing||t.$set(t.infoData,"abs",e.target.value)}}})]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("详情:")])]),t.detailType&&3!=t.infoData.type?a("div",{staticClass:"group wailianinput"},[a("div",{staticClass:"label"}),a("span",[a("input",{ref:"otherImgInput",staticClass:"form-control",attrs:{disabled:""},domProps:{value:t.infoData.preview}})])]):t._e(),t.hassVideo||4==t.infoData.type?a("div",{staticClass:"group detailmain wailian"},[a("div",{staticClass:"label"}),a("span",{staticClass:"wrap"},[t.hassVideo?a("video",{attrs:{src:t.infoData.preview,controls:""}}):t._e(),4==t.infoData.type?a("audio",{attrs:{src:t.infoData.preview,controls:""}}):t._e(),a("span",{staticClass:"msg"},[a("div",{staticClass:"type"},[t._v("格式:"),a("span",{staticClass:"val",domProps:{textContent:t._s(t.infoData.format)}})]),a("div",{staticClass:"size"},[t._v("大小:"),a("span",{staticClass:"val",domProps:{textContent:t._s(((this.infoData.size||0)/1024).toFixed(2)+"KB")}})])])])]):t._e(),a("div",{staticClass:"group detailmain"},[a("div",{staticClass:"label"}),a("span",{staticClass:"wrap"},[3==t.infoData.type?a("img",{staticClass:"coverImg",attrs:{src:t.infoData.preview_path}}):t._e(),a("img",{staticClass:"coverImg",attrs:{src:t.infoData.img_src||t.infoData.img,"else-if":""}})])]),a("div",{staticClass:"group line"},[a("div",{staticClass:"label"},[t._v("元数据")])]),a("div",{staticClass:"group"},[a("MetaData",{attrs:{metadata:t.metadata,isShowBtn:!1,isOption:!1}})],1)]),a("div",{staticClass:"footer dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info"},on:{click:function(e){t.$emit("update:infoDialog",!1)}}},[t._v("取消")])],1)])],1)},s=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return s})},495:function(t,e,a){"use strict";var i=a(398);a.n(i).a},496:function(t,e,a){"use strict";var i=a(401);a.n(i).a},504:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"div box"},[t._m(0),a("el-tree",{attrs:{data:t.audioList,"node-key":"id","default-expand-all":"","expand-on-click-node":!1},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.node,s=e.data;return a("span",{staticClass:"custom-tree-node"},[a("span",[t._v(t._s(s.name))]),a("span",{staticClass:"options",staticStyle:{float:"right"}},[a("div",{staticClass:"icon icon-detail",attrs:{title:"详情"},on:{click:function(e){t.$emit("detail",s,s.children)}}}),t.readOnly?t._e():a("div",{staticClass:"icon icon-delete",attrs:{title:"删除"},on:{click:function(e){t.del(s,i)}}})])])}}])})],1)},s=[function(){var t=this.$createElement,e=this._self._c||t;return e("table",{staticClass:"table"},[e("thead",[e("tr",[e("th",[this._v("组名称")]),e("th",{attrs:{width:"100"}},[this._v("操作")])])])])}];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return s})},505:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{staticClass:"restBody2",attrs:{center:!1,visible:t.groupDialog,top:"50px",width:"1200px","show-close":!1,"append-to-body":""}},[a("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"el-icon-close",on:{click:t.colse}}),a("el-tabs",{attrs:{value:"ff"}},[a("el-tab-pane",{attrs:{label:t.setTitle,name:"ff"}})],1)],1),a("VaForm",{ref:"detailForm"},[a("form",{staticClass:"detailForm rowWrap"},[a("div",{staticClass:"group line"},[a("div",{staticClass:"label"},[t._v("基本信息(必填)")])]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("组名称:")]),a("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required'}"},{name:"model",rawName:"v-model",value:t.information.group_name,expression:"information.group_name"}],staticClass:"form-control",attrs:{type:"text",disabled:t.onlyShow},domProps:{value:t.information.group_name},on:{input:function(e){e.target.composing||t.$set(t.information,"group_name",e.target.value)}}})]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("定价:")]),a("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required'}"},{name:"model",rawName:"v-model",value:t.information.price,expression:"information.price"}],staticClass:"form-control",attrs:{type:"text",disabled:t.onlyShow},domProps:{value:t.information.price},on:{input:function(e){e.target.composing||t.$set(t.information,"price",e.target.value)}}}),a("span",[t._v(" 元")])]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("最低定价:")]),a("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required'}"},{name:"model",rawName:"v-model",value:t.information.min_price,expression:"information.min_price"}],staticClass:"form-control",attrs:{type:"text",disabled:t.onlyShow},domProps:{value:t.information.min_price},on:{input:function(e){e.target.composing||t.$set(t.information,"min_price",e.target.value)}}}),a("span",[t._v(" 元")])]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("主讲人:")]),a("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required'}"},{name:"model",rawName:"v-model",value:t.information.speaker,expression:"information.speaker"}],staticClass:"form-control",attrs:{type:"text",disabled:t.onlyShow},domProps:{value:t.information.speaker},on:{input:function(e){e.target.composing||t.$set(t.information,"speaker",e.target.value)}}})]),a("div",{staticClass:"group line"},[a("div",{staticClass:"label"},[t._v("其他信息")])]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("试听地址:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.information.src,expression:"information.src"}],staticClass:"form-control",attrs:{type:"url",disabled:t.onlyShow},domProps:{value:t.information.src},on:{input:function(e){e.target.composing||t.$set(t.information,"src",e.target.value)}}})]),a("div",{staticClass:"group line"},[a("div",{staticClass:"label",domProps:{textContent:t._s("2"==t.isMedia?"关联视频":"关联音频")}})]),a("div",{staticClass:"group"},[a("Tab",{ref:"video",attrs:{dataType:"audio",onlyShow:t.onlyShow,defaultList:t.list,detailData:t.item},on:{detail:function(e){return t.$emit("detail",e)},del:function(e){return t.del(e)}}}),t.onlyShow?t._e():a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.$emit("open",t.addMediaType)}}},[t._v("新增")])],1)])]),a("div",{staticClass:"footer dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info"},on:{click:t.colse}},[t._v("取消")]),t.onlyShow?t._e():a("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("确定")])],1)],1)],1)},s=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return s})},516:function(t,e,a){"use strict";a.r(e);var i=a(558),s=a(409);for(var o in s)"default"!==o&&function(t){a.d(e,t,function(){return s[t]})}(o);a(527);var r=a(0),n=Object(r.a)(s.default,i.a,i.b,!1,null,"a4ac0ef4",null);n.options.__file="detail.vue",e.default=n.exports},517:function(t,e,a){"use strict";a.r(e);var i=a(565),s=a(411);for(var o in s)"default"!==o&&function(t){a.d(e,t,function(){return s[t]})}(o);a(520);var r=a(0),n=Object(r.a)(s.default,i.a,i.b,!1,null,"a0f8a500",null);n.options.__file="info.vue",e.default=n.exports},518:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.homeInfo=function(){return(0,s.request_get)("/api/home/statistics")},e.getInfo=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.request_get)(n(t))},e.save=function(t){var e=t.id,a=r(t,["id"]);if(e)return(0,s.request_put)(n({id:e}),a);return(0,s.request_post)("/api/comproduct/add",a)},e.saveInfo=function(t){t.id;var e=r(t,["id"]);return(0,s.request_post)("/api/comproduct/attributes",e)};var i,s=a(4),o=a(8);function r(t,e){var a={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(a[i]=t[i]);return a}var n=((i=o)&&i.__esModule?i:{default:i}).default.compile("/api/comproduct/:id")},520:function(t,e,a){"use strict";var i=a(413);a.n(i).a},521:function(t,e,a){"use strict";a.r(e);var i=a(571),s=a(414);for(var o in s)"default"!==o&&function(t){a.d(e,t,function(){return s[t]})}(o);a(526);var r=a(0),n=Object(r.a)(s.default,i.a,i.b,!1,null,"73fb31dc",null);n.options.__file="structure.vue",e.default=n.exports},522:function(t,e,a){"use strict";a.r(e);var i=a(572),s=a(416);for(var o in s)"default"!==o&&function(t){a.d(e,t,function(){return s[t]})}(o);a(523);var r=a(0),n=Object(r.a)(s.default,i.a,i.b,!1,null,"60882cdf",null);n.options.__file="book.vue",e.default=n.exports},523:function(t,e,a){"use strict";var i=a(418);a.n(i).a},524:function(t,e,a){"use strict";a.r(e);var i=a(573),s=a(419);for(var o in s)"default"!==o&&function(t){a.d(e,t,function(){return s[t]})}(o);a(525);var r=a(0),n=Object(r.a)(s.default,i.a,i.b,!1,null,"28b225ba",null);n.options.__file="eBook.vue",e.default=n.exports},525:function(t,e,a){"use strict";var i=a(421);a.n(i).a},526:function(t,e,a){"use strict";var i=a(422);a.n(i).a},527:function(t,e,a){"use strict";var i=a(423);a.n(i).a},558:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"div"},[a("el-tabs",{attrs:{value:t.type}},[a("el-tab-pane",{attrs:{label:"产品信息",name:"info"}},[a("Info",{attrs:{detailData:t.detailData,readOnly:t.readOnly,defaultData:t.defaultData},on:{saveok:function(e){return t.$emit("saveok",e)}}})],1),a("el-tab-pane",{attrs:{label:"产品结构",name:"structure"}},[a("Structure",{attrs:{detailData:t.detailData,readOnly:t.readOnly,defaultData:t.defaultData}})],1),a("el-tab-pane",{attrs:{label:"知识点",name:"Knowledge"}},[a("Knowledge",{attrs:{detailData:t.detailData,readOnly:t.readOnly,defaultData:t.defaultData},on:{saveok:function(e){t.$emit("saveok")}}})],1)],1)],1)},s=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return s})},565:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"div"},[a("el-dialog",{attrs:{visible:t.choiceDialog,width:"500px","append-to-body":""},on:{"update:visible":function(e){t.choiceDialog=e}}},[a("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[a("el-tabs",{attrs:{value:"detail"}},[a("el-tab-pane",{attrs:{label:"选择"+t.title,name:"detail"}})],1)],1),a("form",{staticClass:"rowWrap"},[a("div",{staticClass:"group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.keyWord,expression:"keyWord"}],staticClass:"form-control",attrs:{placeholder:"输入查询"+t.title,type:"text"},domProps:{value:t.keyWord},on:{input:[function(e){e.target.composing||(t.keyWord=e.target.value)},t.searchAuthor]}}),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.creatAuthor}},[t._v("创建新"+t._s(t.title))])],1),a("ul",{staticClass:"authorListForm"},t._l(t.gauthorList,function(e){return a("li",[a("input",{ref:"ids",refInFor:!0,attrs:{name:"ids",type:"checkbox",label:e.name,id:"author_"+e.id},domProps:{value:e.id}}),a("label",{attrs:{for:"author_"+e.id}},[t._v(t._s(e.name))])])}))]),a("div",{staticClass:"div dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info"},on:{click:function(e){t.choiceDialog=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.choiceAuthor}},[t._v("确定")])],1)]),a("el-dialog",{attrs:{visible:t.creatDialog,width:"500px","append-to-body":""},on:{"update:visible":function(e){t.creatDialog=e}}},[a("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[a("el-tabs",{attrs:{value:"detail"}},[a("el-tab-pane",{attrs:{label:"创建"+t.title,name:"detail"}})],1)],1),a("form",{staticClass:"authorInfo"},[a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("姓名:")]),a("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required'}"},{name:"model",rawName:"v-model",value:t.creatAuthorInfo.name,expression:"creatAuthorInfo.name"}],staticClass:"form-control",attrs:{type:"text",name:"name"},domProps:{value:t.creatAuthorInfo.name},on:{input:function(e){e.target.composing||t.$set(t.creatAuthorInfo,"name",e.target.value)}}})])]),a("div",{staticClass:"div dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info"},on:{click:function(e){t.creatDialog=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.saveAuthor}},[t._v("确定")])],1)]),a("VaForm",{ref:"detailForm"},[a("form",{staticClass:"detailForm"},[a("div",{staticClass:"group line"},[a("div",{staticClass:"label"},[t._v("基本信息")])]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("*产品名称:")]),a("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required'}"},{name:"model",rawName:"v-model",value:t.information.name,expression:"information.name"}],staticClass:"form-control",attrs:{type:"text",disabled:t.readOnly},domProps:{value:t.information.name},on:{input:function(e){e.target.composing||t.$set(t.information,"name",e.target.value)}}})]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("ISBN:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.information.ISBN||t.information.book_isbn,expression:"information.ISBN||information.book_isbn"}],ref:"isbn",staticClass:"form-control",attrs:{type:"text",disabled:t.readOnly},domProps:{value:t.information.ISBN||t.information.book_isbn},on:{input:function(e){e.target.composing||t.$set(t.information.ISBN||t.information,"book_isbn",e.target.value)}}}),t.readOnly?t._e():a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.syncInfo}},[t._v("同步")])],1),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("*内容简介:")]),a("textarea",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required'}"},{name:"model",rawName:"v-model",value:t.information.abs,expression:"information.abs"}],staticClass:"textarea",attrs:{maxlength:t.$config.ABS_MAX_LENGTH,type:"text",disabled:t.readOnly},domProps:{value:t.information.abs},on:{input:function(e){e.target.composing||t.$set(t.information,"abs",e.target.value)}}}),a("span",{staticStyle:{"vertical-align":"bottom",color:"#606266","font-size":"12px"}},[t._v("您还可以输入"+t._s(t.$config.ABS_MAX_LENGTH-(t.information.abs?t.information.abs.length:0)))])]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("*设置封面:")]),t.readOnly?t._e():a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){t.$refs.fenmian.click()}}},[t._v("上传")]),a("input",{ref:"fenmian",staticClass:"hide",attrs:{type:"file",accept:"image/jpeg,image/jpg,image/png"},on:{change:function(e){t.previewImg(e)}}})],1),a("div",{staticClass:"group"},[a("div",{staticClass:"label"}),a("img",{staticClass:"previewImgUrl",attrs:{src:t.previewImgUrl||t.information.img_src}}),a("input",{attrs:{type:"hidden",name:"img"},domProps:{value:t.information.img}})]),a("p",{staticClass:"imgSizeWrap"},[a("span",{staticClass:"imgSize"},[t._v("建议图片大小：250*140px")])])]),a("div",{staticClass:"info"},[a("el-tabs",{staticClass:"tabs-nav",model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"x-read信息",name:"1"}},[a("form",{staticClass:"readForm"},[a("div",{staticClass:"group line"},[a("div",{staticClass:"label"},[t._v("必填信息")])]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("*标签:")]),a("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required'}"},{name:"model",rawName:"v-model",value:t.xRead.tag,expression:"xRead.tag"}],staticClass:"form-control",attrs:{type:"text",disabled:t.readOnly},domProps:{value:t.xRead.tag},on:{input:function(e){e.target.composing||t.$set(t.xRead,"tag",e.target.value)}}})]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("*作者:")]),a("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required'}"},{name:"model",rawName:"v-model",value:t.xRead.author,expression:"xRead.author"}],staticClass:"form-control",attrs:{type:"text",disabled:t.readOnly},domProps:{value:t.xRead.author},on:{input:function(e){e.target.composing||t.$set(t.xRead,"author",e.target.value)}}})]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("元数据:")]),a("MetaData",{attrs:{metadata:t.metadata,isShowBtn:!1,readOnly:t.readOnly}})],1)])]),t.$config.isShowRetailers?a("el-tab-pane",{attrs:{label:"电商信息",name:"2"}},[a("form",{staticClass:"commerceForm"},[a("div",{staticClass:"group line"},[a("div",{staticClass:"label"},[t._v("必填信息")])]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("绝版:")]),a("el-radio",{staticClass:"el-radio",attrs:{name:"out_print",label:"1",disabled:t.readOnly},model:{value:t.out_print,callback:function(e){t.out_print=e},expression:"out_print"}},[t._v("是")]),a("el-radio",{staticClass:"el-radio",attrs:{name:"out_print",label:"2",disabled:t.readOnly},model:{value:t.out_print,callback:function(e){t.out_print=e},expression:"out_print"}},[t._v("否")])],1),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("是否有版:")]),a("el-radio",{staticClass:"el-radio",attrs:{name:"have_print",label:"1",disabled:t.readOnly},model:{value:t.have_print,callback:function(e){t.have_print=e},expression:"have_print"}},[t._v("是")]),a("el-radio",{staticClass:"el-radio",attrs:{name:"have_print",label:"2",disabled:t.readOnly},model:{value:t.have_print,callback:function(e){t.have_print=e},expression:"have_print"}},[t._v("否")])],1),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("作者:")]),a("el-select",{staticStyle:{"margin-right":"20px"},attrs:{multiple:"","collapse-tags":"",placeholder:"请选择",size:"small",name:"author",disabled:t.readOnly},model:{value:t.authorValue,callback:function(e){t.authorValue=e},expression:"authorValue"}},t._l(t.authorOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t.readOnly?t._e():a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.addAuthor("作者")}}},[t._v("添加")])],1),a("div",{staticClass:"group line"},[a("div",{staticClass:"label"},[t._v("其他信息")])]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("译者:")]),a("el-select",{staticStyle:{"margin-right":"20px"},attrs:{multiple:"","collapse-tags":"",placeholder:"请选择",size:"small",name:"translator",disabled:t.readOnly},model:{value:t.translatorValue,callback:function(e){t.translatorValue=e},expression:"translatorValue"}},t._l(t.translatorOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t.readOnly?t._e():a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.addAuthor("译者")}}},[t._v("添加")])],1),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("主题词:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.retailers.subject_terms,expression:"retailers.subject_terms"}],staticClass:"form-control",attrs:{type:"text",disabled:t.readOnly},domProps:{value:t.retailers.subject_terms},on:{input:function(e){e.target.composing||t.$set(t.retailers,"subject_terms",e.target.value)}}})]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("读者对象:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.retailers.target_audience,expression:"retailers.target_audience"}],staticClass:"form-control",attrs:{type:"text",disabled:t.readOnly},domProps:{value:t.retailers.target_audience},on:{input:function(e){e.target.composing||t.$set(t.retailers,"target_audience",e.target.value)}}})]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("中图法分类:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.retailers.clc_category,expression:"retailers.clc_category"}],staticClass:"form-control",attrs:{type:"text",disabled:t.readOnly},domProps:{value:t.retailers.clc_category},on:{input:function(e){e.target.composing||t.$set(t.retailers,"clc_category",e.target.value)}}})]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("营销分类:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.retailers.cp_category,expression:"retailers.cp_category"}],staticClass:"form-control",attrs:{type:"text",disabled:t.readOnly},domProps:{value:t.retailers.cp_category},on:{input:function(e){e.target.composing||t.$set(t.retailers,"cp_category",e.target.value)}}})]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("内容简介:")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.retailers.describe,expression:"retailers.describe"}],staticClass:"textarea",attrs:{type:"text",disabled:t.readOnly},domProps:{value:t.retailers.describe},on:{input:function(e){e.target.composing||t.$set(t.retailers,"describe",e.target.value)}}})]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("编辑推荐:")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.retailers.editor_recommend,expression:"retailers.editor_recommend"}],staticClass:"textarea",attrs:{type:"text",disabled:t.readOnly},domProps:{value:t.retailers.editor_recommend},on:{input:function(e){e.target.composing||t.$set(t.retailers,"editor_recommend",e.target.value)}}})]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("图书目录:")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.retailers.book_directory,expression:"retailers.book_directory"}],staticClass:"textarea",attrs:{type:"text",disabled:t.readOnly},domProps:{value:t.retailers.book_directory},on:{input:function(e){e.target.composing||t.$set(t.retailers,"book_directory",e.target.value)}}})])])]):t._e(),a("el-tab-pane",{attrs:{name:"3"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("收起"),a("i",{staticClass:"el-icon-arrow-up"})])])],1)],1),a("div",{staticClass:"btns"},[t.readOnly?t._e():a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitInfo()}}},[t._v("保存")])],1)])],1)},s=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return s})},571:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"div"},[t.infoDialog?a("ContentDetail",{attrs:{infoData:t.infoData,infoDialog:t.infoDialog,mediaType:t.mediaType},on:{"update:infoDialog":function(e){t.infoDialog=e}}}):t._e(),t.groupDialog?a("Group",{ref:"group",attrs:{item:t.currentItem,detailData:t.detailData,groupDialog:t.groupDialog,onlyShow:t.readOnly},on:{"update:groupDialog":function(e){t.groupDialog=e},open:t.openResources,detail:t.detail,del:t.del,save:t.saveAudioOK}}):t._e(),t.bookDialog?a("Book",{attrs:{item:t.currentItem,detailData:t.detailData,optional:t.optional,bookDialog:t.bookDialog,readOnly:t.readOnly},on:{"update:bookDialog":function(e){t.bookDialog=e},saveok:t.saveOk}}):t._e(),a("el-dialog",{staticClass:"restBody2",attrs:{center:!1,visible:t.detailAddDialog,width:"1200px",top:"50px","append-to-body":""},on:{"update:visible":function(e){t.detailAddDialog=e}}},[a("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[a("el-tabs",{attrs:{value:"detail"}},[a("el-tab-pane",{attrs:{label:"添加",name:"detail"}})],1)],1),a("el-form",{staticClass:"addBookForm"},[a("div",{staticClass:"serachWrap"},[a("form",{attrs:{id:"detailSearchForm"}},[a("span",{staticClass:"group-inline"},[a("input",{staticClass:"form-control",attrs:{placeholder:"输入名称",name:"name",id:"text"}}),a("span",{staticClass:"clear",on:{click:function(e){t.clear()}}},[t._v("x")])]),a("span",{staticClass:"group-inline"},[a("input",{staticClass:"form-control",attrs:{placeholder:"输入标签",name:"tag",id:"text2"}}),a("span",{staticClass:"clear2",on:{click:function(e){t.clear2()}}},[t._v("x")])]),a("span",{staticClass:"group-inline"},[a("TimePick",{attrs:{inputsName:["start_time","end_time"]}})],1),a("span",{staticClass:"group-inline right"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",plain:""},on:{click:t.query}},[t._v("搜索")]),a("el-button",{attrs:{type:"primary",plain:""},on:{click:t.addSelection}},[t._v("添加选中")])],1)])]),a("table",{staticClass:"table",attrs:{width:"100%"}},[a("thead",[a("tr",[a("th",{attrs:{width:"80"}},[t.singleElection?a("input",{attrs:{type:"checkbox"},on:{click:function(e){t.checkAll(e,"addBookForm")}}}):t._e(),a("span",{domProps:{textContent:t._s(t.singleElection?"全选":"选择")}})]),a("th",[t._v("名称")]),a("th",[t._v("标签")]),a("th",[t._v("类型")]),a("th",[t._v("创建时间")])])]),t.dataList.length?a("tbody",t._l(t.dataList,function(e,i){return a("tr",[a("td",[a("input",{ref:"ids",refInFor:!0,attrs:{type:"checkbox","data-type":e.status,name:"ids"},domProps:{value:e.id,checked:t.isChecked(e.id)},on:{click:t.uncheckedAll}})]),a("td",[t._v(t._s(e.name))]),a("td",[t._v(t._s(e.tag))]),a("td",[t._v(t._s(e.type_name))]),a("td",[t._v(t._s(e.create_time))])])})):t._e()]),t.page?a("div",{staticClass:"pageWrap"},[a("el-pagination",{attrs:{small:!1,background:"","current-page":t.page.num,"page-sizes":[10,50,100],"page-size":t.page.offset,layout:"total, sizes,prev, pager, next, jumper",total:t.page.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1):t._e()]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info"},on:{click:function(e){t.detailAddDialog=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.addSelection}},[t._v("确定")])],1)],1),a("el-tabs",{staticClass:"release-tab",attrs:{type:"border-card",value:t.type},on:{"tab-click":t.handleClick}},[a("el-tab-pane",{attrs:{label:"纸质书籍",name:"book"}},[a("Tab",{ref:"book",attrs:{dataType:"book",defaultList:t.defaultBList,detailData:t.detailData,isLabelHide:!0,onlyShow:t.readOnly},on:{detail:t.detail,del:t.del}}),t.isShowBtn&&!t.readOnly?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.addBook()}}},[t._v("新增")]):t._e()],1),a("el-tab-pane",{attrs:{label:"电子书",name:"e-book"}},[a("EBook",{ref:"ebook",attrs:{defaultData:t.defaultEList,detailData:t.detailData,readOnly:t.readOnly},on:{open:t.openResources}})],1),a("el-tab-pane",{attrs:{label:"听读",name:"audio"}},[a("Audio",{ref:"audio",attrs:{detailData:t.detailData,defaultData:t.defaultAList,readOnly:t.readOnly},on:{detail:t.detail,del:t.del}}),t.readOnly?t._e():a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.addVideo()}}},[t._v("新增组")])],1),a("el-tab-pane",{attrs:{label:"视读",name:"video"}},[a("Tab",{ref:"video",attrs:{dataType:"video",defaultList:t.defaultVList,detailData:t.detailData,onlyShow:t.readOnly},on:{detail:t.detail,del:t.del}}),t.readOnly?t._e():a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.openResources("5")}}},[t._v("新增")])],1),a("el-tab-pane",{attrs:{label:"资源",name:"resource"}},[a("Tab",{ref:"resource",attrs:{dataType:"resource",defaultList:t.defaultRList,detailData:t.detailData,onlyShow:t.readOnly,isShow:!0},on:{detail:t.detail,del:t.del}}),t.readOnly?t._e():a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.openResources("14")}}},[t._v("新增")])],1)],1)],1)},s=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return s})},572:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{staticClass:"restBody2",attrs:{center:!1,visible:t.bookDialog,top:"50px",width:"1200px","show-close":!1,"append-to-body":""}},[a("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"el-icon-close",on:{click:t.colse}}),a("el-tabs",{attrs:{value:"ff"}},[a("el-tab-pane",{attrs:{label:t.setTitle,name:"ff"}})],1)],1),a("VaForm",{ref:"detailForm"},[a("form",{staticClass:"detailForm rowWrap"},[a("div",{staticClass:"group line"},[a("div",{staticClass:"label"},[t._v("基本信息(必填)")])]),a("div",{staticClass:"left"},[a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("名称:")]),a("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required'}"},{name:"model",rawName:"v-model",value:t.information.name,expression:"information.name"}],staticClass:"form-control",attrs:{name:"name",type:"text",disabled:t.readOnly},domProps:{value:t.information.name},on:{input:function(e){e.target.composing||t.$set(t.information,"name",e.target.value)}}})]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("ISBN:")]),a("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required'}"},{name:"model",rawName:"v-model",value:t.information.book_isbn,expression:"information.book_isbn"}],ref:"isbn",staticClass:"form-control",attrs:{type:"text",disabled:t.readOnly},domProps:{value:t.information.book_isbn},on:{input:function(e){e.target.composing||t.$set(t.information,"book_isbn",e.target.value)}}}),t.readOnly?t._e():a("el-button",{staticClass:"margin",attrs:{type:"primary",size:"small"},on:{click:t.syncInfo}},[t._v("同步")])],1),t.optional.length?a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("类型:")]),a("el-radio",{staticClass:"el-radio",attrs:{disabled:t.isShow("paperback")||t.readOnly,label:"paperback"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("平装")]),a("el-radio",{staticClass:"el-radio",attrs:{disabled:t.isShow("hardcover")||t.readOnly,label:"hardcover"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("精装")]),a("el-radio",{staticClass:"el-radio",attrs:{disabled:t.isShow("soft_hardcover")||t.readOnly,label:"soft_hardcover"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("软精装")]),a("el-radio",{staticClass:"el-radio",attrs:{disabled:t.isShow("thread_bound")||t.readOnly,label:"thread_bound"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("线装")])],1):t._e(),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("定价:")]),a("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required'}"},{name:"model",rawName:"v-model",value:t.information.price,expression:"information.price"}],staticClass:"form-control",attrs:{type:"text",disabled:t.readOnly},domProps:{value:t.information.price},on:{input:function(e){e.target.composing||t.$set(t.information,"price",e.target.value)}}}),a("span",[t._v(" 元")])]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("最低定价:")]),a("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required'}"},{name:"model",rawName:"v-model",value:t.information.sales_price_min,expression:"information.sales_price_min"}],staticClass:"form-control",attrs:{type:"text",disabled:t.readOnly},domProps:{value:t.information.sales_price_min},on:{input:function(e){e.target.composing||t.$set(t.information,"sales_price_min",e.target.value)}}}),a("span",[t._v(" 元")])])]),a("div",{staticClass:"right"},[a("img",{staticClass:"previewImgUrl",attrs:{src:t.previewImgUrl||t.information.img_src}}),a("input",{attrs:{type:"hidden",name:"img"},domProps:{value:t.information.img}}),t.readOnly?t._e():a("el-button",{staticClass:"margin",attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){t.$refs.fenmian.click()}}},[t._v("选择封面")]),a("input",{ref:"fenmian",staticClass:"hide",attrs:{type:"file",accept:"image/jpeg,image/jpg,image/png"},on:{change:function(e){t.previewImg(e)}}})],1),a("div",{staticClass:"group line"},[a("div",{staticClass:"label"},[t._v("其他信息")])]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("ISBN扩展:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.information.book_isbn_extension,expression:"information.book_isbn_extension"}],staticClass:"form-control",attrs:{type:"text",disabled:t.readOnly},domProps:{value:t.information.book_isbn_extension},on:{input:function(e){e.target.composing||t.$set(t.information,"book_isbn_extension",e.target.value)}}})]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("图书重量:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.information.book_weight,expression:"information.book_weight"}],staticClass:"form-control",attrs:{type:"text",disabled:t.readOnly},domProps:{value:t.information.book_weight},on:{input:function(e){e.target.composing||t.$set(t.information,"book_weight",e.target.value)}}}),a("span",[t._v(" KG")])]),a("div",{staticClass:"group line"},[a("div",{staticClass:"label"},[t._v("元数据")])]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"}),a("MetaData",{attrs:{metadata:t.metadata,isShowBtn:!1,readOnly:t.readOnly}})],1)])]),a("div",{staticClass:"footer dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info"},on:{click:t.colse}},[t._v("取消")]),t.readOnly?t._e():a("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("确定")])],1)],1)],1)},s=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return s})},573:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"div"},[a("VaForm",{ref:"detailForm"},[a("form",{staticClass:"detailForm"},[a("div",{staticClass:"group line"},[a("div",{staticClass:"label"},[t._v("基本信息")])]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("*关联书籍:")]),a("img",{staticClass:"previewImgUrl",attrs:{src:t.information.img_src||t.information.constitute_img_src}}),t.readOnly?t._e():a("el-button",{staticClass:"margin",attrs:{size:"mini",type:"primary"},on:{click:function(e){t.$emit("open","1")}}},[t._v("关联")])],1),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("*名称:")]),a("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required'}"},{name:"model",rawName:"v-model",value:t.information.name,expression:"information.name"}],staticClass:"form-control",attrs:{type:"text",disabled:t.readOnly},domProps:{value:t.information.name},on:{input:function(e){e.target.composing||t.$set(t.information,"name",e.target.value)}}})]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("*作者:")]),a("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required'}"},{name:"model",rawName:"v-model",value:t.information.author,expression:"information.author"}],staticClass:"form-control",attrs:{type:"text",disabled:t.readOnly},domProps:{value:t.information.author},on:{input:function(e){e.target.composing||t.$set(t.information,"author",e.target.value)}}})]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("*类型:")]),a("span",{staticClass:"types"},[a("span",[t._v(" "+t._s(t.information.type_name))]),a("span",[t._v(" 创建时间: "+t._s(t.information.create_time))])])]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("简介:")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.information.abs,expression:"information.abs"}],staticClass:"textarea",attrs:{rows:"3",type:"text",maxlength:t.$config.ABS_MAX_LENGTH,disabled:t.readOnly},domProps:{value:t.information.abs},on:{input:function(e){e.target.composing||t.$set(t.information,"abs",e.target.value)}}}),a("span",{staticStyle:{"vertical-align":"bottom",color:"#606266","font-size":"12px"}},[t._v("您还可以输入"+t._s(t.$config.ABS_MAX_LENGTH-(t.information.abs?t.information.abs.length:0)))])])]),a("div",{staticClass:"info"},[a("el-tabs",{staticClass:"tabs-nav restBody",model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"x-read信息",name:"first"}},[a("form",{staticClass:"readForm"},[a("div",{staticClass:"group line"},[a("div",{staticClass:"label"},[t._v("元数据")])]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"}),a("MetaData",{attrs:{metadata:t.metadata,isShowBtn:!1,readOnly:t.readOnly}})],1)])]),t.$config.isShowRetailers?a("el-tab-pane",{attrs:{label:"电商信息",name:"second"}},[a("form",{staticClass:"commerceForm"},[a("div",{staticClass:"group line"},[a("div",{staticClass:"label"},[t._v("必填信息")])]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("定价:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.ebook_shop.sale_price,expression:"ebook_shop.sale_price"}],staticClass:"form-control",attrs:{type:"text",disabled:t.readOnly},domProps:{value:t.ebook_shop.sale_price},on:{input:function(e){e.target.composing||t.$set(t.ebook_shop,"sale_price",e.target.value)}}}),a("span",[t._v(" 元")])]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("最低定价:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.ebook_shop.min_sale_price,expression:"ebook_shop.min_sale_price"}],staticClass:"form-control",attrs:{type:"text",disabled:t.readOnly},domProps:{value:t.ebook_shop.min_sale_price},on:{input:function(e){e.target.composing||t.$set(t.ebook_shop,"min_sale_price",e.target.value)}}}),a("span",[t._v(" 元")])]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("内容阅读地址:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.ebook_shop.read_url,expression:"ebook_shop.read_url"}],staticClass:"form-control",attrs:{type:"text",disabled:t.readOnly},domProps:{value:t.ebook_shop.read_url},on:{input:function(e){e.target.composing||t.$set(t.ebook_shop,"read_url",e.target.value)}}})]),a("div",{staticClass:"group line"},[a("div",{staticClass:"label"},[t._v("其他信息")])]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("内容试读地址:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.ebook_shop.trial_url,expression:"ebook_shop.trial_url"}],staticClass:"form-control",attrs:{type:"text",disabled:t.readOnly},domProps:{value:t.ebook_shop.trial_url},on:{input:function(e){e.target.composing||t.$set(t.ebook_shop,"trial_url",e.target.value)}}})]),a("div",{staticClass:"group line"},[a("div",{staticClass:"label"},[t._v("元数据")])]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"}),a("MetaData",{attrs:{metadata:t.shopMetadata,isShowBtn:!1,readOnly:t.readOnly}})],1)])]):t._e(),a("el-tab-pane",[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("收起"),a("i",{staticClass:"el-icon-arrow-up"})])])],1)],1),t.book_id?a("div",{staticClass:"btns"},[t.readOnly?t._e():a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submit("detailForm")}}},[t._v("保存")])],1):t._e()])],1)},s=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return s})},764:function(t,e,a){"use strict";a.r(e);var i=a(765),s=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(e,t,function(){return i[t]})}(o);e.default=s.a},765:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},s=p(a(82)),o=p(a(376)),r=p(a(155)),n=p(a(154)),l=p(a(365)),u=p(a(516)),c=a(122),d=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}(a(848));function p(t){return t&&t.__esModule?t:{default:t}}e.default={mixins:[c.main],components:{Menu:r.default,Top:n.default,GroupList:l.default,Detail:u.default,Dispense:o.default},data:function(){return{services:d,list:null,page:null,groupList:null,detailDialog:!1,detailDialoaType:"info",detailData:{},publishDialog:!1,moveToOtherDiaolog:!1,moveIds:null,toId:null}},methods:{getList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.page&&this.page.num||1,e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.page&&this.page.offset||10,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;d.getList(i({pageNum:t,pageOffset:a,group_id:this.currGroup},s)).then(function(t){e.list=t.data,e.page=t.page})},urgentDigitalBook:function(){for(var t=this,e=this.getChecked(),a=0,i=e.length;a<i;a++)for(var s=0,o=this.list.length;s<o;s++)if(this.list[s].id==e[a]&&1!=this.list[s].audits_status)return void this.$message.error("只能勾选待审核数据");e&&this.services.urgentDigitalBook({id:e}).then(function(e){return t.$message.success("已提交加急审核")})},opnePublishDialog:function(t){this.detailData=t,this.publishDialog=!0},delChoosens:function(t){var e=this,a=[];if(t)a.push(t);else{var i=Array.from(document.querySelectorAll('input[name="ids"]:checked'));if(i.forEach(function(t){a.push(t.value)}),!i.length)return void this.$message.error("请先选中!")}a.length>0&&this.$confirm("是否删除?").then(function(t){var i=(0,s.default)(document.querySelector("#mainForm"),{hash:!0});e.services.del({id:a}).then(function(t){e.getList(e.page.num,e.page.offset,i),e.getGroupList()}).catch(function(t){var a=t.payload;for(var i in a.messages){e.$message.error(a.messages[i]);break}})}).catch(function(t){})},KnowledgeClick:function(t){this.detailDialoaType=t},saveOk:function(t){this.detailData.id||(this.detailData=t),this.getList(),this.getGroupList()},handleClose:function(t){this.getList(),t()}}}},766:function(t,e,a){}}]);