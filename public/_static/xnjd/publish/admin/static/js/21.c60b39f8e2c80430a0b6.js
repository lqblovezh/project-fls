(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{1082:function(t,e,i){"use strict";i.r(e);var a=i(1182),n=i(778);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);i(1084);var s=i(0),o=Object(s.a)(n.default,a.a,a.b,!1,null,"7534df3d",null);o.options.__file="detail.vue",e.default=o.exports},1083:function(t){t.exports={status:!0,msg:"",data:[{id:"17",name:"历史文献学",parent_id:"9"},{id:"52",name:"世界古代通史",parent_id:"51"},{id:"50",name:"世界史学理论与史学史",parent_id:"15"},{id:"63",name:"世界近现代通史",parent_id:"62"},{id:"19",name:"先秦史",parent_id:"18"},{id:"16",name:"史学理论及中国史学史",parent_id:"10"},{id:"15",name:"世界史学理论与史学史",parent_id:"5"},{id:"48",name:"鸦片战争至辛亥革命史",parent_id:"30"},{id:"47",name:"中国现代史",parent_id:"35"},{id:"81",name:"一带一路研究",parent_id:"80"},{id:"38",name:"思想史",parent_id:"37"},{id:"96",name:"古代史-下册",parent_id:"91"},{id:"51",name:"世界古代中古史",parent_id:"5"},{id:"39",name:"文化史",parent_id:"37"},{id:"49",name:"中华民国史",parent_id:"30"},{id:"20",name:"秦汉史",parent_id:"18"},{id:"64",name:"日本史",parent_id:"62"},{id:"82",name:"全球史",parent_id:"80"},{id:"53",name:"欧洲古代史",parent_id:"51"},{id:"65",name:"南亚史",parent_id:"62"},{id:"33",name:"中国共产党史",parent_id:"30"},{id:"40",name:"科技史",parent_id:"37"},{id:"92",name:"历史",parent_id:"6"},{id:"62",name:"世界近现代史",parent_id:"5"},{id:"22",name:"魏晋南北朝史",parent_id:"18"},{id:"54",name:"中东近东北非的古代史",parent_id:"51"},{id:"83",name:"环境史",parent_id:"80"},{id:"84",name:"思想史",parent_id:"80"},{id:"80",name:"专门史",parent_id:"5"},{id:"66",name:"中亚史",parent_id:"62"},{id:"55",name:"亚洲古代史",parent_id:"51"},{id:"3",name:"年度报告",parent_id:"0"},{id:"41",name:"社会史",parent_id:"37"},{id:"7",name:"政法",parent_id:"6"},{id:"21",name:"隋唐五代十国史",parent_id:"18"},{id:"34",name:"中国近代通史",parent_id:"30"},{id:"8",name:"历史地理学",parent_id:"4"},{id:"23",name:"宋史",parent_id:"18"},{id:"67",name:"西亚史",parent_id:"62"},{id:"9",name:"历史文献学",parent_id:"4"},{id:"42",name:"城市史",parent_id:"37"},{id:"85",name:"文化史",parent_id:"80"},{id:"56",name:"美洲古代中古史",parent_id:"51"},{id:"4",name:"中国史",parent_id:"3"},{id:"97",name:"经济",parent_id:"6"},{id:"5",name:"世界史",parent_id:"3"},{id:"98",name:"哲学",parent_id:"6"},{id:"68",name:"非洲史",parent_id:"62"},{id:"43",name:"中外文化交流史",parent_id:"37"},{id:"57",name:"非洲古代中古史",parent_id:"51"},{id:"24",name:"辽金史",parent_id:"18"},{id:"86",name:"科技史",parent_id:"80"},{id:"69",name:"美国史",parent_id:"62"},{id:"87",name:"社会史",parent_id:"80"},{id:"99",name:"语言",parent_id:"6"},{id:"6",name:"\r\n数字图书",parent_id:"0"},{id:"25",name:"元史",parent_id:"18"},{id:"44",name:"人物研究",parent_id:"37"},{id:"58",name:"世界中古史通史",parent_id:"51"},{id:"26",name:"明史",parent_id:"18"},{id:"88",name:"城市史",parent_id:"80"},{id:"70",name:"拉丁美洲史",parent_id:"62"},{id:"45",name:"方志学",parent_id:"37"},{id:"59",name:"欧洲中古史",parent_id:"51"},{id:"100",name:"十三辑",parent_id:"6"},{id:"101",name:"十四辑",parent_id:"6"},{id:"10",name:"史学理论及中国史学史",parent_id:"4"},{id:"46",name:"谱牒学",parent_id:"37"},{id:"89",name:"历史地理学",parent_id:"80"},{id:"102",name:"国图",parent_id:"6"},{id:"27",name:"清史",parent_id:"18"},{id:"18",name:"中国古代史",parent_id:"4"},{id:"60",name:"中东近东及北非的中古史",parent_id:"51"},{id:"71",name:"俄国史",parent_id:"62"},{id:"30",name:"中国近代史",parent_id:"4"},{id:"72",name:"英国史",parent_id:"62"},{id:"90",name:"人物研究",parent_id:"80"},{id:"35",name:"中国现代史",parent_id:"4"},{id:"28",name:"中国古文字",parent_id:"18"},{id:"61",name:"亚洲中古史",parent_id:"51"},{id:"29",name:"中国古代契约文书",parent_id:"18"},{id:"37",name:"专门史",parent_id:"4"},{id:"73",name:"法国史",parent_id:"62"},{id:"74",name:"德国史",parent_id:"62"},{id:"12",name:"历史地理学",parent_id:"8"},{id:"75",name:"意大利史",parent_id:"62"},{id:"76",name:"西班牙史",parent_id:"62"},{id:"77",name:"东欧国家史",parent_id:"62"},{id:"78",name:"北欧国家史",parent_id:"62"},{id:"79",name:"近现代国际关系史",parent_id:"62"}]}},1084:function(t,e,i){"use strict";var a=i(780);i.n(a).a},1085:function(t,e,i){"use strict";var a=i(781);i.n(a).a},1138:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"index clearfix"},[t.previewArticleDialog?i("PreviewArticle",{attrs:{item:t.detailData},on:{cancle:function(e){t.previewArticleDialog=!1}}}):t._e(),i("Top",{attrs:{currentPlant:"X-PUBLISH"}}),i("Menu",{attrs:{curr:"/digitalProductLibrary/pushArticle"}}),i("div",{staticClass:"mainRight"},[i("div",{staticClass:"contentWrap"},[i("div",{staticClass:"contentLeft"},[i("div",{staticClass:"maindata"},[i("div",{staticClass:"serachWrap"},[i("div",{staticClass:"title"}),i("form",{staticClass:"clearfix",attrs:{id:"mainForm"}},[i("span",{staticClass:"group-inline"},[i("el-input",{attrs:{placeholder:"文章名",name:"name",clearable:""}})],1),i("span",{staticClass:"group-inline"},[i("el-input",{attrs:{placeholder:"作者",name:"author",clearable:""}})],1),i("span",{staticClass:"group-inline"},[i("el-input",{attrs:{placeholder:"标签",name:"tag",clearable:""}})],1),i("span",{staticClass:"group-inline"},[i("TimePick",{attrs:{inputsName:["start_time","end_time"]}})],1),i("span",{staticClass:"group-inline"},[i("select",{staticClass:"form-control",staticStyle:{width:"110px"},attrs:{name:"status"}},[i("option",{attrs:{value:""}},[t._v("审核状态")]),t._l(t.status,function(e,a){return i("option",{domProps:{value:a}},[t._v(t._s(e))])})],2)]),i("span",{staticClass:"group-inline right"},[i("el-button",{attrs:{size:"mediu",type:"primary",icon:"el-icon-search",plain:""},on:{click:t.query}},[t._v("搜索")]),i("el-button",{attrs:{size:"mediu",type:"primary",icon:"el-icon-plus"},on:{click:function(e){t.goEditor()}}},[t._v("新建")])],1)])]),i("div",{staticClass:"tableWrap"},[i("div",{staticClass:"tableTop"},[i("div",{staticClass:"title vel-line"},[i("span",[t._v("全部 "),t.page?i("span",{staticClass:"totalNum"},[t._v("("+t._s(t.page.total)+")")]):t._e()]),i("div",{staticClass:"btns"},[i("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){t.audits()}}},[t._v("审核")]),i("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:t.urgentCheck}},[t._v("加急审核")]),i("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:t.moveToOther}},[t._v("移动分组")]),i("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){t.delChoosen(!1)}}},[t._v("删除")])],1)])]),i("table",{staticClass:"table"},[i("thead",[i("tr",[i("th",{staticClass:"allBtn"},[i("input",{attrs:{type:"checkbox"},on:{click:function(e){t.checkAll(e)}}})]),i("th",[t._v("文章名")]),i("th",[t._v("作者")]),i("th",[t._v("标签")]),i("th",{staticClass:"time"},[t._v("创建时间")]),i("th",{attrs:{width:"70"}},[t._v("审核状态")]),i("th",{attrs:{width:"70"}},[t._v("发布状态")]),i("th",[t._v("发布时间")]),i("th",{staticClass:"operate"},[t._v("操作")])])]),t.list?i("tbody",t._l(t.list,function(e){return i("tr",[i("th",[i("input",{ref:"ids",refInFor:!0,attrs:{type:"checkbox",name:"ids"},domProps:{value:e.id}})]),i("th",[i("img",{staticClass:"cover-photo",attrs:{src:e.img_src}}),i("div",{staticClass:"th-name bookName",attrs:{title:e.name}},[t._v(t._s(e.name))])]),i("th",[i("div",{staticClass:"th-name",attrs:{title:e.author}},[t._v(t._s(e.author))])]),i("th",[i("div",{staticClass:"th-name",attrs:{title:e.tag}},[t._v(t._s(e.tag))])]),i("th",[i("div",{staticClass:"th-name"},[t._v(t._s(e.create_time))])]),i("th",[i("div",{staticClass:"th-name",class:t.getColor(e.status)},[t._v(" "+t._s("审核未通过"==e.status?"未通过":e.status))])]),i("th",[i("div",{staticClass:"th-name"},[t._v(t._s(e.release_status_name))])]),i("th",[i("div",{staticClass:"th-name"},[t._v(t._s(e.release_time||"-"))])]),i("th",[i("div",{staticClass:"btns"},[i("span",{staticClass:"icon icon-detail",attrs:{size:"mini",title:"详情",type:"primary",plain:""},on:{click:function(i){t.goEditor(e.id)}}}),i("span",{staticClass:"icon icon-data",attrs:{size:"mini",title:"元数据",type:"primary",plain:""},on:{click:function(i){t.opneDetailDialog("data",e)}}}),1!=e.audits_status?i("span",{staticClass:"icon icon-publish",attrs:{size:"mini",title:"审核",type:"primary",plain:""},on:{click:function(i){t.audits(e.id)}}}):t._e(),"3"==e.audits_status?i("span",{staticClass:"icon icon-fenfa",attrs:{size:"mini",title:"分发",type:"primary",plain:""},on:{click:function(i){t.opnePublishDialog(e)}}}):t._e(),1!=e.audits_status?i("span",{staticClass:"icon icon-delete",attrs:{size:"mini",title:"删除",type:"primary",plain:""},on:{click:function(i){t.delChoosen(e.id)}}}):t._e()])])])})):t._e()]),t.page?i("div",{staticClass:"pageWrap"},[i("el-pagination",{attrs:{small:!1,background:"","current-page":t.page.num,"page-sizes":[10,50,100],"page-size":t.page.offset,layout:"total,sizes ,prev, pager, next, jumper",total:t.page.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1):t._e()]),i("div",{staticClass:"gruopList"},[i("GroupList",{attrs:{groupList:t.groupList,currGroup:t.currGroup},on:{addGroup:t.addGroup,updateGroup:t.updateGroup,delGroup:t.delGroup,groupChange:t.groupChange}})],1)])])])]),i("div",{staticClass:"dialogs"},[i("Examine",{attrs:{examineDialog:t.examineDialog},on:{"update:examineDialog":function(e){t.examineDialog=e},saveExamine:t.saveExamine}}),i("el-dialog",{attrs:{center:!1,visible:t.detailDialog,"close-on-click-modal":!1,"lock-scroll":!0,top:"50px",width:"1000px"},on:{"update:visible":function(e){t.detailDialog=e}}},[i("div",{staticClass:"content",attrs:{slot:"title"},slot:"title"},[i("el-tabs",{attrs:{value:"detail"}},[i("el-tab-pane",{attrs:{label:"元数据",name:"detail"}})],1),t.detailDialog?i("Detail",{attrs:{type:t.detailDialoaType,currGroup:t.currGroup,detailId:t.detailData.id||{}},on:{detailBack:t.detailBack}}):t._e()],1)]),t.publishDialog?i("Dispense",{attrs:{publishDialog:t.publishDialog,item:t.detailData},on:{"update:publishDialog":function(e){t.publishDialog=e},dispenseOk:t.dispenseOk}}):t._e(),i("el-dialog",{attrs:{center:!1,visible:t.imgLinkDialog,"close-on-click-modal":!1,width:"800px"},on:{"update:visible":function(e){t.imgLinkDialog=e}}},[t.detailData?i("div",{staticClass:"content",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"imgWrap"},[i("img",{attrs:{src:t.detailData.id,alt:"alt"}})]),i("div",{staticClass:"btns"},[i("el-button",[t._v("下载图片")]),i("el-button",{on:{click:function(e){t.copyLink("copy"+t.detailData.id)}}},[t._v("复制链接")]),i("input",{staticClass:"zhide",attrs:{id:"copy"+t.detailData.id},domProps:{value:t.detailData.id}})],1)]):t._e(),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.imgLinkDialog=!1}}},[t._v("返回")])],1)]),i("el-dialog",{attrs:{center:!1,visible:t.moveToOtherDiaolog,"close-on-click-modal":!1,title:"移动分组",width:"500px"},on:{"update:visible":function(e){t.moveToOtherDiaolog=e}}},[i("div",{staticClass:"group"},[i("div",{staticClass:"label"},[t._v("移动到")]),i("select",{ref:"moveToId",staticClass:"form-control",attrs:{placeholder:"请选择"}},t._l(t.groupList,function(e,a){return e.id!=t.currGroup&&""!=e.id?i("option",{domProps:{value:e.id,textContent:t._s(e.name)}}):t._e()}))]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"info"},on:{click:function(e){t.moveToOtherDiaolog=!1}}},[t._v("返回")]),i("el-button",{attrs:{type:"primary"},on:{click:t.moveToSubmit}},[t._v(" 确定")])],1)])],1)],1)},n=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},1182:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"div"},[i("el-tabs",{attrs:{value:t.type}},[i("MetaData",{attrs:{metadata:t.detailData.attributes},on:{submit:t.submitMetadata,back:function(e){t.$emit("detailBack")}}})],1)],1)},n=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},345:function(t,e,i){"use strict";i.r(e);var a=i(1138),n=i(776);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);i(1085);var s=i(0),o=Object(s.a)(n.default,a.a,a.b,!1,null,"219c3652",null);o.options.__file="index.vue",e.default=o.exports},362:function(t,e,i){"use strict";i.r(e);var a=i(363),n=i.n(a);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);e.default=n.a},363:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["groupList","currGroup"],data:function(){return{newGroupDialogOpen:!1,updateGroupDialogOpen:!1,currEditGroup:null}},created:function(){},computed:{},methods:{groupChange:function(t){this.$emit("groupChange",t)},addGroupDialog:function(){},delGroup:function(t){var e=this;this.$confirm("是否删除分组:"+t.name).then(function(i){dir(i),e.$emit("delGroup",t.id)}).catch(function(t){dir(t)})},updateGroupDialog:function(t){this.updateGroupDialogOpen=!0,this.currEditGroup=t},addGroup:function(){if(this.$refs.addGroupForm.valiAll()){var t=document.querySelector("#addGroupForm");this.$emit("addGroup",t),this.newGroupDialogOpen=!1}},updateGroup:function(){if(this.$refs.updateGroupForm.valiAll()){var t=document.querySelector("#updateGroupForm");this.$emit("updateGroup",t),this.updateGroupDialogOpen=!1}}}}},364:function(t,e,i){},365:function(t,e,i){"use strict";i.r(e);var a=i(370),n=i(362);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);i(366);var s=i(0),o=Object(s.a)(n.default,a.a,a.b,!1,null,"176cd962",null);o.options.__file="GroupList.vue",e.default=o.exports},366:function(t,e,i){"use strict";var a=i(364);i.n(a).a},367:function(t,e,i){"use strict";i.r(e);var a=i(368),n=i.n(a);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);e.default=n.a},368:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(122),n=i(123);e.default={mixins:[a.getIconStyle],props:{publishDialog:{type:Boolean,default:!1},item:{type:Object,default:{}},is_release:Boolean},data:function(){return{list:null,coverDialog:!1,choiceDialog:!1,currentItem:null,currentVersion:null}},created:function(){this.getList()},methods:{getList:function(){var t=this;(0,n.getDispense)({entity_type:this.item.type_number||this.item.type,id:this.item.id}).then(function(e){t.list=e.data}).catch(function(e){var i=e.payload;for(var a in i.messages){t.$message.error(i.messages[a]);break}})},colse:function(){this.$emit("update:publishDialog",!1)},save:function(){var t=[];this.$refs.dispense.querySelectorAll("input[type=checkbox]:checked").forEach(function(e){t.push(e.value)}),t.length?this.$emit("dispenseSave",t):this.$message.error("请选择你要发布的平台")},pushTime:function(t){return t?"最近"+t+"发布过":"最近暂无分发"},push:function(t){var e=this;this.currentItem=t,this.is_release&&t.release_msg.length?this.$confirm("信息不全是否分发?").then(function(i){t.version?e.coverDialog=!0:e.dispense()},function(t){var e=t.payload;log(e.message)}).catch(function(t){log("cancel")}):t.version&&t.version.length?this.coverDialog=!0:this.dispense()},dispense:function(t,e){var i=this;(0,n.dispense)({platform_id:this.currentItem.id,audits_id:this.item.audits_id,is_cover:t,version_id:e}).then(function(t){i.$message.success("分发提交成功,请稍后查看结果!"),i.$emit("dispenseOk")}).catch(function(t){var e=t.payload;for(var a in e.messages){i.$message.error(e.messages[a]);break}})},getdefect:function(t){return"缺失字段: "+t.release_msg.join("/")},getBtnName:function(t){return this.is_release&&!t.is_release?"缺少关键信息不能分发":t.release_msg&&t.release_msg.length?"确认分发":"分发"},coverDispense:function(){var t=this;if(!this.currentVersion)return this.$message.warning("请选择你要覆盖的版本号!");var e=this.currentItem.version.find(function(e){return e.xread_book_id===t.currentVersion}).version_id;this.dispense(this.currentVersion,e)}}}},369:function(t,e,i){},370:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"div"},[i("div",{staticClass:"groupWrap"},[i("div",{staticClass:"list"},[i("ul",t._l(t.groupList,function(e){return i("li",{staticClass:"licontent",class:{red:e.id==t.currGroup}},[i("div",{staticClass:"name ellipsis",attrs:{title:e.name+"("+e.num+")"},on:{click:function(i){t.groupChange(e.id)}}},[i("span",{staticClass:"title"},[t._v(t._s(e.name))]),i("span",[t._v(t._s("("+e.num+")"))])]),""!=e.id&&"non"!=e.id?i("div",{staticClass:"btns"},[i("span",{on:{click:function(i){t.updateGroupDialog(e)}}},[i("i",{staticClass:"el-icon-edit"})]),i("span",{on:{click:function(i){t.delGroup(e)}}},[i("i",{staticClass:"el-icon-delete"})])]):t._e()])}))]),i("div",{staticClass:"addGroupBtnWrap"},[i("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){t.newGroupDialogOpen=!0}}},[i("i",{staticClass:"el-icon-plus"},[t._v("新建分组")])])],1)]),i("div",{staticClass:"dialogs"},[t.newGroupDialogOpen?i("el-dialog",{attrs:{title:"新增",visible:t.newGroupDialogOpen,width:"500px"},on:{"update:visible":function(e){t.newGroupDialogOpen=e}}},[i("div",{staticClass:"formWrap"},[i("VaForm",{ref:"addGroupForm"},[i("form",{attrs:{id:"addGroupForm"}},[i("div",{staticClass:"group"},[i("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"}],staticClass:"form-control",attrs:{name:"name"}})])])])],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"info"},on:{click:function(e){t.newGroupDialogOpen=!1}}},[t._v("取消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.addGroup}},[t._v("确定")])],1)]):t._e(),t.updateGroupDialogOpen?i("el-dialog",{attrs:{title:"修改",visible:t.updateGroupDialogOpen,width:"500px"},on:{"update:visible":function(e){t.updateGroupDialogOpen=e}}},[i("div",{staticClass:"formWrap"},[i("VaForm",{ref:"updateGroupForm"},[t.currEditGroup?i("form",{attrs:{id:"updateGroupForm"}},[i("div",{staticClass:"group"},[i("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"}],staticClass:"form-control",attrs:{name:"name"},domProps:{value:t.currEditGroup.name}}),i("input",{staticClass:"hide",attrs:{name:"id"},domProps:{value:t.currEditGroup.id}})])]):t._e()])],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"info"},on:{click:function(e){t.updateGroupDialogOpen=!1}}},[t._v("取消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.updateGroup}},[t._v("确定")])],1)]):t._e()],1)])},n=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},376:function(t,e,i){"use strict";i.r(e);var a=i(378),n=i(367);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);i(377);var s=i(0),o=Object(s.a)(n.default,a.a,a.b,!1,null,"1fd5a38b",null);o.options.__file="Dispense.vue",e.default=o.exports},377:function(t,e,i){"use strict";var a=i(369);i.n(a).a},378:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{center:!1,visible:t.coverDialog,top:"50px",width:"500px","show-close":!1,title:"x-read系统中已有该产品，选择你的操作"}},[i("div",{staticClass:"coverContent"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.choiceDialog=!0}}},[t._v("覆盖原有产品")]),i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dispense()}}},[t._v("创建新的产品版本")])],1),i("div",{staticClass:"footer dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"info"},on:{click:function(e){t.coverDialog=!1}}},[t._v("取消")])],1)]),t.choiceDialog?i("el-dialog",{attrs:{center:!1,visible:t.choiceDialog,top:"50px",width:"500px","show-close":!1,title:"选择版本号"}},[i("div",{staticClass:"coverContent"},[i("el-radio-group",{model:{value:t.currentVersion,callback:function(e){t.currentVersion=e},expression:"currentVersion"}},t._l(t.currentItem.version,function(e){return i("el-radio",{key:e.xread_book_id,attrs:{label:e.xread_book_id}},[t._v(t._s(e.version_id))])}))],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:t.coverDispense}},[t._v("确定")]),i("el-button",{attrs:{type:"info"},on:{click:function(e){t.choiceDialog=!1}}},[t._v("取消")])],1)]):t._e(),i("el-dialog",{attrs:{center:!1,visible:t.publishDialog,top:"50px",width:"1000px","show-close":!1}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"el-icon-close",on:{click:t.colse}}),i("el-tabs",{attrs:{value:"ff"}},[i("el-tab-pane",{attrs:{label:"分发",name:"ff"}})],1)],1),i("ul",{ref:"dispense",staticClass:"content modular"},t._l(t.list,function(e){return i("li",[i("div",{staticClass:"icon"},[i("div",{class:t.getStyle(e.type)}),i("span",{domProps:{textContent:t._s(e.name)}})]),i("ul",{staticClass:"defect"},[e.release_msg&&!e.release_msg.length?i("li",{staticClass:"pass"},[t._v("可正常分发")]):t._e(),e.release_msg&&e.release_msg.length?i("li",{domProps:{textContent:t._s(t.getdefect(e))}}):t._e()]),i("el-button",{attrs:{type:!t.is_release||e.is_release?"primary":"info",size:"mini",plain:""},domProps:{textContent:t._s(t.getBtnName(e))},on:{click:function(i){(!t.is_release||e.is_release)&&t.push(e)}}})],1)})),i("div",{staticClass:"footer dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"info"},on:{click:t.colse}},[t._v("取消")])],1)])],1)},n=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},403:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={0:"未审核",1:"待审核",2:"未通过",3:"已通过"}},579:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.listArticles=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)("/api/push_articles",t)},e.detailArticle=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,i=l(t,["id"]);return(0,n.request_get)(u({id:e}),i)},e.del=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/api/push_articles/delete",t)},e.modifyArticle=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,i=l(t,["id"]);return(0,n.request_put)(u({id:e}),i)},e.addArticle=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/api/push_articles",t)},e.urgent=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/api/push_articles/urgent",t)},e.audits=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_put)("/api/push_articles/distribute",t).then(function(e){return(0,o.suance)({id:t.id,info:e.data}),e})},e.listGroup=function(){return(0,n.request_get)("/api/push_articles/groups/list")},e.addGroup=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/api/push_articles/groups",t)},e.modifyGroup=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,i=l(t,["id"]);return(0,n.request_put)(c({id:e}),i)},e.deleteGroup=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/api/push_articles/groups/delete",t)},e.moveGroup=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/api/push_articles/groups/move",t)},e.getMetadata=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,i=l(t,["id"]);return(0,n.request_get)(d({id:e}),i)};var a,n=i(4),r=i(8),s=(a=r)&&a.__esModule?a:{default:a},o=i(83);function l(t,e){var i={};for(var a in t)e.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(t,a)&&(i[a]=t[a]);return i}var u=s.default.compile("/api/push_articles/:id"),d=(s.default.compile("/api/push_articles/distribute/:id"),s.default.compile("/api/push_articles/metadata/:id")),c=s.default.compile("/api/push_articles/groups/:id")},776:function(t,e,i){"use strict";i.r(e);var a=i(777),n=i.n(a);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);e.default=n.a},777:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=_(i(3)),n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},r=_(i(82)),s=_(i(376)),o=(i(159),_(i(155))),l=_(i(154)),u=_(i(365)),d=_(i(403)),c=_(i(624)),p=_(i(621)),f=_(i(1082)),m=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(579)),v=i(122);function _(t){return t&&t.__esModule?t:{default:t}}e.default={mixins:[v.main],components:{Menu:o.default,Top:l.default,GroupList:u.default,Detail:f.default,Dispense:s.default,MaskShow:c.default,PreviewArticle:p.default},data:function(){return{list:null,page:null,groupList:null,detailDialog:!1,detailDialoaType:"info",detailData:null,timePick:null,imgLinkDialog:!1,publishDialog:!1,moveToOtherDiaolog:!1,moveIds:null,previewArticleDialog:!1,toId:null,status:d.default,services:m}},methods:{getList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.page&&this.page.num||1,e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.page&&this.page.offset||10,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;m.listArticles(n({pageNum:t,pageOffset:i,group_id:this.currGroup},a)).then(function(t){e.list=t.data,e.page=t.page})},preArt:function(t){this.detailData=t,this.previewArticleDialog=!0},opneDetailDialogAdd:function(t){this.detailDialog=!0,this.detailDialoaType=t,this.detailData=null,this.metadata=null},detailBack:function(){log("返回"),this.detailDialog=!1,this.getList()},opneImgLinkDialog:function(t){this.imgLinkDialog=!0,this.detailData=t},urgentCheck:function(){for(var t=this,e=this.getChecked(),i=0,a=e.length;i<a;i++)for(var n=0,r=this.list.length;n<r;n++)if(this.list[n].id==e[i]&&1!=this.list[n].audits_status)return void this.$message.error("只能勾选待审核数据");e&&this.services.urgent({id:e}).then(function(e){return t.$message.success("加急审核已提交")})},goEditor:function(){var t,e=(t=a.default.mark(function t(e){return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.$router.push({path:"/contentLibrary/article/editor",query:{articleId:e,from:"push",index:this.$route.path}});case 1:case"end":return t.stop()}},t,this)}),function(){var e=t.apply(this,arguments);return new Promise(function(t,i){return function a(n,r){try{var s=e[n](r),o=s.value}catch(t){return void i(t)}if(!s.done)return Promise.resolve(o).then(function(t){a("next",t)},function(t){a("throw",t)});t(o)}("next")})});return function(t){return e.apply(this,arguments)}}(),opnePublishDialog:function(t){this.detailData=t,this.publishDialog=!0},exportSomething:function(t){log("导出操作!")},delChoosens:function(t){var e=this,i=[];if(t)i.push(t);else{var a=Array.from(document.querySelectorAll('input[name="ids"]:checked'));if(a.forEach(function(t){i.push(t.value)}),!a.length)return void this.$message.error("请先选中!")}i.length>0&&this.$confirm("是否删除?").then(function(t){var a=(0,r.default)(document.querySelector("#mainForm"),{hash:!0});e.services.del({id:i}).then(function(t){e.getList(e.page.num,e.page.offset,a),e.getGroupList()}).catch(function(t){var i=t.payload;for(var a in i.messages){e.$message.error(i.messages[a]);break}})}).catch(function(t){})},clear:function(){document.getElementById("text").value=""},clear2:function(){document.getElementById("text2").value=""},clear3:function(){document.getElementById("text3").value=""}}}},778:function(t,e,i){"use strict";i.r(e);var a=i(779),n=i.n(a);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);e.default=n.a},779:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,n=i(1083),r=((a=n)&&a.__esModule,function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(579)));e.default={props:["type","detailId","detailDialog"],created:function(){this.getDetail()},mounted:function(){},data:function(){return{metadata:[],detailData:{id:this.detailId,attributes:[]}}},methods:{getDetail:function(){var t=this;this.detailId&&r.getMetadata({id:this.detailId}).then(function(e){t.detailData.attributes=e.data,log(e,111111111111)}).catch(function(t){log("获取出错")})},addMetadata:function(){this.detailData.attributes.push({key:"",value:""})},delMetadata:function(t){this.detailData.attributes.splice(t,1)},submitMetadata:function(){var t=this,e=this.detailData,i=e.id,a=e.attributes;log(a),r.modifyArticle({id:i,attributes:a}).then(function(e){t.$message.success("修改元数据成功!"),t.$emit("detailBack",!1)})}}}},780:function(t,e,i){},781:function(t,e,i){}}]);