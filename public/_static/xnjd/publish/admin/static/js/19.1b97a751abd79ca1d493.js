(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{1141:function(e,t,i){"use strict";var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"index clearfix"},[e.previewArticleDialog?i("MaskShow",[i("PreviewArticle",{attrs:{item:e.html},on:{cancle:function(t){e.previewArticleDialog=!1}}})],1):e._e(),i("Top",{attrs:{currentPlant:"X-PUBLISH"}}),i("Menu",{attrs:{curr:"/contentLibrary/article"}}),i("div",{staticClass:"mainRight"},[i("div",{staticClass:"contentWrap"},[i("div",{staticClass:"contentLeft"},[i("div",{staticClass:"msgWrap"},[i("div",{staticClass:"btns"},[i("el-button",{attrs:{type:"primary ",plain:""},on:{click:function(t){e.$router.go(-1)}}},[e._v("返回")]),i("el-button",{attrs:{type:"primary"},on:{click:e.previewArt}},[e._v("预览")]),e.isShowSave?e._e():i("el-button",{attrs:{type:"primary",plain:""},on:{click:e.submit}},[e._v("保存")])],1),i("div",{staticClass:"left"},[e._m(0),i("span",[i("span",{staticClass:"shallow-color"},[e._v(" 创建时间:")]),i("span",{staticClass:"main-color"},[e._v(e._s(e.detailData.create_time))])])])]),i("div",{staticClass:"editorWrap"},[e._m(1),i("div",{staticClass:"formWrap"},[i("form",{attrs:{id:"articleForm"}},[e._m(2),i("div",{staticClass:"group"},[i("div",{staticClass:"label"}),i("img",{staticClass:"preimg",attrs:{src:e.showImgUrl||e.detailData.img_src}})]),i("div",{staticClass:"group"},[i("div",{staticClass:"label"}),i("span",[i("input",{ref:"preImg",staticClass:"hide",attrs:{type:"file",accept:e.$config.imgAccept},on:{change:e.showImg}}),e.isShowSave?e._e():i("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){e.$refs.preImg.click()}}},[e._v("本地上传")]),e.isShowSave?e._e():i("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){e.imgListDialog=!0}}},[e._v("从图库选择")])],1)]),e._m(3),i("div",{staticClass:"group"},[i("div",{staticClass:"label"}),i("span",[i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.detailData.abs,expression:"detailData.abs"}],staticClass:"form-control",domProps:{value:e.detailData.abs},on:{input:function(t){t.target.composing||e.$set(e.detailData,"abs",t.target.value)}}})])]),i("div",{staticClass:"group"},[i("div",{staticClass:"label"},[e._v("标签:")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.detailData.tag,expression:"detailData.tag"}],staticClass:"form-control",domProps:{value:e.detailData.tag},on:{input:function(t){t.target.composing||e.$set(e.detailData,"tag",t.target.value)}}})])])])]),i("div",{staticClass:"tabsWrap"},[i("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.handleClick},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[i("el-tab-pane",{attrs:{label:"我的图书",name:"queryBook"}},[i("div",{staticClass:"all"},[i("RightMediaList",{attrs:{type:e.type,list:e.books,page:e.bookPage},on:{pageChange:e.handleCurrentChange,insertImg:e.insertImg}})],1)]),i("el-tab-pane",{attrs:{label:"我的图片",name:"queryImg"}},[i("div",{staticClass:"all"},[i("RightMediaList",{attrs:{type:e.type,list:e.imgs,page:e.imgPage},on:{pageChange:e.handleCurrentChange,insertImg:e.insertImg}})],1)]),i("el-tab-pane",{attrs:{label:"我的音频",name:"queryVoice"}},[i("div",{staticClass:"all"},[i("RightMediaList",{attrs:{type:e.type,list:e.voices,page:e.voicePage},on:{insertImg:e.insertImg,pageChange:e.handleCurrentChange}})],1)]),i("el-tab-pane",{attrs:{label:"我的视频",name:"queryVideo"}},[i("div",{staticClass:"all"},[i("RightMediaList",{attrs:{type:e.type,list:e.videos,page:e.videoPage},on:{pageChange:e.handleCurrentChange,insertImg:e.insertImg}})],1)])],1)],1)])])]),i("div",{staticClass:"dialogs"},[e.readerDialog?i("Reader",{attrs:{readerDialog:e.readerDialog,readerId:e.readerId,version:"draft"},on:{"update:readerDialog":function(t){e.readerDialog=t}}}):e._e(),e.imgListDialog?i("el-dialog",{attrs:{center:!1,visible:e.imgListDialog,"close-on-click-modal":!1,top:"50px",width:"800px",title:"选择封面"},on:{"update:visible":function(t){e.imgListDialog=t}}},[i("div",{staticClass:"linkListWrap"},[i("div",{staticClass:"linksImg"},e._l(e.imgs,function(t){return i("div",{staticClass:"imgWrap"},[i("img",{attrs:{src:t.preview_path},on:{click:function(i){e.insertCover(t)}}})])})),i("div",{staticClass:"center"},[i("el-pagination",{attrs:{small:"",layout:"prev, pager, next, jumper","current-page":e.imgPage.num,"page-size":e.imgPage.offset,total:e.imgPage.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChangeImg}})],1),i("div",{staticClass:"right"},[i("el-button",{attrs:{type:"info"},on:{click:function(t){e.imgListDialog=!1}}},[e._v("返回")])],1)])]):e._e(),e.uploadDialog?i("el-dialog",{attrs:{center:!1,visible:e.uploadDialog,"close-on-click-modal":!1,top:"50px",width:"800px",title:"上传"+e.switchTypeName},on:{"update:visible":function(t){e.uploadDialog=t}}},[i("UeUpload",{attrs:{ue:e.ue,type:e.uploadType},on:{cancle:function(t){e.uploadDialog=!1}}})],1):e._e()],1)],1)},a=[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"vel-line"},[t("span",{staticClass:"shallow-color"},[this._v(" 类型:")]),t("span",{staticClass:"main-color"},[this._v("文章")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"editor"}},[t("script",{staticStyle:{width:"1024px",height:"500px"},attrs:{id:"editor",type:"text/plain"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"group"},[t("div",{staticClass:"label"},[this._v("封面:")]),t("span",[t("span",{staticClass:"shallow-color"},[this._v("(图片建议使用900*500像素的封面)")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"group"},[t("div",{staticClass:"label"},[this._v("摘要:")]),t("span",{staticClass:"shallow-color"},[this._v(" (选填，如果不填写会默认抓取正文前54个字)")])])}];i.d(t,"a",function(){return r}),i.d(t,"b",function(){return a})},1164:function(e,t,i){"use strict";var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"articleWrap"},[i("VaForm",{ref:"titleForm"},[i("div",{staticClass:"titleWrap"},[i("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"},{name:"model",rawName:"v-model",value:e.detailData.name,expression:"detailData.name"}],staticClass:"title",attrs:{name:"title",id:"richTitle",placeholder:"请在这里输入标题"},domProps:{value:e.detailData.name},on:{input:function(t){t.target.composing||e.$set(e.detailData,"name",t.target.value)}}})]),i("div",{staticClass:"authorWrap"},[i("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"},{name:"model",rawName:"v-model",value:e.detailData.author,expression:"detailData.author"}],staticClass:"author",attrs:{name:"author",id:"richAuthor",placeholder:"请在这里输入作者"},domProps:{value:e.detailData.author},on:{input:function(t){t.target.composing||e.$set(e.detailData,"author",t.target.value)}}})])]),i("hr")],1)},a=[];i.d(t,"a",function(){return r}),i.d(t,"b",function(){return a})},1170:function(e,t,i){"use strict";var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"div"},[i("div",{staticClass:"wrap"},[i("form",{staticClass:"detailForm"},[i("div",{staticClass:"group"},[i("div",{staticClass:"label"},[e._v("导入方式:")]),i("span",[i("span",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.importType,expression:"importType"}],attrs:{type:"radio",name:"methd",value:"local"},domProps:{checked:e._q(e.importType,"local")},on:{change:function(t){e.importType="local"}}}),e._v("本地")]),i("span",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.importType,expression:"importType"}],attrs:{type:"radio",name:"methd",value:"link"},domProps:{checked:e._q(e.importType,"link")},on:{change:function(t){e.importType="link"}}}),e._v("外链")])])]),"local"==e.importType?i("div",{staticClass:"local"},[i("div",{staticClass:"group"},[i("div",{staticClass:"label"}),i("el-button",{attrs:{type:"primary",size:"small",plain:""},on:{click:function(t){e.$refs.media.click()}}},[e._v("选择")]),i("input",{ref:"media",staticClass:"hide",attrs:{type:"file",accept:e.accept},on:{change:e.showImgLocal}})],1),i("div",{staticClass:"group"},[i("div",{staticClass:"label"}),i("span",{staticClass:"imgShow"},["img"==e.type&&e.localUrl?i("img",{attrs:{src:e.localUrl}}):e._e(),"video"==e.type&&e.localUrl?i("video",{attrs:{src:e.localUrl,controls:""}}):e._e(),"audio"==e.type&&e.localUrl?i("audio",{attrs:{src:e.localUrl,controls:""}}):e._e()])])]):e._e(),"link"==e.importType?i("div",{staticClass:"link"},[i("div",{staticClass:"group"},[i("div",{staticClass:"label"},[e._v("外链")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.linkUrl,expression:"linkUrl"}],ref:"link",staticClass:"short form-control",domProps:{value:e.linkUrl},on:{input:function(t){t.target.composing||(e.linkUrl=t.target.value)}}})]),i("div",{staticClass:"group"},[i("div",{staticClass:"label"}),i("span",{staticClass:"imgShow"},["img"==e.type&&e.linkUrl?i("img",{attrs:{src:e.linkUrl}}):e._e(),"video"==e.type&&e.linkUrl?i("video",{attrs:{src:e.linkUrl,controls:""}}):e._e(),"audio"==e.type&&e.linkUrl?i("audio",{attrs:{src:e.linkUrl,controls:""}}):e._e()])])]):e._e()])]),i("div",{staticClass:"btns"},[i("el-button",{attrs:{type:"info"},on:{click:e.back}},[e._v("取消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.commit}},[e._v("确定")])],1)])},a=[];i.d(t,"a",function(){return r}),i.d(t,"b",function(){return a})},1171:function(e,t,i){"use strict";var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"div"},[i("div",{staticClass:"dialogs"},[e.readerDialog?i("Reader",{attrs:{readerDialog:e.readerDialog,readerId:e.readerId,version:"draft"},on:{"update:readerDialog":function(t){e.readerDialog=t}}}):e._e()],1),e.list?i("div",{staticClass:"index"},[i("div",{staticClass:"serchWrap"},[i("input",{ref:"query",staticClass:"form-control",attrs:{placeholder:"输入搜索名称"}}),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.handleCurrentChange(1)}}},[e._v("搜索")])],1),i("div",{staticClass:"listWrap"},[e._l(e.list,function(t){return"queryBook"!=e.type?i("div",{staticClass:"imgWrap",on:{click:function(i){e.$emit("insertImg",t)}}},[i("span",{staticClass:"name"},[e._v(e._s(t.name))]),"queryImg"!=e.type?i("img",{attrs:{src:t.img_src}}):e._e(),"queryImg"==e.type?i("img",{attrs:{src:t.preview_path}}):e._e()]):e._e()}),e._l(e.list,function(t){return"queryBook"==e.type?i("div",{staticClass:"imgWrap book left"},[i("div",{staticClass:"cover"},[i("div",{staticClass:"insert",on:{click:function(i){e.$emit("insertImg",t)}}},[e._v("插入书籍")]),i("div",{staticClass:"open",on:{click:function(i){e.openReader(t)}}},[e._v("打开书籍")])]),i("span",{staticClass:"name"},[e._v(e._s(t.name))]),i("img",{attrs:{src:t.img_src}})]):e._e()})],2),i("div",{staticClass:"pageWrap"},[i("el-pagination",{attrs:{small:"",layout:"prev, pager, next, jumper","current-page":e.page.num,"page-size":e.page.offset,total:e.page.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)]):e._e()])},a=[];i.d(t,"a",function(){return r}),i.d(t,"b",function(){return a})},322:function(e,t,i){"use strict";i.r(t);var r=i(1141),a=i(633);for(var n in a)"default"!==n&&function(e){i.d(t,e,function(){return a[e]})}(n);i(899);var o=i(0),s=Object(o.a)(a.default,r.a,r.b,!1,null,"7e78e40c",null);s.options.__file="editor.vue",t.default=s.exports},404:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.modifyBooks=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,i=u(e,["id"]);return(0,r.request_put)(l({id:t}),i)},t.educe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.educeResListener)({res_url:(0,r.getFullPath)("/api/books/export"+n.default.stringify(e,{addQueryPrefix:!0}))}),(0,r.request_get)("/api/books/export",e)},t.putin=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)("/api/books/import",e)},t.fabu=function(e){return log("请求等等等等等等等等等等等等"),(0,r.request_post)("/api/mult_books",e)},t.getProgress=function(e){return(0,r.request_get)("/api/mult_book/progress/"+e)},t.deleteBooks=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)("/api/books/delete",e)},t.listBooks=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_get)("/api/books",e)},t.detailBooks=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,i=u(e,["id"]);return(0,r.request_get)(l({id:t}),i)},t.addBooks=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)("/api/books",e).then(function(t){(0,o.createProListener)({res_id:t.data.task_id,res_type:"数字图书",res_cover:e.img,res_covers:"",res_exp:e.abs,res_author:e.author,res_author_id:"",res_Interpreter:"",res_Interpreter_id:"",res_lables:"",res_currency:"",res_money:"",res_isbn:"",res_isbn_ext:"",res_publication:""})})},t.getBookCatalog=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,i=u(e,["id"]);return(0,r.request_get)(d({id:t}),i)},t.modifyGroup=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,i=u(e,["id"]);return(0,r.request_put)(c({id:t}),i)},t.deleteGroup=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,i=u(e,["id"]);return(0,r.request_delete)(c({id:t}),i)},t.addGroup=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)("/api/books/groups",e)},t.listGroup=function(){return(0,r.request_get)("/api/books/groups")},t.moveGroup=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_put)("/api/groups/books",e)},t.siblingSort=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,i=u(e,["id"]);return(0,r.request_put)(p({id:t}),i)},t.moveCatalog=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(e.id,u(e,["id"]));return(0,r.request_put)("/api/catalogs/outline",t)},t.products=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)("/api/books/products",e)};var r=i(4),a=s(i(8)),n=s(i(12)),o=i(83);function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var i={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r]);return i}var l=a.default.compile("/api/books/:id"),d=a.default.compile("/api/books/:id/catalogs"),c=a.default.compile("/api/books/groups/:id"),p=a.default.compile("/api/catalogs/sort/:id")},408:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.add=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return log("add",e),(0,a.request_post)("/api/videos",e).then(function(e){var t=e.data,i=t._id,r=t.name,a=t.author,n=t.abs,o=t.tag,u=t.type_name;return(0,s.addResListener)({res_id:i,res_author:a,res_name:r,res_exp:n,res_type:u,res_lables:[o]}),e})},t.modify=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,i=u(e,["id"]);return(0,a.request_put)(l({id:t}),i)},t.listVideo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)("/api/videos",e)},t.educe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.educeResListener)({res_url:getFullPath("/api/videos/export"+qs.stringify(e,{addQueryPrefix:!0}))}),(0,a.request_get)("/api/videos/export",e)},t.putin=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)("/api/videos/import",e)},t.deleteVideo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)("/api/videos/delete",e)},t.detailVideo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)(l(e))},t.modifyGroup=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,i=u(e,["id"]);return(0,a.request_put)(d({id:t}),i)},t.deleteGroup=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)("/api/videos/groups/delete",e)},t.addGroup=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)("/api/videos/groups",e)},t.listGroup=function(){return(0,a.request_get)("/api/videos/groups")},t.moveGroup=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_put)("/api/videos/groups",e)};var r,a=i(4),n=i(8),o=(r=n)&&r.__esModule?r:{default:r},s=i(83);function u(e,t){var i={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r]);return i}var l=o.default.compile("/api/videos/:id"),d=o.default.compile("/api/videos/groups/:id")},489:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addPicture=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)("/api/pictures",e).then(function(e){var t=e.data,i=t._id,r=t.name,a=t.abs,n=t.author,o=t.tag,u=t.type_name;return(0,s.addResListener)({res_id:i,res_type:u,res_name:r,res_exp:a,res_author:n,res_lables:[o]}),e})},t.modifyPicture=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,i=u(e,["id"]);return(0,a.request_put)(l({id:t}),i)},t.listPicture=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)("/api/pictures",e)},t.educe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.educeResListener)({res_url:getFullPath("/api/pictures/export"+qs.stringify(e,{addQueryPrefix:!0}))}),(0,a.request_get)("/api/pictures/export",e)},t.putin=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)("/api/pictures/import",e)},t.deletePicture=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)("/api/pictures/delete",e)},t.detailPicture=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)(l(e))},t.modifyGroup=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,i=u(e,["id"]);return(0,a.request_put)(d({id:t}),i)},t.deleteGroup=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)("/api/pictures/groups/delete",e)},t.addGroup=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)("/api/pictures/groups",e)},t.listGroup=function(){return(0,a.request_get)("/api/pictures/groups")},t.moveGroup=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_put)("/api/pictures/groups",e)};var r,a=i(4),n=i(8),o=(r=n)&&r.__esModule?r:{default:r},s=i(83);function u(e,t){var i={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r]);return i}var l=o.default.compile("/api/pictures/:id"),d=o.default.compile("/api/pictures/groups/:id")},490:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.add=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)("/api/audios",e).then(function(e){var t=e.data,i=t._id,r=t.name,a=t.abs,n=t.author,s=t.tag,u=t.type_name;return(0,o.addResListener)({res_id:i,res_type:u,res_name:r,res_exp:a,res_author:n,res_lables:[s]}),e})},t.modify=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,i=u(e,["id"]);return(0,r.request_put)(l({id:t}),i)},t.listAudio=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_get)("/api/audios",e)},t.educe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.educeResListener)({res_url:getFullPath("/api/audios/export"+n.default.stringify(e,{addQueryPrefix:!0}))}),(0,r.request_get)("/api/audios/export",e)},t.putin=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)("/api/audios/import",e)},t.deleteAudio=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)("/api/audios/delete",e)},t.detailAudio=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_get)(l(e),e)},t.modifyGroup=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,i=u(e,["id"]);return(0,r.request_put)(d({id:t}),i)},t.deleteGroup=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)("/api/audios/groups/delete",e)},t.addGroup=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)("/api/audios/groups",e)},t.listGroup=function(){return(0,r.request_get)("/api/audios/groups")},t.moveGroup=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_put)("/api/audios/groups",e)};var r=i(4),a=s(i(8)),n=s(i(12)),o=i(83);function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var i={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r]);return i}var l=a.default.compile("/api/audios/:id"),d=a.default.compile("/api/audios/groups/:id")},578:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addArticle=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)("/api/articles",e).then(function(e){var t=e.data,i=t._id,r=t.name,a=t.abs,n=t.author,o=t.tag,u=t.type_name;return(0,s.addResListener)({res_id:i,res_type:u,res_name:r,res_exp:a,res_author:n,res_lables:[o]}),e})},t.modifyArticle=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,i=u(e,["id"]);return(0,a.request_put)(l({id:t}),i)},t.listArticle=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)("/api/articles",e)},t.educe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.educeResListener)({res_url:getFullPath("/api/articles/export"+qs.stringify(e,{addQueryPrefix:!0}))}),(0,a.request_get)("/api/articles/export",e)},t.putin=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)("/api/articles/import",e)},t.deleteArticle=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)("/api/articles/delete",e)},t.detailArticle=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,i=u(e,["id"]);return(0,a.request_get)(l({id:t}),i)},t.pushArticle=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)("/api/articles/push",e)},t.modifyGroup=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,i=u(e,["id"]);return(0,a.request_put)(d({id:t}),i)},t.deleteGroup=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)("/api/articles/groups/delete",e)},t.addGroup=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)("/api/articles/groups",e)},t.listGroup=function(){return(0,a.request_get)("/api/articles/groups")},t.moveGroup=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_put)("/api/articles/groups",e)};var r,a=i(4),n=i(8),o=(r=n)&&r.__esModule?r:{default:r},s=i(83);function u(e,t){var i={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r]);return i}var l=o.default.compile("/api/articles/:id"),d=o.default.compile("/api/articles/groups/:id")},579:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listArticles=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)("/api/push_articles",e)},t.detailArticle=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,i=u(e,["id"]);return(0,a.request_get)(l({id:t}),i)},t.del=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)("/api/push_articles/delete",e)},t.modifyArticle=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,i=u(e,["id"]);return(0,a.request_put)(l({id:t}),i)},t.addArticle=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)("/api/push_articles",e)},t.urgent=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)("/api/push_articles/urgent",e)},t.audits=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_put)("/api/push_articles/distribute",e).then(function(t){return(0,s.suance)({id:e.id,info:t.data}),t})},t.listGroup=function(){return(0,a.request_get)("/api/push_articles/groups/list")},t.addGroup=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)("/api/push_articles/groups",e)},t.modifyGroup=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,i=u(e,["id"]);return(0,a.request_put)(c({id:t}),i)},t.deleteGroup=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)("/api/push_articles/groups/delete",e)},t.moveGroup=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)("/api/push_articles/groups/move",e)},t.getMetadata=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,i=u(e,["id"]);return(0,a.request_get)(d({id:t}),i)};var r,a=i(4),n=i(8),o=(r=n)&&r.__esModule?r:{default:r},s=i(83);function u(e,t){var i={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r]);return i}var l=o.default.compile("/api/push_articles/:id"),d=(o.default.compile("/api/push_articles/distribute/:id"),o.default.compile("/api/push_articles/metadata/:id")),c=o.default.compile("/api/push_articles/groups/:id")},633:function(e,t,i){"use strict";i.r(t);var r=i(634),a=i.n(r);for(var n in r)"default"!==n&&function(e){i.d(t,e,function(){return r[e]})}(n);t.default=a.a},634:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=q(i(3)),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},n=q(i(155)),o=q(i(154)),s=q(i(621)),u=q(i(624)),l=q(i(1)),d=(q(i(82)),q(i(407))),c=q(i(892)),p=q(i(894)),v=i(896),f=(i(159),k(i(27))),g=k(i(578)),h=k(i(579)),m=k(i(489)),_=k(i(490)),y=k(i(408)),b=k(i(404)),C=q(i(897));function k(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function q(e){return e&&e.__esModule?e:{default:e}}function x(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,i){return function r(a,n){try{var o=t[a](n),s=o.value}catch(e){return void i(e)}if(!o.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}("next")})}}t.default={components:{Menu:n.default,Reader:d.default,Top:o.default,UeUpload:C.default,RightMediaList:p.default,PreviewArticle:s.default,MaskShow:u.default},created:function(){var e=x(r.default.mark(function e(){var t;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.$route.query.from,this.isShowSave=this.$route.query.hide,this.serv=this.ser[t];case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),mounted:function(){var e=x(r.default.mark(function e(){var t=this;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getDetail();case 2:this.queryImg(),this.queryVoice(),this.queryVideo(),this.queryBook(),this.UeUploadBtn(),this.ue=UE.getEditor("editor"),this.ue.addListener("ready",function(){document.querySelector(".edui-editor-toolbarbox").insertAdjacentHTML("afterend",'<div id="articleTitle"> </div> ');var e=l.default.extend(c.default);t.t=new e({el:"#articleTitle"}),log(t.detailData,2222222),t.t.detailData=t.detailData,t.ue.execCommand("insertHtml",t.detailData.preview),setTimeout(function(){document.documentElement.scrollTop=0},500)});case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),destroyed:function(){this.ue.destroy()},data:function(){return{detailId:null,detailData:{img:""},isShowSave:!1,showImgUrl:null,imgs:null,books:null,voices:null,videos:null,bookPage:null,videoPage:null,imgPage:null,voicePage:null,uploadDialog:!1,imgListDialog:!1,previewArticleDialog:!1,uploadType:"img",html:{},type:"queryBook",readerDialog:!1,readerId:"",ser:{push:h,default:g},serv:{}}},computed:{switchTypeName:function(){switch(this.uploadType){case"img":return"图片";case"video":return"视频";case"voice":return"音乐"}}},methods:{getDetail:function(){var e=this;if(this.detailId=this.$route.query.articleId,this.detailId)return this.serv.detailArticle({id:this.detailId}).then(function(t){delete t.data.attributes,e.detailData=t.data,log("推送",t)}).catch(function(e){log("获取文章出错")})},queryImg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};m.listPicture(a({pageNum:e,pageOffset:i,group_id:""},r)).then(function(e){log("img",e),t.imgs=e.data,t.imgPage=e.page})},queryVoice:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_.listAudio(a({pageNum:e,pageOffset:i,group_id:""},r)).then(function(e){log("voice",e),t.voices=e.data,t.voicePage=e.page})},queryVideo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};y.listVideo(a({pageNum:e,pageOffset:i,group_id:""},r)).then(function(e){log("音频",e),t.videos=e.data,t.videoPage=e.page})},queryBook:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};b.listBooks(a({pageNum:e,pageOffset:i,group_id:""},r)).then(function(e){log("book",e),t.books=e.data,t.bookPage=e.page})},handleSizeChange:function(){},handleClick:function(e,t){},handleCurrentChange:function(e){this[this.type](e.page,12,e.query)},handleCurrentChangeImg:function(e){this.queryImg(e)},addHtml:function(e){this.ue.execCommand("inserthtml",'<div>\n          <img src="'+e.img_src+"\"/>\n          <p>\n            <span style='color:#666;font-size:14px'> 书名："+(e.name||"")+" </span>\n            <span style='color:#666;font-size:14px'> 作者："+(e.author||"")+' </span>\n          </p>\n          <p>简介:</p>\n          <p style="text-indent:2em;color:#666;">'+(e.abs||"")+"</p>\n      </div>")},insertImg:function(e){switch(log("插入",e),this.type){case"queryVideo":this.ue.execCommand("insertvideo",{url:e.preview});break;case"queryImg":this.ue.execCommand("insertimage",{src:e.preview_path});break;case"queryBook":this.addHtml(e);break;case"queryVoice":this.ue.execCommand("music",{url:e.preview})}},insertCover:function(e){this.showImgUrl=e.preview_path,this.detailData.img=e.preview,this.imgListDialog=!1},showImg:function(e){var t=this,i=e.target.files[0];if(i){var r=this.$progress();f.getTask(i,{is_chunk:!0,size:1048576},function(e){progress.percentage=e}).then(function(e){r.close(),t.detailData.img=e.data.path,t.showImgUrl=URL.createObjectURL(i),log("this.detailData.img",t.detailData.img,t.showImgUrl)})}},UeUploadBtn:function(){(0,v.imgUploadBtn)(this),(0,v.videoUploadBtn)(this),(0,v.voiceUploadBtn)(this)},openUploadDialog:function(e){this.uploadType=e,this.uploadDialog=!0,log(this.uploadDialog)},insertMedia:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){this.ue.execCommand("inserthtml",insertMedia())}),openReader:function(e){this.readerId=e.id,this.readerDialog=!0},previewArt:function(){var e=document.querySelector("#richTitle"),t=document.querySelector("#richAuthor"),i=e.value,r=t.value,a=this.ue.getContent(),n=new Date,o=n.getFullYear()+"-"+n.getMonth()+"-"+n.getDate();this.previewArticleDialog=!0,this.html={preview:a,title:i,author:r,time:o}},submit:function(){var e=x(r.default.mark(function e(){var t,i,a,n=this;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.t.valiAll()){e.next=4;break}return this.$message.error("标题和作者不能为空!"),e.abrupt("return");case 4:if(this.detailData.abs||(log("获取正文前54字"),t=(t=this.ue.getContentTxt()).substr(0,54),this.detailData.abs=t),this.detailData.preview=this.ue.getContent(),log(this.detailData),e.prev=7,!this.detailData.id){e.next=13;break}return e.next=11,this.serv.modifyArticle(this.detailData).then(function(e){n.$message.success("修改成功!"),n.$router.back()});case 11:e.next=15;break;case 13:return e.next=15,this.serv.addArticle(this.detailData).then(function(e){n.$message.success("新增成功!"),n.$router.back()});case 15:e.next=27;break;case 17:e.prev=17,e.t0=e.catch(7),i=e.t0.payload,e.t1=r.default.keys(i.messages);case 21:if((e.t2=e.t1()).done){e.next=27;break}return a=e.t2.value,this.$message.error(i.messages[a]),e.abrupt("break",27);case 27:case"end":return e.stop()}},e,this,[[7,17]])}));return function(){return e.apply(this,arguments)}}()}}},635:function(e,t,i){"use strict";i.r(t);var r=i(636),a=i.n(r);for(var n in r)"default"!==n&&function(e){i.d(t,e,function(){return r[e]})}(n);t.default=a.a},636:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{detailData:{name:"",author:""}}},methods:{valiAll:function(){return this.$refs.titleForm.valiAll()}}}},637:function(e,t,i){},638:function(e,t,i){"use strict";i.r(t);var r=i(639),a=i.n(r);for(var n in r)"default"!==n&&function(e){i.d(t,e,function(){return r[e]})}(n);t.default=a.a},639:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=i(407),n=(r=a)&&r.__esModule?r:{default:r};t.default={components:{Reader:n.default},props:["type","list","page"],data:function(){return{readerDialog:!1,readerId:""}},methods:{handleCurrentChange:function(e){var t={page:e,query:{name:this.$refs.query.value}};log("data",t),this.$emit("pageChange",t)},handleSizeChange:function(){},insertImg:function(){},openReader:function(e){log("打开"),this.readerId=e.id,this.readerDialog=!0}}}},640:function(e,t,i){},641:function(e,t,i){"use strict";i.r(t);var r=i(642),a=i.n(r);for(var n in r)"default"!==n&&function(e){i.d(t,e,function(){return r[e]})}(n);t.default=a.a},642:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(i(3)),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(i(27)),n=o(i(124));function o(e){return e&&e.__esModule?e:{default:e}}t.default={components:{Progress:n.default},props:["ue","type"],created:function(){},mounted:function(){},data:function(){return{showImgUrl:null,localUrl:null,linkUrl:null,file:null,percentage:0,fileUrl:null,importType:"local"}},computed:{accept:function(){var e=this.type+"Accept";return this.$config[e]},command:function(){var e=this.type+"Command";return this.$config[e]}},methods:{showImgLocal:function(e){var t=e.target.files[0];t&&(this.file=t,this.localUrl=URL.createObjectURL(t))},back:function(){this.$emit("cancle")},commit:function(){var e,t=(e=r.default.mark(function e(){var t,i=this;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("local"!=this.importType){e.next=10;break}if(!this.file){e.next=7;break}return t=this.$progress(),e.next=5,a.getTask(this.file,{is_chunk:!0,size:1048576},function(e){t.percentage=e}).then(function(e){i.fileUrl=e.data.url,i.ue.execCommand(i.command,{src:e.data.url,url:e.data.url}),t.close(),i.back()});case 5:e.next=8;break;case 7:this.$message.error("请先选择文件!");case 8:e.next=11;break;case 10:"link"==this.importType&&(this.ue.execCommand(this.command,{src:this.linkUrl,url:this.linkUrl}),this.back());case 11:case"end":return e.stop()}},e,this)}),function(){var t=e.apply(this,arguments);return new Promise(function(e,i){return function r(a,n){try{var o=t[a](n),s=o.value}catch(e){return void i(e)}if(!o.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}("next")})});return function(){return t.apply(this,arguments)}}()}}},643:function(e,t,i){},644:function(e,t,i){},892:function(e,t,i){"use strict";i.r(t);var r=i(1164),a=i(635);for(var n in a)"default"!==n&&function(e){i.d(t,e,function(){return a[e]})}(n);i(893);var o=i(0),s=Object(o.a)(a.default,r.a,r.b,!1,null,null,null);s.options.__file="articleTitle.vue",t.default=s.exports},893:function(e,t,i){"use strict";var r=i(637);i.n(r).a},894:function(e,t,i){"use strict";i.r(t);var r=i(1171),a=i(638);for(var n in a)"default"!==n&&function(e){i.d(t,e,function(){return a[e]})}(n);i(895);var o=i(0),s=Object(o.a)(a.default,r.a,r.b,!1,null,"65df08cd",null);s.options.__file="rightMediaList.vue",t.default=s.exports},895:function(e,t,i){"use strict";var r=i(640);i.n(r).a},896:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.imgUploadBtn=function(e){UE.registerUI("img-upload-btn",function(t,i){t.registerCommand(i,{execCommand:function(){log("execCommand:"+i),e.openUploadDialog("img")}});var r=new UE.ui.Button({name:i,title:i,cssRules:"background-position: -380px 0;",onclick:function(){t.execCommand(i)}});return t.addListener("selectionchange",function(){var e=t.queryCommandState(i);-1==e?(r.setDisabled(!0),r.setChecked(!1)):(r.setDisabled(!1),r.setChecked(e))}),r})},t.videoUploadBtn=function(e){UE.registerUI("video-upload-btn",function(t,i){t.registerCommand(i,{execCommand:function(){log("execCommand:"+i),e.openUploadDialog("video")}});var r=new UE.ui.Button({name:i,title:i,cssRules:"background-position: -320px -20px;",onclick:function(){t.execCommand(i)}});return t.addListener("selectionchange",function(){var e=t.queryCommandState(i);-1==e?(r.setDisabled(!0),r.setChecked(!1)):(r.setDisabled(!1),r.setChecked(e))}),r})},t.voiceUploadBtn=function(e){UE.registerUI("voice-upload-btn",function(t,i){t.registerCommand(i,{execCommand:function(){log("execCommand:"+i),e.openUploadDialog("voice")}});var r=new UE.ui.Button({name:i,title:i,cssRules:"background-position: -18px -40px;",onclick:function(){t.execCommand(i)}});return t.addListener("selectionchange",function(){var e=t.queryCommandState(i);-1==e?(r.setDisabled(!0),r.setChecked(!1)):(r.setDisabled(!1),r.setChecked(e))}),r})}},897:function(e,t,i){"use strict";i.r(t);var r=i(1170),a=i(641);for(var n in a)"default"!==n&&function(e){i.d(t,e,function(){return a[e]})}(n);i(898);var o=i(0),s=Object(o.a)(a.default,r.a,r.b,!1,null,"bee1d9fc",null);s.options.__file="UeUpload.vue",t.default=s.exports},898:function(e,t,i){"use strict";var r=i(643);i.n(r).a},899:function(e,t,i){"use strict";var r=i(644);i.n(r).a}}]);