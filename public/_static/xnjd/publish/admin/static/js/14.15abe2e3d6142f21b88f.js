(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{1092:function(t,e,a){"use strict";var i=a(793);a.n(i).a},1134:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"index clearfix"},[a("Top",{attrs:{currentPlant:"X-PUBLISH"}}),a("Menu",{attrs:{curr:"/digitalProductLibrary/video"}}),a("div",{staticClass:"mainRight"},[a("div",{staticClass:"contentWrap"},[a("div",{staticClass:"contentLeft"},[a("div",{staticClass:"maindata"},[a("div",{staticClass:"serachWrap"},[a("div",{staticClass:"title"}),a("form",{staticClass:"clearfix",attrs:{id:"mainForm"}},[a("span",{staticClass:"group-inline"},[a("el-input",{attrs:{placeholder:"视读名称",name:"name",clearable:""}})],1),a("span",{staticClass:"group-inline"},[a("TimePick",{attrs:{inputsName:["start_time","end_time"]}})],1),a("span",{staticClass:"group-inline"},[a("select",{staticClass:"form-control",staticStyle:{width:"110px"},attrs:{placeholder:"状态",name:"status"}},[a("option",{attrs:{value:""}},[t._v("审核状态")]),t._l(t.status,function(e,i){return a("option",{domProps:{value:i}},[t._v(t._s(e))])})],2)]),a("span",{staticClass:"right group-inline"},[a("el-button",{attrs:{size:"mediu",type:"primary",icon:"el-icon-search",plain:""},on:{click:t.query}},[t._v("搜索")]),a("el-button",{attrs:{size:"mediu",type:"primary",icon:"el-icon-plus"},on:{click:function(e){t.opneDetailDialog("info")}}},[t._v("新建")])],1)])]),a("div",{staticClass:"tableWrap"},[a("div",{staticClass:"tableTop"},[a("div",{staticClass:"title vel-line"},[a("span",[t._v("全部 "),t.page?a("span",{staticClass:"totalNum"},[t._v("("+t._s(t.page.total)+")")]):t._e()]),a("div",{staticClass:"btns"},[a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){t.audits()}}},[t._v("审核")]),a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:t.urgentDigital}},[t._v("加急审核")]),a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:t.moveToOther}},[t._v("移动分组")]),a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){t.delChoosen(!1)}}},[t._v("删除")])],1)])]),a("table",{staticClass:"table"},[a("thead",[a("tr",[a("th",{staticClass:"allBtn"},[a("input",{attrs:{type:"checkbox"},on:{click:function(e){t.checkAll(e)}}})]),a("th",[t._v("名称")]),a("th",[t._v("作者")]),a("th",[t._v("视读数量")]),a("th",{attrs:{width:"70"}},[t._v("审核状态")]),a("th",{attrs:{width:"70"}},[t._v("分发状态")]),a("th",{staticClass:"time"},[t._v("分发时间")]),a("th",{staticClass:"operate"},[t._v("操作")])])]),t.list?a("tbody",t._l(t.list,function(e){return a("tr",[a("td",[a("input",{ref:"ids",refInFor:!0,attrs:{type:"checkbox",name:"ids","data-type":e.status},domProps:{value:e.id}})]),a("td",[a("img",{staticClass:"cover-photo",attrs:{src:e.img_src}}),a("div",{staticClass:"th-name bookName",attrs:{title:e.name}},[t._v(t._s(e.name))])]),a("td",[a("div",{staticClass:"th-name",attrs:{title:e.author}},[t._v(t._s(e.author))])]),a("td",[t._v(t._s(e.count))]),a("td",{class:t.getColor(e.status)},[t._v(t._s("审核未通过"==e.status?"未通过":e.status))]),a("td",[t._v(t._s(e.release_status_name||"-"))]),a("td",[t._v(t._s(e.release_time||"-"))]),a("td",[a("div",{staticClass:"btns"},[a("span",{staticClass:"icon icon-detail",attrs:{size:"mini",title:"详情",type:"primary",plain:""},on:{click:function(a){t.opneDetailDialog("info",e)}}}),1!=e.audits_status?a("span",{staticClass:"icon icon-publish",attrs:{size:"mini",title:"审核",type:"primary",plain:""},on:{click:function(a){t.audits(e.id)}}}):t._e(),3==e.audits_status?a("span",{staticClass:"icon icon-fenfa",attrs:{size:"mini",title:"分发",type:"primary",plain:""},on:{click:function(a){t.opnePublishDialog(e)}}}):t._e(),1!=e.audits_status?a("span",{staticClass:"icon icon-delete",attrs:{size:"mini",title:"删除",type:"primary",plain:""},on:{click:function(a){t.delChoosen(e.id)}}}):t._e()])])])})):t._e()]),t.page?a("div",{staticClass:"pageWrap"},[a("el-pagination",{attrs:{small:!1,background:"","current-page":t.page.num,"page-sizes":[10,50,100],"page-size":t.page.offset,layout:"total, sizes,prev, pager, next, jumper",total:t.page.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1):t._e()]),a("div",{staticClass:"gruopList"},[a("GroupList",{attrs:{groupList:t.groupList,currGroup:t.currGroup},on:{addGroup:t.addGroup,updateGroup:t.updateGroup,delGroup:t.delGroup,groupChange:t.groupChange}})],1)])])])]),a("div",{staticClass:"dialogs"},[a("Examine",{attrs:{examineDialog:t.examineDialog},on:{"update:examineDialog":function(e){t.examineDialog=e},saveExamine:t.saveExamine}}),t.publishDialog?a("Dispense",{attrs:{publishDialog:t.publishDialog,item:t.detailData},on:{"update:publishDialog":function(e){t.publishDialog=e},dispenseOk:t.dispenseOk}}):t._e(),a("el-dialog",{staticClass:"no-footer",attrs:{center:!1,visible:t.detailDialog,"close-on-click-modal":!1,top:"50px",width:"1200px"},on:{"update:visible":function(e){t.detailDialog=e}}},[a("div",{staticClass:"content",attrs:{slot:"title"},slot:"title"},[t.detailDialog?a("Detail",{attrs:{type:t.detailDialoaType,detailDialog:t.detailDialog,detailData:t.detailData,readOnly:t.readOnly},on:{saveok:t.saveOk,Knowledgeclick:t.KnowledgeClick,"update:detailDialog":function(e){t.detailDialog=e}}}):t._e()],1)]),a("el-dialog",{attrs:{center:!1,visible:t.moveToOtherDiaolog,"close-on-click-modal":!1,title:"移动分组",width:"500px"},on:{"update:visible":function(e){t.moveToOtherDiaolog=e}}},[a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("移动到")]),a("select",{ref:"moveToId",staticClass:"form-control",attrs:{placeholder:"请选择"}},t._l(t.groupList,function(e,i){return e.id!=t.currGroup&&""!=e.id?a("option",{domProps:{value:e.id,textContent:t._s(e.name)}}):t._e()}))]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info"},on:{click:function(e){t.moveToOtherDiaolog=!1}}},[t._v("返回")]),a("el-button",{attrs:{type:"primary"},on:{click:t.moveToSubmit}},[t._v(" 确定")])],1)])],1)],1)},n=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n})},348:function(t,e,a){"use strict";a.r(e);var i=a(1134),n=a(791);for(var s in n)"default"!==s&&function(t){a.d(e,t,function(){return n[t]})}(s);a(1092);var r=a(0),o=Object(r.a)(n.default,i.a,i.b,!1,null,"4d64c3ec",null);o.options.__file="index.vue",e.default=o.exports},362:function(t,e,a){"use strict";a.r(e);var i=a(363),n=a.n(i);for(var s in i)"default"!==s&&function(t){a.d(e,t,function(){return i[t]})}(s);e.default=n.a},363:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["groupList","currGroup"],data:function(){return{newGroupDialogOpen:!1,updateGroupDialogOpen:!1,currEditGroup:null}},created:function(){},computed:{},methods:{groupChange:function(t){this.$emit("groupChange",t)},addGroupDialog:function(){},delGroup:function(t){var e=this;this.$confirm("是否删除分组:"+t.name).then(function(a){dir(a),e.$emit("delGroup",t.id)}).catch(function(t){dir(t)})},updateGroupDialog:function(t){this.updateGroupDialogOpen=!0,this.currEditGroup=t},addGroup:function(){if(this.$refs.addGroupForm.valiAll()){var t=document.querySelector("#addGroupForm");this.$emit("addGroup",t),this.newGroupDialogOpen=!1}},updateGroup:function(){if(this.$refs.updateGroupForm.valiAll()){var t=document.querySelector("#updateGroupForm");this.$emit("updateGroup",t),this.updateGroupDialogOpen=!1}}}}},364:function(t,e,a){},365:function(t,e,a){"use strict";a.r(e);var i=a(370),n=a(362);for(var s in n)"default"!==s&&function(t){a.d(e,t,function(){return n[t]})}(s);a(366);var r=a(0),o=Object(r.a)(n.default,i.a,i.b,!1,null,"176cd962",null);o.options.__file="GroupList.vue",e.default=o.exports},366:function(t,e,a){"use strict";var i=a(364);a.n(i).a},367:function(t,e,a){"use strict";a.r(e);var i=a(368),n=a.n(i);for(var s in i)"default"!==s&&function(t){a.d(e,t,function(){return i[t]})}(s);e.default=n.a},368:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(122),n=a(123);e.default={mixins:[i.getIconStyle],props:{publishDialog:{type:Boolean,default:!1},item:{type:Object,default:{}},is_release:Boolean},data:function(){return{list:null,coverDialog:!1,choiceDialog:!1,currentItem:null,currentVersion:null}},created:function(){this.getList()},methods:{getList:function(){var t=this;(0,n.getDispense)({entity_type:this.item.type_number||this.item.type,id:this.item.id}).then(function(e){t.list=e.data}).catch(function(e){var a=e.payload;for(var i in a.messages){t.$message.error(a.messages[i]);break}})},colse:function(){this.$emit("update:publishDialog",!1)},save:function(){var t=[];this.$refs.dispense.querySelectorAll("input[type=checkbox]:checked").forEach(function(e){t.push(e.value)}),t.length?this.$emit("dispenseSave",t):this.$message.error("请选择你要发布的平台")},pushTime:function(t){return t?"最近"+t+"发布过":"最近暂无分发"},push:function(t){var e=this;this.currentItem=t,this.is_release&&t.release_msg.length?this.$confirm("信息不全是否分发?").then(function(a){t.version?e.coverDialog=!0:e.dispense()},function(t){var e=t.payload;log(e.message)}).catch(function(t){log("cancel")}):t.version&&t.version.length?this.coverDialog=!0:this.dispense()},dispense:function(t,e){var a=this;(0,n.dispense)({platform_id:this.currentItem.id,audits_id:this.item.audits_id,is_cover:t,version_id:e}).then(function(t){a.$message.success("分发提交成功,请稍后查看结果!"),a.$emit("dispenseOk")}).catch(function(t){var e=t.payload;for(var i in e.messages){a.$message.error(e.messages[i]);break}})},getdefect:function(t){return"缺失字段: "+t.release_msg.join("/")},getBtnName:function(t){return this.is_release&&!t.is_release?"缺少关键信息不能分发":t.release_msg&&t.release_msg.length?"确认分发":"分发"},coverDispense:function(){var t=this;if(!this.currentVersion)return this.$message.warning("请选择你要覆盖的版本号!");var e=this.currentItem.version.find(function(e){return e.xread_book_id===t.currentVersion}).version_id;this.dispense(this.currentVersion,e)}}}},369:function(t,e,a){},370:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"div"},[a("div",{staticClass:"groupWrap"},[a("div",{staticClass:"list"},[a("ul",t._l(t.groupList,function(e){return a("li",{staticClass:"licontent",class:{red:e.id==t.currGroup}},[a("div",{staticClass:"name ellipsis",attrs:{title:e.name+"("+e.num+")"},on:{click:function(a){t.groupChange(e.id)}}},[a("span",{staticClass:"title"},[t._v(t._s(e.name))]),a("span",[t._v(t._s("("+e.num+")"))])]),""!=e.id&&"non"!=e.id?a("div",{staticClass:"btns"},[a("span",{on:{click:function(a){t.updateGroupDialog(e)}}},[a("i",{staticClass:"el-icon-edit"})]),a("span",{on:{click:function(a){t.delGroup(e)}}},[a("i",{staticClass:"el-icon-delete"})])]):t._e()])}))]),a("div",{staticClass:"addGroupBtnWrap"},[a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){t.newGroupDialogOpen=!0}}},[a("i",{staticClass:"el-icon-plus"},[t._v("新建分组")])])],1)]),a("div",{staticClass:"dialogs"},[t.newGroupDialogOpen?a("el-dialog",{attrs:{title:"新增",visible:t.newGroupDialogOpen,width:"500px"},on:{"update:visible":function(e){t.newGroupDialogOpen=e}}},[a("div",{staticClass:"formWrap"},[a("VaForm",{ref:"addGroupForm"},[a("form",{attrs:{id:"addGroupForm"}},[a("div",{staticClass:"group"},[a("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"}],staticClass:"form-control",attrs:{name:"name"}})])])])],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info"},on:{click:function(e){t.newGroupDialogOpen=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.addGroup}},[t._v("确定")])],1)]):t._e(),t.updateGroupDialogOpen?a("el-dialog",{attrs:{title:"修改",visible:t.updateGroupDialogOpen,width:"500px"},on:{"update:visible":function(e){t.updateGroupDialogOpen=e}}},[a("div",{staticClass:"formWrap"},[a("VaForm",{ref:"updateGroupForm"},[t.currEditGroup?a("form",{attrs:{id:"updateGroupForm"}},[a("div",{staticClass:"group"},[a("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"}],staticClass:"form-control",attrs:{name:"name"},domProps:{value:t.currEditGroup.name}}),a("input",{staticClass:"hide",attrs:{name:"id"},domProps:{value:t.currEditGroup.id}})])]):t._e()])],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info"},on:{click:function(e){t.updateGroupDialogOpen=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.updateGroup}},[t._v("确定")])],1)]):t._e()],1)])},n=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n})},371:function(t,e,a){"use strict";a.r(e);var i=a(372),n=a.n(i);for(var s in i)"default"!==s&&function(t){a.d(e,t,function(){return i[t]})}(s);e.default=n.a},372:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(a(3)),n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},s=a(379),r=o(a(82));function o(t){return t&&t.__esModule?t:{default:t}}function l(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}e.default={props:{resourceDialog:{type:Boolean,default:!1},singleElection:{type:Boolean,default:!0},type:{type:String,default:"1"},curSoucesList:{type:Array,default:[]},isShowType:{type:Boolean,default:!1},isShowSearch:Boolean,isShowResource:Boolean,isDebris:{default:!1},parameter:Object},data:function(){return{dataList:[],page:null,currentType:null,contentType:[{name:"电子书",value:"1"},{name:"图片",value:"3"},{name:"音频",value:"4"},{name:"视频",value:"5"},{name:"3D内容",value:"6"},{name:"VR",value:"7"},{name:"AR",value:"8"}],query:{}}},created:function(){this.currentType=this.type||"1",this.isShowResource&&this.contentType.push({name:"共享资源",value:"22"}),this.type.includes("20")&&(this.contentType=[{name:"权威案例",value:"20-1"},{name:"法律法规",value:"20-2"},{name:"法律观点",value:"20-3"},{name:"裁判文书",value:"20-4"}])},methods:{getList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.page&&this.page.num||1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.page&&this.page.offset||10;(0,s._addBooks)(n({pageNum:e,pageOffset:a,type:this.currentType||this.type},this.parameter,this.query)).then(function(e){t.dataList=e.data||[],t.page=e.page})},colse:function(){this.$emit("update:resourceDialog",!1)},save:function(){var t=[];this.$refs.dispense.querySelectorAll("input[type=checkbox]:checked").forEach(function(e){t.push(e.value)}),t.length?this.$emit("dispenseSave",t):this.$message.error("请选择你要发布的平台")},search:function(){this.query=(0,r.default)(document.querySelector("#detailSearchForm"),{hash:!0}),this.getList(1,this.page.offset)},addSelection:function(){var t,e=(t=i.default.mark(function t(){var e,a,s,r,o,u,c,d,p,f=this;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=document.querySelector(".addBookForm"),a=e.querySelectorAll('input[name="ids"]:checked'),s=[],a.length){t.next=5;break}return t.abrupt("return",this.$message.warning("请选择添加内容"));case 5:r=!0,o=!1,u=void 0,t.prev=8,c=function(){var t=p.value;if(f.curSoucesList.findIndex(function(e){return e.id==t.value})>-1)return"continue";s.push(n({},f.dataList.find(function(e){return e.id==t.value}),{action:"add"}))},d=a[Symbol.iterator]();case 11:if(r=(p=d.next()).done){t.next=18;break}if("continue"!==c()){t.next=15;break}return t.abrupt("continue",15);case 15:r=!0,t.next=11;break;case 18:t.next=24;break;case 20:t.prev=20,t.t0=t.catch(8),o=!0,u=t.t0;case 24:t.prev=24,t.prev=25,!r&&d.return&&d.return();case 27:if(t.prev=27,!o){t.next=30;break}throw u;case 30:return t.finish(27);case 31:return t.finish(24);case 32:this.$emit("select",[].concat(s,l(this.curSoucesList)));case 33:case"end":return t.stop()}},t,this,[[8,20,24,32],[25,,27,31]])}),function(){var e=t.apply(this,arguments);return new Promise(function(t,a){return function i(n,s){try{var r=e[n](s),o=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(o).then(function(t){i("next",t)},function(t){i("throw",t)});t(o)}("next")})});return function(){return e.apply(this,arguments)}}(),checkAll:function(t,e){var a=this;document.querySelector("."+e).querySelectorAll('input[name="ids"]').forEach(function(e,i){var s=a.curSoucesList.findIndex(function(t){return t.id==e.value||t.b_id==e.value});t.target.checked?-1==s&&a.curSoucesList.push(n({},a.dataList.find(function(t){return t.id==e.value}),{action:"add"})):a.curSoucesList.splice(s,1),e.checked=t.target.checked})},uncheckedAll:function(t,e){var a=this.curSoucesList.findIndex(function(t){return t.id==e.id||t.b_id==e.id});t.target.checked?-1==a&&this.curSoucesList.push(e):this.curSoucesList.splice(a,1),this.singleElection||(this.$refs.ids.forEach(function(t){return t.checked=!1}),t.target.checked=!0)},isChecked:function(t){return this.curSoucesList.findIndex(function(e){return e.id===t||e.b_id===t})>-1},handleSizeChange:function(t){this.query=(0,r.default)(document.querySelector("#detailSearchForm"),{hash:!0}),this.getList(1,t)},handleCurrentChange:function(t){this.query=(0,r.default)(document.querySelector("#detailSearchForm"),{hash:!0}),this.getList(t,this.page.offset)}},watch:{currentType:function(t){this.getList()}}}},373:function(t,e,a){},374:function(t,e,a){"use strict";a.r(e);var i=a(392),n=a(371);for(var s in n)"default"!==s&&function(t){a.d(e,t,function(){return n[t]})}(s);a(389);var r=a(0),o=Object(r.a)(n.default,i.a,i.b,!1,null,"8d4001a2",null);o.options.__file="Resource.vue",e.default=o.exports},375:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getList=function(t){var e=t.type,a=t.id,i=t.resource_type;if("book"==e)return m({id:a});if("video"==e)return _({id:a});if("resource"==e)return C({id:a,resource_type:i})},e.del=function(t){var e=t.type,a=o(t,["type"]);if("book"==e)return g(a);if("video"==e)return y(a);if("resource"==e)return k(a);if("audio"==e)return x(a)},e.add=function(t){var e=t.type,a=o(t,["type"]);if("book"==e)return g(a);if("video"==e)return b(a);if("resource"==e)return D(a)},e.check=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)(v(t))},e.bookList=m,e.bookInfo=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)(l(t))},e.bookDel=g,e.bookSave=function(t){var e=t.id,a=o(t,["id"]);if(e)return(0,n.request_put)(l({id:e}),a);return(0,n.request_post)("/api/components_paper",a)},e.videoList=_,e.videoAdd=b,e.videoDel=y,e.resourceList=C,e.resourceAdd=D,e.resourceDel=k,e.groupList=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)(p(t),t)},e.groupSave=function(t){var e=t.id,a=o(t,["id"]);if(e)return(0,n.request_put)(f({id:e}),a);return(0,n.request_post)("/api/components_groups",a)},e.groupDetail=function(t){var e=t.id;return(0,n.request_get)(f({id:e}))},e.audioDel=x,e.saveEBook=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.current_id)return(0,n.request_put)(h({id:t.current_id}),t);return(0,n.request_post)("/api/components_ebooks",t)},e.getEBook=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)(h(t))};var i,n=a(4),s=a(8),r=(i=s)&&i.__esModule?i:{default:i};function o(t,e){var a={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(a[i]=t[i]);return a}var l=r.default.compile("/api/components_paper/:id"),u=r.default.compile("/api/components_paper/:id/list"),c=r.default.compile("/api/components/:id/video"),d=r.default.compile("/api/components/:id/resource"),p=r.default.compile("/api/components_groups/:id/list"),f=r.default.compile("/api/components_groups/:id"),v=r.default.compile("/api/components_paper/:id/check"),h=r.default.compile("/api/components_ebooks/:id");function m(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)(u(t))}function g(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_delete)(l(t))}function _(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)(c(t))}function b(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/api/components/video",t)}function y(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_delete)(c({id:t.constitute_id}))}function C(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)(d(t),t)}function D(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/api/components/resource",t)}function k(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_delete)(d({id:t.constitute_id}))}function x(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_delete)(f(t),t)}},376:function(t,e,a){"use strict";a.r(e);var i=a(378),n=a(367);for(var s in n)"default"!==s&&function(t){a.d(e,t,function(){return n[t]})}(s);a(377);var r=a(0),o=Object(r.a)(n.default,i.a,i.b,!1,null,"1fd5a38b",null);o.options.__file="Dispense.vue",e.default=o.exports},377:function(t,e,a){"use strict";var i=a(369);a.n(i).a},378:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{attrs:{center:!1,visible:t.coverDialog,top:"50px",width:"500px","show-close":!1,title:"x-read系统中已有该产品，选择你的操作"}},[a("div",{staticClass:"coverContent"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.choiceDialog=!0}}},[t._v("覆盖原有产品")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dispense()}}},[t._v("创建新的产品版本")])],1),a("div",{staticClass:"footer dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info"},on:{click:function(e){t.coverDialog=!1}}},[t._v("取消")])],1)]),t.choiceDialog?a("el-dialog",{attrs:{center:!1,visible:t.choiceDialog,top:"50px",width:"500px","show-close":!1,title:"选择版本号"}},[a("div",{staticClass:"coverContent"},[a("el-radio-group",{model:{value:t.currentVersion,callback:function(e){t.currentVersion=e},expression:"currentVersion"}},t._l(t.currentItem.version,function(e){return a("el-radio",{key:e.xread_book_id,attrs:{label:e.xread_book_id}},[t._v(t._s(e.version_id))])}))],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.coverDispense}},[t._v("确定")]),a("el-button",{attrs:{type:"info"},on:{click:function(e){t.choiceDialog=!1}}},[t._v("取消")])],1)]):t._e(),a("el-dialog",{attrs:{center:!1,visible:t.publishDialog,top:"50px",width:"1000px","show-close":!1}},[a("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[a("div",{staticClass:"el-icon-close",on:{click:t.colse}}),a("el-tabs",{attrs:{value:"ff"}},[a("el-tab-pane",{attrs:{label:"分发",name:"ff"}})],1)],1),a("ul",{ref:"dispense",staticClass:"content modular"},t._l(t.list,function(e){return a("li",[a("div",{staticClass:"icon"},[a("div",{class:t.getStyle(e.type)}),a("span",{domProps:{textContent:t._s(e.name)}})]),a("ul",{staticClass:"defect"},[e.release_msg&&!e.release_msg.length?a("li",{staticClass:"pass"},[t._v("可正常分发")]):t._e(),e.release_msg&&e.release_msg.length?a("li",{domProps:{textContent:t._s(t.getdefect(e))}}):t._e()]),a("el-button",{attrs:{type:!t.is_release||e.is_release?"primary":"info",size:"mini",plain:""},domProps:{textContent:t._s(t.getBtnName(e))},on:{click:function(a){(!t.is_release||e.is_release)&&t.push(e)}}})],1)})),a("div",{staticClass:"footer dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info"},on:{click:t.colse}},[t._v("取消")])],1)])],1)},n=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n})},380:function(t,e,a){"use strict";a.r(e);var i=a(381),n=a.n(i);for(var s in i)"default"!==s&&function(t){a.d(e,t,function(){return i[t]})}(s);e.default=n.a},381:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["infoData","mediaType","infoDialog"],data:function(){return{metadata:this.infoData.attributes||[]}},computed:{hassVideo:function(){return 6==this.infoData.type||5==this.infoData.type||8==this.infoData.type}},methods:{detailType:function(){return this.infoData.img_status}},created:function(){}}},382:function(t,e,a){},383:function(t,e,a){"use strict";a.r(e);var i=a(384),n=a.n(i);for(var s in i)"default"!==s&&function(t){a.d(e,t,function(){return i[t]})}(s);e.default=n.a},384:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,n=a(82),s=((i=n)&&i.__esModule,function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}(a(375)));e.default={props:["dataType","isShow","detailData","defaultList","isLabelHide","onlyShow"],data:function(){return{services:s,type:"1",list:[]}},created:function(){this.defaultList?this.list=this.defaultList:this.getList(this.dataType)},computed:{},methods:function(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}({handleClick:function(){},getList:function(t){var e=this;this.detailData&&this.detailData.id&&this.services.getList({type:t,id:this.detailData.id,resource_type:this.type}).then(function(t){e.list=t.data})}},"handleClick",function(t){log(t)}),watch:{defaultList:function(){this.list=this.defaultList},type:function(t){this.getList(this.dataType)}}}},385:function(t,e,a){},389:function(t,e,a){"use strict";var i=a(373);a.n(i).a},391:function(t,e,a){"use strict";a.r(e);var i=a(481),n=a(383);for(var s in n)"default"!==s&&function(t){a.d(e,t,function(){return n[t]})}(s);a(476);var r=a(0),o=Object(r.a)(n.default,i.a,i.b,!1,null,"68ca030c",null);o.options.__file="tab.vue",e.default=o.exports},392:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{staticClass:"restBody2",attrs:{center:!1,visible:t.resourceDialog,width:"1200px",top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,"append-to-body":""},on:{"update:visible":function(e){t.resourceDialog=e}}},[a("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"el-icon-close",on:{click:t.colse}}),a("el-tabs",{attrs:{value:"detail"}},[a("el-tab-pane",{attrs:{label:"添加",name:"detail"}})],1)],1),a("el-form",{staticClass:"addBookForm"},[t.isShowType?a("span",{staticClass:"group-inline",staticStyle:{margin:"20px","margin-top":"0"}},[a("el-radio-group",{model:{value:t.currentType,callback:function(e){t.currentType=e},expression:"currentType"}},t._l(t.contentType,function(e){return a("el-radio-button",{key:e.id,attrs:{label:e.value}},[t._v(t._s(e.name))])}))],1):t._e(),t.isShowSearch?t._e():a("div",{staticClass:"serachWrap"},[a("form",{attrs:{id:"detailSearchForm"}},[a("span",{staticClass:"group-inline"},[a("input",{staticClass:"form-control",attrs:{placeholder:"输入名称",name:"name"}})]),a("span",{staticClass:"group-inline"},[a("input",{staticClass:"form-control",attrs:{placeholder:"输入标签",name:"tag"}})]),a("span",{staticClass:"group-inline"},[a("TimePick",{attrs:{inputsName:["start_time","end_time"]}})],1),a("span",{staticClass:"group-inline right"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",plain:""},on:{click:t.search}},[t._v("搜索")]),a("el-button",{attrs:{type:"primary",plain:""},on:{click:t.addSelection}},[t._v("添加选中")])],1)])]),a("table",{staticClass:"table",attrs:{width:"100%"}},[a("thead",[a("tr",[a("th",{attrs:{width:"80"}},[t.singleElection?a("input",{attrs:{type:"checkbox"},on:{click:function(e){t.checkAll(e,"addBookForm")}}}):t._e(),a("span",{domProps:{textContent:t._s(t.singleElection?"全选":"选择")}})]),a("th",[t._v("名称")]),a("th",[t._v("标签")]),a("th",[t._v("类型")]),a("th",[t._v("创建时间")])])]),t.dataList.length?a("tbody",t._l(t.dataList,function(e,i){return a("tr",[a("td",[a("input",{ref:"ids",refInFor:!0,attrs:{type:"checkbox","data-type":e.status,name:"ids"},domProps:{value:e.id,checked:t.isChecked(e.id)},on:{click:function(a){t.uncheckedAll(a,e)}}})]),a("td",[t._v(t._s(e.name||e.title))]),a("td",[t._v(t._s(e.tag))]),a("td",[t._v(t._s(e.type_name))]),a("td",[t._v(t._s(e.create_time))])])})):a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"5"}},[t._v("暂无数据")])])])]),t.page?a("div",{staticClass:"pageWrap"},[a("el-pagination",{attrs:{small:!1,background:"","current-page":t.page.num,"page-sizes":[10,50,100],"page-size":t.page.offset,layout:"total, sizes,prev, pager, next, jumper",total:t.page.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1):t._e()]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info"},on:{click:t.colse}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.addSelection}},[t._v("确定")])],1)],1)],1)},n=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n})},403:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={0:"未审核",1:"待审核",2:"未通过",3:"已通过"}},405:function(t,e,a){"use strict";a.r(e);var i=a(482),n=a(380);for(var s in n)"default"!==s&&function(t){a.d(e,t,function(){return n[t]})}(s);a(474);var r=a(0),o=Object(r.a)(n.default,i.a,i.b,!1,null,"f62c4482",null);o.options.__file="contentDetail.vue",e.default=o.exports},431:function(t,e,a){"use strict";a.r(e);var i=a(432),n=a.n(i);for(var s in i)"default"!==s&&function(t){a.d(e,t,function(){return i[t]})}(s);e.default=n.a},432:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=f(a(3)),n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}(a(479)),r=f(a(532)),o=f(a(391)),l=f(a(374)),u=f(a(402)),c=a(390),d=f(a(405)),p=a(27);function f(t){return t&&t.__esModule?t:{default:t}}e.default={components:{Info:r.default,Tab:o.default,Resource:l.default,ContentDetail:d.default,Knowledge:u.default},props:{type:String,detailData:Object,detailDialog:Boolean,defaultData:Object,readOnly:Boolean},created:function(){this.curSoucesList=this.detailData&&this.detailData.constitute||this.defaultData&&this.defaultData.structure||[]},data:function(){return{resourceDialog:!1,curSoucesList:[],infoDialog:!1,infoData:null}},computed:{},methods:{handleClick:function(t,e){this.activeName=t.name},detail:function(t){this.bookDetailInfo(t,t.type)},del:function(t){var e=this.curSoucesList.findIndex(function(e){return e.id===t.id});e>-1&&this.curSoucesList.splice(e,1)},bookDetailInfo:function(t,e){var a=this,i=t.id,n=t.c_id;(0,c._themeDetail)({c_id:n,id:i,type:e}).then(function(t){a.infoData=t.data,a.infoDialog=!0}).catch(function(t){var e=t.payload;for(var i in e.messages){a.$message.error(e.messages[i]);break}})},openResources:function(t){if(this.detailData&&!this.detailData.id)return this.$message.error("请保存产品信息后再做添加");this.resourceDialog=!0,this.resourceType=t},addSelcet:function(t){var e=this;s.add({product_id:this.detailData.id,constitutes:t}).then(function(a){e.curSoucesList=t,e.resourceDialog=!1}).catch(function(t){t.payload;e.$message.error("添加失败")})},submitDetail:function(){var t,e=(t=i.default.mark(function t(){var e,a,r,o,l,u,c=this;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.$refs.info.$refs.fenmian.files[0],a=this.$refs.info.$refs.detailForm.valiAll(),r=this.$refs.info.information,a){t.next=5;break}return t.abrupt("return",this.$message.error("请完善产品信息后再提交!"));case 5:if(o=this.$loading({text:"正在上传",background:"rgba(0, 0, 0, 0.8)"}),t.prev=6,!e){t.next=10;break}return t.next=10,(0,p.getTask)(e).then(function(t){r.img=t.data.path});case 10:if(r.img){t.next=13;break}return o.close(),t.abrupt("return",this.$message.error("请上传封面!"));case 13:return t.next=15,s.save(n({id:this.detailData.id},r,{attributes:{xRead:this.$refs.info.xRead},pro_attributes:this.$refs.info.metadata})).then(function(t){c.$message.success("保存成功"),o.close(),c.$emit("saveok",t.data)});case 15:t.next=28;break;case 17:t.prev=17,t.t0=t.catch(6),l=t.t0.payload,o.close(),t.t1=i.default.keys(l.messages);case 22:if((t.t2=t.t1()).done){t.next=28;break}return u=t.t2.value,this.$message.error(l.messages[u]),t.abrupt("break",28);case 28:case"end":return t.stop()}},t,this,[[6,17]])}),function(){var e=t.apply(this,arguments);return new Promise(function(t,a){return function i(n,s){try{var r=e[n](s),o=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(o).then(function(t){i("next",t)},function(t){i("throw",t)});t(o)}("next")})});return function(){return e.apply(this,arguments)}}()}}},433:function(t,e,a){"use strict";a.r(e);var i=a(434),n=a.n(i);for(var s in i)"default"!==s&&function(t){a.d(e,t,function(){return i[t]})}(s);e.default=n.a},434:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(a(3)),n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},s=(o(a(82)),function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}(a(479))),r=a(27);function o(t){return t&&t.__esModule?t:{default:t}}e.default={props:["detailData","readOnly","defaultData"],data:function(){return{information:{},previewImgUrl:null,retailers:{},xRead:{},activeName:"1",metadata:[]}},created:function(){this.detailData&&(this.information=this.detailData,this.xRead=this.detailData["x-read"]||{},this.metadata=this.detailData.pro_attributes||[]),this.defaultData&&(this.information=this.defaultData.base||{},this.xRead=this.defaultData.xread||{},this.metadata=this.defaultData.attributes||[])},methods:{previewImg:function(t,e){var a=t.target.files[0];this.imgFile=a,this.previewImgUrl=URL.createObjectURL(a)},submitDetail:function(){var t,e=(t=i.default.mark(function t(){var e,a,o,l,u=this;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.$refs.fenmian.files[0],this.$refs.detailForm.valiAll()){t.next=4;break}return t.abrupt("return");case 4:if(a=this.$loading({text:"正在上传",background:"rgba(0, 0, 0, 0.8)"}),t.prev=5,!e){t.next=9;break}return t.next=9,(0,r.getTask)(e).then(function(t){u.information.img=t.data.path});case 9:return t.next=11,s.save(n({id:this.detailData.id},this.information,{attributes:{xRead:this.retailers}})).then(function(t){log(t),u.$message.success("保存成功"),a.close(),u.$emit("saveok",t.data)});case 11:t.next=24;break;case 13:t.prev=13,t.t0=t.catch(5),o=t.t0.payload,a.close(),t.t1=i.default.keys(o.messages);case 18:if((t.t2=t.t1()).done){t.next=24;break}return l=t.t2.value,this.$message.error(o.messages[l]),t.abrupt("break",24);case 24:case"end":return t.stop()}},t,this,[[5,13]])}),function(){var e=t.apply(this,arguments);return new Promise(function(t,a){return function i(n,s){try{var r=e[n](s),o=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(o).then(function(t){i("next",t)},function(t){i("throw",t)});t(o)}("next")})});return function(){return e.apply(this,arguments)}}()}}},435:function(t,e,a){},436:function(t,e,a){},474:function(t,e,a){"use strict";var i=a(382);a.n(i).a},476:function(t,e,a){"use strict";var i=a(385);a.n(i).a},479:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getList=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)("/api/video_product",t)},e.save=function(t){var e=t.id,a=l(t,["id"]);if(e)return(0,n.request_put)("/api/video_product/"+e,a);return(0,n.request_post)("/api/video_product",a)},e.getInfo=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)(d(t),t)},e.del=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/api/video_product/delete",t)},e.urgentDigital=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_put)("/api/video_product/urgent",t)},e.audits=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_put)("/api/video_product/audits",t)},e.issuance=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,a=l(t,["id"]);return(0,n.request_put)(c({id:e}),a).then(function(t){return(0,o.suance)({id:e,info:t.data}),t})},e.addGroup=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/api/video_product/groups",t)},e.modifyGroup=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_put)(u(t),t)},e.deleteGroup=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_delete)(p({id:t.id[0]}),t)},e.listGroup=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)("/api/video_product/groups",t)},e.moveGroup=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.rel_id=t.id,delete t.id,(0,n.request_put)("/api/groups/video_product",t)},e.add=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/api/video_product/component",t)};var i,n=a(4),s=a(8),r=(i=s)&&i.__esModule?i:{default:i},o=a(83);function l(t,e){var a={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(a[i]=t[i]);return a}r.default.compile("/api/video_product/:id");var u=r.default.compile("/api/video_product/:id/groups"),c=r.default.compile("/api/comproduct/:id/issuance"),d=(r.default.compile("/api/video_product/:id/audits"),r.default.compile("/api/video_product/:id")),p=r.default.compile("/api/video_product/:id/groups")},481:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.list?a("div",{staticClass:"tableWrap"},[t.isShow&&!t.onlyShow?a("el-radio-group",{staticStyle:{"margin-bottom":"20px"},attrs:{size:"small"},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[a("el-radio-button",{attrs:{label:"1"}},[t._v("图集")]),a("el-radio-button",{attrs:{label:"2"}},[t._v("视频集")]),a("el-radio-button",{attrs:{label:"3"}},[t._v("音频集")])],1):t._e(),a("table",{staticClass:"table"},[a("thead",[a("tr",[a("th",[t._v("名称")]),a("th",[t._v("类型")]),t.isLabelHide?t._e():a("th",[t._v("标签")]),a("th",[t._v("创建时间")]),a("th",{attrs:{width:"100"}},[t._v("操作")])])]),a("tbody",[t.list.length?t._e():a("tr",[a("td",{staticClass:"colspan",attrs:{colspan:t.isLabelHide?4:5}},[t._v("暂无数据")])]),t._l(t.list,function(e,i){return a("tr",[a("th",[a("div",{staticClass:"th-name"},[t._v(t._s(e.name))])]),a("th",[a("div",{staticClass:"th-name"},[t._v(t._s(e.type_name))])]),t.isLabelHide?t._e():a("th",[a("div",{staticClass:"th-name"},[t._v(t._s(e.tag))])]),a("th",[a("div",{staticClass:"th-name"},[t._v(t._s(e.create_time))])]),a("th",[a("div",{staticClass:"icon icon-detail",attrs:{title:"详情"},on:{click:function(a){t.$emit("detail",e)}}}),t.onlyShow?t._e():a("div",{staticClass:"icon icon-delete",attrs:{title:"删除"},on:{click:function(a){t.$emit("del",e)}}})])])})],2)])],1):t._e()},n=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n})},482:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"div"},[a("el-dialog",{staticClass:"restBody2",attrs:{center:!1,visible:t.infoDialog,top:"50px",width:"1200px","show-close":!1,"append-to-body":""}},[a("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"el-icon-close",on:{click:function(e){t.$emit("update:infoDialog",!1)}}}),a("el-tabs",{attrs:{value:"ff"}},[a("el-tab-pane",{attrs:{label:"详情",name:"ff"}})],1)],1),a("form",{ref:"infoForm",staticClass:"infoForm"},[a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("名称:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.infoData.name,expression:"infoData.name"}],staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.infoData.name},on:{input:function(e){e.target.composing||t.$set(t.infoData,"name",e.target.value)}}})]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("类型:")]),a("span",{staticClass:"types"},[a("span",[t._v(" "+t._s(t.infoData.type_name))]),a("span",[t._v(" 创建时间: "+t._s(t.infoData.create_time))])])]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("标签:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.infoData.tag,expression:"infoData.tag"}],staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.infoData.tag},on:{input:function(e){e.target.composing||t.$set(t.infoData,"tag",e.target.value)}}})]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("简介:")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.infoData.abs,expression:"infoData.abs"}],staticClass:"textarea",attrs:{type:"text",disabled:""},domProps:{value:t.infoData.abs},on:{input:function(e){e.target.composing||t.$set(t.infoData,"abs",e.target.value)}}})]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("详情:")])]),t.detailType&&3!=t.infoData.type?a("div",{staticClass:"group wailianinput"},[a("div",{staticClass:"label"}),a("span",[a("input",{ref:"otherImgInput",staticClass:"form-control",attrs:{disabled:""},domProps:{value:t.infoData.preview}})])]):t._e(),t.hassVideo||4==t.infoData.type?a("div",{staticClass:"group detailmain wailian"},[a("div",{staticClass:"label"}),a("span",{staticClass:"wrap"},[t.hassVideo?a("video",{attrs:{src:t.infoData.preview,controls:""}}):t._e(),4==t.infoData.type?a("audio",{attrs:{src:t.infoData.preview,controls:""}}):t._e(),a("span",{staticClass:"msg"},[a("div",{staticClass:"type"},[t._v("格式:"),a("span",{staticClass:"val",domProps:{textContent:t._s(t.infoData.format)}})]),a("div",{staticClass:"size"},[t._v("大小:"),a("span",{staticClass:"val",domProps:{textContent:t._s(((this.infoData.size||0)/1024).toFixed(2)+"KB")}})])])])]):t._e(),a("div",{staticClass:"group detailmain"},[a("div",{staticClass:"label"}),a("span",{staticClass:"wrap"},[3==t.infoData.type?a("img",{staticClass:"coverImg",attrs:{src:t.infoData.preview_path}}):t._e(),a("img",{staticClass:"coverImg",attrs:{src:t.infoData.img_src||t.infoData.img,"else-if":""}})])]),a("div",{staticClass:"group line"},[a("div",{staticClass:"label"},[t._v("元数据")])]),a("div",{staticClass:"group"},[a("MetaData",{attrs:{metadata:t.metadata,isShowBtn:!1,isOption:!1}})],1)]),a("div",{staticClass:"footer dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info"},on:{click:function(e){t.$emit("update:infoDialog",!1)}}},[t._v("取消")])],1)])],1)},n=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n})},531:function(t,e,a){"use strict";a.r(e);var i=a(560),n=a(431);for(var s in n)"default"!==s&&function(t){a.d(e,t,function(){return n[t]})}(s);a(534);var r=a(0),o=Object(r.a)(n.default,i.a,i.b,!1,null,"3aca1e8a",null);o.options.__file="detail.vue",e.default=o.exports},532:function(t,e,a){"use strict";a.r(e);var i=a(568),n=a(433);for(var s in n)"default"!==s&&function(t){a.d(e,t,function(){return n[t]})}(s);a(533);var r=a(0),o=Object(r.a)(n.default,i.a,i.b,!1,null,"60ee6b2c",null);o.options.__file="info.vue",e.default=o.exports},533:function(t,e,a){"use strict";var i=a(435);a.n(i).a},534:function(t,e,a){"use strict";var i=a(436);a.n(i).a},560:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"div"},[t.resourceDialog?a("Resource",{attrs:{type:t.resourceType,resourceDialog:t.resourceDialog,curSoucesList:t.curSoucesList},on:{"update:resourceDialog":function(e){t.resourceDialog=e},select:t.addSelcet}}):t._e(),t.infoDialog?a("ContentDetail",{attrs:{infoData:t.infoData,infoDialog:t.infoDialog},on:{"update:infoDialog":function(e){t.infoDialog=e}}}):t._e(),a("el-tabs",{attrs:{value:t.type}},[a("el-tab-pane",{attrs:{label:"产品信息",name:"info"}},[a("Info",{ref:"info",attrs:{detailData:t.detailData,readOnly:t.readOnly,defaultData:t.defaultData}}),t.readOnly?t._e():a("div",{staticClass:"btns"},[a("el-button",{attrs:{type:"info"},on:{click:function(e){t.$emit("update:detailDialog",!1)}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitDetail("detailForm")}}},[t._v("保存")])],1)],1),a("el-tab-pane",{attrs:{label:"产品结构",name:"structure"}},[a("Tab",{ref:"video",attrs:{dataType:"video",defaultList:t.curSoucesList,detailData:t.detailData,onlyShow:t.readOnly},on:{detail:t.detail,del:t.del}}),t.readOnly?t._e():a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.openResources("5")}}},[t._v("新增")])],1),a("el-tab-pane",{attrs:{label:"知识点",name:"Knowledge"}},[a("Knowledge",{attrs:{detailData:t.detailData,readOnly:t.readOnly,defaultData:t.defaultData},on:{saveok:function(e){t.$emit("saveok")}}})],1)],1)],1)},n=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n})},568:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"div"},[a("VaForm",{ref:"detailForm"},[a("form",{staticClass:"detailForm"},[a("div",{staticClass:"group line"},[a("div",{staticClass:"label"},[t._v("基本信息")])]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("*产品名称:")]),a("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required'}"},{name:"model",rawName:"v-model",value:t.information.name,expression:"information.name"}],staticClass:"form-control",attrs:{type:"text",disabled:t.readOnly},domProps:{value:t.information.name},on:{input:function(e){e.target.composing||t.$set(t.information,"name",e.target.value)}}})]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("*内容简介:")]),a("textarea",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required'}"},{name:"model",rawName:"v-model",value:t.information.abs,expression:"information.abs"}],staticClass:"textarea",attrs:{maxlength:t.$config.ABS_MAX_LENGTH,type:"text",disabled:t.readOnly},domProps:{value:t.information.abs},on:{input:function(e){e.target.composing||t.$set(t.information,"abs",e.target.value)}}}),a("span",{staticStyle:{"vertical-align":"bottom",color:"#606266","font-size":"12px"}},[t._v("您还可以输入"+t._s(t.$config.ABS_MAX_LENGTH-(t.information.abs?t.information.abs.length:0)))])]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("*设置封面:")]),t.readOnly?t._e():a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){t.$refs.fenmian.click()}}},[t._v("上传")]),a("input",{ref:"fenmian",staticClass:"hide",attrs:{type:"file",accept:"image/jpeg,image/jpg,image/png"},on:{change:function(e){t.previewImg(e)}}})],1),a("div",{staticClass:"group"},[a("div",{staticClass:"label"}),a("img",{staticClass:"previewImgUrl",attrs:{src:t.previewImgUrl||t.information.img_src}}),a("input",{attrs:{type:"hidden",name:"img"},domProps:{value:t.information.img}})]),a("p",{staticClass:"imgSizeWrap"},[a("span",{staticClass:"imgSize"},[t._v("建议图片大小：250*140px")])])]),a("div",{staticClass:"info"},[a("el-tabs",{staticClass:"tabs-nav",model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"x-read信息",name:"1"}},[a("form",{staticClass:"commerceForm"},[a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("作者:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.xRead.author,expression:"xRead.author"}],staticClass:"form-control",attrs:{type:"text",disabled:t.readOnly},domProps:{value:t.xRead.author},on:{input:function(e){e.target.composing||t.$set(t.xRead,"author",e.target.value)}}})]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("标签:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.xRead.tag,expression:"xRead.tag"}],staticClass:"form-control",attrs:{type:"text",disabled:t.readOnly},domProps:{value:t.xRead.tag},on:{input:function(e){e.target.composing||t.$set(t.xRead,"tag",e.target.value)}}})]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("元数据:")]),a("MetaData",{attrs:{metadata:t.metadata,isShowBtn:!1,disabled:t.readOnly,readOnly:t.readOnly}})],1)])])],1)],1)])],1)},n=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n})},791:function(t,e,a){"use strict";a.r(e);var i=a(792),n=a.n(i);for(var s in i)"default"!==s&&function(t){a.d(e,t,function(){return i[t]})}(s);e.default=n.a},792:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=v(a(3)),n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},s=v(a(82)),r=v(a(376)),o=v(a(155)),l=v(a(154)),u=v(a(365)),c=v(a(403)),d=v(a(531)),p=a(122),f=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}(a(479));function v(t){return t&&t.__esModule?t:{default:t}}e.default={mixins:[p.main],components:{Menu:o.default,Top:l.default,GroupList:u.default,Detail:d.default,Dispense:r.default},data:function(){return{services:f,list:null,page:null,groupList:null,detailDialog:!1,detailDialoaType:"info",detailData:{},publishDialog:!1,moveToOtherDiaolog:!1,moveIds:null,toId:null,status:c.default}},methods:{getList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.page&&this.page.num||1,e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.page&&this.page.offset||10,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;f.getList(n({pageNum:t,pageOffset:a,group_id:this.currGroup},i)).then(function(t){e.list=t.data,e.page=t.page})},urgentDigital:function(){for(var t=this,e=this.getChecked(),a=0,i=e.length;a<i;a++)for(var n=0,s=this.list.length;n<s;n++)if(this.list[n].id==e[a]&&1!=this.list[n].audits_status)return void this.$message.error("只能勾选待审核数据");e&&this.services.urgentDigital({id:e}).then(function(e){return t.$message.success("已提交加急审核")})},opneDetailDialog:function(){var t,e=(t=i.default.mark(function t(e,a){var n=this;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.readOnly=!(!a||1!=a.audits_status),a){t.next=5;break}this.detailData={},t.next=7;break;case 5:return t.next=7,f.getInfo({id:a.id}).then(function(t){n.detailData=t.data});case 7:this.detailDialoaType=e,this.detailDialog=!0;case 9:case"end":return t.stop()}},t,this)}),function(){var e=t.apply(this,arguments);return new Promise(function(t,a){return function i(n,s){try{var r=e[n](s),o=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(o).then(function(t){i("next",t)},function(t){i("throw",t)});t(o)}("next")})});return function(t,a){return e.apply(this,arguments)}}(),opnePublishDialog:function(t){this.detailData=t,this.publishDialog=!0},delChoosens:function(t){var e=this,a=[];if(t)a.push(t);else{var i=Array.from(document.querySelectorAll('input[name="ids"]:checked'));if(i.forEach(function(t){a.push(t.value)}),!i.length)return void this.$message.error("请先选中!")}a.length>0&&this.$confirm("是否删除?").then(function(t){var i=(0,s.default)(document.querySelector("#mainForm"),{hash:!0});e.services.del({id:a}).then(function(t){e.getList(e.page.num,e.page.offset,i),e.getGroupList()}).catch(function(t){var a=t.payload;for(var i in a.messages){e.$message.error(a.messages[i]);break}})}).catch(function(t){})},KnowledgeClick:function(t){this.detailDialoaType=t},saveOk:function(t){this.detailData.id||(this.detailData=t),this.getList(),this.getGroupList()},clear:function(){document.getElementById("text").value=""}}}},793:function(t,e,a){}}]);