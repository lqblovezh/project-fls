(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{371:function(t,e,a){"use strict";a.r(e);var i=a(372),n=a.n(i);for(var r in i)"default"!==r&&function(t){a.d(e,t,function(){return i[t]})}(r);e.default=n.a},372:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(a(3)),n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},r=a(379),s=o(a(82));function o(t){return t&&t.__esModule?t:{default:t}}function l(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}e.default={props:{resourceDialog:{type:Boolean,default:!1},singleElection:{type:Boolean,default:!0},type:{type:String,default:"1"},curSoucesList:{type:Array,default:[]},isShowType:{type:Boolean,default:!1},isShowSearch:Boolean,isShowResource:Boolean,isDebris:{default:!1},parameter:Object},data:function(){return{dataList:[],page:null,currentType:null,contentType:[{name:"电子书",value:"1"},{name:"图片",value:"3"},{name:"音频",value:"4"},{name:"视频",value:"5"},{name:"3D内容",value:"6"},{name:"VR",value:"7"},{name:"AR",value:"8"}],query:{}}},created:function(){this.currentType=this.type||"1",this.isShowResource&&this.contentType.push({name:"共享资源",value:"22"}),this.type.includes("20")&&(this.contentType=[{name:"权威案例",value:"20-1"},{name:"法律法规",value:"20-2"},{name:"法律观点",value:"20-3"},{name:"裁判文书",value:"20-4"}])},methods:{getList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.page&&this.page.num||1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.page&&this.page.offset||10;(0,r._addBooks)(n({pageNum:e,pageOffset:a,type:this.currentType||this.type},this.parameter,this.query)).then(function(e){t.dataList=e.data||[],t.page=e.page})},colse:function(){this.$emit("update:resourceDialog",!1)},save:function(){var t=[];this.$refs.dispense.querySelectorAll("input[type=checkbox]:checked").forEach(function(e){t.push(e.value)}),t.length?this.$emit("dispenseSave",t):this.$message.error("请选择你要发布的平台")},search:function(){this.query=(0,s.default)(document.querySelector("#detailSearchForm"),{hash:!0}),this.getList(1,this.page.offset)},addSelection:function(){var t,e=(t=i.default.mark(function t(){var e,a,r,s,o,c,u,d,f,p=this;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=document.querySelector(".addBookForm"),a=e.querySelectorAll('input[name="ids"]:checked'),r=[],a.length){t.next=5;break}return t.abrupt("return",this.$message.warning("请选择添加内容"));case 5:s=!0,o=!1,c=void 0,t.prev=8,u=function(){var t=f.value;if(p.curSoucesList.findIndex(function(e){return e.id==t.value})>-1)return"continue";r.push(n({},p.dataList.find(function(e){return e.id==t.value}),{action:"add"}))},d=a[Symbol.iterator]();case 11:if(s=(f=d.next()).done){t.next=18;break}if("continue"!==u()){t.next=15;break}return t.abrupt("continue",15);case 15:s=!0,t.next=11;break;case 18:t.next=24;break;case 20:t.prev=20,t.t0=t.catch(8),o=!0,c=t.t0;case 24:t.prev=24,t.prev=25,!s&&d.return&&d.return();case 27:if(t.prev=27,!o){t.next=30;break}throw c;case 30:return t.finish(27);case 31:return t.finish(24);case 32:this.$emit("select",[].concat(r,l(this.curSoucesList)));case 33:case"end":return t.stop()}},t,this,[[8,20,24,32],[25,,27,31]])}),function(){var e=t.apply(this,arguments);return new Promise(function(t,a){return function i(n,r){try{var s=e[n](r),o=s.value}catch(t){return void a(t)}if(!s.done)return Promise.resolve(o).then(function(t){i("next",t)},function(t){i("throw",t)});t(o)}("next")})});return function(){return e.apply(this,arguments)}}(),checkAll:function(t,e){var a=this;document.querySelector("."+e).querySelectorAll('input[name="ids"]').forEach(function(e,i){var r=a.curSoucesList.findIndex(function(t){return t.id==e.value||t.b_id==e.value});t.target.checked?-1==r&&a.curSoucesList.push(n({},a.dataList.find(function(t){return t.id==e.value}),{action:"add"})):a.curSoucesList.splice(r,1),e.checked=t.target.checked})},uncheckedAll:function(t,e){var a=this.curSoucesList.findIndex(function(t){return t.id==e.id||t.b_id==e.id});t.target.checked?-1==a&&this.curSoucesList.push(e):this.curSoucesList.splice(a,1),this.singleElection||(this.$refs.ids.forEach(function(t){return t.checked=!1}),t.target.checked=!0)},isChecked:function(t){return this.curSoucesList.findIndex(function(e){return e.id===t||e.b_id===t})>-1},handleSizeChange:function(t){this.query=(0,s.default)(document.querySelector("#detailSearchForm"),{hash:!0}),this.getList(1,t)},handleCurrentChange:function(t){this.query=(0,s.default)(document.querySelector("#detailSearchForm"),{hash:!0}),this.getList(t,this.page.offset)}},watch:{currentType:function(t){this.getList()}}}},373:function(t,e,a){},374:function(t,e,a){"use strict";a.r(e);var i=a(392),n=a(371);for(var r in n)"default"!==r&&function(t){a.d(e,t,function(){return n[t]})}(r);a(389);var s=a(0),o=Object(s.a)(n.default,i.a,i.b,!1,null,"8d4001a2",null);o.options.__file="Resource.vue",e.default=o.exports},386:function(t,e,a){"use strict";a.r(e);var i=a(387),n=a.n(i);for(var r in i)"default"!==r&&function(t){a.d(e,t,function(){return i[t]})}(r);e.default=n.a},387:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a(156),n(a(82)),function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);e.default=t}(a(408));var i=n(a(407));function n(t){return t&&t.__esModule?t:{default:t}}e.default={props:["type","infoData","infoDialog","isAuthor"],data:function(){return{readerDialog:!1,readerId:null}},computed:{detailType:function(){return this.infoData.img_status},hassVideo:function(){return 6==this.infoData.type||5==this.infoData.type||8==this.infoData.type}},methods:{handleClick:function(t,e){this.$emit("infoClick",t)},openReader:function(t){log(t),this.readerId=t.b_id,this.readerDialog=!0}},components:{Reader:i.default}}},388:function(t,e,a){},389:function(t,e,a){"use strict";var i=a(373);a.n(i).a},392:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{staticClass:"restBody2",attrs:{center:!1,visible:t.resourceDialog,width:"1200px",top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,"append-to-body":""},on:{"update:visible":function(e){t.resourceDialog=e}}},[a("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"el-icon-close",on:{click:t.colse}}),a("el-tabs",{attrs:{value:"detail"}},[a("el-tab-pane",{attrs:{label:"添加",name:"detail"}})],1)],1),a("el-form",{staticClass:"addBookForm"},[t.isShowType?a("span",{staticClass:"group-inline",staticStyle:{margin:"20px","margin-top":"0"}},[a("el-radio-group",{model:{value:t.currentType,callback:function(e){t.currentType=e},expression:"currentType"}},t._l(t.contentType,function(e){return a("el-radio-button",{key:e.id,attrs:{label:e.value}},[t._v(t._s(e.name))])}))],1):t._e(),t.isShowSearch?t._e():a("div",{staticClass:"serachWrap"},[a("form",{attrs:{id:"detailSearchForm"}},[a("span",{staticClass:"group-inline"},[a("input",{staticClass:"form-control",attrs:{placeholder:"输入名称",name:"name"}})]),a("span",{staticClass:"group-inline"},[a("input",{staticClass:"form-control",attrs:{placeholder:"输入标签",name:"tag"}})]),a("span",{staticClass:"group-inline"},[a("TimePick",{attrs:{inputsName:["start_time","end_time"]}})],1),a("span",{staticClass:"group-inline right"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",plain:""},on:{click:t.search}},[t._v("搜索")]),a("el-button",{attrs:{type:"primary",plain:""},on:{click:t.addSelection}},[t._v("添加选中")])],1)])]),a("table",{staticClass:"table",attrs:{width:"100%"}},[a("thead",[a("tr",[a("th",{attrs:{width:"80"}},[t.singleElection?a("input",{attrs:{type:"checkbox"},on:{click:function(e){t.checkAll(e,"addBookForm")}}}):t._e(),a("span",{domProps:{textContent:t._s(t.singleElection?"全选":"选择")}})]),a("th",[t._v("名称")]),a("th",[t._v("标签")]),a("th",[t._v("类型")]),a("th",[t._v("创建时间")])])]),t.dataList.length?a("tbody",t._l(t.dataList,function(e,i){return a("tr",[a("td",[a("input",{ref:"ids",refInFor:!0,attrs:{type:"checkbox","data-type":e.status,name:"ids"},domProps:{value:e.id,checked:t.isChecked(e.id)},on:{click:function(a){t.uncheckedAll(a,e)}}})]),a("td",[t._v(t._s(e.name||e.title))]),a("td",[t._v(t._s(e.tag))]),a("td",[t._v(t._s(e.type_name))]),a("td",[t._v(t._s(e.create_time))])])})):a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"5"}},[t._v("暂无数据")])])])]),t.page?a("div",{staticClass:"pageWrap"},[a("el-pagination",{attrs:{small:!1,background:"","current-page":t.page.num,"page-sizes":[10,50,100],"page-size":t.page.offset,layout:"total, sizes,prev, pager, next, jumper",total:t.page.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1):t._e()]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info"},on:{click:t.colse}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.addSelection}},[t._v("确定")])],1)],1)],1)},n=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n})},430:function(t,e,a){"use strict";a.r(e);var i=a(480),n=a(386);for(var r in n)"default"!==r&&function(t){a.d(e,t,function(){return n[t]})}(r);a(478);var s=a(0),o=Object(s.a)(n.default,i.a,i.b,!1,null,"1f2d0f19",null);o.options.__file="info.vue",e.default=o.exports},461:function(t,e,a){"use strict";a.r(e);var i=a(462),n=a.n(i);for(var r in i)"default"!==r&&function(t){a.d(e,t,function(){return i[t]})}(r);e.default=n.a},462:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=u(a(3)),n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},r=u(a(158)),s=a(27),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}(a(509)),l=(u(a(82)),u(a(374))),c=u(a(430));function u(t){return t&&t.__esModule?t:{default:t}}function d(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,a){return function i(n,r){try{var s=e[n](r),o=s.value}catch(t){return void a(t)}if(!s.done)return Promise.resolve(o).then(function(t){i("next",t)},function(t){i("throw",t)});t(o)}("next")})}}function f(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}e.default={props:["type","detailData","detailDialog","readOnly"],components:{Resource:l.default,VaForm:r.default,Info:c.default},data:function(){return{detail:{constitute:[]},previewImgUrl:null,imgUrl:null,resourceDialog:!1,infoDialog:!1,infoData:{},dataList:{},infoValue:"info",isShowAuthor:!1,chocesArray:[]}},created:function(){this.detail=n({},this.detailData),log(11111,this.detail)},methods:{getDetail:function(){var t=this;o.getInfo({id:this.detailData.id}).then(function(e){t.detail=e.data,t.previewImgUrl=e.data.img_src,t.imgUrl=e.data.path,t.detail.img=e.data.path,t.detail.constitute=e.data.constitute,t.chocesArray=[].concat(f(e.data.constitute)),log(11111,t.chocesArray)})},submitDetail:function(){var t=d(i.default.mark(function t(){var e,a,n,r,l=this;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.$refs.detailForm.valiAll()){t.next=4;break}return log("验证失败"),t.abrupt("return");case 4:if(e=this.$refs.fenmian.files[0],a=this.$loading({text:"正在上传",background:"rgba(0, 0, 0, 0.8)"}),t.prev=6,!e){t.next=10;break}return t.next=10,(0,s.getTask)(e).then(function(t){l.detail.img=t.data.path});case 10:return t.next=12,o.save(this.detail).then(function(t){l.$emit("saveok")});case 12:this.$nextTick(function(){a.close(),l.$emit("update:detailDialog",!1)}),t.next=26;break;case 15:t.prev=15,t.t0=t.catch(6),n=t.t0.payload,a.close(),t.t1=i.default.keys(n.messages);case 20:if((t.t2=t.t1()).done){t.next=26;break}return r=t.t2.value,this.$message.error(n.messages[r]),t.abrupt("break",26);case 26:case"end":return t.stop()}},t,this,[[6,15]])}));return function(){return t.apply(this,arguments)}}(),previewImg:function(t){var e=t.target.files[0];this.previewImgUrl=URL.createObjectURL(e)},delDetail:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments[1],i={},n=this.$refs.detailForm.$el,r=n.querySelectorAll("[name='ids']:checked");if(e.length?i[e]=a:r.forEach(function(t){i[t.value]=t.getAttribute("data-type"),e.push(t.value)}),!e.length)return this.$message.error("请确认你要移除的内容！");e.forEach(function(e){var a=t.detail.constitute.findIndex(function(t){return t.c_id==e||t.id==e}),i=t.chocesArray.findIndex(function(t){return t.c_id==e||t.id==e});a>-1&&t.detail.constitute.splice(a,1),i>-1&&t.chocesArray.splice(a,1)}),n.querySelectorAll("input[type='checkbox']").forEach(function(t){t.checked=!1})},detailAddHandle:function(){var t=d(i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.resourceDialog=!0;case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),bookDetailInfo:function(t,e,a){var i=this;this.isShowAuthor="1"!=e;var n=t.id,r=t.c_id;if(!o._themeDetail)return this.infoData=t,this.infoValue=a,void(this.infoDialog=!0);o._themeDetail({c_id:r,id:n,type:e}).then(function(t){i.infoData=t.data,i.infoValue=a,i.infoDialog=!0}).catch(function(t){var e=t.payload;for(var a in e.messages){i.$message.error(e.messages[a]);break}})},addSelcet:function(){this.detail.constitute=[].concat(f(this.chocesArray)),this.resourceDialog=!1},infoHandleClick:function(t){this.infoValue=t.name}}}},463:function(t,e,a){},478:function(t,e,a){"use strict";var i=a(388);a.n(i).a},480:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"div"},[a("div",{staticClass:"dialogs"},[t.readerDialog?a("Reader",{attrs:{readerDialog:t.readerDialog,readerId:t.readerId,version:"draft"},on:{"update:readerDialog":function(e){t.readerDialog=e}}}):t._e()],1),a("el-tabs",{attrs:{value:t.type},on:{"tab-click":t.handleClick}},[a("el-tab-pane",{attrs:{label:"详情",name:"info"}},[a("div",{staticClass:"div"},[a("form",{ref:"infoForm",staticClass:"infoForm"},[a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("名称:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.infoData.name,expression:"infoData.name"}],staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.infoData.name},on:{input:function(e){e.target.composing||t.$set(t.infoData,"name",e.target.value)}}})]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("类型:")]),a("span",{staticClass:"types"},[a("span",[t._v(" "+t._s(t.infoData.type_name))]),a("span",[t._v(" 创建时间: "+t._s(t.infoData.create_time))])])]),t.isAuthor?t._e():a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("作者:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.infoData.author,expression:"infoData.author"}],staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.infoData.author},on:{input:function(e){e.target.composing||t.$set(t.infoData,"author",e.target.value)}}})]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("标签:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.infoData.tag,expression:"infoData.tag"}],staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.infoData.tag},on:{input:function(e){e.target.composing||t.$set(t.infoData,"tag",e.target.value)}}})]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("简介:")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.infoData.abs,expression:"infoData.abs"}],staticClass:"textarea",attrs:{type:"text",disabled:""},domProps:{value:t.infoData.abs},on:{input:function(e){e.target.composing||t.$set(t.infoData,"abs",e.target.value)}}})]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("详情:")]),1==t.infoData.type?a("el-button",{attrs:{title:"预览",size:"mini",type:"primary",plain:""},on:{click:function(e){t.openReader(t.infoData)}}},[t._v("预览")]):t._e()],1),t.detailType&&3!=t.infoData.type?a("div",{staticClass:"group wailianinput"},[a("div",{staticClass:"label"}),a("span",[a("input",{ref:"otherImgInput",staticClass:"form-control",attrs:{disabled:""},domProps:{value:t.infoData.preview}})])]):t._e(),t.hassVideo||4==t.infoData.type?a("div",{staticClass:"group detailmain wailian"},[a("div",{staticClass:"label"}),a("span",{staticClass:"wrap"},[t.hassVideo?a("video",{attrs:{src:t.infoData.preview,controls:""}}):t._e(),4==t.infoData.type?a("audio",{attrs:{src:t.infoData.preview,controls:""}}):t._e(),a("span",{staticClass:"msg"},[a("div",{staticClass:"type"},[t._v("格式:"),a("span",{staticClass:"val",domProps:{textContent:t._s(t.infoData.format)}})]),a("div",{staticClass:"size"},[t._v("大小:"),a("span",{staticClass:"val",domProps:{textContent:t._s((t.infoData.size/1024).toFixed(2)+"KB")}})])])])]):t._e(),a("div",{staticClass:"group detailmain"},[a("div",{staticClass:"label"}),a("span",{staticClass:"wrap"},[a("img",{staticClass:"coverImg",attrs:{src:t.infoData.img_src||t.infoData.img}}),3==t.infoData.type?a("img",{staticClass:"coverImg",attrs:{src:t.infoData.preview}}):t._e()])]),10==t.infoData.type?a("div",{staticClass:"group"},[a("table",{staticClass:"table border",attrs:{width:"100%"}},[a("thead",[a("tr",[a("th",[t._v("名称")]),a("th",[t._v("标签")]),a("th",[t._v("作者")]),a("th",[t._v("发布时间")])])]),a("tbody",t._l(t.infoData.constitute,function(e,i){return a("tr",[a("td",{domProps:{textContent:t._s(e.name)}}),a("td",{domProps:{textContent:t._s(e.tag)}}),a("td",{domProps:{textContent:t._s(e.author)}}),a("td",{domProps:{textContent:t._s(e.create_time)}})])}))])]):t._e()])])]),a("el-tab-pane",{attrs:{label:"元数据",name:"data"}},[a("div",{staticClass:"meta"},t._l(t.infoData.attributes,function(e,i){return t.infoData?a("div",{staticClass:"group rowWrap"},[a("div",{staticClass:"label",domProps:{textContent:t._s(i+1)}}),a("span",{staticClass:"form-control left",domProps:{textContent:t._s(e.key)}}),a("span",{staticClass:"form-control right",domProps:{textContent:t._s(e.value)}})]):t._e()}))])],1)],1)},n=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n})},508:function(t,e,a){"use strict";a.r(e);var i=a(562),n=a(461);for(var r in n)"default"!==r&&function(t){a.d(e,t,function(){return n[t]})}(r);a(550);var s=a(0),o=Object(s.a)(n.default,i.a,i.b,!1,null,"464ddc8a",null);o.options.__file="detail.vue",e.default=o.exports},509:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getList=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)("/api/resource",t)},e.save=function(t){var e=t.id,a=l(t,["id"]);if(e)return(0,n.request_put)(c({id:e}),a);return(0,n.request_post)("/api/resource",a)},e.getInfo=function(t){return(0,n.request_get)(d({id:t}))},e.del=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/api/resource/delete",t)},e.urgentDigital=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_put)("/api/resource/urgent",t)},e.audits=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_put)("/api/resource/audits",t)},e.issuance=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,a=l(t,["id"]);return(0,n.request_put)(u({id:e}),a).then(function(t){return(0,o.suance)({id:e,info:t.data}),t})};var i,n=a(4),r=a(8),s=(i=r)&&i.__esModule?i:{default:i},o=a(83);function l(t,e){var a={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(a[i]=t[i]);return a}var c=s.default.compile("/api/resource/:id"),u=s.default.compile("/api/comproduct/:id/issuance"),d=s.default.compile("/api/resource/:id")},550:function(t,e,a){"use strict";var i=a(463);a.n(i).a},562:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"div"},[a("el-dialog",{attrs:{visible:t.infoDialog,width:"70%",top:"50px","append-to-body":""},on:{"update:visible":function(e){t.infoDialog=e}}},[a("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[a("Info",{attrs:{type:t.infoValue,infoDialog:t.infoDialog,isAuthor:t.isShowAuthor,infoData:t.infoData},on:{infoClick:t.infoHandleClick}})],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info"},on:{click:function(e){t.infoDialog=!1}}},[t._v("取消")])],1)]),t.resourceDialog?a("Resource",{attrs:{resourceDialog:t.resourceDialog,curSoucesList:t.chocesArray,isShowType:!0},on:{"update:resourceDialog":function(e){t.resourceDialog=e},select:t.addSelcet}}):t._e(),a("el-tabs",{attrs:{value:t.type||"info"}},[a("el-tab-pane",{attrs:{label:"详情",name:"info"}},[a("div",{staticClass:"div"},[a("VaForm",{ref:"detailForm"},[a("form",{staticClass:"detailForm"},[a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("*资源名称:")]),a("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"},{name:"model",rawName:"v-model",value:t.detail.name,expression:"detail.name"}],staticClass:"form-control",attrs:{vali:"",name:"name",type:"text",disabled:t.readOnly},domProps:{value:t.detail.name},on:{input:function(e){e.target.composing||t.$set(t.detail,"name",e.target.value)}}})]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("*授权价格:")]),a("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"},{name:"model",rawName:"v-model",value:t.detail.price,expression:"detail.price"}],staticClass:"form-control",attrs:{name:"price",type:"text",disabled:t.readOnly},domProps:{value:t.detail.price},on:{input:function(e){e.target.composing||t.$set(t.detail,"price",e.target.value)}}})]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("*简介:")]),a("textarea",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"},{name:"model",rawName:"v-model",value:t.detail.abs,expression:"detail.abs"}],staticClass:"textarea",attrs:{maxlength:t.$config.ABS_MAX_LENGTH,name:"abs",type:"text",disabled:t.readOnly},domProps:{value:t.detail.abs},on:{input:function(e){e.target.composing||t.$set(t.detail,"abs",e.target.value)}}}),t.readOnly?t._e():a("span",{staticStyle:{"vertical-align":"bottom",color:"#606266","font-size":"12px"}},[t._v("您还可以输入"+t._s(t.$config.ABS_MAX_LENGTH-(t.detail.abs?t.detail.abs.length:0)))])]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("*设置封面:")]),t.readOnly?t._e():a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{size:"mini",type:"primary"},on:{click:function(e){t.$refs.fenmian.click()}}},[t._v("上传")])],1),a("div",{staticClass:"group fenmian"},[a("div",{staticClass:"label fenmain"}),a("img",{staticClass:"previewImgUrl",attrs:{src:t.previewImgUrl||t.detail.img_src,alt:"暂无图片"}}),a("input",{ref:"fenmian",staticClass:"hide",attrs:{type:"file",accept:"image/jpeg,image/jpg,image/png"},on:{change:function(e){t.previewImg(e)}}}),a("input",{staticClass:"hide",attrs:{name:"img",type:"text"},domProps:{value:t.imgUrl}})]),a("p",{staticClass:"imgSizeWrap"},[a("span",{staticClass:"imgSize"},[t._v("建议图片大小：118*160px")])]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("构成:")]),t.readOnly?t._e():a("div",{staticClass:"btn-right"},[a("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(e){t.delDetail()}}},[t._v("移除")]),a("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(e){t.detailAddHandle()}}},[t._v("添加")])],1)]),a("div",{staticClass:"group"},[a("table",{staticClass:"table border",attrs:{width:"100%"}},[a("thead",[a("tr",[a("th",{attrs:{width:"55"}},[a("input",{attrs:{type:"checkbox",name:"checkAll"},on:{click:function(e){t.$checkAll(e)}}}),a("span",[t._v("全选")])]),a("th",[t._v("名称")]),a("th",[t._v("标签")]),a("th",[t._v("类型")]),a("th",{attrs:{width:"100"}},[t._v("操作")])])]),a("tbody",t._l(t.detail.constitute,function(e,i){return a("tr",[a("td",[a("input",{ref:"ids",refInFor:!0,attrs:{type:"checkbox",name:"ids","data-type":e.type},domProps:{value:e.id}})]),a("td",[a("div",{staticClass:"th-name",attrs:{title:e.name}},[t._v(t._s(e.name))])]),a("td",[t._v(t._s(e.tag))]),a("td",[t._v(t._s(e.type_name))]),a("td",[a("span",{staticClass:"icon icon-detail",attrs:{title:"详情",type:"primary",size:"mini",plain:""},on:{click:function(a){t.bookDetailInfo(e,e.type,"info")}}}),t.readOnly?t._e():a("span",{staticClass:"icon icon-delete",attrs:{title:"移除","data-id":e.c_id,type:"primary",size:"mini",plain:""},on:{click:function(a){t.delDetail([e.c_id||e.id],e.type)}}})])])}))])])])])],1),t.readOnly?t._e():a("div",{staticClass:"btns"},[a("el-button",{attrs:{type:"info"},on:{click:function(e){t.$emit("update:detailDialog",!1)}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.submitDetail}},[t._v("确定")])],1)])],1)],1)},n=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n})}}]);