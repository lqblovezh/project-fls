(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{1101:function(t,e,i){"use strict";i.r(e);var a=i(1176),n=i(811);for(var s in n)"default"!==s&&function(t){i.d(e,t,function(){return n[t]})}(s);i(1102);var r=i(0),o=Object(r.a)(n.default,a.a,a.b,!1,null,"0b425b2e",null);o.options.__file="setting.vue",e.default=o.exports},1102:function(t,e,i){"use strict";var a=i(813);i.n(a).a},1103:function(t,e,i){"use strict";var a=i(814);i.n(a).a},1118:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"index clearfix"},[i("Top",{attrs:{currentPlant:"X-PUBLISH"}}),i("Menu",{attrs:{curr:"/contentLibrary/digitalBook"}}),i("div",{staticClass:"mainRight"},[i("div",{staticClass:"contentWrap"},[i("div",{staticClass:"contentLeft"},[i("div",{staticClass:"maindata"},[i("div",{staticClass:"serachWrap",on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.query()}}},[i("div",{staticClass:"title"}),i("form",{attrs:{id:"mainForm"}},[i("span",{staticClass:"group-inline"},[i("el-input",{attrs:{placeholder:"请输入名称",name:"name",clearable:""}})],1),i("span",{staticClass:"group-inline"},[i("el-select",{attrs:{placeholder:"类别"},model:{value:t.options.value,callback:function(e){t.$set(t.options,"value",e)},expression:"options.value"}},t._l(t.options,function(t){return i("el-option",{key:t.value,attrs:{label:t.name,value:t.value}})}))],1),i("span",{staticClass:"group-inline"},[i("TimePick",{attrs:{inputsName:["start_time","end_time"]}})],1),i("span",{staticClass:"group-inline float-right"},[i("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-plus",plain:""},on:{click:t.addSeries}},[t._v("新建")]),i("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-search",plain:""},on:{click:t.query}},[t._v("搜索")]),i("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){t.seriesSetting("lb")}}},[t._v("套系栏目设置")])],1)])]),i("div",{staticClass:"tableWrap"},[i("div",{staticClass:"tableTop"},[i("div",{staticClass:"title vel-line"},[i("span",[t._v("全部 "),t.page?i("span",{staticClass:"totalNum"},[t._v("("+t._s(t.page.total)+")")]):t._e()]),i("div",{staticClass:"btns"},[i("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:t.urgentDigital}},[t._v("加急审核")]),i("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:t.moveToOther}},[t._v("移动分组")]),i("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){t.delChoosen(!1)}}},[t._v("删除")])],1)])]),i("table",{staticClass:"table"},[i("thead",[i("tr",[i("th",{staticClass:"allBtn"},[i("input",{attrs:{type:"checkbox"},on:{click:function(e){t.checkAll(e)}}})]),i("th",[t._v("名称")]),i("th",[t._v("类别")]),i("th",[t._v("审核状态")]),i("th",[t._v("发布状态")]),i("th",{staticClass:"time"},[t._v("分发时间")]),i("th",{staticClass:"operate"},[t._v("操作")])])]),t.list?i("tbody",t._l(t.list,function(e){return i("tr",[i("th",[i("input",{ref:"ids",refInFor:!0,attrs:{type:"checkbox",name:"ids"},domProps:{value:e.id}})]),i("th",[i("img",{staticClass:"cover-photo",attrs:{src:e.img_src}}),i("div",{staticClass:"th-name bookName",attrs:{title:e.name}},[t._v(t._s(e.name))])]),i("th",[i("div",{staticClass:"th-name",attrs:{title:e.type_name}},[t._v(t._s(e.category_name))])]),i("th",[i("div",{staticClass:"th-name"},[t._v(t._s(e.status))])]),i("th",[i("div",{staticClass:"th-name"},[t._v(t._s(e.release_status_name))])]),i("th",[i("div",{staticClass:"th-name"},[t._v(t._s(e.create_time||"-"))])]),i("th",[i("div",{staticClass:"btns"},[i("span",{staticClass:"icon icon-detail",attrs:{size:"mini",title:"详情",type:"primary",plain:""},on:{click:function(i){t.opneDetailDialog("info",e)}}}),1!=e.audits_status?i("span",{staticClass:"icon icon-publish",attrs:{size:"mini",title:"审核",type:"primary",plain:""},on:{click:function(i){t.audits(e.id)}}}):t._e(),3==e.audits_status?i("span",{staticClass:"icon icon-fenfa",attrs:{size:"mini",title:"分发",type:"primary",plain:""},on:{click:function(i){t.opnePublishDialog(e)}}}):t._e(),1!=e.audits_status?i("span",{staticClass:"icon icon-delete",attrs:{size:"mini",title:"删除",type:"primary",plain:""},on:{click:function(i){t.delChoosen(e.id)}}}):t._e()])])])})):t._e()]),t.page?i("div",{staticClass:"pageWrap"},[i("el-pagination",{attrs:{small:!1,background:"","current-page":t.page.num,"page-sizes":[10,50,100],"page-size":t.page.offset,layout:"total, sizes, prev, pager, next, jumper",total:t.page.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1):t._e()]),i("div",{staticClass:"gruopList"},[i("GroupList",{attrs:{groupList:t.groupList,currGroup:t.currGroup},on:{addGroup:t.addGroup,updateGroup:t.updateGroup,delGroup:t.delGroup,groupChange:t.groupChange}})],1)])])])]),i("div",{staticClass:"dialogs"},[i("el-dialog",{attrs:{center:!1,visible:t.detailDialog,"close-on-click-modal":!1,top:"50px",width:"1000px"},on:{"update:visible":function(e){t.detailDialog=e}}},[i("div",{staticClass:"content",attrs:{slot:"title"},slot:"title"},[t.detailDialog?i("Detail",{attrs:{type:t.detailDialogType,detailDialog:t.detailDialog,readOnly:t.readOnly,detailData:t.detailData},on:{detailBack:t.detailBack,"update:detailDialog":function(e){t.detailDialog=e},saveok:t.saveOk}}):t._e()],1)]),t.publishDialog?i("Dispense",{attrs:{publishDialog:t.publishDialog,item:t.detailData,is_release:!1},on:{"update:publishDialog":function(e){t.publishDialog=e},dispenseOk:t.dispenseOk}}):t._e(),i("Examine",{attrs:{examineDialog:t.examineDialog},on:{"update:examineDialog":function(e){t.examineDialog=e},saveExamine:t.saveExamine}}),t.settingDialog?i("el-dialog",{attrs:{center:!1,visible:t.settingDialog,"close-on-click-modal":!1,top:"50px",width:"1000px",title:"套系设置"},on:{"update:visible":function(e){t.settingDialog=e}}},[t.settingDialog?i("Setting",{attrs:{type:t.settingType,settingDialog:t.settingDialog},on:{"update:settingDialog":function(e){t.settingDialog=e}}}):t._e()],1):t._e(),i("el-dialog",{attrs:{center:!1,visible:t.moveToOtherDiaolog,"close-on-click-modal":!1,title:"移动分组",width:"500px"},on:{"update:visible":function(e){t.moveToOtherDiaolog=e}}},[i("span",{}),i("div",{staticClass:"group"},[i("div",{staticClass:"label"},[t._v("移动到")]),i("select",{ref:"moveToId",staticClass:"form-control",attrs:{placeholder:"请选择"}},t._l(t.groupList,function(e,a){return e.id!=t.currGroup&&""!=e.id?i("option",{domProps:{value:e.id,textContent:t._s(e.name)}}):t._e()}))]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:t.moveToSubmit}},[t._v(" 确定")]),i("el-button",{on:{click:function(e){t.moveToOtherDiaolog=!1}}},[t._v("返回")])],1)])],1)],1)},n=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},1176:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"div"},[i("el-tabs",{attrs:{value:t.type},on:{"tab-click":t.handleClick}},[i("el-tab-pane",{attrs:{label:"类别设置",name:"1"}},[i("div",{staticClass:"div"},[i("fieldset",{attrs:{id:"detailSearchForm"}},[i("table",{ref:"table",staticClass:"table"},[i("thead",[i("tr",[i("th",[t._v("类别名称")]),i("th",[t._v("类别编号")]),i("th",[t._v("操作")])])]),i("tbody",t._l(t.list,function(e){return i("tr",[i("td",[t._v(t._s(e.name))]),i("td",[t._v(t._s(e.code))]),i("td",[i("div",{staticClass:"icon icon-delete",attrs:{title:"删除"},on:{click:function(i){t.delChoosen(e.id)}}}),i("div",{staticClass:"icon el-icon-edit",attrs:{title:"修改"},on:{click:function(i){t.update(e)}}})])])}))])])])]),i("el-tab-pane",{attrs:{label:"栏目设置",name:"2"}},[i("div",{staticClass:"div"},[i("fieldset",[i("table",{ref:"table",staticClass:"table"},[i("thead",[i("tr",[i("th",[t._v("栏目名称")]),i("th",[t._v("栏目编号")]),i("th",[t._v("操作")])])]),i("tbody",t._l(t.list1,function(e){return i("tr",[i("td",[t._v(t._s(e.name))]),i("td",[t._v(t._s(e.code))]),i("td",[i("div",{staticClass:"icon icon-delete",attrs:{title:"删除"},on:{click:function(i){t.delChoosen(e.id)}}}),i("div",{staticClass:"icon el-icon-edit",attrs:{title:"修改"},on:{click:function(i){t.show(e)}}})])])}))])])])]),i("div",{staticClass:"btns"},[i("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){t.show()}}},[t._v("新增")])],1),t.dialogOpen?i("el-dialog",{attrs:{title:t.title,visible:t.dialogOpen,width:"500px","append-to-body":""},on:{"update:visible":function(e){t.dialogOpen=e}}},[i("div",{staticClass:"formWrap"},[i("VaForm",{ref:"dateSeries"},[i("form",{attrs:{id:"dateSeries"}},[i("div",{staticClass:"group"},[i("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"},{name:"model",rawName:"v-model",value:t.currSeries.name,expression:"currSeries.name"}],staticClass:"form-control",attrs:{placeholder:"名称"},domProps:{value:t.currSeries.name},on:{input:function(e){e.target.composing||t.$set(t.currSeries,"name",e.target.value)}}})]),i("div",{staticClass:"group"},[i("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"},{name:"model",rawName:"v-model",value:t.currSeries.code,expression:"currSeries.code"}],staticClass:"form-control",attrs:{placeholder:"编号"},domProps:{value:t.currSeries.code},on:{input:function(e){e.target.composing||t.$set(t.currSeries,"code",e.target.value)}}})])])])],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"info"},on:{click:function(e){t.dialogOpen=!1}}},[t._v("取消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.saveSeries}},[t._v("保存")])],1)]):t._e()],1)],1)},n=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},354:function(t,e,i){"use strict";i.r(e);var a=i(1118),n=i(809);for(var s in n)"default"!==s&&function(t){i.d(e,t,function(){return n[t]})}(s);i(1103);var r=i(0),o=Object(r.a)(n.default,a.a,a.b,!1,null,"69da5b0a",null);o.options.__file="index.vue",e.default=o.exports},362:function(t,e,i){"use strict";i.r(e);var a=i(363),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,function(){return a[t]})}(s);e.default=n.a},363:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["groupList","currGroup"],data:function(){return{newGroupDialogOpen:!1,updateGroupDialogOpen:!1,currEditGroup:null}},created:function(){},computed:{},methods:{groupChange:function(t){this.$emit("groupChange",t)},addGroupDialog:function(){},delGroup:function(t){var e=this;this.$confirm("是否删除分组:"+t.name).then(function(i){dir(i),e.$emit("delGroup",t.id)}).catch(function(t){dir(t)})},updateGroupDialog:function(t){this.updateGroupDialogOpen=!0,this.currEditGroup=t},addGroup:function(){if(this.$refs.addGroupForm.valiAll()){var t=document.querySelector("#addGroupForm");this.$emit("addGroup",t),this.newGroupDialogOpen=!1}},updateGroup:function(){if(this.$refs.updateGroupForm.valiAll()){var t=document.querySelector("#updateGroupForm");this.$emit("updateGroup",t),this.updateGroupDialogOpen=!1}}}}},364:function(t,e,i){},365:function(t,e,i){"use strict";i.r(e);var a=i(370),n=i(362);for(var s in n)"default"!==s&&function(t){i.d(e,t,function(){return n[t]})}(s);i(366);var r=i(0),o=Object(r.a)(n.default,a.a,a.b,!1,null,"176cd962",null);o.options.__file="GroupList.vue",e.default=o.exports},366:function(t,e,i){"use strict";var a=i(364);i.n(a).a},367:function(t,e,i){"use strict";i.r(e);var a=i(368),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,function(){return a[t]})}(s);e.default=n.a},368:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(122),n=i(123);e.default={mixins:[a.getIconStyle],props:{publishDialog:{type:Boolean,default:!1},item:{type:Object,default:{}},is_release:Boolean},data:function(){return{list:null,coverDialog:!1,choiceDialog:!1,currentItem:null,currentVersion:null}},created:function(){this.getList()},methods:{getList:function(){var t=this;(0,n.getDispense)({entity_type:this.item.type_number||this.item.type,id:this.item.id}).then(function(e){t.list=e.data}).catch(function(e){var i=e.payload;for(var a in i.messages){t.$message.error(i.messages[a]);break}})},colse:function(){this.$emit("update:publishDialog",!1)},save:function(){var t=[];this.$refs.dispense.querySelectorAll("input[type=checkbox]:checked").forEach(function(e){t.push(e.value)}),t.length?this.$emit("dispenseSave",t):this.$message.error("请选择你要发布的平台")},pushTime:function(t){return t?"最近"+t+"发布过":"最近暂无分发"},push:function(t){var e=this;this.currentItem=t,this.is_release&&t.release_msg.length?this.$confirm("信息不全是否分发?").then(function(i){t.version?e.coverDialog=!0:e.dispense()},function(t){var e=t.payload;log(e.message)}).catch(function(t){log("cancel")}):t.version&&t.version.length?this.coverDialog=!0:this.dispense()},dispense:function(t,e){var i=this;(0,n.dispense)({platform_id:this.currentItem.id,audits_id:this.item.audits_id,is_cover:t,version_id:e}).then(function(t){i.$message.success("分发提交成功,请稍后查看结果!"),i.$emit("dispenseOk")}).catch(function(t){var e=t.payload;for(var a in e.messages){i.$message.error(e.messages[a]);break}})},getdefect:function(t){return"缺失字段: "+t.release_msg.join("/")},getBtnName:function(t){return this.is_release&&!t.is_release?"缺少关键信息不能分发":t.release_msg&&t.release_msg.length?"确认分发":"分发"},coverDispense:function(){var t=this;if(!this.currentVersion)return this.$message.warning("请选择你要覆盖的版本号!");var e=this.currentItem.version.find(function(e){return e.xread_book_id===t.currentVersion}).version_id;this.dispense(this.currentVersion,e)}}}},369:function(t,e,i){},370:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"div"},[i("div",{staticClass:"groupWrap"},[i("div",{staticClass:"list"},[i("ul",t._l(t.groupList,function(e){return i("li",{staticClass:"licontent",class:{red:e.id==t.currGroup}},[i("div",{staticClass:"name ellipsis",attrs:{title:e.name+"("+e.num+")"},on:{click:function(i){t.groupChange(e.id)}}},[i("span",{staticClass:"title"},[t._v(t._s(e.name))]),i("span",[t._v(t._s("("+e.num+")"))])]),""!=e.id&&"non"!=e.id?i("div",{staticClass:"btns"},[i("span",{on:{click:function(i){t.updateGroupDialog(e)}}},[i("i",{staticClass:"el-icon-edit"})]),i("span",{on:{click:function(i){t.delGroup(e)}}},[i("i",{staticClass:"el-icon-delete"})])]):t._e()])}))]),i("div",{staticClass:"addGroupBtnWrap"},[i("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){t.newGroupDialogOpen=!0}}},[i("i",{staticClass:"el-icon-plus"},[t._v("新建分组")])])],1)]),i("div",{staticClass:"dialogs"},[t.newGroupDialogOpen?i("el-dialog",{attrs:{title:"新增",visible:t.newGroupDialogOpen,width:"500px"},on:{"update:visible":function(e){t.newGroupDialogOpen=e}}},[i("div",{staticClass:"formWrap"},[i("VaForm",{ref:"addGroupForm"},[i("form",{attrs:{id:"addGroupForm"}},[i("div",{staticClass:"group"},[i("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"}],staticClass:"form-control",attrs:{name:"name"}})])])])],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"info"},on:{click:function(e){t.newGroupDialogOpen=!1}}},[t._v("取消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.addGroup}},[t._v("确定")])],1)]):t._e(),t.updateGroupDialogOpen?i("el-dialog",{attrs:{title:"修改",visible:t.updateGroupDialogOpen,width:"500px"},on:{"update:visible":function(e){t.updateGroupDialogOpen=e}}},[i("div",{staticClass:"formWrap"},[i("VaForm",{ref:"updateGroupForm"},[t.currEditGroup?i("form",{attrs:{id:"updateGroupForm"}},[i("div",{staticClass:"group"},[i("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"}],staticClass:"form-control",attrs:{name:"name"},domProps:{value:t.currEditGroup.name}}),i("input",{staticClass:"hide",attrs:{name:"id"},domProps:{value:t.currEditGroup.id}})])]):t._e()])],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"info"},on:{click:function(e){t.updateGroupDialogOpen=!1}}},[t._v("取消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.updateGroup}},[t._v("确定")])],1)]):t._e()],1)])},n=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},371:function(t,e,i){"use strict";i.r(e);var a=i(372),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,function(){return a[t]})}(s);e.default=n.a},372:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=o(i(3)),n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},s=i(379),r=o(i(82));function o(t){return t&&t.__esModule?t:{default:t}}function l(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}e.default={props:{resourceDialog:{type:Boolean,default:!1},singleElection:{type:Boolean,default:!0},type:{type:String,default:"1"},curSoucesList:{type:Array,default:[]},isShowType:{type:Boolean,default:!1},isShowSearch:Boolean,isShowResource:Boolean,isDebris:{default:!1},parameter:Object},data:function(){return{dataList:[],page:null,currentType:null,contentType:[{name:"电子书",value:"1"},{name:"图片",value:"3"},{name:"音频",value:"4"},{name:"视频",value:"5"},{name:"3D内容",value:"6"},{name:"VR",value:"7"},{name:"AR",value:"8"}],query:{}}},created:function(){this.currentType=this.type||"1",this.isShowResource&&this.contentType.push({name:"共享资源",value:"22"}),this.type.includes("20")&&(this.contentType=[{name:"权威案例",value:"20-1"},{name:"法律法规",value:"20-2"},{name:"法律观点",value:"20-3"},{name:"裁判文书",value:"20-4"}])},methods:{getList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.page&&this.page.num||1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.page&&this.page.offset||10;(0,s._addBooks)(n({pageNum:e,pageOffset:i,type:this.currentType||this.type},this.parameter,this.query)).then(function(e){t.dataList=e.data||[],t.page=e.page})},colse:function(){this.$emit("update:resourceDialog",!1)},save:function(){var t=[];this.$refs.dispense.querySelectorAll("input[type=checkbox]:checked").forEach(function(e){t.push(e.value)}),t.length?this.$emit("dispenseSave",t):this.$message.error("请选择你要发布的平台")},search:function(){this.query=(0,r.default)(document.querySelector("#detailSearchForm"),{hash:!0}),this.getList(1,this.page.offset)},addSelection:function(){var t,e=(t=a.default.mark(function t(){var e,i,s,r,o,u,c,d,p,f=this;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=document.querySelector(".addBookForm"),i=e.querySelectorAll('input[name="ids"]:checked'),s=[],i.length){t.next=5;break}return t.abrupt("return",this.$message.warning("请选择添加内容"));case 5:r=!0,o=!1,u=void 0,t.prev=8,c=function(){var t=p.value;if(f.curSoucesList.findIndex(function(e){return e.id==t.value})>-1)return"continue";s.push(n({},f.dataList.find(function(e){return e.id==t.value}),{action:"add"}))},d=i[Symbol.iterator]();case 11:if(r=(p=d.next()).done){t.next=18;break}if("continue"!==c()){t.next=15;break}return t.abrupt("continue",15);case 15:r=!0,t.next=11;break;case 18:t.next=24;break;case 20:t.prev=20,t.t0=t.catch(8),o=!0,u=t.t0;case 24:t.prev=24,t.prev=25,!r&&d.return&&d.return();case 27:if(t.prev=27,!o){t.next=30;break}throw u;case 30:return t.finish(27);case 31:return t.finish(24);case 32:this.$emit("select",[].concat(s,l(this.curSoucesList)));case 33:case"end":return t.stop()}},t,this,[[8,20,24,32],[25,,27,31]])}),function(){var e=t.apply(this,arguments);return new Promise(function(t,i){return function a(n,s){try{var r=e[n](s),o=r.value}catch(t){return void i(t)}if(!r.done)return Promise.resolve(o).then(function(t){a("next",t)},function(t){a("throw",t)});t(o)}("next")})});return function(){return e.apply(this,arguments)}}(),checkAll:function(t,e){var i=this;document.querySelector("."+e).querySelectorAll('input[name="ids"]').forEach(function(e,a){var s=i.curSoucesList.findIndex(function(t){return t.id==e.value||t.b_id==e.value});t.target.checked?-1==s&&i.curSoucesList.push(n({},i.dataList.find(function(t){return t.id==e.value}),{action:"add"})):i.curSoucesList.splice(s,1),e.checked=t.target.checked})},uncheckedAll:function(t,e){var i=this.curSoucesList.findIndex(function(t){return t.id==e.id||t.b_id==e.id});t.target.checked?-1==i&&this.curSoucesList.push(e):this.curSoucesList.splice(i,1),this.singleElection||(this.$refs.ids.forEach(function(t){return t.checked=!1}),t.target.checked=!0)},isChecked:function(t){return this.curSoucesList.findIndex(function(e){return e.id===t||e.b_id===t})>-1},handleSizeChange:function(t){this.query=(0,r.default)(document.querySelector("#detailSearchForm"),{hash:!0}),this.getList(1,t)},handleCurrentChange:function(t){this.query=(0,r.default)(document.querySelector("#detailSearchForm"),{hash:!0}),this.getList(t,this.page.offset)}},watch:{currentType:function(t){this.getList()}}}},373:function(t,e,i){},374:function(t,e,i){"use strict";i.r(e);var a=i(392),n=i(371);for(var s in n)"default"!==s&&function(t){i.d(e,t,function(){return n[t]})}(s);i(389);var r=i(0),o=Object(r.a)(n.default,a.a,a.b,!1,null,"8d4001a2",null);o.options.__file="Resource.vue",e.default=o.exports},376:function(t,e,i){"use strict";i.r(e);var a=i(378),n=i(367);for(var s in n)"default"!==s&&function(t){i.d(e,t,function(){return n[t]})}(s);i(377);var r=i(0),o=Object(r.a)(n.default,a.a,a.b,!1,null,"1fd5a38b",null);o.options.__file="Dispense.vue",e.default=o.exports},377:function(t,e,i){"use strict";var a=i(369);i.n(a).a},378:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{center:!1,visible:t.coverDialog,top:"50px",width:"500px","show-close":!1,title:"x-read系统中已有该产品，选择你的操作"}},[i("div",{staticClass:"coverContent"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.choiceDialog=!0}}},[t._v("覆盖原有产品")]),i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dispense()}}},[t._v("创建新的产品版本")])],1),i("div",{staticClass:"footer dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"info"},on:{click:function(e){t.coverDialog=!1}}},[t._v("取消")])],1)]),t.choiceDialog?i("el-dialog",{attrs:{center:!1,visible:t.choiceDialog,top:"50px",width:"500px","show-close":!1,title:"选择版本号"}},[i("div",{staticClass:"coverContent"},[i("el-radio-group",{model:{value:t.currentVersion,callback:function(e){t.currentVersion=e},expression:"currentVersion"}},t._l(t.currentItem.version,function(e){return i("el-radio",{key:e.xread_book_id,attrs:{label:e.xread_book_id}},[t._v(t._s(e.version_id))])}))],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:t.coverDispense}},[t._v("确定")]),i("el-button",{attrs:{type:"info"},on:{click:function(e){t.choiceDialog=!1}}},[t._v("取消")])],1)]):t._e(),i("el-dialog",{attrs:{center:!1,visible:t.publishDialog,top:"50px",width:"1000px","show-close":!1}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"el-icon-close",on:{click:t.colse}}),i("el-tabs",{attrs:{value:"ff"}},[i("el-tab-pane",{attrs:{label:"分发",name:"ff"}})],1)],1),i("ul",{ref:"dispense",staticClass:"content modular"},t._l(t.list,function(e){return i("li",[i("div",{staticClass:"icon"},[i("div",{class:t.getStyle(e.type)}),i("span",{domProps:{textContent:t._s(e.name)}})]),i("ul",{staticClass:"defect"},[e.release_msg&&!e.release_msg.length?i("li",{staticClass:"pass"},[t._v("可正常分发")]):t._e(),e.release_msg&&e.release_msg.length?i("li",{domProps:{textContent:t._s(t.getdefect(e))}}):t._e()]),i("el-button",{attrs:{type:!t.is_release||e.is_release?"primary":"info",size:"mini",plain:""},domProps:{textContent:t._s(t.getBtnName(e))},on:{click:function(i){(!t.is_release||e.is_release)&&t.push(e)}}})],1)})),i("div",{staticClass:"footer dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"info"},on:{click:t.colse}},[t._v("取消")])],1)])],1)},n=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},389:function(t,e,i){"use strict";var a=i(373);i.n(a).a},392:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{staticClass:"restBody2",attrs:{center:!1,visible:t.resourceDialog,width:"1200px",top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,"append-to-body":""},on:{"update:visible":function(e){t.resourceDialog=e}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("i",{staticClass:"el-icon-close",on:{click:t.colse}}),i("el-tabs",{attrs:{value:"detail"}},[i("el-tab-pane",{attrs:{label:"添加",name:"detail"}})],1)],1),i("el-form",{staticClass:"addBookForm"},[t.isShowType?i("span",{staticClass:"group-inline",staticStyle:{margin:"20px","margin-top":"0"}},[i("el-radio-group",{model:{value:t.currentType,callback:function(e){t.currentType=e},expression:"currentType"}},t._l(t.contentType,function(e){return i("el-radio-button",{key:e.id,attrs:{label:e.value}},[t._v(t._s(e.name))])}))],1):t._e(),t.isShowSearch?t._e():i("div",{staticClass:"serachWrap"},[i("form",{attrs:{id:"detailSearchForm"}},[i("span",{staticClass:"group-inline"},[i("input",{staticClass:"form-control",attrs:{placeholder:"输入名称",name:"name"}})]),i("span",{staticClass:"group-inline"},[i("input",{staticClass:"form-control",attrs:{placeholder:"输入标签",name:"tag"}})]),i("span",{staticClass:"group-inline"},[i("TimePick",{attrs:{inputsName:["start_time","end_time"]}})],1),i("span",{staticClass:"group-inline right"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-search",plain:""},on:{click:t.search}},[t._v("搜索")]),i("el-button",{attrs:{type:"primary",plain:""},on:{click:t.addSelection}},[t._v("添加选中")])],1)])]),i("table",{staticClass:"table",attrs:{width:"100%"}},[i("thead",[i("tr",[i("th",{attrs:{width:"80"}},[t.singleElection?i("input",{attrs:{type:"checkbox"},on:{click:function(e){t.checkAll(e,"addBookForm")}}}):t._e(),i("span",{domProps:{textContent:t._s(t.singleElection?"全选":"选择")}})]),i("th",[t._v("名称")]),i("th",[t._v("标签")]),i("th",[t._v("类型")]),i("th",[t._v("创建时间")])])]),t.dataList.length?i("tbody",t._l(t.dataList,function(e,a){return i("tr",[i("td",[i("input",{ref:"ids",refInFor:!0,attrs:{type:"checkbox","data-type":e.status,name:"ids"},domProps:{value:e.id,checked:t.isChecked(e.id)},on:{click:function(i){t.uncheckedAll(i,e)}}})]),i("td",[t._v(t._s(e.name||e.title))]),i("td",[t._v(t._s(e.tag))]),i("td",[t._v(t._s(e.type_name))]),i("td",[t._v(t._s(e.create_time))])])})):i("tbody",[i("tr",[i("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"5"}},[t._v("暂无数据")])])])]),t.page?i("div",{staticClass:"pageWrap"},[i("el-pagination",{attrs:{small:!1,background:"","current-page":t.page.num,"page-sizes":[10,50,100],"page-size":t.page.offset,layout:"total, sizes,prev, pager, next, jumper",total:t.page.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1):t._e()]),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"info"},on:{click:t.colse}},[t._v("取消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.addSelection}},[t._v("确定")])],1)],1)],1)},n=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},406:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getList=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)("/api/datasubjects",t)},e.urgentDigital=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_put)("/api/datasubjects/urgent",t)},e.audits=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_put)("/api/datasubjects/audits",t)},e.save=function(t){var e=t.id,i=o(t,["id"]);if(e)return(0,n.request_put)("/api/datasubjects/"+e,i);return(0,n.request_post)("/api/datasubjects",i)},e.detail=d,e.del=l,e.seriesResList=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)("/api/datasubjects/class/books",t)},e.deleteSerRes=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/api/datasubjects/class/books/delete",t)},e.addSerRes=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/api/datasubjects/class/books",t)},e.seriesList=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)("/api/datasubjects/class",t)},e.delSeries=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,i=o(t,["id"]);return(0,n.request_delete)(l({id:e}),i)},e.saveSeries=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,i=o(t,["id"]);if(e)return(0,n.request_put)(u({id:e}),i);return(0,n.request_post)("/api/datasubjects/class",i)},e.modifyGroup=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,i=o(t,["id"]);return(0,n.request_put)(c({id:e}),i)},e.listGroup=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)("/api/datasubjects/groups",t)},e.addGroup=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/api/datasubjects/groups",t)},e.deleteGroup=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,i=o(t,["id"]);return(0,n.request_delete)(c({id:e}),i)},e.moveGroup=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_put)("/api/groups/datasubjects",t)};var a,n=i(4),s=i(8),r=(a=s)&&a.__esModule?a:{default:a};function o(t,e){var i={};for(var a in t)e.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(t,a)&&(i[a]=t[a]);return i}var l=r.default.compile("/api/datasubjects/class/:id"),u=r.default.compile("/api/datasubjects/class/:id"),c=r.default.compile("/api/datasubjects/groups/:id"),d=r.default.compile("/api/datasubjects/:id");r.default.compile("/api/datasubjects/:id");function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)(d(t),t)}function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/api/datasubjects/delete",t)}},464:function(t,e,i){"use strict";i.r(e);var a=i(465),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,function(){return a[t]})}(s);e.default=n.a},465:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=u(i(3)),n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},s=(u(i(82)),u(i(483))),r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(406)),o=u(i(374)),l=i(27);function u(t){return t&&t.__esModule?t:{default:t}}e.default={props:["type","detailData","detailDialog","readOnly","defaultData"],components:{Resource:o.default,Info:s.default},data:function(){return{infoData:this.detailData||{},resourceData:this.detailData,checkedSeries:[],file:null,types:null,series:null,previewImgUrl:null,resourceDialog:!1,resList:[],page:null,currentType:null}},created:function(){if(this.detailData&&this.detailData.id&&(this.getDetail(),this.getSerList(),this.getColList()),this.defaultData,this.defaultData){var t=this.defaultData,e=t.column_all,i=t.columns_info,a=t.category_all;this.infoData=this.defaultData,this.series=e,this.types=a,this.checkedSeries=i?i.map(function(t){return t.id}):[],this.currentType=i[0]?i[0].id:""}},methods:{getRrsouce:function(){var t=this;r.seriesResList({id:this.detailData.id,class_id:this.currentType}).then(function(e){t.resList=e.data})},getDetail:function(){var t=this;r.detail({id:this.detailData.id}).then(function(e){t.infoData=e.data,t.checkedSeries=e.data.columns_info?e.data.columns_info.map(function(t){return t.id}):[]})},getSerList:function(){var t=this;r.seriesList({type:"1"}).then(function(e){t.types=e.data})},getColList:function(){var t=this;r.seriesList({type:"2"}).then(function(e){t.series=e.data})},previewImg:function(t){var e=t.target.files[0];this.imgFile=e,this.previewImgUrl=URL.createObjectURL(e)},submitInfo:function(){var t,e=(t=a.default.mark(function t(){var e,i,s,o=this;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.$refs.detailForm.valiAll()){t.next=3;break}return t.abrupt("return");case 3:if(e=this.$refs.cover.files[0],i=this.$loading({text:"正在上传",background:"rgba(0, 0, 0, 0.8)"}),s=n({},this.infoData,{columns:this.checkedSeries.join(",")}),!e){t.next=9;break}return t.next=9,(0,l.getTask)(e).then(function(t){s.img=t.data.path});case 9:return t.next=11,r.save(s).then(function(t){o.detailData.id||(o.infoData=t.data),i.close(),o.$message.success("操作成功!"),o.$emit("saveok",t.data)}).catch(function(t){i.close(),o.$message({message:t.message||"错误!",type:"error"})});case 11:case"end":return t.stop()}},t,this)}),function(){var e=t.apply(this,arguments);return new Promise(function(t,i){return function a(n,s){try{var r=e[n](s),o=r.value}catch(t){return void i(t)}if(!r.done)return Promise.resolve(o).then(function(t){a("next",t)},function(t){a("throw",t)});t(o)}("next")})});return function(){return e.apply(this,arguments)}}(),addSelcet:function(t){var e=this;r.addSerRes({id:this.detailData.id,class_id:this.currentType,rel_id:t.map(function(t){return t.id})}).then(function(t){e.getRrsouce(),e.resourceDialog=!1})},handleClick:function(t,e){if("resource"==t.name){if(this.currentType=this.checkedSeries[0],!this.detailData||!this.detailData.id||!this.currentType)return;this.getRrsouce()}},add:function(){return this.detailData&&this.detailData.id?this.currentType?void(this.resourceDialog=!0):this.$message.warning("请先添加栏目"):this.$message.warning("请先保存资源")},del:function(t){var e=this;this.$confirm("是否删除?").then(function(i){r.deleteSerRes({id:e.detailData.id,class_id:e.currentType,rel_id:t}).then(function(t){e.getRrsouce()})}).catch(function(t){})}},computed:{getNav:function(){var t=this;return this.series.filter(function(e){if(t.checkedSeries.includes(e.id))return e})}},watch:{currentType:function(t,e){e&&t!=e&&(this.detailData,this.getRrsouce())}}}},466:function(t,e,i){"use strict";i.r(e);var a=i(467),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,function(){return a[t]})}(s);e.default=n.a},467:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=u(i(3)),n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},s=(u(i(82)),i(27)),r=(l(s),l(i(406))),o=u(i(552));function l(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function u(t){return t&&t.__esModule?t:{default:t}}e.default={props:["detailData","infoData","readOnly","detailDialog"],created:function(){this.detailData&&this.getDetail(),this.getSerList(),this.getColList()},components:{Resource:o.default},data:function(){return{information:this.infoData,previewImgUrl:null,imgUrl:null,file:null,isIndeterminate:!0,checkAll:!1,checkedSeries:[],types:null,series:null}},watch:{checkedSeries:function(){this.$emit("checkedSer")}},methods:{getDetail:function(){var t=this;r.detail({id:this.detailData.id}).then(function(e){t.information=e.data,t.checkedSeries=e.data.columns.split(",")})},getSerList:function(){var t=this;r.seriesList({type:"1"}).then(function(e){t.types=e.data})},getColList:function(){var t=this;r.seriesList({type:"2"}).then(function(e){t.series=e.data})},previewImg:function(t){var e=t.target.files[0];this.imgFile=e,this.previewImgUrl=URL.createObjectURL(e)},submitInfo:function(){var t,e=(t=a.default.mark(function t(){var e,i,o,l=this;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.$refs.detailForm.valiAll()){t.next=3;break}return t.abrupt("return");case 3:if(e=this.$refs.cover.files[0],i=this.$loading({text:"正在上传",background:"rgba(0, 0, 0, 0.8)"}),o=n({},this.information,this.types,this.series,{columns:this.checkedSeries.join(",")}),!e){t.next=9;break}return t.next=9,(0,s.getTask)(e).then(function(t){o.img=t.data.path});case 9:return t.next=11,r.save(o).then(function(t){l.detailData.id||(l.information=t.data),i.close(),l.$message.success("操作成功!"),l.$emit("saveok",t.data)}).catch(function(t){i.close(),l.$message({message:t.message||"错误!",type:"error"})});case 11:case"end":return t.stop()}},t,this)}),function(){var e=t.apply(this,arguments);return new Promise(function(t,i){return function a(n,s){try{var r=e[n](s),o=r.value}catch(t){return void i(t)}if(!r.done)return Promise.resolve(o).then(function(t){a("next",t)},function(t){a("throw",t)});t(o)}("next")})});return function(){return e.apply(this,arguments)}}()}}},468:function(t,e,i){"use strict";i.r(e);var a=i(469),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,function(){return a[t]})}(s);e.default=n.a},469:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(406)),n=r(i(374)),s=r(i(483));function r(t){return t&&t.__esModule?t:{default:t}}e.default={props:["resourceData","detailData","checkedSeries"],created:function(){log("122",this.checkedSeries),this.getList()},data:function(){return{type:"example",reslist:this.resourceData,resourceDialog:!1,resList1:[{name:"杀人案",number:"A1"},{name:"纵火案",number:"V2"},{name:"盗窃案",number:"E3"}],resList2:[{name:"国情",number:"A1"},{name:"权律二",number:"B2"},{name:"法律",number:"C3"}]}},components:{AddResource:n.default,Info:s.default},methods:{getList:function(){var t=this;a.seriesResList({id:this.detailData.id}).then(function(e){t.reslist=e.data})},addSelcet:function(t){this.curSoucesList=t,this.resourceDialog=!1}}}},470:function(t,e,i){},471:function(t,e,i){},472:function(t,e,i){},483:function(t,e,i){"use strict";i.r(e);var a=i(570),n=i(466);for(var s in n)"default"!==s&&function(t){i.d(e,t,function(){return n[t]})}(s);i(554);var r=i(0),o=Object(r.a)(n.default,a.a,a.b,!1,null,"859fb5f4",null);o.options.__file="info.vue",e.default=o.exports},551:function(t,e,i){"use strict";i.r(e);var a=i(563),n=i(464);for(var s in n)"default"!==s&&function(t){i.d(e,t,function(){return n[t]})}(s);i(555);var r=i(0),o=Object(r.a)(n.default,a.a,a.b,!1,null,"43b7ec0a",null);o.options.__file="detail.vue",e.default=o.exports},552:function(t,e,i){"use strict";i.r(e);var a=i(574),n=i(468);for(var s in n)"default"!==s&&function(t){i.d(e,t,function(){return n[t]})}(s);i(553);var r=i(0),o=Object(r.a)(n.default,a.a,a.b,!1,null,"2c3acff6",null);o.options.__file="resource.vue",e.default=o.exports},553:function(t,e,i){"use strict";var a=i(470);i.n(a).a},554:function(t,e,i){"use strict";var a=i(471);i.n(a).a},555:function(t,e,i){"use strict";var a=i(472);i.n(a).a},563:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"div"},[i("el-tabs",{attrs:{value:t.type},on:{"tab-click":t.handleClick}},[i("el-tab-pane",{attrs:{label:"详情",name:"info"}},[i("VaForm",{ref:"detailForm"},[i("form",{ref:"detailForm",staticClass:"detailForm"},[i("fieldset",{attrs:{disabled:t.readOnly}},[i("div",{staticClass:"group"},[i("div",{staticClass:"label"},[t._v("*套系名称:")]),i("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"},{name:"model",rawName:"v-model",value:t.infoData.name,expression:"infoData.name"}],staticClass:"form-control",attrs:{type:"text",maxlength:"20",disabled:t.readOnly},domProps:{value:t.infoData.name},on:{input:function(e){e.target.composing||t.$set(t.infoData,"name",e.target.value)}}})]),i("div",{staticClass:"group"},[i("div",{staticClass:"label"},[t._v("*套系ID:")]),i("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"},{name:"model",rawName:"v-model",value:t.infoData.link_id,expression:"infoData.link_id"}],staticClass:"form-control",attrs:{type:"text",maxlength:"20",disabled:t.readOnly},domProps:{value:t.infoData.link_id},on:{input:function(e){e.target.composing||t.$set(t.infoData,"link_id",e.target.value)}}})]),i("div",{staticClass:"group"},[i("div",{staticClass:"label"},[t._v("*套系简介:")]),i("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"},{name:"model",rawName:"v-model",value:t.infoData.abs,expression:"infoData.abs"}],staticClass:"form-control",attrs:{type:"text",maxlength:"20",disabled:t.readOnly},domProps:{value:t.infoData.abs},on:{input:function(e){e.target.composing||t.$set(t.infoData,"abs",e.target.value)}}})]),i("div",{staticClass:"group"},[i("div",{staticClass:"label"},[t._v("*套系作者:")]),i("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"},{name:"model",rawName:"v-model",value:t.infoData.author,expression:"infoData.author"}],staticClass:"form-control",attrs:{type:"text",maxlength:"20",disabled:t.readOnly},domProps:{value:t.infoData.author},on:{input:function(e){e.target.composing||t.$set(t.infoData,"author",e.target.value)}}})]),i("div",{staticClass:"group"},[i("div",{staticClass:"label"},[t._v("*套系类别:")]),i("el-select",{attrs:{maxlength:"20",disabled:t.readOnly},model:{value:t.infoData.category,callback:function(e){t.$set(t.infoData,"category",e)},expression:"infoData.category"}},t._l(t.types,function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),i("div",{staticClass:"group"},[i("div",{staticClass:"label"},[t._v("*类别编号:")]),i("span",{attrs:{type:"text"},domProps:{textContent:t._s(t.infoData.category)}})]),i("div",{staticClass:"group"},[i("div",{staticClass:"label"},[t._v("*栏目设置:")]),i("el-checkbox-group",{attrs:{disabled:t.readOnly,min:1,max:100},model:{value:t.checkedSeries,callback:function(e){t.checkedSeries=e},expression:"checkedSeries"}},t._l(t.series,function(e){return i("el-checkbox",{key:e.id,attrs:{label:e.id,value:e.id}},[t._v(t._s(e.name))])}))],1),i("div",{staticClass:"group"},[i("div",{staticClass:"label"},[t._v("封面:")]),i("img",{staticClass:"img",attrs:{src:t.previewImgUrl||t.infoData.img_src}})]),i("div",{staticClass:"group"},[i("div",{staticClass:"label"},[t._v("设置封面:")]),i("label",[t.readOnly?t._e():i("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:function(e){t.$refs.cover.click()}}},[t._v("上传")]),i("input",{ref:"cover",staticClass:"hide",attrs:{type:"file",accept:"image/jpeg,image/jpg,image/png"},on:{change:function(e){t.previewImg(e)}}})],1)])])]),t.readOnly?t._e():i("div",{staticClass:"btns"},[i("el-button",{attrs:{type:"info"},on:{click:function(e){t.$emit("update:detailDialog",!1)}}},[t._v("取消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitInfo("detailForm")}}},[t._v("确定")])],1)])],1),i("el-tab-pane",{attrs:{label:"资源",name:"resource"}},[t.resourceDialog?i("Resource",{attrs:{resourceDialog:t.resourceDialog,curSoucesList:[],type:"20-1",isShowType:!0},on:{"update:resourceDialog":function(e){t.resourceDialog=e},select:t.addSelcet}}):t._e(),t.checkedSeries&&t.series?i("el-radio-group",{staticStyle:{"margin-bottom":"20px"},attrs:{size:"small"},model:{value:t.currentType,callback:function(e){t.currentType=e},expression:"currentType"}},t._l(t.getNav,function(e){return i("el-radio-button",{attrs:{label:e.id}},[t._v(t._s(e.name))])})):t._e(),i("table",{staticClass:"table"},[i("thead",[i("tr",[i("th",[t._v("名称")]),i("th",[t._v("类型")]),i("th",[t._v("操作")])])]),i("tbody",t._l(t.resList,function(e){return i("tr",[i("td",[t._v(t._s(e.title))]),i("td",[t._v(t._s(e.type_name))]),i("td",[i("span",{staticClass:"icon icon-delete",attrs:{size:"mini",title:"删除",type:"primary"},on:{click:function(i){!t.readOnly&&t.del([e.rel_id])}}})])])}))]),t.readOnly?t._e():i("div",{staticClass:"btns"},[i("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){t.add()}}},[t._v("新增")])],1)],1)],1)],1)},n=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},570:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"div"},[i("VaForm",{ref:"detailForm"},[i("form",{ref:"detailForm",staticClass:"detailForm"},[i("fieldset",{attrs:{disabled:t.readOnly}},[i("div",{staticClass:"group"},[i("div",{staticClass:"label"},[t._v("*套系名称:")]),i("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"},{name:"model",rawName:"v-model",value:t.information.name,expression:"information.name"}],staticClass:"form-control",attrs:{type:"text",maxlength:"20",disabled:t.readOnly},domProps:{value:t.information.name},on:{input:function(e){e.target.composing||t.$set(t.information,"name",e.target.value)}}})]),i("div",{staticClass:"group"},[i("div",{staticClass:"label"},[t._v("*套系ID:")]),i("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"},{name:"model",rawName:"v-model",value:t.information.link_id,expression:"information.link_id"}],staticClass:"form-control",attrs:{type:"text",maxlength:"20",disabled:t.readOnly},domProps:{value:t.information.link_id},on:{input:function(e){e.target.composing||t.$set(t.information,"link_id",e.target.value)}}})]),i("div",{staticClass:"group"},[i("div",{staticClass:"label"},[t._v("*套系简介:")]),i("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"},{name:"model",rawName:"v-model",value:t.information.abs,expression:"information.abs"}],staticClass:"form-control",attrs:{type:"text",maxlength:"20",disabled:t.readOnly},domProps:{value:t.information.abs},on:{input:function(e){e.target.composing||t.$set(t.information,"abs",e.target.value)}}})]),i("div",{staticClass:"group"},[i("div",{staticClass:"label"},[t._v("*套系作者:")]),i("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"},{name:"model",rawName:"v-model",value:t.information.author,expression:"information.author"}],staticClass:"form-control",attrs:{type:"text",maxlength:"20",disabled:t.readOnly},domProps:{value:t.information.author},on:{input:function(e){e.target.composing||t.$set(t.information,"author",e.target.value)}}})]),i("div",{staticClass:"group"},[i("div",{staticClass:"label"},[t._v("*套系类别:")]),i("el-select",{attrs:{maxlength:"20",disabled:t.readOnly},model:{value:t.information.category_name,callback:function(e){t.$set(t.information,"category_name",e)},expression:"information.category_name"}},t._l(t.types,function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.name}})}))],1),i("div",{staticClass:"group"},[i("div",{staticClass:"label"},[t._v("*类别编号:")]),i("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"},{name:"model",rawName:"v-model",value:t.information.category_code,expression:"information.category_code"}],staticClass:"form-control",attrs:{type:"text",maxlength:"20",disabled:t.readOnly},domProps:{value:t.information.category_code},on:{input:function(e){e.target.composing||t.$set(t.information,"category_code",e.target.value)}}})]),i("div",{staticClass:"group"},[i("div",{staticClass:"label"},[t._v("*栏目一:")]),i("el-checkbox-group",{attrs:{disabled:t.readOnly,min:1,max:100},model:{value:t.checkedSeries,callback:function(e){t.checkedSeries=e},expression:"checkedSeries"}},t._l(t.series,function(e){return i("el-checkbox",{key:e.id,attrs:{label:e.name}},[t._v(t._s(e.name))])}))],1),i("div",{staticClass:"group"},[i("div",{staticClass:"label"},[t._v("封面:")]),i("img",{attrs:{src:t.previewImgUrl||t.information.img_src}})]),i("div",{staticClass:"group"},[i("div",{staticClass:"label"},[t._v("设置封面：")]),i("label",[t.readOnly?t._e():i("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){t.$refs.cover.click()}}},[t._v("修改")]),i("input",{ref:"cover",staticClass:"hide",attrs:{type:"file",accept:"image/jpeg,image/jpg,image/png"},on:{change:function(e){t.previewImg(e)}}})],1)])])]),t.readOnly?t._e():i("div",{staticClass:"btn"},[i("el-button",{attrs:{type:"info"},on:{click:function(e){t.$emit("close")}}},[t._v("取消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitInfo("detailForm")}}},[t._v("确定")])],1)])],1)},n=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},574:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"div"},[t.resourceDialog?i("AddResource",{attrs:{resourceDialog:t.resourceDialog,curSoucesList:[],type:"20",isShowType:!0},on:{"update:resourceDialog":function(e){t.resourceDialog=e},select:t.addSelcet}}):t._e(),i("el-tabs",{attrs:{value:t.type},on:{"tab-click":function(e){t.$emit("handleClick")}}},[i("el-tab-pane",{attrs:{label:"指导案例",name:"example"}},[i("div",{staticClass:"tableWrap"},[i("table",{staticClass:"table"},[i("thead",[i("tr",[i("th",[t._v("名称")]),i("th",[t._v("编号")])])]),i("tbody",t._l(t.resList1,function(e){return i("tr",[i("td",[t._v(t._s(e.name))]),i("td",[t._v(t._s(e.number))])])}))])])]),i("el-tab-pane",{attrs:{label:"栏目",name:"column"}},[i("div",{staticClass:"tableWrap"},[i("table",{staticClass:"table"},[i("thead",[i("tr",[i("th",[t._v("名称")]),i("th",[t._v("编号")])])]),i("tbody",t._l(t.resList2,function(e){return i("tr",[i("td",[t._v(t._s(e.name))]),i("td",[t._v(t._s(e.number))])])}))])])])],1),i("div",{staticClass:"footer"},[i("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){t.resourceDialog=!0}}},[t._v("新增")])],1)],1)},n=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},809:function(t,e,i){"use strict";i.r(e);var a=i(810),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,function(){return a[t]})}(s);e.default=n.a},810:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},n=(f(i(82)),p(i(20)),f(i(155))),s=f(i(154)),r=f(i(365)),o=f(i(376)),l=f(i(551)),u=f(i(1101)),c=i(122),d=p(i(406));function p(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function f(t){return t&&t.__esModule?t:{default:t}}e.default={components:{Menu:n.default,Top:s.default,GroupList:r.default,Dispense:o.default,Detail:l.default,Setting:u.default},mixins:[c.main],data:function(){return{services:d,list:null,page:null,groupList:null,detailDialog:!1,detailDialogType:"info",settingType:"1",detailData:null,timePick:null,publishDialog:!1,moveToOtherDiaolog:!1,moveIds:null,toId:null,settingDialog:!1,currentType:null,type:{type:String,default:"1"},fabuIds:[],options:[{name:"权威实务集刊",value:"0"},{name:"地方实务集刊",value:"1"}]}},methods:{getList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.page&&this.page.num||1,e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.page&&this.page.offset||10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.services.getList(a({pageNum:t,pageOffset:i,group_id:this.currGroup},n)).then(function(t){e.list=t.data,e.page=t.page})},addSeries:function(t,e){this.detailDialog=!0,this.detailData={},this.metadata=null},seriesSetting:function(){this.settingType="1",this.settingDialog=!0},delGroup:function(t){var e=this;this.services.deleteGroup({id:t}).then(function(i){t===e.currGroup&&e.$router.push({path:e.$route.path,query:{id:"non"}}),e.getGroupList()})},urgentDigital:function(){for(var t=this,e=this.getChecked(),i=0,a=e.length;i<a;i++)for(var n=0,s=this.list.length;n<s;n++)if(this.list[n].id==e[i]&&1!=this.list[n].audits_status)return void this.$message.error("只能勾选待审核数据");e&&this.services.urgentDigital({id:e}).then(function(e){return t.$message.success("已提交加急审核")})},saveOk:function(t){this.detailData.id||(this.detailData=t),this.getList(),this.getGroupList()},opnePublishDialog:function(t){this.detailData=t,this.publishDialog=!0}}}},811:function(t,e,i){"use strict";i.r(e);var a=i(812),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,function(){return a[t]})}(s);e.default=n.a},812:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r(i(3)),n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},s=(r(i(82)),function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(406)));function r(t){return t&&t.__esModule?t:{default:t}}function o(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,i){return function a(n,s){try{var r=e[n](s),o=r.value}catch(t){return void i(t)}if(!r.done)return Promise.resolve(o).then(function(t){a("next",t)},function(t){a("throw",t)});t(o)}("next")})}}e.default={props:["type","detailData","detailDialog","settingDialog"],created:function(){this.getList()},data:function(){return{addSeriesDialog:!1,addColumnDialog:!1,list:null,list1:null,page:null,dialogOpen:!1,currSeries:{},currentType:this.type}},watch:{type:function(){this.getList()}},methods:{getList:function(){var t=o(a.default.mark(function t(){var e=this;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.seriesList({type:"1"}).then(function(t){e.list=t.data});case 2:return t.next=4,s.seriesList({type:"2"}).then(function(t){e.list1=t.data});case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),delChoosen:function(){var t=o(a.default.mark(function t(e){var i=this;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e&&this.$confirm("是否删除?").then(function(t){s.delSeries({id:e}).then(function(t){i.getList()})}).catch(function(t){});case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),update:function(t){this.dialogOpen=!0,this.currSeries=t},saveSeries:function(){var t=this;this.$refs.dateSeries.valiAll()&&(this.addSeriesDialog=!1,s.saveSeries(n({},this.currSeries,{type:this.currentType})).then(function(e){t.getList(),t.dialogOpen=!1}))},show:function(t){this.currSeries=t||{},this.dialogOpen=!0},handleClick:function(t,e){this.currentType=t.name}},computed:{title:function(){return"1"==this.currentType?"类别":"栏目"}}}},813:function(t,e,i){},814:function(t,e,i){}}]);