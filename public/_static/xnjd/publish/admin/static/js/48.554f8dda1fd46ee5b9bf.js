(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{1114:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.addBackups=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)("/common/api/db/backups",t).then(function(t){var e=result.data,n=e.task_id,s=e.status,a=e.percent,r=e.messages;e.create_time,e.update_time;return addResListener({res_id:n,res_status:s,res_percent:a,res_messages:r}),result})},e.backupAndRestoreList=function(){return(0,r.request_get)("/common/api/db/backups")},e.deleteBackupAndRestore=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_delete)("/common/api/db/backups/"+t.task_id)},e.restoreBackup=function(){return(0,r.request_post)("/common/api/db/restore")},e.queryBackupRestore=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_get)("/common/api/db/backups/"+t.task_id)};var s,a=n(12),r=((s=a)&&s.__esModule,n(4))},1115:function(t,e,n){"use strict";var s=n(838);n.n(s).a},1122:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"indexs"},[n("Top",{attrs:{currentPlant:"X-PUBLISH"}}),n("Menu",{attrs:{curr:"/backupAndRestore"}}),n("div",{staticClass:"mainRight"},[n("div",{staticClass:"maindata"},[n("div",{staticClass:"backup"},[t._m(0),n("div",{staticClass:"backup_operate"},[n("p",[t._v("请确保你有足够的存储空间,并确保整个备份过程中系统运行的连续性，点击按钮开始备份")]),n("input",{attrs:{type:"button",value:"开始备份"},on:{click:function(e){t.startBackup()}}})])]),n("div",{staticClass:"tableWrap"},[n("table",{staticClass:"table"},[t._m(1),n("tbody",t._l(t.backupInfoList,function(e){return n("tr",[n("td",[t._v(t._s(e.task_id))]),n("td",[t._v(t._s(e.status))]),n("td",[t._v(t._s(e.percent))]),n("td",[t._v(t._s(e.messages))]),n("td",[n("span",{staticClass:"icon icon-delete",attrs:{type:"primary",title:"删除",plain:"",size:"mini"},on:{click:function(n){t.deleteBackup([e.task_id])}}})])])}))])]),t._m(2)])])],1)},a=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"backup_title"},[e("div",{staticClass:"backup_title_line"}),e("span",[this._v("数据备份")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("任务ID")]),e("th",[this._v("状态")]),e("th",[this._v("完成百分比")]),e("th",[this._v("任务状态说明")]),e("th",[this._v("操作")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"backup restore"},[e("div",{staticClass:"backup_title"},[e("div",{staticClass:"backup_title_line"}),e("span",[this._v("备份还原")])]),e("div",{staticClass:"restore_search"}),e("div",{staticClass:"backup_operate"},[e("p",[this._v("还原操作会覆盖现有数据，建议您当前数据先进行备份，整个还原操作过程需要3分钟，请确保系统运行的连续性，不然会造成数据丢失，点击按钮开始还原数据")]),e("input",{attrs:{type:"button",value:"开始还原"}})])])}];n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a})},360:function(t,e,n){"use strict";n.r(e);var s=n(1122),a=n(836);for(var r in a)"default"!==r&&function(t){n.d(e,t,function(){return a[t]})}(r);n(1115);var i=n(0),u=Object(i.a)(a.default,s.a,s.b,!1,null,"f28db17e",null);u.options.__file="index.vue",e.default=u.exports},836:function(t,e,n){"use strict";n.r(e);var s=n(837),a=n.n(s);for(var r in s)"default"!==r&&function(t){n.d(e,t,function(){return s[t]})}(r);e.default=a.a},837:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=c(n(3)),a=(c(n(82)),c(n(155))),r=c(n(154)),i=(function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);e.default=t}(n(125)),n(122)),u=n(1114);function c(t){return t&&t.__esModule?t:{default:t}}function o(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){return function s(a,r){try{var i=e[a](r),u=i.value}catch(t){return void n(t)}if(!i.done)return Promise.resolve(u).then(function(t){s("next",t)},function(t){s("throw",t)});t(u)}("next")})}}e.default={mixins:[i.publicMixin],data:function(){return{path:"backupAndRestore",backupInfoList:[],queryInfoList:[]}},methods:{startBackup:function(){var t=o(s.default.mark(function t(){return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,u.addBackups)();case 2:return t.next=4,this.getList();case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),getList:function(){var t=o(s.default.mark(function t(){return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,u.backupAndRestoreList)();case 2:this.backupInfoList=t.sent.data,this.backupInfoList;case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),deleteBackup:function(t){var e=this;this.$confirm("确认删除？").then(function(n){(0,u.deleteBackupAndRestore)({task_id:t}).then(function(t){e.getList(),e.$message({message:"删除成功",type:"success"})})}).catch(function(t){})},queryBackupStatus:function(t){var e=this;(0,u.queryBackupRestore)({task_id:t}).then(function(t){e.getList(),e.queryInfoList=(0,u.queryBackupRestore)().data})}},components:{Menu:a.default,Top:r.default}}},838:function(t,e,n){}}]);