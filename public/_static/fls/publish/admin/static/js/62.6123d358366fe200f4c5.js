/*!
 * {
 *   "buildtime": "2019-07-19 15:01:49",
 *   "workspace": "F:\\project\\x-book4\\js",
 *   "username": "Administrator",
 *   "hostname": "PC201608171616",
 *   "platform": "win32",
 *   "git": {
 *     "branch": "master",
 *     "hash": "b17f442a6",
 *     "message": [
 *       "commit b17f442a62eb78bc9ab78ffe68e3afb76c3e3548",
 *       "Author: YangZai <552396385@qq.com>",
 *       "Date:   Fri Jul 19 14:48:13 2019 +0800",
 *       "    xxxxxx"
 *     ],
 *     "user": "YangZai",
 *     "email": "552396385@qq.com",
 *     "remote": [
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (fetch)",
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (push)"
 *     ]
 *   }
 * }
 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{1327:function(e,t,a){"use strict";var n=a(953);a.n(n).a},1339:function(e,t,a){"use strict";function n(){var a=this,e=a.$createElement,n=a._self._c||e;return n("div",{staticClass:"indexs"},[n("Top",{attrs:{currentPlant:"X-PUBLISH"}}),n("Menu",{attrs:{curr:"/jurisdiction"}}),n("div",{staticClass:"mainRight"},[n("div",{staticClass:"maindata"},[n("div",{staticClass:"serachWrap"},[n("div",{staticClass:"NavList"},[n("el-tabs",{on:{"tab-click":a.handleNavClick},model:{value:a.activeName,callback:function(e){a.activeName=e},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"管理员列表",name:"manager"}}),n("el-tab-pane",{attrs:{label:"管理员日志",name:"journal"}}),n("el-tab-pane",{attrs:{label:"角色管理",name:"role"}})],1)],1),n("form",{attrs:{id:"mainForm"}},[a._m(0),a._m(1),a._m(2),a._m(3),n("span",{staticClass:"group-inline"},[n("TimePick",{attrs:{inputsName:["start_time","end_time"]}})],1),n("span",{staticClass:"group-inline"},[a.roleInfo.roleList?n("el-select",{attrs:{name:"role",placeholder:"选择角色搜索",clearable:""},model:{value:a.roleInfo.roleValue,callback:function(e){a.$set(a.roleInfo,"roleValue",e)},expression:"roleInfo.roleValue"}},a._l(a.roleInfo.roleList,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1):a._e()],1),n("span",{staticClass:"group-inline"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-search",plain:""},on:{click:a.seareHandeler}},[a._v("搜索")]),n("el-button",{attrs:{type:"primary",icon:"el-icon-plus",plain:""},on:{click:function(e){return a.showDetaile()}}},[a._v("新增")])],1)])]),n("div",{staticClass:"tableWrap"},[n("table",{staticClass:"table"},[a._m(4),a.pageList.length?n("tbody",a._l(a.pageList,function(t){return n("tr",[n("td",{domProps:{textContent:a._s(t.name)}}),n("td",{domProps:{textContent:a._s(t.nick_name)}}),n("td",{domProps:{textContent:a._s(t.phone)}}),n("td",{domProps:{textContent:a._s(t.email)}}),n("td",{domProps:{textContent:a._s(t.create_time)}}),n("td",a._l(t.roles,function(e,t){return n("span",[a._v(a._s(e))])}),0),n("td",[n("Icon",{attrs:{type:"icon-detail",title:"详情",plain:"",size:"mini"},on:{click:function(e){return a.showDetaile(t.id)}}}),n("Icon",{attrs:{type:"icon-preview",title:"查看日志",plain:"",size:"mini"},on:{click:function(e){return a.viewLog(t.id)}}}),n("Icon",{attrs:{type:"icon-delete",title:"删除",plain:"",size:"mini"},on:{click:function(e){return a.deleteHandeler([t.id])}}})],1)])}),0):a._e()])]),a.page?n("div",{staticClass:"pageWrap"},[n("el-pagination",{attrs:{small:!1,background:"","current-page":a.page.num,"page-sizes":[10,50,100],"page-size":a.page.offset,layout:"total, sizes, prev, pager, next, jumper",total:a.page.total},on:{"size-change":a.handleSizeChange,"current-change":a.handleCurrentChange}})],1):a._e()]),n("el-dialog",{attrs:{visible:a.detailVisible,"before-close":a.handleClose,"lock-scroll":!1,"close-on-click-modal":!1},on:{"update:visible":function(e){a.detailVisible=e}}},[n("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[n("el-tabs",{attrs:{value:"detail"}},[n("el-tab-pane",{attrs:{label:"详情",name:"detail"}})],1)],1),n("el-form",{ref:"detailDialog",attrs:{model:a.detailDate,rules:a.detailRules}},[n("el-form-item",{attrs:{label:"用户名:","label-width":"120px",prop:"name"}},[n("el-input",{model:{value:a.detailDate.name,callback:function(e){a.$set(a.detailDate,"name",e)},expression:"detailDate.name"}})],1),n("el-form-item",{attrs:{label:"名称:","label-width":"120px",prop:"nick_name"}},[n("el-input",{model:{value:a.detailDate.nick_name,callback:function(e){a.$set(a.detailDate,"nick_name",e)},expression:"detailDate.nick_name"}})],1),n("el-form-item",{attrs:{label:"联系电话:","label-width":"120px",prop:"phone"}},[n("el-input",{model:{value:a.detailDate.phone,callback:function(e){a.$set(a.detailDate,"phone",e)},expression:"detailDate.phone"}})],1),n("el-form-item",{attrs:{label:"联系邮箱:","label-width":"120px",prop:"email"}},[n("el-input",{model:{value:a.detailDate.email,callback:function(e){a.$set(a.detailDate,"email",e)},expression:"detailDate.email"}})],1),n("el-form-item",{attrs:{label:"角色:","label-width":"120px",prop:"roles"}},[n("el-checkbox-group",{attrs:{min:1,max:100},model:{value:a.detailDate.roles,callback:function(e){a.$set(a.detailDate,"roles",e)},expression:"detailDate.roles"}},a._l(a.roleInfo.roleList,function(e){return n("el-checkbox",{key:e.id,attrs:{label:e.name,name:"role"}},[a._v(a._s(e.name))])}),1)],1),n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:a.detailDate.id,expression:"detailDate.id"}],attrs:{label:"登录密码:","label-width":"120px"}},[n("el-button",{attrs:{type:"primary",size:"small",plain:""},on:{click:a.resetPassword}},[a._v("重置")]),n("span",{staticClass:"pass-tip"},[a._v("将重置为初始密码：123456")])],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"info"},on:{click:a.handleClose}},[a._v("取消")]),n("el-button",{attrs:{type:"primary"},on:{click:a.save}},[a._v("确定")])],1)],1)],1)],1)}var i=[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"group-inline"},[t("input",{staticClass:"form-control",attrs:{name:"name",placeholder:"输入用户名搜索"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"group-inline"},[t("input",{staticClass:"form-control",attrs:{name:"nick_name",placeholder:"输入名称搜索"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"group-inline"},[t("input",{staticClass:"form-control",attrs:{name:"phone",placeholder:"输入电话搜索"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"group-inline"},[t("input",{staticClass:"form-control",attrs:{name:"email",placeholder:"输入邮箱搜索"}})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",[a("th",[e._v("用户名")]),a("th",[e._v("名称")]),a("th",[e._v("联系电话")]),a("th",[e._v("联系邮箱")]),a("th",[e._v("创建时间")]),a("th",[e._v("角色")]),a("th",[e._v("操作")])])])}];a.d(t,"a",function(){return n}),a.d(t,"b",function(){return i})},369:function(e,t,a){"use strict";a.r(t);var n=a(1339),i=a(951);for(var l in i)"default"!==l&&function(e){a.d(t,e,function(){return i[e]})}(l);a(1327);var r=a(0),s=Object(r.a)(i.default,n.a,n.b,!1,null,"12dfc98c",null);t.default=s.exports},951:function(e,t,a){"use strict";a.r(t);var n=a(952),i=a.n(n);for(var l in n)"default"!==l&&function(e){a.d(t,e,function(){return n[e]})}(l);t.default=i.a},952:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=c(a(5)),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},n=(c(a(84)),c(a(158))),i=c(a(157)),o=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}}(a(129)),r=a(126);function c(e){return e&&e.__esModule?e:{default:e}}function u(e){return function(){var s=e.apply(this,arguments);return new Promise(function(l,r){return function t(e,a){try{var n=s[e](a),i=n.value}catch(e){return void r(e)}if(!n.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});l(i)}("next")})}}t.default={mixins:[r.publicMixin],data:function(){return{pageList:[],page:null,query:null,path:"jurisdiction",activeName:"manager",timeValue:null,choose:[],detailVisible:!1,roleInfo:{roleValue:"",roleList:[]},detailDate:{id:"",name:"",nick_name:"",phone:"",email:"",roles:[],reset:""},detailRules:{name:[{required:!0,message:"请输入用户名",trigger:"blur"}],nick_name:[{required:!0,message:"请输入名称",trigger:"blur"}],phone:[{required:!0,message:"请输入联系电话",trigger:"blur"}],email:[{required:!0,message:"请输入联系邮箱",trigger:"blur"}],roles:[{required:!0,message:"请选择角色",trigger:"change"}]}}},created:function(){var t=this;return u(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getList();case 2:t.getRoleInfo();case 3:case"end":return e.stop()}},e,t)}))()},methods:{getRoleInfo:function(e,t){var a=this,n=0<arguments.length&&void 0!==e?e:1,i=1<arguments.length&&void 0!==t?t:1e3;o.listRole({pageNum:n,pageOffset:i,app_type_all:1}).then(function(e){log(e.data),log(e.data[1].app_type),a.roleInfo.roleList=e.data,a.choose=[a.detailDate.role]})},getList:function(e,t,a){var n=0<arguments.length&&void 0!==e?e:this.page&&this.page.num||1,i=this,l=1<arguments.length&&void 0!==t?t:this.page&&this.page.offset||10,r=s({pageNum:n,pageOffset:l},a,{role:this.roleInfo.roleValue});o.listManager(r).then(function(e){i.page=e.page,i.pageList=e.data})},showDetaile:function(t){if(this.detailDate.id="",this.detailDate.name="",this.detailDate.nick_name="",this.detailDate.phone="",this.detailDate.email="",this.detailDate.reset="",this.detailDate.roles=[],t){var e=this.pageList.find(function(e){return e.id===t});this.detailDate.id=t,this.detailDate.name=e.name,this.detailDate.nick_name=e.nick_name,this.detailDate.phone=e.phone,this.detailDate.email=e.email,this.detailDate.roles=Object.keys(e.roles)[0],this.detailVisible=!0}else this.detailVisible=!0},deleteHandeler:function(e){var t=this,a=0<arguments.length&&void 0!==e?e:[];if(a.length||Array.from(document.querySelectorAll("[name='checkbox']:checked")).forEach(function(e){a.push(e.value)}),!a.length)return this.$message.error("请确认你要删除的内容！");this.$confirm("确认删除？").then(function(e){o.deleteManager({id:a}).then(function(e){t.getList(),t.$message.success("删除成功")})}).catch(function(e){})},save:function(){var i=this;return u(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:log(i.detailDate),i.$refs.detailDialog.validate(function(){var t=u(l.default.mark(function e(t){var a,n;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=22;break}if(e.prev=1,i.detailDate.id){e.next=6;break}return e.next=5,o.addManager(s({},i.detailDate)).then(function(e){i.getList(),i.$message.success("添加成功"),i.detailVisible=!1});case 5:return e.abrupt("return");case 6:return e.next=8,o.modifyManager(s({},i.detailDate,{roles:[i.detailDate.role]})).then(function(e){i.getList(),i.$message.success("修改成功"),i.detailVisible=!1});case 8:e.next=20;break;case 10:e.prev=10,e.t0=e.catch(1),a=e.t0.payload,e.t1=l.default.keys(a.messages);case 14:if((e.t2=e.t1()).done){e.next=20;break}return n=e.t2.value,i.$message.error(a.messages[n]),e.abrupt("break",20);case 20:e.next=24;break;case 22:return e.abrupt("return",!1);case 24:case"end":return e.stop()}},e,i,[[1,10]])}));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return e.stop()}},e,i)}))()},resetPassword:function(){var t=this;this.$confirm("是否确认重置密码?").then(function(e){t.detailDate.reset_pass="1"}).catch(function(e){})},viewLog:function(e){this.$router.push({path:"/jurisdiction/journal",query:{id:e}})}},components:{Menu:n.default,Top:i.default}}},953:function(e,t,a){}}]);