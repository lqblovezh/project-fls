/*!
 * {
 *   "buildtime": "2019-07-19 15:01:49",
 *   "workspace": "F:\\project\\x-book4\\js",
 *   "username": "Administrator",
 *   "hostname": "PC201608171616",
 *   "platform": "win32",
 *   "git": {
 *     "branch": "master",
 *     "hash": "b17f442a6",
 *     "message": [
 *       "commit b17f442a62eb78bc9ab78ffe68e3afb76c3e3548",
 *       "Author: YangZai <552396385@qq.com>",
 *       "Date:   Fri Jul 19 14:48:13 2019 +0800",
 *       "    xxxxxx"
 *     ],
 *     "user": "YangZai",
 *     "email": "552396385@qq.com",
 *     "remote": [
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (fetch)",
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (push)"
 *     ]
 *   }
 * }
 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{1293:function(t,e,i){"use strict";i.r(e);var a=i(1409),n=i(884);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);i(1295);var s=i(0),o=Object(s.a)(n.default,a.a,a.b,!1,null,"50819be7",null);e.default=o.exports},1294:function(t){t.exports=JSON.parse('{"status":true,"msg":"","data":[{"id":"17","name":"历史文献学","parent_id":"9"},{"id":"52","name":"世界古代通史","parent_id":"51"},{"id":"50","name":"世界史学理论与史学史","parent_id":"15"},{"id":"63","name":"世界近现代通史","parent_id":"62"},{"id":"19","name":"先秦史","parent_id":"18"},{"id":"16","name":"史学理论及中国史学史","parent_id":"10"},{"id":"15","name":"世界史学理论与史学史","parent_id":"5"},{"id":"48","name":"鸦片战争至辛亥革命史","parent_id":"30"},{"id":"47","name":"中国现代史","parent_id":"35"},{"id":"81","name":"一带一路研究","parent_id":"80"},{"id":"38","name":"思想史","parent_id":"37"},{"id":"96","name":"古代史-下册","parent_id":"91"},{"id":"51","name":"世界古代中古史","parent_id":"5"},{"id":"39","name":"文化史","parent_id":"37"},{"id":"49","name":"中华民国史","parent_id":"30"},{"id":"20","name":"秦汉史","parent_id":"18"},{"id":"64","name":"日本史","parent_id":"62"},{"id":"82","name":"全球史","parent_id":"80"},{"id":"53","name":"欧洲古代史","parent_id":"51"},{"id":"65","name":"南亚史","parent_id":"62"},{"id":"33","name":"中国共产党史","parent_id":"30"},{"id":"40","name":"科技史","parent_id":"37"},{"id":"92","name":"历史","parent_id":"6"},{"id":"62","name":"世界近现代史","parent_id":"5"},{"id":"22","name":"魏晋南北朝史","parent_id":"18"},{"id":"54","name":"中东近东北非的古代史","parent_id":"51"},{"id":"83","name":"环境史","parent_id":"80"},{"id":"84","name":"思想史","parent_id":"80"},{"id":"80","name":"专门史","parent_id":"5"},{"id":"66","name":"中亚史","parent_id":"62"},{"id":"55","name":"亚洲古代史","parent_id":"51"},{"id":"3","name":"年度报告","parent_id":"0"},{"id":"41","name":"社会史","parent_id":"37"},{"id":"7","name":"政法","parent_id":"6"},{"id":"21","name":"隋唐五代十国史","parent_id":"18"},{"id":"34","name":"中国近代通史","parent_id":"30"},{"id":"8","name":"历史地理学","parent_id":"4"},{"id":"23","name":"宋史","parent_id":"18"},{"id":"67","name":"西亚史","parent_id":"62"},{"id":"9","name":"历史文献学","parent_id":"4"},{"id":"42","name":"城市史","parent_id":"37"},{"id":"85","name":"文化史","parent_id":"80"},{"id":"56","name":"美洲古代中古史","parent_id":"51"},{"id":"4","name":"中国史","parent_id":"3"},{"id":"97","name":"经济","parent_id":"6"},{"id":"5","name":"世界史","parent_id":"3"},{"id":"98","name":"哲学","parent_id":"6"},{"id":"68","name":"非洲史","parent_id":"62"},{"id":"43","name":"中外文化交流史","parent_id":"37"},{"id":"57","name":"非洲古代中古史","parent_id":"51"},{"id":"24","name":"辽金史","parent_id":"18"},{"id":"86","name":"科技史","parent_id":"80"},{"id":"69","name":"美国史","parent_id":"62"},{"id":"87","name":"社会史","parent_id":"80"},{"id":"99","name":"语言","parent_id":"6"},{"id":"6","name":"\\r\\n数字图书","parent_id":"0"},{"id":"25","name":"元史","parent_id":"18"},{"id":"44","name":"人物研究","parent_id":"37"},{"id":"58","name":"世界中古史通史","parent_id":"51"},{"id":"26","name":"明史","parent_id":"18"},{"id":"88","name":"城市史","parent_id":"80"},{"id":"70","name":"拉丁美洲史","parent_id":"62"},{"id":"45","name":"方志学","parent_id":"37"},{"id":"59","name":"欧洲中古史","parent_id":"51"},{"id":"100","name":"十三辑","parent_id":"6"},{"id":"101","name":"十四辑","parent_id":"6"},{"id":"10","name":"史学理论及中国史学史","parent_id":"4"},{"id":"46","name":"谱牒学","parent_id":"37"},{"id":"89","name":"历史地理学","parent_id":"80"},{"id":"102","name":"国图","parent_id":"6"},{"id":"27","name":"清史","parent_id":"18"},{"id":"18","name":"中国古代史","parent_id":"4"},{"id":"60","name":"中东近东及北非的中古史","parent_id":"51"},{"id":"71","name":"俄国史","parent_id":"62"},{"id":"30","name":"中国近代史","parent_id":"4"},{"id":"72","name":"英国史","parent_id":"62"},{"id":"90","name":"人物研究","parent_id":"80"},{"id":"35","name":"中国现代史","parent_id":"4"},{"id":"28","name":"中国古文字","parent_id":"18"},{"id":"61","name":"亚洲中古史","parent_id":"51"},{"id":"29","name":"中国古代契约文书","parent_id":"18"},{"id":"37","name":"专门史","parent_id":"4"},{"id":"73","name":"法国史","parent_id":"62"},{"id":"74","name":"德国史","parent_id":"62"},{"id":"12","name":"历史地理学","parent_id":"8"},{"id":"75","name":"意大利史","parent_id":"62"},{"id":"76","name":"西班牙史","parent_id":"62"},{"id":"77","name":"东欧国家史","parent_id":"62"},{"id":"78","name":"北欧国家史","parent_id":"62"},{"id":"79","name":"近现代国际关系史","parent_id":"62"}]}')},1295:function(t,e,i){"use strict";var a=i(886);i.n(a).a},1296:function(t,e,i){"use strict";var a=i(887);i.n(a).a},1357:function(t,e,i){"use strict";function a(){var i=this,t=i.$createElement,a=i._self._c||t;return a("div",{staticClass:"index clearfix"},[i.previewArticleDialog?a("PreviewArticle",{attrs:{item:i.detailData},on:{cancle:function(t){i.previewArticleDialog=!1}}}):i._e(),a("Top",{attrs:{currentPlant:"X-PUBLISH"}}),a("Menu",{attrs:{curr:"/digitalProductLibrary/pushArticle"}}),a("div",{staticClass:"mainRight"},[a("div",{staticClass:"contentWrap"},[a("div",{staticClass:"contentLeft"},[a("div",{staticClass:"maindata"},[a("div",{staticClass:"serachWrap"},[a("div",{staticClass:"title"}),a("form",{staticClass:"clearfix",attrs:{id:"mainForm"}},[a("span",{staticClass:"group-inline"},[a("el-input",{attrs:{placeholder:"文章名",name:"name",clearable:""},model:{value:i.searchQuery.name,callback:function(t){i.$set(i.searchQuery,"name",t)},expression:"searchQuery.name"}})],1),a("span",{staticClass:"group-inline"},[a("el-input",{attrs:{placeholder:"作者",name:"author",clearable:""},model:{value:i.searchQuery.author,callback:function(t){i.$set(i.searchQuery,"author",t)},expression:"searchQuery.author"}})],1),a("span",{staticClass:"group-inline"},[a("el-input",{attrs:{placeholder:"标签",name:"tag",clearable:""},model:{value:i.searchQuery.tag,callback:function(t){i.$set(i.searchQuery,"tag",t)},expression:"searchQuery.tag"}})],1),a("span",{staticClass:"group-inline"},[a("TimePick",{attrs:{inputsName:["start_time","end_time"]}})],1),a("span",{staticClass:"group-inline"},[a("select",{staticClass:"form-control",staticStyle:{width:"110px"},attrs:{name:"status"}},[a("option",{attrs:{value:""}},[i._v("审核状态")]),i._l(i.status,function(t,e){return a("option",{domProps:{value:e}},[i._v(i._s(t))])})],2)]),a("span",{staticClass:"group-inline"},[a("el-button",{attrs:{size:"mediu",type:"primary",icon:"el-icon-search",plain:""},on:{click:i.query}},[i._v("搜索")]),a("el-button",{attrs:{size:"mediu",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return i.goEditor()}}},[i._v("新建")])],1)])]),a("div",{staticClass:"tableWrap"},[a("div",{staticClass:"tableTop"},[a("div",{staticClass:"title vel-line"},[a("span",[i._v("全部 "),i.page?a("span",{staticClass:"totalNum"},[i._v("("+i._s(i.page.total)+")")]):i._e()]),a("div",{staticClass:"btns"},[a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(t){return i.audits()}}},[i._v("审核")]),a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:i.urgentCheck}},[i._v("加急审核")]),a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:i.moveToOther}},[i._v("移动分组")]),a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(t){return i.delChoosen(!1)}}},[i._v("删除")])],1)])]),a("table",{staticClass:"table"},[a("thead",[a("tr",[a("th",{staticClass:"allBtn"},[a("input",{attrs:{type:"checkbox"},on:{click:function(t){return i.checkAll(t)}}})]),a("th",[i._v("文章名")]),a("th",[i._v("作者")]),a("th",[i._v("标签")]),a("th",{staticClass:"time"},[i._v("创建时间")]),a("th",{attrs:{width:"70"}},[i._v("审核状态")]),a("th",{attrs:{width:"70"}},[i._v("发布状态")]),a("th",[i._v("发布时间")]),a("th",{staticClass:"operate"},[i._v("操作")])])]),i.list?a("tbody",i._l(i.list,function(e){return a("tr",[a("th",[a("input",{ref:"ids",refInFor:!0,attrs:{type:"checkbox",name:"ids"},domProps:{value:e.id}})]),a("th",[a("img",{staticClass:"cover-photo",attrs:{src:e.img_src}}),a("div",{staticClass:"th-name bookName",attrs:{title:e.name}},[i._v(i._s(e.name))])]),a("th",[a("div",{staticClass:"th-name",attrs:{title:e.author}},[i._v(i._s(e.author))])]),a("th",[a("div",{staticClass:"th-name",attrs:{title:e.tag}},[i._v(i._s(e.tag))])]),a("th",[a("div",{staticClass:"th-name"},[i._v(i._s(e.create_time))])]),a("th",[a("div",{staticClass:"th-name",class:i.getColor(e.status)},[i._v(" "+i._s("审核未通过"==e.status?"未通过":e.status))])]),a("th",[a("div",{staticClass:"th-name"},[i._v(i._s(e.release_status_name))])]),a("th",[a("div",{staticClass:"th-name"},[i._v(i._s(e.release_time||"-"))])]),a("th",[a("div",{staticClass:"btns"},[a("Icon",{attrs:{size:"mini",title:"详情",type:"icon-detail",plain:""},on:{click:function(t){return i.goEditor(e.id)}}}),a("Icon",{attrs:{size:"mini",title:"扩展属性",type:"icon-data",plain:""},on:{click:function(t){return i.opneDetailDialog("data",e)}}}),1!=e.audits_status?a("Icon",{attrs:{size:"mini",title:"审核",type:"icon-menu-publish",plain:""},on:{click:function(t){return i.audits(e.id)}}}):i._e(),"3"==e.audits_status?a("Icon",{attrs:{size:"mini",title:"分发",type:"icon-fenfa",plain:""},on:{click:function(t){return i.opnePublishDialog(e)}}}):i._e(),1!=e.audits_status?a("Icon",{attrs:{size:"mini",title:"删除",type:"icon-delete",plain:""},on:{click:function(t){return i.delChoosen(e.id)}}}):i._e()],1)])])}),0):i._e()]),i.page?a("div",{staticClass:"pageWrap"},[a("el-pagination",{attrs:{small:!1,background:"","current-page":i.page.num,"page-sizes":[10,50,100],"page-size":i.page.offset,layout:"total,sizes ,prev, pager, next, jumper",total:i.page.total},on:{"size-change":i.handleSizeChange,"current-change":i.handleCurrentChange}})],1):i._e()]),a("div",{staticClass:"gruopList"},[a("GroupList",{attrs:{groupList:i.groupList,currGroup:i.currGroup},on:{addGroup:i.addGroup,updateGroup:i.updateGroup,delGroup:i.delGroup,groupChange:i.groupChange}})],1)])])])]),a("div",{staticClass:"dialogs"},[a("Examine",{attrs:{examineDialog:i.examineDialog},on:{"update:examineDialog":function(t){i.examineDialog=t},"update:examine-dialog":function(t){i.examineDialog=t},saveExamine:i.saveExamine}}),a("el-dialog",{attrs:{center:!1,visible:i.detailDialog,"close-on-click-modal":!1,"lock-scroll":!0,top:"50px",width:"1000px"},on:{"update:visible":function(t){i.detailDialog=t}}},[a("div",{staticClass:"content",attrs:{slot:"title"},slot:"title"},[a("el-tabs",{attrs:{value:"detail"}},[a("el-tab-pane",{attrs:{label:"扩展属性",name:"detail"}})],1),i.detailDialog?a("Detail",{attrs:{type:i.detailDialoaType,currGroup:i.currGroup,detailId:i.detailData.id||{}},on:{detailBack:i.detailBack}}):i._e()],1)]),i.publishDialog?a("Dispense",{attrs:{publishDialog:i.publishDialog,item:i.detailData},on:{"update:publishDialog":function(t){i.publishDialog=t},"update:publish-dialog":function(t){i.publishDialog=t},dispenseOk:i.dispenseOk}}):i._e(),a("el-dialog",{attrs:{center:!1,visible:i.imgLinkDialog,"close-on-click-modal":!1,width:"800px"},on:{"update:visible":function(t){i.imgLinkDialog=t}}},[i.detailData?a("div",{staticClass:"content",attrs:{slot:"title"},slot:"title"},[a("div",{staticClass:"imgWrap"},[a("img",{attrs:{src:i.detailData.id,alt:"alt"}})]),a("div",{staticClass:"btns"},[a("el-button",[i._v("下载图片")]),a("el-button",{on:{click:function(t){return i.copyLink("copy"+i.detailData.id)}}},[i._v("复制链接")]),a("input",{staticClass:"zhide",attrs:{id:"copy"+i.detailData.id},domProps:{value:i.detailData.id}})],1)]):i._e(),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){i.imgLinkDialog=!1}}},[i._v("返回")])],1)]),a("el-dialog",{attrs:{center:!1,visible:i.moveToOtherDiaolog,"close-on-click-modal":!1,title:"移动分组",width:"500px"},on:{"update:visible":function(t){i.moveToOtherDiaolog=t}}},[a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[i._v("移动到")]),a("select",{ref:"moveToId",staticClass:"form-control",attrs:{placeholder:"请选择"}},i._l(i.groupList,function(t,e){return t.id!=i.currGroup&&""!=t.id?a("option",{domProps:{value:t.id,textContent:i._s(t.name)}}):i._e()}),0)]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info"},on:{click:function(t){i.moveToOtherDiaolog=!1}}},[i._v("返回")]),a("el-button",{attrs:{type:"primary"},on:{click:i.moveToSubmit}},[i._v(" 确定")])],1)])],1)],1)}var n=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},1409:function(t,e,i){"use strict";function a(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"div"},[i("el-tabs",{attrs:{value:e.type}},[i("MetaData",{attrs:{metadata:e.detailData.attributes},on:{submit:e.submitMetadata,back:function(t){return e.$emit("detailBack")}}})],1)],1)}var n=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},351:function(t,e,i){"use strict";i.r(e);var a=i(1357),n=i(882);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);i(1296);var s=i(0),o=Object(s.a)(n.default,a.a,a.b,!1,null,"76f4ab4d",null);e.default=o.exports},375:function(t,e,i){"use strict";i.r(e);var a=i(376),n=i.n(a);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);e.default=n.a},376:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["groupList","currGroup"],data:function(){return{newGroupDialogOpen:!1,updateGroupDialogOpen:!1,currEditGroup:null}},created:function(){},computed:{},methods:{groupChange:function(t){this.$emit("groupChange",t)},addGroupDialog:function(){},delGroup:function(e){var i=this;this.$confirm("是否删除分组:"+e.name).then(function(t){dir(t),i.$emit("delGroup",e.id)}).catch(function(t){dir(t)})},updateGroupDialog:function(t){this.updateGroupDialogOpen=!0,this.currEditGroup=t},addGroup:function(){if(this.$refs.addGroupForm.valiAll()){var t=document.querySelector("#addGroupForm");this.$emit("addGroup",t),this.newGroupDialogOpen=!1}},updateGroup:function(){if(this.$refs.updateGroupForm.valiAll()){var t=document.querySelector("#updateGroupForm");this.$emit("updateGroup",t),this.updateGroupDialogOpen=!1}}}}},377:function(t,e,i){},378:function(t,e,i){"use strict";i.r(e);var a=i(379),n=i.n(a);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);e.default=n.a},379:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(126),n=i(127);e.default={mixins:[a.getIconStyle],props:{publishDialog:{type:Boolean,default:!1},item:{type:Object,default:{}},is_release:Boolean},data:function(){return{list:null,coverDialog:!1,choiceDialog:!1,currentItem:null,currentVersion:null}},created:function(){this.getList()},methods:{getList:function(){var a=this;(0,n.getDispense)({entity_type:this.item.type_number||this.item.type,id:this.item.id}).then(function(t){a.list=t.data}).catch(function(t){var e=t.payload;for(var i in e.messages){a.$message.error(e.messages[i]);break}})},colse:function(){this.$emit("update:publishDialog",!1)},save:function(){var e=[];this.$refs.dispense.querySelectorAll("input[type=checkbox]:checked").forEach(function(t){e.push(t.value)}),e.length?this.$emit("dispenseSave",e):this.$message.error("请选择你要发布的平台")},pushTime:function(t){return t?"最近"+t+"发布过":"最近暂无分发"},push:function(e){var i=this;this.currentItem=e,this.is_release&&e.release_msg.length?this.$confirm("信息不全是否分发?").then(function(t){e.version?i.coverDialog=!0:i.dispense()},function(t){var e=t.payload;log(e.message)}).catch(function(t){log("cancel")}):e.version&&e.version.length?this.coverDialog=!0:this.dispense()},dispense:function(t,e){var a=this;(0,n.dispense)({platform_id:this.currentItem.id,audits_id:this.item.audits_id,is_cover:t,version_id:e}).then(function(t){a.$message.success("分发提交成功,请稍后查看结果!"),a.$emit("dispenseOk")}).catch(function(t){var e=t.payload;for(var i in e.messages){a.$message.error(e.messages[i]);break}})},getdefect:function(t){return"缺失字段: "+t.release_msg.join("/")},getBtnName:function(t){return this.is_release&&!t.is_release?"缺少关键信息不能分发":t.release_msg&&t.release_msg.length?"确认分发":"分发"},coverDispense:function(){var e=this;if(!this.currentVersion)return this.$message.warning("请选择你要覆盖的版本号!");var t=this.currentItem.version.find(function(t){return t.xread_book_id===e.currentVersion}).version_id;this.dispense(this.currentVersion,t)}}}},380:function(t,e,i){},384:function(t,e,i){"use strict";i.r(e);var a=i(386),n=i(375);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);i(385);var s=i(0),o=Object(s.a)(n.default,a.a,a.b,!1,null,"82bd0f98",null);e.default=o.exports},385:function(t,e,i){"use strict";var a=i(377);i.n(a).a},386:function(t,e,i){"use strict";function a(){var i=this,t=i.$createElement,a=i._self._c||t;return a("div",{staticClass:"div"},[a("div",{staticClass:"groupWrap"},[a("div",{staticClass:"list"},[a("ul",i._l(i.groupList,function(e){return a("li",{staticClass:"licontent",class:{red:e.id==i.currGroup}},[a("div",{staticClass:"name ellipsis",attrs:{title:e.name+"("+e.num+")"},on:{click:function(t){return i.groupChange(e.id)}}},[a("span",{staticClass:"title"},[i._v(i._s(e.name))]),a("span",[i._v(i._s("("+e.num+")"))])]),""!=e.id&&"non"!=e.id?a("div",{staticClass:"btns"},[a("span",{on:{click:function(t){return i.updateGroupDialog(e)}}},[a("i",{staticClass:"el-icon-edit"})]),a("span",{on:{click:function(t){return i.delGroup(e)}}},[a("i",{staticClass:"el-icon-delete"})])]):i._e()])}),0)]),a("div",{staticClass:"addGroupBtnWrap"},[a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){i.newGroupDialogOpen=!0}}},[a("i",{staticClass:"el-icon-plus"},[i._v("新建分组")])])],1)]),a("div",{staticClass:"dialogs"},[i.newGroupDialogOpen?a("el-dialog",{attrs:{title:"新增",visible:i.newGroupDialogOpen,width:"500px"},on:{"update:visible":function(t){i.newGroupDialogOpen=t}}},[a("div",{staticClass:"formWrap"},[a("VaForm",{ref:"addGroupForm"},[a("form",{attrs:{id:"addGroupForm"}},[a("div",{staticClass:"group"},[a("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"}],staticClass:"form-control",attrs:{name:"name"}})])])])],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info"},on:{click:function(t){i.newGroupDialogOpen=!1}}},[i._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:i.addGroup}},[i._v("确定")])],1)]):i._e(),i.updateGroupDialogOpen?a("el-dialog",{attrs:{title:"修改",visible:i.updateGroupDialogOpen,width:"500px"},on:{"update:visible":function(t){i.updateGroupDialogOpen=t}}},[a("div",{staticClass:"formWrap"},[a("VaForm",{ref:"updateGroupForm"},[i.currEditGroup?a("form",{attrs:{id:"updateGroupForm"}},[a("div",{staticClass:"group"},[a("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"}],staticClass:"form-control",attrs:{name:"name"},domProps:{value:i.currEditGroup.name}}),a("input",{staticClass:"hide",attrs:{name:"id"},domProps:{value:i.currEditGroup.id}})])]):i._e()])],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info"},on:{click:function(t){i.updateGroupDialogOpen=!1}}},[i._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:i.updateGroup}},[i._v("确定")])],1)]):i._e()],1)])}var n=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},396:function(t,e,i){"use strict";i.r(e);var a=i(404),n=i(378);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);i(403);var s=i(0),o=Object(s.a)(n.default,a.a,a.b,!1,null,"cb351288",null);e.default=o.exports},403:function(t,e,i){"use strict";var a=i(380);i.n(a).a},404:function(t,e,i){"use strict";function a(){var i=this,t=i.$createElement,a=i._self._c||t;return a("div",[a("el-dialog",{attrs:{center:!1,visible:i.coverDialog,top:"50px",width:"500px","show-close":!1,title:"x-read系统中已有该产品，选择你的操作"}},[a("div",{staticClass:"coverContent"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){i.choiceDialog=!0}}},[i._v("覆盖原有产品")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return i.dispense()}}},[i._v("创建新的产品版本")])],1),a("div",{staticClass:"footer dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info"},on:{click:function(t){i.coverDialog=!1}}},[i._v("取消")])],1)]),i.choiceDialog?a("el-dialog",{attrs:{center:!1,visible:i.choiceDialog,top:"50px",width:"500px","show-close":!1,title:"选择版本号"}},[a("div",{staticClass:"coverContent"},[a("el-radio-group",{model:{value:i.currentVersion,callback:function(t){i.currentVersion=t},expression:"currentVersion"}},i._l(i.currentItem.version,function(t){return a("el-radio",{key:t.xread_book_id,attrs:{label:t.xread_book_id}},[i._v(i._s(t.version_id))])}),1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:i.coverDispense}},[i._v("确定")]),a("el-button",{attrs:{type:"info"},on:{click:function(t){i.choiceDialog=!1}}},[i._v("取消")])],1)]):i._e(),a("el-dialog",{attrs:{center:!1,visible:i.publishDialog,top:"50px",width:"1000px","show-close":!1}},[a("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[a("div",{staticClass:"el-icon-close",on:{click:i.colse}}),a("el-tabs",{attrs:{value:"ff"}},[a("el-tab-pane",{attrs:{label:"分发",name:"ff"}})],1)],1),a("ul",{ref:"dispense",staticClass:"content modular"},i._l(i.list,function(e){return a("li",[a("div",{staticClass:"icon"},[a("div",{class:i.getStyle(e.type)}),a("span",{domProps:{textContent:i._s(e.name)}})]),a("ul",{staticClass:"defect"},[e.release_msg&&!e.release_msg.length?a("li",{staticClass:"pass"},[i._v("可正常分发")]):i._e(),e.release_msg&&e.release_msg.length?a("li",{domProps:{textContent:i._s(i.getdefect(e))}}):i._e()]),a("el-button",{attrs:{type:!i.is_release||e.is_release?"primary":"info",size:"mini",plain:""},domProps:{textContent:i._s(i.getBtnName(e))},on:{click:function(t){i.is_release&&!e.is_release||i.push(e)}}})],1)}),0),a("div",{staticClass:"footer dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info"},on:{click:i.colse}},[i._v("取消")])],1)])],1)}var n=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},421:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={0:"未审核",1:"待审核",2:"未通过",3:"已通过"}},482:function(t,e,i){"use strict";i.r(e);var a=i(483),n=i.n(a);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);e.default=n.a},483:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});(function(t){{if(t&&t.__esModule)return;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);e.default=t}})(i(129)),i(163);var a,n=i(583),r=(a=n)&&a.__esModule?a:{default:a};e.default={components:{MaskShow:r.default},props:["item"],created:function(){var t=this.item;log(t.preview);var e=t.preview,i=t.name,a=t.author,n=t.create_time;this.html={preview:e,title:i,author:a,time:n}},mounted:function(){},data:function(){return{showImgUrl:null,html:{}}},methods:{test:function(){}}}},484:function(t,e,i){"use strict";i.r(e);var a=i(485),n=i.n(a);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);e.default=n.a},485:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={created:function(){document.querySelector("html").classList.add("noscorll")},data:function(){return{inputs:[]}},methods:{},destroyed:function(){document.querySelector("html").classList.remove("noscorll")}}},486:function(t,e,i){},487:function(t,e,i){},583:function(t,e,i){"use strict";i.r(e);var a=i(668),n=i(484);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);i(617);var s=i(0),o=Object(s.a)(n.default,a.a,a.b,!1,null,"ce4fdede",null);e.default=o.exports},616:function(t,e,i){"use strict";i.r(e);var a=i(662),n=i(482);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);i(618);var s=i(0),o=Object(s.a)(n.default,a.a,a.b,!1,null,null,null);e.default=o.exports},617:function(t,e,i){"use strict";var a=i(486);i.n(a).a},618:function(t,e,i){"use strict";var a=i(487);i.n(a).a},662:function(t,e,i){"use strict";function a(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"div"},[i("MaskShow",[i("div",{staticClass:"phoneWrap"},[i("div",{staticClass:"phone"},[i("div",{staticClass:"close",attrs:{type:"info"},on:{click:function(t){return e.$emit("cancle")}}}),i("div",{staticClass:"content"},[i("div",{staticClass:"phoneTop"},[e._v("公众号")]),i("div",{staticClass:"main"},[i("div",{staticClass:"title"},[e._v(e._s(e.html.title))]),i("div",{staticClass:"msg"},[i("span",{staticClass:"time"},[e._v(e._s(e.html.time))]),i("span",{staticClass:"author"},[e._v(e._s(e.html.author))])]),i("div",{staticClass:"rich",domProps:{innerHTML:e._s(e.html.preview)}})])])])])])],1)}var n=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},668:function(t,e,i){"use strict";function a(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"mask"},[this._t("default")],2)}var n=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},698:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.listArticles=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)(restUrl_publish+"/api/push_articles",t)},e.detailArticle=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,i=l(t,["id"]),a=s.default.compile(restUrl_publish+"/api/push_articles/:id");return(0,n.request_get)(a({id:e}),i)},e.del=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)(restUrl_publish+"/api/push_articles/delete",t)},e.modifyArticle=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,i=l(t,["id"]),a=s.default.compile(restUrl_publish+"/api/push_articles/:id");return(0,n.request_put)(a({id:e}),i)},e.addArticle=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)(restUrl_publish+"/api/push_articles",t)},e.urgent=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)(restUrl_publish+"/api/push_articles/urgent",t)},e.audits=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_put)(restUrl_publish+"/api/push_articles/distribute",e).then(function(t){return(0,o.suance)({id:e.id,info:t.data}),t})},e.listGroup=function(){return(0,n.request_get)(restUrl_publish+"/api/push_articles/groups/list")},e.addGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)(restUrl_publish+"/api/push_articles/groups",t)},e.modifyGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,i=l(t,["id"]),a=s.default.compile(restUrl_publish+"/api/push_articles/groups/:id");return(0,n.request_put)(a({id:e}),i)},e.deleteGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)(restUrl_publish+"/api/push_articles/groups/delete",t)},e.moveGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)(restUrl_publish+"/api/push_articles/groups/move",t)},e.getMetadata=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,i=l(t,["id"]),a=s.default.compile(restUrl_publish+"/api/push_articles/metadata/:id");return(0,n.request_get)(a({id:e}),i)};var a,n=i(7),r=i(9),s=(a=r)&&a.__esModule?a:{default:a},o=i(85);function l(t,e){var i={};for(var a in t)0<=e.indexOf(a)||Object.prototype.hasOwnProperty.call(t,a)&&(i[a]=t[a]);return i}},882:function(t,e,i){"use strict";i.r(e);var a=i(883),n=i.n(a);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);e.default=n.a},883:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=h(i(5)),o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},n=h(i(84)),r=h(i(396)),s=(i(163),h(i(158))),l=h(i(157)),u=h(i(384)),d=h(i(421)),c=h(i(583)),p=h(i(616)),f=h(i(1293)),m=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(i(698)),v=i(126);function h(t){return t&&t.__esModule?t:{default:t}}e.default={mixins:[v.main],components:{Menu:s.default,Top:l.default,GroupList:u.default,Detail:f.default,Dispense:r.default,MaskShow:c.default,PreviewArticle:p.default},data:function(){return{list:null,page:null,groupList:null,detailDialog:!1,detailDialoaType:"info",detailData:null,timePick:null,imgLinkDialog:!1,publishDialog:!1,moveToOtherDiaolog:!1,moveIds:null,previewArticleDialog:!1,toId:null,status:d.default,services:m}},methods:{getList:function(t,e,i){var a=0<arguments.length&&void 0!==t?t:this.page&&this.page.num||1,n=this,r=1<arguments.length&&void 0!==e?e:this.page&&this.page.offset||10,s=2<arguments.length&&void 0!==i?i:null;m.listArticles(o({pageNum:a,pageOffset:r,group_id:this.currGroup},s)).then(function(t){n.list=t.data,n.page=t.page})},preArt:function(t){this.detailData=t,this.previewArticleDialog=!0},opneDetailDialogAdd:function(t){this.detailDialog=!0,this.detailDialoaType=t,this.detailData=null,this.metadata=null},detailBack:function(){log("返回"),this.detailDialog=!1,this.getList()},opneImgLinkDialog:function(t){this.imgLinkDialog=!0,this.detailData=t},urgentCheck:function(){for(var e=this,t=this.getChecked(),i=0,a=t.length;i<a;i++)for(var n=0,r=this.list.length;n<r;n++)if(this.list[n].id==t[i]&&1!=this.list[n].audits_status)return void this.$message.error("只能勾选待审核数据");t&&this.services.urgent({id:t}).then(function(t){return e.$message.success("加急审核已提交")})},goEditor:function(e){var i=this;return function(t){return function(){var o=t.apply(this,arguments);return new Promise(function(r,s){return function e(t,i){try{var a=o[t](i),n=a.value}catch(t){return void s(t)}if(!a.done)return Promise.resolve(n).then(function(t){e("next",t)},function(t){e("throw",t)});r(n)}("next")})}}(a.default.mark(function t(){return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i.$router.push({path:"/contentLibrary/article/editor",query:{articleId:e,from:"push",index:i.$route.path}});case 1:case"end":return t.stop()}},t,i)}))()},opnePublishDialog:function(t){this.detailData=t,this.publishDialog=!0},exportSomething:function(t){log("导出操作!")},delChoosens:function(t){var a=this,i=[];if(t)i.push(t);else{var e=Array.from(document.querySelectorAll('input[name="ids"]:checked'));if(e.forEach(function(t){i.push(t.value)}),!e.length)return void this.$message.error("请先选中!")}0<i.length&&this.$confirm("是否删除?").then(function(t){var e=(0,n.default)(document.querySelector("#mainForm"),{hash:!0});a.services.del({id:i}).then(function(t){a.getList(a.page.num,a.page.offset,e),a.getGroupList()}).catch(function(t){var e=t.payload;for(var i in e.messages){a.$message.error(e.messages[i]);break}})}).catch(function(t){})},clear:function(){document.getElementById("text").value=""},clear2:function(){document.getElementById("text2").value=""},clear3:function(){document.getElementById("text3").value=""}}}},884:function(t,e,i){"use strict";i.r(e);var a=i(885),n=i.n(a);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);e.default=n.a},885:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,n=i(1294),r=((a=n)&&a.__esModule,function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(i(698)));e.default={props:["type","detailId","detailDialog"],created:function(){this.getDetail()},mounted:function(){},data:function(){return{metadata:[],detailData:{id:this.detailId,attributes:[]}}},methods:{getDetail:function(){var e=this;this.detailId&&r.getMetadata({id:this.detailId}).then(function(t){e.detailData.attributes=t.data,log(t,111111111111)}).catch(function(t){log("获取出错")})},addMetadata:function(){this.detailData.attributes.push({key:"",value:""})},delMetadata:function(t){this.detailData.attributes.splice(t,1)},submitMetadata:function(){var e=this,t=this.detailData,i=t.id,a=t.attributes;log(a),r.modifyArticle({id:i,attributes:a}).then(function(t){e.$message.success("修改扩展属性成功!"),e.$emit("detailBack",!1)})}}}},886:function(t,e,i){},887:function(t,e,i){}}]);