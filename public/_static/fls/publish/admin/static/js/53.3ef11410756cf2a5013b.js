/*!
 * {
 *   "buildtime": "2019-07-19 15:01:49",
 *   "workspace": "F:\\project\\x-book4\\js",
 *   "username": "Administrator",
 *   "hostname": "PC201608171616",
 *   "platform": "win32",
 *   "git": {
 *     "branch": "master",
 *     "hash": "b17f442a6",
 *     "message": [
 *       "commit b17f442a62eb78bc9ab78ffe68e3afb76c3e3548",
 *       "Author: YangZai <552396385@qq.com>",
 *       "Date:   Fri Jul 19 14:48:13 2019 +0800",
 *       "    xxxxxx"
 *     ],
 *     "user": "YangZai",
 *     "email": "552396385@qq.com",
 *     "remote": [
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (fetch)",
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (push)"
 *     ]
 *   }
 * }
 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{1236:function(t,e,i){"use strict";var a=i(845);i.n(a).a},1364:function(t,e,i){"use strict";function a(){var a=this,t=a.$createElement,n=a._self._c||t;return n("div",{staticClass:"indexs"},[n("Top",{attrs:{currentPlant:"X-PUBLISH"}}),n("Menu",{attrs:{curr:"/dataRelation"}}),n("div",{staticClass:"mainRight"},[n("div",{staticClass:"maindata"},[n("div",{staticClass:"serachWrap"},[n("div",{staticClass:"NavList"},[n("el-tabs",{on:{"tab-click":a.handleNavClick},model:{value:a.activeName,callback:function(t){a.activeName=t},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"繁简字管理",name:"fan"}}),n("el-tab-pane",{attrs:{label:"异体字管理",name:"yi"}}),n("el-tab-pane",{attrs:{label:"别称管理",name:"bie"}})],1)],1),n("form",{attrs:{id:"mainForm"}},[n("span",{staticClass:"group-inline"},[n("el-input",{attrs:{placeholder:"输入主称谓搜索",name:"name",clearable:""},model:{value:a.searchQuery.name,callback:function(t){a.$set(a.searchQuery,"name",t)},expression:"searchQuery.name"}})],1),n("span",{staticClass:"group-inline"},[n("el-input",{attrs:{placeholder:"输入标签搜索",name:"tags",clearable:""},model:{value:a.searchQuery.tags,callback:function(t){a.$set(a.searchQuery,"tags",t)},expression:"searchQuery.tags"}})],1),n("span",{staticClass:"group-inline"},[n("TimePick",{attrs:{inputsName:["start_time","end_time"]}})],1),n("span",{staticClass:"group-inline",attrs:{span:9}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-search",plain:""},on:{click:a.seareHandeler}},[a._v("搜索")]),n("el-button",{attrs:{type:"primary",icon:"el-icon-plus",plain:""},on:{click:function(t){return a.showDetaile()}}},[a._v("新增")]),n("el-button",{attrs:{type:"primary",icon:"el-icon-delete",plain:""},on:{click:function(t){return a.deleteHandeler()}}},[a._v("删除")])],1)])]),n("div",{staticClass:"tableWrap"},[n("table",{staticClass:"table"},[n("thead",[n("tr",[n("th",[a._v("全选"),n("input",{attrs:{type:"checkbox",name:"AllCheckbox"},on:{click:a.selcetAll}})]),n("th",[a._v("ID")]),n("th",[a._v("主称谓")]),n("th",[a._v("别称")]),n("th",[a._v("标签")]),n("th",[a._v("创建时间")]),n("th",[a._v("操作")])])]),a.pageList.length?n("tbody",a._l(a.pageList,function(e){return n("tr",[n("td",[n("input",{ref:"ids",refInFor:!0,attrs:{type:"checkbox",name:"checkbox"},domProps:{value:e.id}})]),n("td",{domProps:{textContent:a._s(e.id)}}),n("td",{attrs:{title:e.name},domProps:{textContent:a._s(e.name)}}),n("td",{attrs:{title:e.nicks},domProps:{textContent:a._s(e.nicks)}}),n("td",{attrs:{title:e.tags},domProps:{textContent:a._s(e.tags)}}),n("td",{domProps:{textContent:a._s(e.create_time)}}),n("td",[n("Icon",{attrs:{type:"icon-detail",title:"详情",plain:"",size:"mini"},on:{click:function(t){return a.showDetaile(e.id)}}}),n("Icon",{attrs:{type:"icon-delete",title:"删除",plain:"",size:"mini"},on:{click:function(t){return a.deleteHandeler([e.id])}}})],1)])}),0):a._e()])]),a.page?n("div",{staticClass:"pageWrap"},[n("el-pagination",{attrs:{small:!1,background:"","current-page":a.page.num,"page-sizes":[10,50,100],"page-size":a.page.offset,layout:"total, sizes, prev, pager, next, jumper",total:a.page.total},on:{"size-change":a.handleSizeChange,"current-change":a.handleCurrentChange}})],1):a._e()]),n("el-dialog",{attrs:{visible:a.detailVisible},on:{"update:visible":function(t){a.detailVisible=t}}},[n("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[n("el-tabs",{attrs:{value:"detail"}},[n("el-tab-pane",{attrs:{label:"详情",name:"detail"}})],1)],1),n("el-form",[n("el-form-item",{attrs:{label:"主称谓:","label-width":"120px"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:a.detailDate.name,expression:"detailDate.name"}],staticClass:"form-control",domProps:{value:a.detailDate.name},on:{input:function(t){t.target.composing||a.$set(a.detailDate,"name",t.target.value)}}})]),n("el-form-item",{attrs:{label:"标签:","label-width":"120px"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:a.detailDate.tags,expression:"detailDate.tags"}],staticClass:"form-control",domProps:{value:a.detailDate.tags},on:{input:function(t){t.target.composing||a.$set(a.detailDate,"tags",t.target.value)}}}),n("el-button",{staticClass:"addNew",attrs:{type:"primary",size:"mini",plain:""},on:{click:a.addNickname}},[a._v("新增")])],1),n("table",{staticClass:"table",attrs:{width:"100%"}},[n("thead",[n("tr",[n("th",[a._v("序号")]),n("th",[a._v("别称")]),n("th",[a._v("操作")])])]),a.detailDate.nick.length?n("tbody",a._l(a.detailDate.nick.filter(function(t){return"del"!=t.action}),function(e,i){return n("tr",[n("td",{attrs:{align:"center"},domProps:{textContent:a._s(i+1)}}),n("td",{attrs:{align:"center"}},[e.index?n("input",{directives:[{name:"model",rawName:"v-model",value:e.nick,expression:"item.nick"}],attrs:{type:"text"},domProps:{value:e.nick},on:{input:function(t){t.target.composing||a.$set(e,"nick",t.target.value)}}}):a._e(),e.index?a._e():n("span",{domProps:{textContent:a._s(e.nick)}})]),n("td",{attrs:{align:"center"}},[n("el-button",{attrs:{type:"danger",plain:"",size:"mini"},on:{click:function(t){return a.deleteTraditional(e.id,i)}}},[a._v("删除")])],1)])}),0):a._e()])],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"info"},on:{click:function(t){a.detailVisible=!1}}},[a._v("取消")]),n("el-button",{attrs:{type:"primary"},on:{click:a.save}},[a._v("确定")])],1)],1)],1)],1)}var n=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},343:function(t,e,i){"use strict";i.r(e);var a=i(1364),n=i(843);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);i(1236);var s=i(0),l=Object(s.a)(n.default,a.a,a.b,!1,null,"111d84b2",null);e.default=l.exports},626:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.modifyFont=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,i=u(t,["id"]),a=o.default.compile(restUrl_publish+"/api/simp/:id"),n={id:[]},r=[];for(var s in i.trad)"del"==i.trad[s].action?n.id.push(i.trad[s].id):r.push(i.trad[s].trad);return 0<n.id.length?c(n).then(function(t){if(t.status)return i.trad=r,(0,l.request_put)(a({id:e}),i)}):(i.trad=r,(0,l.request_put)(a({id:e}),i))},e._delFont=c,e.deleteFont=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,l.request_post)(restUrl_publish+"/api/simp/delete",t)},e.addFont=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,l.request_post)(restUrl_publish+"/api/simp",t)},e.listFont=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,l.request_get)(restUrl_publish+"/api/simp",t)},e.detailFont=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,i=u(t,["id"]),a=o.default.compile(restUrl_publish+"/api/simp/:id");return(0,l.request_get)(a({id:e}),i)},e.deleteNickName=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,l.request_post)(restUrl_publish+"/api/nickname/delete",t)},e.listNickName=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,l.request_get)(restUrl_publish+"/api/nickname",t)},e.detailNickName=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,i=u(t,["id"]),a=o.default.compile(restUrl_publish+"/api/nickname/:id");return(0,l.request_get)(a({id:e}),i)},e.addNickName=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,l.request_post)(restUrl_publish+"/api/nickname",t)},e._delNickName=d,e.modifyNickName=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,i=u(t,["id"]),a=o.default.compile(restUrl_publish+"/api/nickname/:id"),n={id:[]},r=[];for(var s in i.nick)"del"==i.nick[s].action?n.id.push(i.nick[s].id):r.push(i.nick[s].nick);return 0<n.id.length?d(n).then(function(t){if(t.status)return i.nick=r,(0,l.request_put)(a({id:e}),i)}):(i.nick=r,(0,l.request_put)(a({id:e}),i))},e.modifyVariant=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,i=u(t,["id"]);return(0,l.request_put)(r({id:e}),i)},e.deleteVariant=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,l.request_post)(restUrl_publish+"/api/variant/delete",t)},e.listVariant=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,l.request_get)(restUrl_publish+"/api/variant",t)},e.detailVariant=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,i=u(t,["id"]);return(0,l.request_get)(r({id:e}),i)},e.addVariant=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,l.request_post)(restUrl_publish+"/api/variant",t)},e.editVariant=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,i=u(t,["id"]);return(0,l.request_put)(r({id:e}),i)};var a,l=i(7),n=i(9),o=(a=n)&&a.__esModule?a:{default:a};function u(t,e){var i={};for(var a in t)0<=e.indexOf(a)||Object.prototype.hasOwnProperty.call(t,a)&&(i[a]=t[a]);return i}var r=o.default.compile(restUrl_publish+"/api/variant/:id");function c(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,l.request_post)(restUrl_publish+"/api/simp/id/delete",t)}function d(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,l.request_post)(restUrl_publish+"/api/nickname/id/delete",t)}},843:function(t,e,i){"use strict";i.r(e);var a=i(844),n=i.n(a);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);e.default=n.a},844:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=s(i(5)),o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},a=(s(i(84)),s(i(158))),n=s(i(157)),u=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(i(626)),r=i(126);function s(t){return t&&t.__esModule?t:{default:t}}e.default={mixins:[r.publicMixin],data:function(){return{pageList:[],page:null,query:null,path:"dataRelation",activeName:"bie",timeValue:null,detailVisible:!1,detailDate:{id:"",name:"",tags:"",nick:[]}}},methods:{getList:function(t,e,i){var a=0<arguments.length&&void 0!==t?t:this.page&&this.page.num||1,n=this,r=1<arguments.length&&void 0!==e?e:this.page&&this.page.offset||10,s=i;return function(t){return function(){var l=t.apply(this,arguments);return new Promise(function(r,s){return function e(t,i){try{var a=l[t](i),n=a.value}catch(t){return void s(t)}if(!a.done)return Promise.resolve(n).then(function(t){e("next",t)},function(t){e("throw",t)});r(n)}("next")})}}(l.default.mark(function t(){var e;return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=o({pageNum:a,pageOffset:r},s),t.next=3,u.listNickName(e).then(function(t){n.page=t.page,n.pageList=t.data});case 3:case"end":return t.stop()}},t,n)}))()},clear:function(){document.getElementById("text").value=""},clear2:function(){document.getElementById("text2").value=""},showDetaile:function(i){var a=this;this.detailDate.id=this.detailDate.tags=this.detailDate.name=this.detailDate.appellation="",this.detailDate.nick=[],i?u.detailNickName({id:i}).then(function(t){var e=a.pageList.find(function(t){return t.id===i});a.detailDate.id=i,a.detailDate.tags=e.tags,a.detailDate.name=e.name,a.detailDate.nick=t.data,a.detailVisible=!0}):this.detailVisible=!0},deleteHandeler:function(t){var r=this,s=0<arguments.length&&void 0!==t?t:[];if(s.length||Array.from(document.querySelectorAll("[name='checkbox']:checked")).forEach(function(t){s.push(t.value)}),!s.length)return this.$message.error("请确认你要删除的内容！");this.$confirm("确认删除？").then(function(t){var e=r.page,i=e.total,a=e.start,n=e.num;i-s.length==a&&(r.page.num=a?n-1:1),u.deleteNickName({id:s}).then(function(t){r.getList()})}).catch(function(t){})},addNickname:function(){var t=this.detailDate.nick.length+1;this.detailDate.nick.push({index:t,id:"",name:"",action:"add"})},deleteTraditional:function(e,t){var i=e?this.detailDate.nick.filter(function(t){return"del"!=t.action}).findIndex(function(t){return t.id===e}):t;this.$set(this.detailDate.nick.filter(function(t){return"del"!=t.action})[i],"action","del")},save:function(){var a=this,t=this.detailDate.id;-1<this.detailDate.nick.findIndex(function(t){return!t.nick})?this.$message.warning("请输入完整信息"):t?u.modifyNickName(this.detailDate).then(function(t){a.$message.success("修改成功"),a.getList(),a.detailVisible=!1}).catch(function(t){var e=t.payload;for(var i in e.messages){a.$message.error(e.messages[i]);break}}):u.addNickName(o({},this.detailDate,{nick:this.detailDate.nick.filter(function(t){return"del"!=t.action}).map(function(t){return t.nick})})).then(function(t){a.$message.success("新增成功"),a.getList(),a.detailVisible=!1}).catch(function(t){var e=t.payload;for(var i in e.messages){a.$message.error(e.messages[i]);break}})}},components:{Menu:a.default,Top:n.default}}},845:function(t,e,i){}}]);