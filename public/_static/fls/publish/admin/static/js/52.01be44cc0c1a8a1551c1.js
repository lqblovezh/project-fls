/*!
 * {
 *   "buildtime": "2019-07-19 15:01:49",
 *   "workspace": "F:\\project\\x-book4\\js",
 *   "username": "Administrator",
 *   "hostname": "PC201608171616",
 *   "platform": "win32",
 *   "git": {
 *     "branch": "master",
 *     "hash": "b17f442a6",
 *     "message": [
 *       "commit b17f442a62eb78bc9ab78ffe68e3afb76c3e3548",
 *       "Author: YangZai <552396385@qq.com>",
 *       "Date:   Fri Jul 19 14:48:13 2019 +0800",
 *       "    xxxxxx"
 *     ],
 *     "user": "YangZai",
 *     "email": "552396385@qq.com",
 *     "remote": [
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (fetch)",
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (push)"
 *     ]
 *   }
 * }
 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{1309:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getAllInfo=void 0;var a,n=c(i(5));e.getAllInfo=(a=function(t){return function(){var o=t.apply(this,arguments);return new Promise(function(s,r){return function e(t,i){try{var a=o[t](i),n=a.value}catch(t){return void r(t)}if(!a.done)return Promise.resolve(n).then(function(t){e("next",t)},function(t){e("throw",t)});s(n)}("next")})}}(n.default.mark(function t(e){var i;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i={},t.next=3,d({id:e}).then(function(t){return t.data});case 3:return i=t.sent,t.next=6,(0,r.getList)({course_id:e}).then(function(t){return t.data});case 6:return i.course_period_list=t.sent,t.next=9,(0,o.getList)({id:e}).then(function(t){return t.data});case 9:return i.examination_paper_list=t.sent,t.next=12,p({id:e}).then(function(t){return t.data});case 12:return i.price=t.sent,t.abrupt("return",i);case 15:case"end":return t.stop()}},t,this)})),function(t){return a.apply(this,arguments)});e.getList=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,s.request_get)(restUrl_publish+"/api/shared_course",t)},e.save=function(t){var e=t.id,i=function(t,e){var i={};for(var a in t)0<=e.indexOf(a)||Object.prototype.hasOwnProperty.call(t,a)&&(i[a]=t[a]);return i}(t,["id"]);if(e)return(0,s.request_put)(restUrl_publish+"/api/shared_course/"+e,i);return(0,s.request_post)(restUrl_publish+"/api/shared_course",i).then(function(t){return(0,u.createProListener)({res_id:t.data.id,res_type:t.data.type_name,res_name:t.data.name,res_cover:t.data.img_src,res_covers:"",res_exp:t.data.abs,res_author:"",res_author_id:"",res_Interpreter:"",res_Interpreter_id:"",res_lables:"",res_money:"",res_isbn:"",res_isbn_ext:""}),t})},e.getInfo=d,e.del=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,s.request_post)(restUrl_publish+"/api/shared_course/delete",t)},e.urgentDigital=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,s.request_put)(restUrl_publish+"/api/shared_course/urgent",t)},e.audits=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,s.request_put)(restUrl_publish+"/api/shared_course/audits",t)},e.getPrice=p,e.savePrice=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,s.request_post)(restUrl_publish+"/api/shared_course/save_price",t)};var s=i(7),r=i(701),o=i(453),l=c(i(9)),u=(i(1024),i(85));function c(t){return t&&t.__esModule?t:{default:t}}function d(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=l.default.compile(restUrl_publish+"/api/shared_course/:id");return(0,s.request_get)(e(t))}function p(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=l.default.compile(restUrl_publish+"/api/shared_course/setting_info/:id");return(0,s.request_get)(e(t))}},1310:function(t,e,i){"use strict";var a=i(911);i.n(a).a},1350:function(t,e,i){"use strict";function a(){var i=this,t=i.$createElement,a=i._self._c||t;return a("div",{staticClass:"index clearfix"},[a("Top",{attrs:{currentPlant:"X-PUBLISH"}}),a("Menu"),a("div",{staticClass:"mainRight"},[a("div",{staticClass:"contentWrap"},[a("div",{staticClass:"contentLeft"},[a("div",{staticClass:"maindata"},[a("div",{staticClass:"serachWrap"},[a("div",{staticClass:"title"}),a("form",{staticClass:"clearfix",attrs:{id:"mainForm"}},[a("span",{staticClass:"group-inline"},[a("el-input",{attrs:{placeholder:"共享课程名称",name:"name",clearable:""},model:{value:i.searchQuery.name,callback:function(t){i.$set(i.searchQuery,"name",t)},expression:"searchQuery.name"}})],1),a("span",{staticClass:"group-inline"},[a("TimePick",{attrs:{inputsName:["start_time","end_time"]}})],1),a("span",{staticClass:"group-inline"},[a("select",{staticClass:"form-control",staticStyle:{width:"110px"},attrs:{placeholder:"状态",name:"status"}},[a("option",{attrs:{value:""}},[i._v("审核状态")]),i._l(i.status,function(t,e){return a("option",{domProps:{value:e}},[i._v(i._s(t))])})],2)]),a("span",{staticClass:"group-inline"},[a("el-button",{attrs:{size:"mediu",type:"primary",icon:"el-icon-search",plain:""},on:{click:i.query}},[i._v("搜索")])],1)])]),a("div",{staticClass:"tableWrap"},[a("div",{staticClass:"tableTop"},[a("div",{staticClass:"title vel-line"},[a("span",[i._v("全部 "),i.page?a("span",{staticClass:"totalNum"},[i._v("("+i._s(i.page.total)+")")]):i._e()]),a("div",{staticClass:"btns"},[a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(t){return i.audits()}}},[i._v("审核")]),a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:i.urgentDigital}},[i._v("加急审核")]),a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(t){return i.delChoosen(!1)}}},[i._v("删除")])],1)])]),a("table",{staticClass:"table"},[a("thead",[a("tr",[a("th",{staticClass:"allBtn"},[a("input",{attrs:{type:"checkbox"},on:{click:function(t){return i.checkAll(t)}}})]),a("th",[i._v("名称")]),a("th",[i._v("所属用户")]),a("th",{attrs:{width:"80"}},[i._v("审核状态")]),a("th",{attrs:{width:"70"}},[i._v("分发状态")]),a("th",{staticClass:"time"},[i._v("分发时间")]),a("th",{staticClass:"operate"},[i._v("操作")])])]),i.list?a("tbody",i._l(i.list,function(e){return a("tr",[a("td",[a("input",{ref:"ids",refInFor:!0,attrs:{type:"checkbox",name:"ids"},domProps:{value:e.id}})]),a("td",[a("img",{staticClass:"cover-photo",attrs:{src:e.img_src}}),a("div",{staticClass:"th-name bookName",attrs:{title:e.name}},[i._v(i._s(e.name))])]),a("td",[i._v(i._s(e.owner_name))]),a("td",{class:i.getColor(e.status)},[i._v(i._s(e.status))]),a("td",[i._v(i._s(e.release_status_name||"-"))]),a("td",[i._v(i._s(e.release_time||"-"))]),a("td",[a("div",{staticClass:"btns"},[a("Icon",{attrs:{size:"mini",title:"详情",type:"icon-detail",plain:""},on:{click:function(t){return i.opneDetailDialog("info",e)}}}),1!=e.audits_status?a("Icon",{attrs:{size:"mini",title:"审核",type:"icon-menu-publish",plain:""},on:{click:function(t){return i.saveExamine("创建新版本",[e.id])}}}):i._e(),3==e.audits_status?a("Icon",{attrs:{size:"mini",title:"分发",type:"icon-fenfa",plain:""},on:{click:function(t){return i.opnePublishDialog(e)}}}):i._e(),1!=e.audits_status?a("Icon",{attrs:{size:"mini",title:"删除",type:"icon-delete",plain:""},on:{click:function(t){return i.delChoosen(e.id)}}}):i._e()],1)])])}),0):i._e()]),i.page?a("div",{staticClass:"pageWrap"},[a("el-pagination",{attrs:{small:!1,background:"","current-page":i.page.num,"page-sizes":[10,50,100],"page-size":i.page.offset,layout:"total, sizes,prev, pager, next, jumper",total:i.page.total},on:{"size-change":i.handleSizeChange,"current-change":i.handleCurrentChange}})],1):i._e()])])])])]),a("div",{staticClass:"dialogs"},[a("Examine",{attrs:{examineDialog:i.examineDialog},on:{"update:examineDialog":function(t){i.examineDialog=t},"update:examine-dialog":function(t){i.examineDialog=t},saveExamine:i.saveExamine}}),i.publishDialog?a("Dispense",{attrs:{publishDialog:i.publishDialog,item:i.detailData},on:{"update:publishDialog":function(t){i.publishDialog=t},"update:publish-dialog":function(t){i.publishDialog=t},dispenseOk:i.dispenseOk}}):i._e(),a("el-dialog",{staticClass:"no-footer",attrs:{center:!1,visible:i.detailDialog,"close-on-click-modal":!1,top:"50px",width:"1200px"},on:{"update:visible":function(t){i.detailDialog=t}}},[a("div",{staticClass:"content",attrs:{slot:"title"},slot:"title"},[i.detailDialog?a("Detail",{attrs:{type:i.detailDialoaType,detailDialog:i.detailDialog,detailData:i.detailData,services:i.services,hourSever:i.hourSever,exerciseSever:i.exerciseSever,media:2,readOnly:i.readOnly},on:{saveok:i.saveOk,Knowledgeclick:i.KnowledgeClick,"update:detailDialog":function(t){i.detailDialog=t},"update:detail-dialog":function(t){i.detailDialog=t}}}):i._e()],1)])],1)],1)}var n=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},358:function(t,e,i){"use strict";i.r(e);var a=i(1350),n=i(909);for(var s in n)"default"!==s&&function(t){i.d(e,t,function(){return n[t]})}(s);i(1310);var r=i(0),o=Object(r.a)(n.default,a.a,a.b,!1,null,"5b2fc47c",null);e.default=o.exports},909:function(t,e,i){"use strict";i.r(e);var a=i(910),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,function(){return a[t]})}(s);e.default=n.a},910:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=g(i(5)),o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},n=g(i(84)),s=g(i(396)),r=g(i(158)),l=g(i(157)),u=g(i(613)),c=g(i(421)),d=i(126),p=v(i(1309)),f=v(i(701)),h=v(i(453));function v(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function g(t){return t&&t.__esModule?t:{default:t}}e.default={mixins:[d.main],components:{Menu:r.default,Top:l.default,Detail:u.default,Dispense:s.default},data:function(){return{services:p,hourSever:f,exerciseSever:h,list:null,page:null,detailDialog:!1,detailDialoaType:"info",detailData:{},publishDialog:!1,status:c.default}},methods:{getList:function(t,e,i){var a=0<arguments.length&&void 0!==t?t:this.page&&this.page.num||1,n=this,s=1<arguments.length&&void 0!==e?e:this.page&&this.page.offset||10,r=2<arguments.length&&void 0!==i?i:null;p.getList(o({pageNum:a,pageOffset:s,group_id:this.currGroup},r)).then(function(t){n.list=t.data,n.page=t.page})},urgentDigital:function(){for(var e=this,t=this.getChecked(),i=0,a=t.length;i<a;i++)for(var n=0,s=this.list.length;n<s;n++)if(this.list[n].id==t[i]&&1!=this.list[n].audits_status)return void this.$message.error("只能勾选待审核数据");t&&this.services.urgentDigital({id:t}).then(function(t){return e.$message.success("已提交加急审核")})},opnePublishDialog:function(t){this.detailData=t,this.publishDialog=!0},delChoosens:function(t){var a=this,i=[];if(t)i.push(t);else{var e=Array.from(document.querySelectorAll('input[name="ids"]:checked'));if(e.forEach(function(t){i.push(t.value)}),!e.length)return void this.$message.error("请先选中!")}0<i.length&&this.$confirm("是否删除?").then(function(t){var e=(0,n.default)(document.querySelector("#mainForm"),{hash:!0});a.services.del({id:i}).then(function(t){a.getList(a.page.num,a.page.offset,e),a.getGroupList()}).catch(function(t){var e=t.payload;for(var i in e.messages){a.$message.error(e.messages[i]);break}})}).catch(function(t){})},KnowledgeClick:function(t){this.detailDialoaType=t},saveOk:function(t){this.detailData.id||(this.detailData=t),this.getList(),this.getGroupList()},clear:function(){document.getElementById("text").value=""},opneDetailDialog:function(t,e){var i=this;return function(t){return function(){var o=t.apply(this,arguments);return new Promise(function(s,r){return function e(t,i){try{var a=o[t](i),n=a.value}catch(t){return void r(t)}if(!a.done)return Promise.resolve(n).then(function(t){e("next",t)},function(t){e("throw",t)});s(n)}("next")})}}(a.default.mark(function t(){return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i.detailData={},e)return t.next=4,p.getAllInfo(e.id).then(function(t){i.readOnly=!(!e||1!=e.audits_status),i.detailData=t});t.next=4;break;case 4:i.detailDialog=!0;case 5:case"end":return t.stop()}},t,i)}))()}}}},911:function(t,e,i){}}]);