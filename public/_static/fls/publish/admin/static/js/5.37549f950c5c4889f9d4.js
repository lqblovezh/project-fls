/*!
 * {
 *   "buildtime": "2019-07-19 15:01:49",
 *   "workspace": "F:\\project\\x-book4\\js",
 *   "username": "Administrator",
 *   "hostname": "PC201608171616",
 *   "platform": "win32",
 *   "git": {
 *     "branch": "master",
 *     "hash": "b17f442a6",
 *     "message": [
 *       "commit b17f442a62eb78bc9ab78ffe68e3afb76c3e3548",
 *       "Author: YangZai <552396385@qq.com>",
 *       "Date:   Fri Jul 19 14:48:13 2019 +0800",
 *       "    xxxxxx"
 *     ],
 *     "user": "YangZai",
 *     "email": "552396385@qq.com",
 *     "remote": [
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (fetch)",
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (push)"
 *     ]
 *   }
 * }
 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{1157:function(t,e,s){"use strict";var r=s(735);s.n(r).a},1397:function(t,e,s){"use strict";function r(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"div"},[s("div",{staticClass:"top"},[e._v("选择要发布的格式")]),s("ul",{staticClass:"typesWrap"},[s("li",{staticClass:"li"},[s("div",{staticClass:"type",class:{active:1==e.types.EPUB},on:{click:function(t){return e.changeType("EPUB")}}},[s("span",[e._v("EPUB")]),1==e.types.EPUB&&e.progress?s("div",{staticClass:"progress"},[s("span",[e._v("发布中")]),s("span",[e._v(e._s(e.progress))])]):e._e()]),s("div",{staticClass:"tip"},[e._v("适用于")]),e._m(0)]),s("li",{staticClass:"li"},[s("div",{staticClass:"type",class:{active:1==e.types.MOBI},on:{click:function(t){return e.changeType("MOBI")}}},[s("span",[e._v("MOBI")]),1==e.types.MOBI&&e.progress?s("div",{staticClass:"progress"},[s("span",[e._v("发布中")]),s("span",[e._v(e._s(e.progress))])]):e._e()]),s("div",{staticClass:"tip"},[e._v("适用于")]),e._m(1)]),s("li",{staticClass:"li"},[s("div",{staticClass:"type",class:{active:e.types.PDF},on:{click:function(t){return e.changeType("PDF")}}},[s("span",[e._v("PDF")]),1==e.types.PDF&&e.progress?s("div",{staticClass:"progress"},[s("span",[e._v("发布中")]),s("span",[e._v(e._s(e.progress))])]):e._e()]),s("div",{staticClass:"tip"},[e._v("适用于")]),e._m(2)]),s("li",{staticClass:"li"},[s("div",{staticClass:"type",class:{active:e.types.WORD},on:{click:function(t){return e.changeType("WORD")}}},[s("span",[e._v(" WORD")]),1==e.types.WORD&&e.progress?s("div",{staticClass:"progress"},[s("span",[e._v("发布中")]),s("span",[e._v(e._s(e.progress))])]):e._e()]),s("div",{staticClass:"tip"},[e._v("适用于")]),e._m(3)]),s("li",{staticClass:"li"},[s("div",{staticClass:"type",class:{active:e.types.HTML},on:{click:function(t){return e.changeType("HTML")}}},[s("span",[e._v("HTML")]),1==e.types.HTML&&e.progress?s("div",{staticClass:"progress"},[s("span",[e._v("发布中")]),s("span",[e._v(e._s(e.progress))])]):e._e()]),s("div",{staticClass:"tip"},[e._v("适用于")]),e._m(4)])]),s("div",{staticClass:"btns"},[s("el-button",{attrs:{type:"info"},on:{click:function(t){return e.$emit("cancle")}}},[e._v("返回")]),s("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确定")])],1)])}var i=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"releaseList"},[e("div",{staticClass:"dd"}),e("div",{staticClass:"qq"}),e("div",{staticClass:"zhangyue"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"releaseList"},[e("div",{staticClass:"amazon"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"releaseList"},[e("div",{staticClass:"qq"}),e("div",{staticClass:"zhangyue"}),e("div",{staticClass:"amazon"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"releaseList"},[e("div",{staticClass:"qq"}),e("div",{staticClass:"zhangyue"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"releaseList"},[e("div",{staticClass:"amazon"}),e("div",{staticClass:"qq"}),e("div",{staticClass:"zhangyue"})])}];s.d(e,"a",function(){return r}),s.d(e,"b",function(){return i})},375:function(t,e,s){"use strict";s.r(e);var r=s(376),i=s.n(r);for(var a in r)"default"!==a&&function(t){s.d(e,t,function(){return r[t]})}(a);e.default=i.a},376:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["groupList","currGroup"],data:function(){return{newGroupDialogOpen:!1,updateGroupDialogOpen:!1,currEditGroup:null}},created:function(){},computed:{},methods:{groupChange:function(t){this.$emit("groupChange",t)},addGroupDialog:function(){},delGroup:function(e){var s=this;this.$confirm("是否删除分组:"+e.name).then(function(t){dir(t),s.$emit("delGroup",e.id)}).catch(function(t){dir(t)})},updateGroupDialog:function(t){this.updateGroupDialogOpen=!0,this.currEditGroup=t},addGroup:function(){if(this.$refs.addGroupForm.valiAll()){var t=document.querySelector("#addGroupForm");this.$emit("addGroup",t),this.newGroupDialogOpen=!1}},updateGroup:function(){if(this.$refs.updateGroupForm.valiAll()){var t=document.querySelector("#updateGroupForm");this.$emit("updateGroup",t),this.updateGroupDialogOpen=!1}}}}},377:function(t,e,s){},384:function(t,e,s){"use strict";s.r(e);var r=s(386),i=s(375);for(var a in i)"default"!==a&&function(t){s.d(e,t,function(){return i[t]})}(a);s(385);var n=s(0),o=Object(n.a)(i.default,r.a,r.b,!1,null,"82bd0f98",null);e.default=o.exports},385:function(t,e,s){"use strict";var r=s(377);s.n(r).a},386:function(t,e,s){"use strict";function r(){var s=this,t=s.$createElement,r=s._self._c||t;return r("div",{staticClass:"div"},[r("div",{staticClass:"groupWrap"},[r("div",{staticClass:"list"},[r("ul",s._l(s.groupList,function(e){return r("li",{staticClass:"licontent",class:{red:e.id==s.currGroup}},[r("div",{staticClass:"name ellipsis",attrs:{title:e.name+"("+e.num+")"},on:{click:function(t){return s.groupChange(e.id)}}},[r("span",{staticClass:"title"},[s._v(s._s(e.name))]),r("span",[s._v(s._s("("+e.num+")"))])]),""!=e.id&&"non"!=e.id?r("div",{staticClass:"btns"},[r("span",{on:{click:function(t){return s.updateGroupDialog(e)}}},[r("i",{staticClass:"el-icon-edit"})]),r("span",{on:{click:function(t){return s.delGroup(e)}}},[r("i",{staticClass:"el-icon-delete"})])]):s._e()])}),0)]),r("div",{staticClass:"addGroupBtnWrap"},[r("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){s.newGroupDialogOpen=!0}}},[r("i",{staticClass:"el-icon-plus"},[s._v("新建分组")])])],1)]),r("div",{staticClass:"dialogs"},[s.newGroupDialogOpen?r("el-dialog",{attrs:{title:"新增",visible:s.newGroupDialogOpen,width:"500px"},on:{"update:visible":function(t){s.newGroupDialogOpen=t}}},[r("div",{staticClass:"formWrap"},[r("VaForm",{ref:"addGroupForm"},[r("form",{attrs:{id:"addGroupForm"}},[r("div",{staticClass:"group"},[r("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"}],staticClass:"form-control",attrs:{name:"name"}})])])])],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"info"},on:{click:function(t){s.newGroupDialogOpen=!1}}},[s._v("取消")]),r("el-button",{attrs:{type:"primary"},on:{click:s.addGroup}},[s._v("确定")])],1)]):s._e(),s.updateGroupDialogOpen?r("el-dialog",{attrs:{title:"修改",visible:s.updateGroupDialogOpen,width:"500px"},on:{"update:visible":function(t){s.updateGroupDialogOpen=t}}},[r("div",{staticClass:"formWrap"},[r("VaForm",{ref:"updateGroupForm"},[s.currEditGroup?r("form",{attrs:{id:"updateGroupForm"}},[r("div",{staticClass:"group"},[r("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"}],staticClass:"form-control",attrs:{name:"name"},domProps:{value:s.currEditGroup.name}}),r("input",{staticClass:"hide",attrs:{name:"id"},domProps:{value:s.currEditGroup.id}})])]):s._e()])],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"info"},on:{click:function(t){s.updateGroupDialogOpen=!1}}},[s._v("取消")]),r("el-button",{attrs:{type:"primary"},on:{click:s.updateGroup}},[s._v("确定")])],1)]):s._e()],1)])}var i=[];s.d(e,"a",function(){return r}),s.d(e,"b",function(){return i})},394:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.modifyBooks=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,s=u(t,["id"]),r=a.default.compile(restUrl_publish+"/api/books/:id");return(0,i.request_put)(r({id:e}),s)},e.educe=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,n.educeResListener)({res_url:(0,i.getFullPath)(restUrl_publish+"/api/books/export"+r.default.stringify(t,{addQueryPrefix:!0}))}),(0,i.request_get)(restUrl_publish+"/api/books/export",t)},e.putin=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,i.request_post)(restUrl_publish+"/api/books/import",t)},e.fabu=function(t){return(0,i.request_post)(restUrl_publish+"/api/mult_books",t)},e.getProgress=function(t){return(0,i.request_get)(restUrl_publish+"/api/mult_book/progress/"+t)},e.deleteBooks=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,i.request_post)(restUrl_publish+"/api/books/delete",t)},e.listBooks=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,i.request_get)(restUrl_publish+"/api/books",t)},e.detailBooks=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,s=u(t,["id"]),r=a.default.compile(restUrl_publish+"/api/books/:id");return(0,i.request_get)(r({id:e}),s)},e.addBooks=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,i.request_post)(restUrl_publish+"/api/books",e).then(function(t){(0,n.createProListener)({res_id:t.data.task_id,res_type:"数字图书",res_cover:e.img,res_covers:"",res_exp:e.abs,res_author:e.author,res_author_id:"",res_Interpreter:"",res_Interpreter_id:"",res_lables:"",res_currency:"",res_money:"",res_isbn:"",res_isbn_ext:"",res_publication:""})})},e.getBookCatalog=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,s=u(t,["id"]),r=a.default.compile(restUrl_publish+"/api/books/:id/catalogs");return(0,i.request_get)(r({id:e}),s)},e.modifyGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,s=u(t,["id"]),r=a.default.compile(restUrl_publish+"/api/books/groups/:id");return(0,i.request_put)(r({id:e}),s)},e.deleteGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,s=u(t,["id"]),r=a.default.compile(restUrl_publish+"/api/books/groups/:id");return(0,i.request_delete)(r({id:e}),s)},e.addGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,i.request_post)(restUrl_publish+"/api/books/groups",t)},e.listGroup=function(){return(0,i.request_get)(restUrl_publish+"/api/books/groups")},e.moveGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,i.request_put)(restUrl_publish+"/api/groups/books",t)},e.siblingSort=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,s=u(t,["id"]),r=a.default.compile(restUrl_publish+"/api/catalogs/sort/:id");return(0,i.request_put)(r({id:e}),s)},e.moveCatalog=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=(t.id,u(t,["id"]));return(0,i.request_put)(restUrl_publish+"/api/catalogs/outline",e)},e.products=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,i.request_post)(restUrl_publish+"/api/books/products",t)},e.fastAdd=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,i.request_post)(restUrl_publish+"/api/comproduct/fast/add",t)},e.fastPrevew=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,i.request_post)(restUrl_publish+"/api/audits/fast",t)},e.fastLibrary=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,i.request_post)(restUrl_publish+"/api/databook/temp",t)},e.bookAdd=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,i.request_post)(restUrl_publish+"/api/databook/add",t)},e.dataFast=function s(){var r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,i.request_post)(restUrl_publish+"/api/data_fast",r).then(function(t){return 2==t.data.data?new Promise(function(t,e){setTimeout(function(){t(s(r))},2e3)}):t})};var i=s(7),a=o(s(9)),r=o(s(10)),n=s(85);s(573);function o(t){return t&&t.__esModule?t:{default:t}}function u(t,e){var s={};for(var r in t)0<=e.indexOf(r)||Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=t[r]);return s}},574:function(t,e){},731:function(t,e,s){"use strict";s.r(e);var r=s(1397),i=s(732);for(var a in i)"default"!==a&&function(t){s.d(e,t,function(){return i[t]})}(a);s(1157);var n=s(0),o=Object(n.a)(i.default,r.a,r.b,!1,null,"d91c8974",null);e.default=o.exports},732:function(t,e,s){"use strict";s.r(e);var r=s(733),i=s.n(r);for(var a in r)"default"!==a&&function(t){s.d(e,t,function(){return r[t]})}(a);e.default=i.a},733:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=s(84),a=((r=i)&&r.__esModule,function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e.default=t,e}}(s(394)));e.default={props:["ids"],data:function(){return{currType:"EPUB",types:{},task_id:"2fcb4bb0117349718b14aab58265e440",progress:null}},methods:{confirm:function(){var e=this;log(this.progress),this.progress&&"100%"!=this.progress?this.$message.error("发布中"):(this.$emit("releaseBack",this.currType),a.fabu({id:this.ids,type:this.getTypes2Arr()}).then(function(t){log("发布结果",t),e.task_id=t.data.task_id,e.progress="0%",e.getProgress(e.task_id)}).catch(function(t){e.$message.error("发布失败!",t)}))},getProgress:function(t){var e=this;log("获取进度"),this.intervalid=setInterval(function(){a.getProgress(t).then(function(t){log("进度",t.data),e.progress=t.data.chunk+"%",100==t.data.chunk&&(e.$message.success("发布成功!"),e.$emit("cancle"),clearInterval(e.intervalid))}).catch(function(t){e.$message.error("获取发布进度失败!"),clearInterval(e.intervalid)})},3e3)},changeType:function(t){this.progress||this.$set(this.types,t,!this.types[t])},getTypes2Arr:function(){var t=[];for(var e in this.types){if(this.types.hasOwnProperty(e))this.types[e]&&t.push(e.toLowerCase())}return t}},destroyed:function(){clearInterval(this.intervalid)}}},735:function(t,e,s){}}]);