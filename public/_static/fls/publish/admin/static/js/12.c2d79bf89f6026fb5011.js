/*!
 * {
 *   "buildtime": "2019-07-19 15:01:49",
 *   "workspace": "F:\\project\\x-book4\\js",
 *   "username": "Administrator",
 *   "hostname": "PC201608171616",
 *   "platform": "win32",
 *   "git": {
 *     "branch": "master",
 *     "hash": "b17f442a6",
 *     "message": [
 *       "commit b17f442a62eb78bc9ab78ffe68e3afb76c3e3548",
 *       "Author: YangZai <552396385@qq.com>",
 *       "Date:   Fri Jul 19 14:48:13 2019 +0800",
 *       "    xxxxxx"
 *     ],
 *     "user": "YangZai",
 *     "email": "552396385@qq.com",
 *     "remote": [
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (fetch)",
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (push)"
 *     ]
 *   }
 * }
 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[12,3],{1287:function(t,e,r){"use strict";var i=r(872);r.n(i).a},1359:function(t,e,r){"use strict";function i(){var i=this,t=i.$createElement,a=i._self._c||t;return a("div",{staticClass:"index clearfix"},[a("Top",{attrs:{currentPlant:"X-PUBLISH"}}),a("Menu",{attrs:{curr:"/digitalProductLibrary/release"}}),a("div",{staticClass:"mainRight"},[a("div",{staticClass:"contentWrap"},[a("div",{staticClass:"contentLeft"},[a("div",{staticClass:"maindata"},[a("div",{staticClass:"serachWrap"},[a("div",{staticClass:"title"}),a("form",{staticClass:"clearfix",attrs:{id:"mainForm"}},[a("span",{staticClass:"group-inline"},[a("el-input",{attrs:{placeholder:"书籍名称",name:"name",clearable:""},model:{value:i.searchQuery.name,callback:function(t){i.$set(i.searchQuery,"name",t)},expression:"searchQuery.name"}})],1),a("span",{staticClass:"group-inline"},[a("el-input",{attrs:{placeholder:"ISBN",name:"book_isbn",clearable:""},model:{value:i.searchQuery.book_isbn,callback:function(t){i.$set(i.searchQuery,"book_isbn",t)},expression:"searchQuery.book_isbn"}})],1),a("span",{staticClass:"group-inline"},[a("el-input",{attrs:{placeholder:"作者",name:"author",clearable:""},model:{value:i.searchQuery.author,callback:function(t){i.$set(i.searchQuery,"author",t)},expression:"searchQuery.author"}})],1),a("span",{staticClass:"group-inline"},[a("select",{staticClass:"form-control",staticStyle:{width:"110px"},attrs:{placeholder:"分发平台",name:"platforms"}},[a("option",{attrs:{value:""}},[i._v("分发平台")]),a("option",{attrs:{value:"x_read"}},[i._v("XRead")]),i.$config.isShowRetailers?a("option",{attrs:{value:"ecommerce"}},[i._v("电商平台")]):i._e()])]),a("span",{staticClass:"group-inline"},[a("TimePick",{attrs:{inputsName:["start_time","end_time"]}})],1),i._m(0),a("span",{staticClass:"group-inline"},[a("el-button",{attrs:{size:"mediu",type:"primary",icon:"el-icon-search",plain:""},on:{click:i.query}},[i._v("搜索")]),a("el-button",{attrs:{size:"mediu",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return i.opneDetailDialog("info")}}},[i._v("新建")])],1)])]),a("div",{staticClass:"tableWrap"},[a("div",{staticClass:"tableTop"},[a("div",{staticClass:"title vel-line"},[a("span",[i._v("全部 "),i.page?a("span",{staticClass:"totalNum"},[i._v("("+i._s(i.page.total)+")")]):i._e()]),a("div",{staticClass:"btns"},[a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(t){return i.audits()}}},[i._v("审核")]),a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:i.urgentDigitalBook}},[i._v("加急审核")]),a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:i.moveToOther}},[i._v("移动分组")]),a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(t){return i.delChoosen(!1)}}},[i._v("删除")])],1)])]),a("table",{staticClass:"table"},[a("thead",[a("tr",[a("th",{staticClass:"allBtn"},[a("input",{attrs:{type:"checkbox"},on:{click:function(t){return i.checkAll(t)}}})]),a("th",[i._v("名称")]),a("th",[i._v("ISBN")]),a("th",[i._v("作者")]),a("th",{staticStyle:{width:"150px"}},[i._v("可分发平台")]),a("th",{attrs:{width:"70"}},[i._v("审核状态")]),a("th",{attrs:{width:"70"}},[i._v("分发状态")]),a("th",{staticClass:"time"},[i._v("分发时间")]),a("th",{staticClass:"operate"},[i._v("操作")])])]),i.list?a("tbody",i._l(i.list,function(r){return a("tr",[a("td",[a("input",{ref:"ids",refInFor:!0,attrs:{type:"checkbox",name:"ids","data-type":r.status},domProps:{value:r.id}})]),a("td",[a("img",{staticClass:"cover-photo",attrs:{src:r.img_src}}),a("div",{staticClass:"th-name bookName",attrs:{title:r.name}},[i._v(i._s(r.name))])]),a("td",[a("div",{staticClass:"th-name",attrs:{title:r.book_isbn}},[i._v(i._s(r.book_isbn))])]),a("td",[a("div",{staticClass:"th-name",attrs:{title:r.author}},[i._v(i._s(r.author))])]),a("td",[a("ul",{staticClass:"contList"},i._l(r.platforms,function(t,e){return!r.platforms||"retailer"!=e||i.$config.isShowRetailers?a("li",[a("span",{class:{disabled:0==t},domProps:{textContent:i._s("retailer"==e?"电商平台":e)}})]):i._e()}),0)]),a("td",{class:i.getColor(r.status)},[i._v(i._s(r.status))]),a("td",[i._v(i._s(r.release_status_name||"-"))]),a("td",[i._v(i._s(r.release_time||"-"))]),a("td",[a("div",{staticClass:"btns"},[a("Icon",{attrs:{size:"mini",title:"详情",type:"icon-detail",plain:""},on:{click:function(t){return i.opneDetailDialog("info",r)}}}),1!=r.audits_status?a("Icon",{attrs:{size:"mini",title:"审核",type:"icon-menu-publish",plain:""},on:{click:function(t){return i.audits(r.id)}}}):i._e(),3==r.audits_status?a("Icon",{attrs:{size:"mini",title:"分发",type:"icon-fenfa",plain:""},on:{click:function(t){return i.opnePublishDialog(r)}}}):i._e(),1!=r.audits_status?a("Icon",{attrs:{size:"mini",title:"删除",type:"icon-delete",plain:""},on:{click:function(t){return i.delChoosen(r.id)}}}):i._e()],1)])])}),0):i._e()]),i.page?a("div",{staticClass:"pageWrap"},[a("el-pagination",{attrs:{small:!1,background:"","current-page":i.page.num,"page-sizes":[10,50,100],"page-size":i.page.offset,layout:"total, sizes,prev, pager, next, jumper",total:i.page.total},on:{"size-change":i.handleSizeChange,"current-change":i.handleCurrentChange}})],1):i._e()]),a("div",{staticClass:"gruopList"},[a("GroupList",{attrs:{groupList:i.groupList,currGroup:i.currGroup},on:{addGroup:i.addGroup,updateGroup:i.updateGroup,delGroup:i.delGroup,groupChange:i.groupChange}})],1)])])])]),a("div",{staticClass:"dialogs"},[a("Examine",{attrs:{examineDialog:i.examineDialog},on:{"update:examineDialog":function(t){i.examineDialog=t},"update:examine-dialog":function(t){i.examineDialog=t},saveExamine:i.saveExamine}}),i.publishDialog?a("Dispense",{attrs:{publishDialog:i.publishDialog,item:i.detailData,is_release:!0},on:{"update:publishDialog":function(t){i.publishDialog=t},"update:publish-dialog":function(t){i.publishDialog=t},dispenseOk:i.dispenseOk}}):i._e(),a("el-dialog",{staticClass:"no-footer",attrs:{center:!1,visible:i.detailDialog,"close-on-click-modal":!1,"before-close":i.handleClose,top:"50px",width:"1200px"},on:{"update:visible":function(t){i.detailDialog=t}}},[a("div",{staticClass:"content",attrs:{slot:"title"},slot:"title"},[i.detailDialog?a("Detail",{attrs:{type:i.detailDialoaType,detailDialog:i.detailDialog,detailData:i.detailData,readOnly:i.readOnly},on:{saveok:i.saveOk,Knowledgeclick:i.KnowledgeClick,"update:detailDialog":function(t){i.detailDialog=t},"update:detail-dialog":function(t){i.detailDialog=t}}}):i._e()],1)]),a("el-dialog",{attrs:{center:!1,visible:i.moveToOtherDiaolog,"close-on-click-modal":!1,title:"移动分组",width:"500px"},on:{"update:visible":function(t){i.moveToOtherDiaolog=t}}},[a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[i._v("移动到")]),a("select",{ref:"moveToId",staticClass:"form-control",attrs:{placeholder:"请选择"}},i._l(i.groupList,function(t,e){return t.id!=i.currGroup&&""!=t.id?a("option",{domProps:{value:t.id,textContent:i._s(t.name)}}):i._e()}),0)]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info"},on:{click:function(t){i.moveToOtherDiaolog=!1}}},[i._v("返回")]),a("el-button",{attrs:{type:"primary"},on:{click:i.moveToSubmit}},[i._v(" 确定")])],1)])],1)],1)}var a=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("span",{staticClass:"group-inline"},[r("select",{staticClass:"form-control",staticStyle:{width:"110px"},attrs:{name:"audits_status"}},[r("option",{attrs:{value:""}},[t._v("审核状态")]),r("option",{attrs:{value:"0"}},[t._v("未审核")]),r("option",{attrs:{value:"1"}},[t._v("待审核")]),r("option",{attrs:{value:"2"}},[t._v("未通过")]),r("option",{attrs:{value:"3"}},[t._v("已通过")])])])}];r.d(e,"a",function(){return i}),r.d(e,"b",function(){return a})},349:function(t,e,r){"use strict";r.r(e);var i=r(1359),a=r(870);for(var s in a)"default"!==s&&function(t){r.d(e,t,function(){return a[t]})}(s);r(1287);var n=r(0),o=Object(n.a)(a.default,i.a,i.b,!1,null,"9d4e5446",null);e.default=o.exports},375:function(t,e,r){"use strict";r.r(e);var i=r(376),a=r.n(i);for(var s in i)"default"!==s&&function(t){r.d(e,t,function(){return i[t]})}(s);e.default=a.a},376:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["groupList","currGroup"],data:function(){return{newGroupDialogOpen:!1,updateGroupDialogOpen:!1,currEditGroup:null}},created:function(){},computed:{},methods:{groupChange:function(t){this.$emit("groupChange",t)},addGroupDialog:function(){},delGroup:function(e){var r=this;this.$confirm("是否删除分组:"+e.name).then(function(t){dir(t),r.$emit("delGroup",e.id)}).catch(function(t){dir(t)})},updateGroupDialog:function(t){this.updateGroupDialogOpen=!0,this.currEditGroup=t},addGroup:function(){if(this.$refs.addGroupForm.valiAll()){var t=document.querySelector("#addGroupForm");this.$emit("addGroup",t),this.newGroupDialogOpen=!1}},updateGroup:function(){if(this.$refs.updateGroupForm.valiAll()){var t=document.querySelector("#updateGroupForm");this.$emit("updateGroup",t),this.updateGroupDialogOpen=!1}}}}},377:function(t,e,r){},378:function(t,e,r){"use strict";r.r(e);var i=r(379),a=r.n(i);for(var s in i)"default"!==s&&function(t){r.d(e,t,function(){return i[t]})}(s);e.default=a.a},379:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(126),a=r(127);e.default={mixins:[i.getIconStyle],props:{publishDialog:{type:Boolean,default:!1},item:{type:Object,default:{}},is_release:Boolean},data:function(){return{list:null,coverDialog:!1,choiceDialog:!1,currentItem:null,currentVersion:null}},created:function(){this.getList()},methods:{getList:function(){var i=this;(0,a.getDispense)({entity_type:this.item.type_number||this.item.type,id:this.item.id}).then(function(t){i.list=t.data}).catch(function(t){var e=t.payload;for(var r in e.messages){i.$message.error(e.messages[r]);break}})},colse:function(){this.$emit("update:publishDialog",!1)},save:function(){var e=[];this.$refs.dispense.querySelectorAll("input[type=checkbox]:checked").forEach(function(t){e.push(t.value)}),e.length?this.$emit("dispenseSave",e):this.$message.error("请选择你要发布的平台")},pushTime:function(t){return t?"最近"+t+"发布过":"最近暂无分发"},push:function(e){var r=this;this.currentItem=e,this.is_release&&e.release_msg.length?this.$confirm("信息不全是否分发?").then(function(t){e.version?r.coverDialog=!0:r.dispense()},function(t){var e=t.payload;log(e.message)}).catch(function(t){log("cancel")}):e.version&&e.version.length?this.coverDialog=!0:this.dispense()},dispense:function(t,e){var i=this;(0,a.dispense)({platform_id:this.currentItem.id,audits_id:this.item.audits_id,is_cover:t,version_id:e}).then(function(t){i.$message.success("分发提交成功,请稍后查看结果!"),i.$emit("dispenseOk")}).catch(function(t){var e=t.payload;for(var r in e.messages){i.$message.error(e.messages[r]);break}})},getdefect:function(t){return"缺失字段: "+t.release_msg.join("/")},getBtnName:function(t){return this.is_release&&!t.is_release?"缺少关键信息不能分发":t.release_msg&&t.release_msg.length?"确认分发":"分发"},coverDispense:function(){var e=this;if(!this.currentVersion)return this.$message.warning("请选择你要覆盖的版本号!");var t=this.currentItem.version.find(function(t){return t.xread_book_id===e.currentVersion}).version_id;this.dispense(this.currentVersion,t)}}}},380:function(t,e,r){},384:function(t,e,r){"use strict";r.r(e);var i=r(386),a=r(375);for(var s in a)"default"!==s&&function(t){r.d(e,t,function(){return a[t]})}(s);r(385);var n=r(0),o=Object(n.a)(a.default,i.a,i.b,!1,null,"82bd0f98",null);e.default=o.exports},385:function(t,e,r){"use strict";var i=r(377);r.n(i).a},386:function(t,e,r){"use strict";function i(){var r=this,t=r.$createElement,i=r._self._c||t;return i("div",{staticClass:"div"},[i("div",{staticClass:"groupWrap"},[i("div",{staticClass:"list"},[i("ul",r._l(r.groupList,function(e){return i("li",{staticClass:"licontent",class:{red:e.id==r.currGroup}},[i("div",{staticClass:"name ellipsis",attrs:{title:e.name+"("+e.num+")"},on:{click:function(t){return r.groupChange(e.id)}}},[i("span",{staticClass:"title"},[r._v(r._s(e.name))]),i("span",[r._v(r._s("("+e.num+")"))])]),""!=e.id&&"non"!=e.id?i("div",{staticClass:"btns"},[i("span",{on:{click:function(t){return r.updateGroupDialog(e)}}},[i("i",{staticClass:"el-icon-edit"})]),i("span",{on:{click:function(t){return r.delGroup(e)}}},[i("i",{staticClass:"el-icon-delete"})])]):r._e()])}),0)]),i("div",{staticClass:"addGroupBtnWrap"},[i("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){r.newGroupDialogOpen=!0}}},[i("i",{staticClass:"el-icon-plus"},[r._v("新建分组")])])],1)]),i("div",{staticClass:"dialogs"},[r.newGroupDialogOpen?i("el-dialog",{attrs:{title:"新增",visible:r.newGroupDialogOpen,width:"500px"},on:{"update:visible":function(t){r.newGroupDialogOpen=t}}},[i("div",{staticClass:"formWrap"},[i("VaForm",{ref:"addGroupForm"},[i("form",{attrs:{id:"addGroupForm"}},[i("div",{staticClass:"group"},[i("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"}],staticClass:"form-control",attrs:{name:"name"}})])])])],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"info"},on:{click:function(t){r.newGroupDialogOpen=!1}}},[r._v("取消")]),i("el-button",{attrs:{type:"primary"},on:{click:r.addGroup}},[r._v("确定")])],1)]):r._e(),r.updateGroupDialogOpen?i("el-dialog",{attrs:{title:"修改",visible:r.updateGroupDialogOpen,width:"500px"},on:{"update:visible":function(t){r.updateGroupDialogOpen=t}}},[i("div",{staticClass:"formWrap"},[i("VaForm",{ref:"updateGroupForm"},[r.currEditGroup?i("form",{attrs:{id:"updateGroupForm"}},[i("div",{staticClass:"group"},[i("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"}],staticClass:"form-control",attrs:{name:"name"},domProps:{value:r.currEditGroup.name}}),i("input",{staticClass:"hide",attrs:{name:"id"},domProps:{value:r.currEditGroup.id}})])]):r._e()])],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"info"},on:{click:function(t){r.updateGroupDialogOpen=!1}}},[r._v("取消")]),i("el-button",{attrs:{type:"primary"},on:{click:r.updateGroup}},[r._v("确定")])],1)]):r._e()],1)])}var a=[];r.d(e,"a",function(){return i}),r.d(e,"b",function(){return a})},387:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t};e.addGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/digital_books/groups",t)},e.modifyGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,r=x(t,["id"]),i=n.default.compile(restUrl_publish+"/api/digital_books/:id/groups");return(0,a.request_put)(i({id:e}),r)},e.deleteGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,r=x(t,["id"]),i=n.default.compile(restUrl_publish+"/api/digital_books/groups/:id");return(0,a.request_delete)(i({id:e}),r)},e.listGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)(restUrl_publish+"/api/digital_books/groups",t)},e.moveGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return t.rel_id=t.id,delete t.id,(0,a.request_put)(restUrl_publish+"/api/groups/digital_books",t)},e.detailDigitalBook=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,r=x(t,["id"]),i=n.default.compile(restUrl_publish+"/api/digital_books/:id");return(0,a.request_get)(i({id:e}),r)},e.deleteDigitalBook=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/digital_books/delete",t)},e.add=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/digital_books",t).then(function(t){var e=t.data,r=e._id,i=e.name,a=e.abs,s=e.author,n=e.tag,o=e.type_name;return(0,k.addResListener)({res_id:r,res_type:o,res_name:i,res_exp:a,res_author:s,res_lables:[n]}),t})},e.listDigitalBook=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)(restUrl_publish+"/api/digital_books",t)},e.modify=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,r=x(t,["id"]),i=n.default.compile(restUrl_publish+"/api/digital_books/:id");return(0,a.request_put)(i({id:e}),r)},e.urgentDigitalBook=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_put)(restUrl_publish+"/api/digital_books/urgent",t)},e.issuance=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,r=(x(t,["id"]),n.default.compile(restUrl_publish+"/api/digital_books/:id/issuance"));return(0,a.request_put)(r({id:e})).then(function(t){return(0,k.suance)({id:e,info:t.data}),t})},e.removeConstitute=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_put)(restUrl_publish+"/api/digital_books/constitute",t)},e.synchronization=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,r=(x(t,["id"]),n.default.compile(restUrl_publish+"/api/digital_books/:id/sync"));return(0,a.request_get)(r({id:e}))},e.reordering=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_put)(restUrl_publish+"/api/digital_books/sort",t)},e.stick=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_put)(restUrl_publish+"/api/digital_books/top",t)},e.listAnchor=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)(restUrl_publish+"/api/nowledge_info",t)},e.delAnchor=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/nowledge_info/delete",t)},e._addBooks=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:r={},e=t.type,r=x(t,["type"]);switch(log(e,r),e){case"1":return(0,c.listBooks)(r);case"2":return(0,u.listArticle)(r);case"3":return(0,o.listPicture)(r);case"4":return(0,l.listAudio)(r);case"5":return(0,d.listVideo)(r);case"6":return(0,p.listContent)(r);case"8":return(0,m.listLibraries)(r);case"7":return(0,g.listLibraries)(r);case"9":return(0,f.debrisList)(r);case"10":return(0,v.recomList)(r);case"22":return(0,b.getResource)(r);case"19":return(0,y.getResource)(r);case"25":return listQrcodeResource(r);case"20-1":case"20-2":case"20-3":case"20-4":case"20-6":case"20-7":return(0,_.resourceList)(i({type:e},r));case"31":return(0,h.getList)(r);default:return(0,c.listBooks)(r)}},e.distribute=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,r=x(t,["id"]),i=n.default.compile(restUrl_publish+"/api/digital_books/:id/issuance");return(0,a.request_put)(i({id:e}),r).then(function(t){(0,k.suance)({id:e,info:t.data})})},e.educe=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,k.educeResListener)({res_url:(0,a.getFullPath)("/publish/books/export"+s.default.stringify(t,{addQueryPrefix:!0}))}),(0,a.request_get)("publish/books/export",t)};var a=r(7),s=C(r(10)),n=C(r(9)),o=r(407),l=r(408),u=r(451),d=r(392),c=r(394),p=r(417),f=r(452),v=r(477),h=r(395),_=(r(422),r(476)),m=r(474),g=r(475),b=r(480),y=r(453),k=r(85);function C(t){return t&&t.__esModule?t:{default:t}}function x(t,e){var r={};for(var i in t)0<=e.indexOf(i)||Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i]);return r}},392:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.add=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return log("add",t),(0,a.request_post)(restUrl_publish+"/api/videos",t).then(function(t){var e=t.data,r=e._id,i=e.name,a=e.author,s=e.abs,n=e.tag,o=e.type_name;return(0,l.addResListener)({res_id:r,res_author:a,res_name:i,res_exp:s,res_type:o,res_lables:[n]}),t})},e.modify=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,r=o(t,["id"]),i=s.default.compile(restUrl_publish+"/api/videos/:id");return(0,a.request_put)(i({id:e}),r)},e.listVideo=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)(restUrl_publish+"/api/videos",t)},e.educe=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,l.educeResListener)({res_url:(0,a.getFullPath)(restUrl_publish+"/api/videos/export"+i.default.stringify(t,{addQueryPrefix:!0}))}),(0,a.request_get)(restUrl_publish+"/api/videos/export",t)},e.putin=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/videos/import",t)},e.deleteVideo=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/videos/delete",t)},e.detailVideo=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=s.default.compile(restUrl_publish+"/api/videos/:id");return(0,a.request_get)(e(t))},e.modifyGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,r=o(t,["id"]),i=s.default.compile(restUrl_publish+"/api/videos/groups/:id");return(0,a.request_put)(i({id:e}),r)},e.deleteGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/videos/groups/delete",t)},e.addGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/videos/groups",t)},e.listGroup=function(){return(0,a.request_get)(restUrl_publish+"/api/videos/groups")},e.moveGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_put)(restUrl_publish+"/api/videos/groups",t)};var a=r(7),i=n(r(10)),s=n(r(9)),l=r(85);function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var r={};for(var i in t)0<=e.indexOf(i)||Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i]);return r}},393:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.addTheme=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/themes",t).then(function(t){var e=t.data,r=e.id,i=e.name,a=e.type_name,s=e.abs,n=e.tag;return(0,f.addResListener)({res_id:r,res_type:a,res_name:i,res_exp:s,res_lables:[n]}),t})},e.modifyTheme=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,r=_(t,["id"]),i=h.default.compile(restUrl_publish+"/api/themes/:id");return(0,a.request_put)(i({id:e}),r)},e.ListTheme=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)(restUrl_publish+"/api/themes",t)},e.del=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/themes/delete",t)},e.modifyGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,r=_(t,["id"]),i=h.default.compile(restUrl_publish+"/api/themes/groups/:id");return(0,a.request_put)(i({id:e}),r)},e.listGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)(restUrl_publish+"/api/themes/groups",t)},e.deleteGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/themes/groups/delete",t)},e.addGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/themes/groups",t)},e.moveGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_put)(restUrl_publish+"/api/themes/groups",t)},e.deleteThemeBook=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/themes/book_remove",t)},e.detailTheme=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,r=_(t,["id"]),i=h.default.compile(restUrl_publish+"/api/themes/:id");return(0,a.request_get)(i({id:e}),r)},e.audits=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_put)(restUrl_publish+"/api/themes/issuance",e).then(function(t){return(0,f.suance)({id:e.id,info:t.data}),t})},e.detailUrgent=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_put)(restUrl_publish+"/api/themes/urgent",t)},e.backups=m,e._themeAdd=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.type,r=void 0===e?"book":e,i=_(t,["type"]);{if("book"==r)return(0,s.listBooks)(i);if("audio"==r)return(0,n.listAudio)(i);if("video"==r)return(0,o.listVideo)(i);if("3d"==r)return(0,u.listContent)(i);if("ar"==r)return(0,d.listLibraries)(i);if("product"==r)return(0,c.listDigitalBook)(i);if("release"==r)return(0,p.getList)(i)}},e._themeDetail=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.type,r=void 0===e?1:e,i=t.c_id,a=_(t,["type","c_id"]);{if(1==r)return i?m(a):(0,s.detailBooks)(a);if(3==r)return(0,l.detailPicture)(a);if(4==r)return(0,n.detailAudio)(a);if(5==r)return(0,o.detailVideo)(a);if(6==r)return(0,u.detailContent)(a);if(8==r)return(0,d.detailLibraries)(a);if(10==r)return(0,c.detailDigitalBook)(a);if(13==r);else if(31==r)return}};var i,a=r(7),s=r(394),n=r(408),o=r(392),l=r(407),u=r(417),d=r(418),c=r(387),p=r(416),f=r(85),v=r(9),h=(i=v)&&i.__esModule?i:{default:i};function _(t,e){var r={};for(var i in t)0<=e.indexOf(i)||Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i]);return r}function m(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,r=_(t,["id"]),i=h.default.compile(restUrl_publish+"/api/themes/book/:id");return(0,a.request_get)(i({id:e}),r)}},394:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.modifyBooks=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,r=l(t,["id"]),i=s.default.compile(restUrl_publish+"/api/books/:id");return(0,a.request_put)(i({id:e}),r)},e.educe=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,n.educeResListener)({res_url:(0,a.getFullPath)(restUrl_publish+"/api/books/export"+i.default.stringify(t,{addQueryPrefix:!0}))}),(0,a.request_get)(restUrl_publish+"/api/books/export",t)},e.putin=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/books/import",t)},e.fabu=function(t){return(0,a.request_post)(restUrl_publish+"/api/mult_books",t)},e.getProgress=function(t){return(0,a.request_get)(restUrl_publish+"/api/mult_book/progress/"+t)},e.deleteBooks=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/books/delete",t)},e.listBooks=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)(restUrl_publish+"/api/books",t)},e.detailBooks=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,r=l(t,["id"]),i=s.default.compile(restUrl_publish+"/api/books/:id");return(0,a.request_get)(i({id:e}),r)},e.addBooks=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/books",e).then(function(t){(0,n.createProListener)({res_id:t.data.task_id,res_type:"数字图书",res_cover:e.img,res_covers:"",res_exp:e.abs,res_author:e.author,res_author_id:"",res_Interpreter:"",res_Interpreter_id:"",res_lables:"",res_currency:"",res_money:"",res_isbn:"",res_isbn_ext:"",res_publication:""})})},e.getBookCatalog=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,r=l(t,["id"]),i=s.default.compile(restUrl_publish+"/api/books/:id/catalogs");return(0,a.request_get)(i({id:e}),r)},e.modifyGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,r=l(t,["id"]),i=s.default.compile(restUrl_publish+"/api/books/groups/:id");return(0,a.request_put)(i({id:e}),r)},e.deleteGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,r=l(t,["id"]),i=s.default.compile(restUrl_publish+"/api/books/groups/:id");return(0,a.request_delete)(i({id:e}),r)},e.addGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/books/groups",t)},e.listGroup=function(){return(0,a.request_get)(restUrl_publish+"/api/books/groups")},e.moveGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_put)(restUrl_publish+"/api/groups/books",t)},e.siblingSort=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,r=l(t,["id"]),i=s.default.compile(restUrl_publish+"/api/catalogs/sort/:id");return(0,a.request_put)(i({id:e}),r)},e.moveCatalog=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=(t.id,l(t,["id"]));return(0,a.request_put)(restUrl_publish+"/api/catalogs/outline",e)},e.products=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/books/products",t)},e.fastAdd=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/comproduct/fast/add",t)},e.fastPrevew=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/audits/fast",t)},e.fastLibrary=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/databook/temp",t)},e.bookAdd=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/databook/add",t)},e.dataFast=function r(){var i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/data_fast",i).then(function(t){return 2==t.data.data?new Promise(function(t,e){setTimeout(function(){t(r(i))},2e3)}):t})};var a=r(7),s=o(r(9)),i=o(r(10)),n=r(85);r(573);function o(t){return t&&t.__esModule?t:{default:t}}function l(t,e){var r={};for(var i in t)0<=e.indexOf(i)||Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i]);return r}},395:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getList=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)(restUrl_publish+"/api/practice",t)},e.detail=function(t){var e=t.id,r=o(t,["id"]),i=n.default.compile(restUrl_publish+"/api/practice/:id");return(0,a.request_get)(i({id:e}),r)},e.del=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/practice/delete",t)},e.save=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,r=o(t,["id"]);if(e)return(0,a.request_put)(restUrl_publish+"/api/practice/"+e,r);return(0,a.request_post)(restUrl_publish+"/api/practice",r)},e.listGroup=function(){return(0,a.request_get)(restUrl_publish+"/api/practice/groups")},e.addGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/practice/groups",t)},e.modifyGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,r=o(t,["id"]),i=n.default.compile(restUrl_publish+"/api/chapters/groups/:id");return(0,a.request_put)(i({id:e}),r)},e.deleteGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,r=o(t,["id"]),i=n.default.compile(restUrl_publish+"/api/chapters/groups/:id");return(0,a.request_delete)(i({id:e}),r)},e.moveGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_put)(restUrl_publish+"/api/groups/chapters",t)};var i,a=r(7),s=r(9),n=(i=s)&&i.__esModule?i:{default:i};function o(t,e){var r={};for(var i in t)0<=e.indexOf(i)||Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i]);return r}},396:function(t,e,r){"use strict";r.r(e);var i=r(404),a=r(378);for(var s in a)"default"!==s&&function(t){r.d(e,t,function(){return a[t]})}(s);r(403);var n=r(0),o=Object(n.a)(a.default,i.a,i.b,!1,null,"cb351288",null);e.default=o.exports},397:function(t,e,r){"use strict";r.r(e);var i=r(398),a=r.n(i);for(var s in i)"default"!==s&&function(t){r.d(e,t,function(){return i[t]})}(s);e.default=a.a},398:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=c(r(5)),l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},a=c(r(84)),i=c(r(159)),s=c(r(446)),n=c(r(420)),u=d(r(432));d(r(387));function d(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function c(t){return t&&t.__esModule?t:{default:t}}function p(t){return function(){var o=t.apply(this,arguments);return new Promise(function(s,n){return function e(t,r){try{var i=o[t](r),a=i.value}catch(t){return void n(t)}if(!i.done)return Promise.resolve(a).then(function(t){e("next",t)},function(t){e("throw",t)});s(a)}("next")})}}var f="章节锚点",v="内容锚点";e.default={components:{VaForm:i.default,AnchorList:s.default,Reader:n.default},props:["type","constitute","detailData","readOnly","defaultData"],created:function(){var e=this;return p(o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.defaultData){t.next=7;break}if(e.glist=e.defaultData.knowledge,e.glist){t.next=4;break}return t.abrupt("return");case 4:e.currGroupId=e.glist[0].id,e.currGroup=e.glist[0],e.list=e.glist[0].nowledge_info;case 7:return t.prev=7,t.next=10,e.getGlist();case 10:return t.next=12,e.getProgress();case 12:t.next=16;break;case 14:t.prev=14,t.t0=t.catch(7);case 16:case"end":return t.stop()}},t,e,[[7,14]])}))()},data:function(){return{list:null,glist:null,anchorsList:[],page:null,Anchors_chapter:f,Anchors_content:v,Anchors_audio:"音频锚点",Anchors_video:"视频锚点",checkedAll:!1,currGroupId:null,currknowledgeId:null,currGroup:{},openAnchorList:!1,anchorType:f,anchorList:null,bookInfo:{value:"",lsit:[]},groupDialog:!1,knowledgeDialog:!1,addAnchorDialog:!1,readerDialog:!1,readerId:null,editGroup:{},editKnowledge:{},anchorCheckedAll:!1,mount:{number:0}}},computed:{isBook:function(){return this.anchorType==f||this.anchorType==v}},methods:{getGlist:function(){var i=this;return p(o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i.detailData.id){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,u.listGroup({id:i.detailData.id}).then(function(t){var e=t.data.findIndex(function(t){return i.currGroupId===t.id}),r=-1<e?e:0;i.glist=t.data,i.glist&&0<i.glist.length?(i.currGroupId=t.data[r].id,i.currGroup=t.data[r],i.anchorType=f,i.getList()):(i.list=i.glist=i.currGroupId=null,i.currGroup={})}).catch(function(t){var e=t.payload;for(var r in e.messages){i.$message.error(e.messages[r]);break}});case 4:case"end":return t.stop()}},t,i)}))()},getList:function(t,e,r){var i=0<arguments.length&&void 0!==t?t:1,a=this,s=1<arguments.length&&void 0!==e?e:10,n=r;return p(o.default.mark(function t(){var e;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a.anchorCheckedAll=!1,t.next=3,u.listKnowledge(l({pageNum:i,pageOffset:s},n,{id:a.detailData.id,group_id:a.currGroupId})).then(function(t){a.list=t.data,a.page=t.page}).catch(function(t){var e=t.payload;for(var r in e.messages){a.$message.error(e.messages[r]);break}});case 3:if(e=a.$refs.mainListWrap){t.next=6;break}return t.abrupt("return");case 6:e.querySelectorAll("input[type='checkbox']").forEach(function(t){t.checked=!1});case 8:case"end":return t.stop()}},t,a)}))()},groupDel:function(e){var r=this;this.$confirm("是否删除该知识结构?").then(function(t){u.deleteGroup({id:[e.id],type:r.detailData.type_number,pid:r.detailData.id}).then(function(t){r.getGlist(),r.$emit("saveok")}).catch(function(t){for(var e in payload.messages){r.$message.error(payload.messages[e]);break}})})},groupEdit:function(t){if(!this.detailData.id)return this.$message.error("请保存产品信息后再做添加");this.editGroup=t,this.groupDialog=!0},KnowledgeEdit:function(t){this.editKnowledge=t,this.knowledgeDialog=!0},groupCommit:function(){var i=this;return p(o.default.mark(function t(){var e,r;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i.$refs.groupFormVa.valiAll()){t.next=2;break}return t.abrupt("return");case 2:if(e=(0,a.default)(i.$refs.groupForm,{hash:!0}),t.prev=3,e.id){t.next=10;break}return e.id=i.detailData.id,t.next=8,u.addGroup(l({},e,{type:i.detailData.type_number,pid:i.detailData.id})).then(function(t){i.groupDialog=!1,i.getGlist(),i.$emit("saveok")});case 8:t.next=12;break;case 10:return t.next=12,u.modifyGroup(l({},e,{type:i.detailData.type_number,pid:i.detailData.id})).then(function(t){i.groupDialog=!1,i.getGlist(),i.$emit("saveok")});case 12:t.next=18;break;case 14:t.prev=14,t.t0=t.catch(3),r=t.t0.message,i.$message.error(r);case 18:case"end":return t.stop()}},t,i,[[3,14]])}))()},guaZai:function(){var i=this;return p(o.default.mark(function t(){var e,r;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.mount({id:i.detailData.id});case 3:return t.next=5,i.getProgress();case 5:t.next=17;break;case 7:t.prev=7,t.t0=t.catch(0),e=t.t0.payload,t.t1=o.default.keys(e.messages);case 11:if((t.t2=t.t1()).done){t.next=17;break}return r=t.t2.value,i.$message.error(e.messages[r]),t.abrupt("break",17);case 17:case"end":return t.stop()}},t,i,[[0,7]])}))()},getProgress:function(){var e=this;return p(o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.mountSchedule({id:e.detailData.id},function(t){"100"==t.data.number&&e.getList(),e.mount=l({},t.data,{number:parseInt(t.data.number)})}).then(function(t){e.mount=t.data});case 2:case"end":return t.stop()}},t,e)}))()},KnowledgeCommit:function(){var e=this;if(this.$refs.KnowledgeFormVa.valiAll()){var t=(0,a.default)(this.$refs.KnowledgeForm,{hash:!0});try{t.id?u.modifyNowledges(l({},t,{type:this.detailData.type_number,pid:this.detailData.id})).then(function(t){e.knowledgeDialog=!1,e.getList(),e.$emit("saveok")}):(t.t_id=this.detailData.id,t.group_id=this.currGroupId,u.addNowledges(l({},t,{type:this.detailData.type_number,pid:this.detailData.id})).then(function(t){e.knowledgeDialog=!1,e.getGlist(),e.getList(),e.$emit("saveok")}))}catch(t){var r=t.payload;for(var i in r.messages){this.$message.error(r.messages[i]);break}}}},toTop:function(){var i=this,e=[];if(this.$refs.mainListWrap.querySelectorAll("[name='ids']:checked").forEach(function(t){e.push(t.value)}),!e.length)return this.$message.error("请确认你要置顶的内容！");u.upNowledges({id:e}).then(function(t){i.getList()}).catch(function(t){var e=t.payload;for(var r in e.messages){i.$message.error(e.messages[r]);break}})},knowDel:function(t){var i=this,e=0<arguments.length&&void 0!==t?t:[],r=this.$refs.mainListWrap.querySelectorAll("[name='ids']:checked");if(e.length||r.forEach(function(t){e.push(t.value)}),!e.length)return this.$message.error("请确认你要删除的内容！");this.$confirm("是否删除选中知识点?").then(function(t){u.deleteNowledges({id:e,type:i.detailData.type_number,pid:i.detailData.id}).then(function(t){i.getGlist(),i.$emit("saveok")}).catch(function(t){var e=t.payload;for(var r in e.messages){i.$message.error(e.messages[r]);break}})})},removeAnchor:function(t){var i=this,e=0<arguments.length&&void 0!==t?t:[],r=this.$refs.anchorList.querySelectorAll("[name='ids']:checked");if(e.length||r.forEach(function(t){e.push(t.value)}),!e.length)return this.$message.error("请确认你要删除的锚点！");this.$confirm("是否删除选中锚点?").then(function(t){u.delAnchor({id:e,type:i.detailData.type_number,pid:i.detailData.id}).then(function(t){i.getAnchorList(),i.$emit("saveok")}).catch(function(t){var e=t.payload;for(var r in e.messages){i.$message.error(e.messages[r]);break}})})},handleSizeChange:function(t){this.getList(1,t)},handleCurrentChange:function(t){this.getList(t,this.page.offset)},changeGroup:function(e){if(this.checkedAll=!1,this.anchorCheckedAll=!1,this.currGroupId=e.id,this.currGroup=e,this.openAnchorList=!1,this.defaultData){var t=this.glist.findIndex(function(t){return t.id===e.id});this.list=this.glist[t].nowledge_info}else this.getList()},getbookList:function(){var i=this;return p(o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.listNowledges({id:i.detailData.id}).then(function(t){i.bookInfo.list=t.data}).catch(function(t){var e=t.payload;for(var r in e.messages){i.$message.error(e.messages[r]);break}});case 2:case"end":return t.stop()}},t,i)}))()},getBtn:function(){var e,i=this;u.nowledge_btn({id:this.detailData.id}).then((e=p(o.default.mark(function t(e){var r;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i.anchorsList=e.data,t.t0=o.default.keys(i.anchorsList);case 2:if((t.t1=t.t0()).done){t.next=9;break}if(r=t.t1.value,i.anchorsList[r])return i.anchorType=i["Anchors_"+r],t.abrupt("break",9);t.next=7;break;case 7:t.next=2;break;case 9:return t.next=11,i.getbookList();case 11:return t.next=13,i.getAnchorList();case 13:i.openAnchorList=!0;case 14:case"end":return t.stop()}},t,i)})),function(t){return e.apply(this,arguments)}))},addAnchor:function(){this.addAnchorDialog=!0},setAnchor:function(e){var r=this;return p(o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r.currknowledgeId=e,r.anchorList=[],t.next=4,r.getBtn();case 4:case"end":return t.stop()}},t,r)}))()},changeAnchorType:function(t){this.anchorType=this["Anchors_"+t],this.anchorList=[],this.getAnchorList()},getAnchorList:function(){var e=this;u.nowledge_info({type:this.anchorType,id:this.currknowledgeId}).then(function(t){e.anchorList=t.data}),this.getList()},bookinfoChange:function(t){if(this.anchorType==v)return this.readerId=t,void(this.readerDialog=!0);this.addAnchorDialog=!0},bookinfoBlur:function(t){this.bookInfo.value&&!t&&this.anchorType==f?this.addAnchorDialog=!0:this.bookInfo.value&&!t&&this.anchorType==v&&(this.readerId||(this.readerId=this.bookInfo.value),this.readerDialog=!0)},anchorListCancle:function(){this.addAnchorDialog=!1,this.getAnchorList(),this.$emit("saveok")},addAnchorSuccess:function(){this.$message.success("添加锚点成功!"),this.getAnchorList()},isShowAnchors:function(t){return this.anchorType==this["Anchors_"+t]},getAnchorsText:function(t){return this["Anchors_"+t]},checkedAllBtn:function(t,e){this[e]=t.target.checked}}}},399:function(t,e,r){"use strict";r.r(e);var i=r(400),a=r.n(i);for(var s in i)"default"!==s&&function(t){r.d(e,t,function(){return i[t]})}(s);e.default=a.a},400:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(r(5)),o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},a=n(r(84)),s=n(r(159)),l=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}}(r(432));function n(t){return t&&t.__esModule?t:{default:t}}e.default={components:{VaForm:s.default},props:["type","bookInfo","themeId","currknowledgeId","detailData"],created:function(){var e=this;return function(t){return function(){var o=t.apply(this,arguments);return new Promise(function(s,n){return function e(t,r){try{var i=o[t](r),a=i.value}catch(t){return void n(t)}if(!i.done)return Promise.resolve(a).then(function(t){e("next",t)},function(t){e("throw",t)});s(a)}("next")})}}(i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.getList();case 1:case"end":return t.stop()}},t,e)}))()},data:function(){return{list:null,page:null,query:null,obj:{}}},computed:{},methods:{getList:function(t,e,r){var i=0<arguments.length&&void 0!==t?t:this.page&&this.page.num||1,a=this,s=1<arguments.length&&void 0!==e?e:this.page&&this.page.offset||10,n=r;return l.NowledgesList(o({pageNum:i,pageOffset:s},n,{id:"章节锚点"==this.type?this.bookInfo.value:this.themeId,type:this.type})).then(function(t){a.list=t.data,a.page=t.page})},checkedAll:function(e){var r=this;e.target.checked?this.list.forEach(function(t){r.obj[t.id]=t}):this.list.forEach(function(t){r.obj[t.id]=null}),this.$refs.ids.forEach(function(t){t.checked=e.target.checked}),log(this.obj)},choose:function(t,e){t.target.checked?this.obj[e.id]=e:this.obj[e.id]=null},addAnchorCommit:function(){var i=this,t=[];for(var e in this.obj)this.obj.hasOwnProperty(e)&&this.obj[e]&&t.push(this.obj[e]);l.addAnchor({n_id:this.currknowledgeId,b_id:"章节锚点"==this.type?t.map(function(t){return t.id}):"",c_id:"章节锚点"==this.type?[this.bookInfo.value]:t.map(function(t){return t.id}),type:this.type,name:t.map(function(t){return t.chapter_name||t.name}),ptype:this.detailData.type_number,pid:this.detailData.id}).then(function(t){i.$message.success("添加成功"),i.$emit("anchorListCancle")}).catch(function(t){var e=t.payload;for(var r in e.messages){i.$message.error(e.messages[r]);break}})},handleSizeChange:function(t){this.getList(1,t)},handleCurrentChange:function(t){this.getList(t,this.page.offset)},seareHandeler:function(){this.query=(0,a.default)(this.$refs.mainForm,{hash:!0}),log(this.query),this.getList(1,10,this.query)}},filters:{formatHolder:function(t){return t.substr(0,2)+"名称"}}}},401:function(t,e,r){},402:function(t,e,r){},403:function(t,e,r){"use strict";var i=r(380);r.n(i).a},404:function(t,e,r){"use strict";function i(){var r=this,t=r.$createElement,i=r._self._c||t;return i("div",[i("el-dialog",{attrs:{center:!1,visible:r.coverDialog,top:"50px",width:"500px","show-close":!1,title:"x-read系统中已有该产品，选择你的操作"}},[i("div",{staticClass:"coverContent"},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){r.choiceDialog=!0}}},[r._v("覆盖原有产品")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return r.dispense()}}},[r._v("创建新的产品版本")])],1),i("div",{staticClass:"footer dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"info"},on:{click:function(t){r.coverDialog=!1}}},[r._v("取消")])],1)]),r.choiceDialog?i("el-dialog",{attrs:{center:!1,visible:r.choiceDialog,top:"50px",width:"500px","show-close":!1,title:"选择版本号"}},[i("div",{staticClass:"coverContent"},[i("el-radio-group",{model:{value:r.currentVersion,callback:function(t){r.currentVersion=t},expression:"currentVersion"}},r._l(r.currentItem.version,function(t){return i("el-radio",{key:t.xread_book_id,attrs:{label:t.xread_book_id}},[r._v(r._s(t.version_id))])}),1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:r.coverDispense}},[r._v("确定")]),i("el-button",{attrs:{type:"info"},on:{click:function(t){r.choiceDialog=!1}}},[r._v("取消")])],1)]):r._e(),i("el-dialog",{attrs:{center:!1,visible:r.publishDialog,top:"50px",width:"1000px","show-close":!1}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"el-icon-close",on:{click:r.colse}}),i("el-tabs",{attrs:{value:"ff"}},[i("el-tab-pane",{attrs:{label:"分发",name:"ff"}})],1)],1),i("ul",{ref:"dispense",staticClass:"content modular"},r._l(r.list,function(e){return i("li",[i("div",{staticClass:"icon"},[i("div",{class:r.getStyle(e.type)}),i("span",{domProps:{textContent:r._s(e.name)}})]),i("ul",{staticClass:"defect"},[e.release_msg&&!e.release_msg.length?i("li",{staticClass:"pass"},[r._v("可正常分发")]):r._e(),e.release_msg&&e.release_msg.length?i("li",{domProps:{textContent:r._s(r.getdefect(e))}}):r._e()]),i("el-button",{attrs:{type:!r.is_release||e.is_release?"primary":"info",size:"mini",plain:""},domProps:{textContent:r._s(r.getBtnName(e))},on:{click:function(t){r.is_release&&!e.is_release||r.push(e)}}})],1)}),0),i("div",{staticClass:"footer dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"info"},on:{click:r.colse}},[r._v("取消")])],1)])],1)}var a=[];r.d(e,"a",function(){return i}),r.d(e,"b",function(){return a})},407:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.addPicture=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/pictures",t).then(function(t){var e=t.data,r=e._id,i=e.name,a=e.abs,s=e.author,n=e.tag,o=e.type_name;return(0,l.addResListener)({res_id:r,res_type:o,res_name:i,res_exp:a,res_author:s,res_lables:[n]}),t})},e.modifyPicture=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,r=o(t,["id"]),i=s.default.compile(restUrl_publish+"/api/pictures/:id");return(0,a.request_put)(i({id:e}),r)},e.listPicture=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)(restUrl_publish+"/api/pictures",t)},e.educe=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,l.educeResListener)({res_url:(0,a.getFullPath)(restUrl_publish+"/api/pictures/export"+i.default.stringify(t,{addQueryPrefix:!0}))}),(0,a.request_get)(restUrl_publish+"/api/pictures/export",t)},e.putin=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/pictures/import",t)},e.deletePicture=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/pictures/delete",t)},e.detailPicture=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=s.default.compile(restUrl_publish+"/api/pictures/:id");return(0,a.request_get)(e(t))},e.modifyGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,r=o(t,["id"]),i=s.default.compile(restUrl_publish+"/api/pictures/groups/:id");return(0,a.request_put)(i({id:e}),r)},e.deleteGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/pictures/groups/delete",t)},e.addGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/pictures/groups",t)},e.listGroup=function(){return(0,a.request_get)(restUrl_publish+"/api/pictures/groups")},e.moveGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_put)(restUrl_publish+"/api/pictures/groups",t)};var a=r(7),i=n(r(10)),s=n(r(9)),l=r(85);function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var r={};for(var i in t)0<=e.indexOf(i)||Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i]);return r}},408:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.add=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/audios",t).then(function(t){var e=t.data,r=e._id,i=e.name,a=e.abs,s=e.author,n=e.tag,o=e.type_name;return(0,l.addResListener)({res_id:r,res_type:o,res_name:i,res_exp:a,res_author:s,res_lables:[n]}),t})},e.modify=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,r=o(t,["id"]),i=s.default.compile(restUrl_publish+"/api/audios/:id");return(0,a.request_put)(i({id:e}),r)},e.listAudio=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)(restUrl_publish+"/api/audios",t)},e.educe=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,l.educeResListener)({res_url:(0,a.getFullPath)(restUrl_publish+"/api/audios/export"+i.default.stringify(t,{addQueryPrefix:!0}))}),(0,a.request_get)(restUrl_publish+"/api/audios/export",t)},e.putin=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/audios/import",t)},e.deleteAudio=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/audios/delete",t)},e.detailAudio=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=s.default.compile(restUrl_publish+"/api/audios/:id");return(0,a.request_get)(e(t),t)},e.modifyGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,r=o(t,["id"]),i=s.default.compile(restUrl_publish+"/api/audios/groups/:id");return(0,a.request_put)(i({id:e}),r)},e.deleteGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/audios/groups/delete",t)},e.addGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/audios/groups",t)},e.listGroup=function(){return(0,a.request_get)(restUrl_publish+"/api/audios/groups")},e.moveGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_put)(restUrl_publish+"/api/audios/groups",t)};var a=r(7),i=n(r(10)),s=n(r(9)),l=r(85);function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var r={};for(var i in t)0<=e.indexOf(i)||Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i]);return r}},415:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getList=function(t){var e=t.type,r=t.id,i=t.resource_type;{if("book"==e)return l({id:r});if("video"==e)return d({id:r});if("resource"==e)return f({id:r,resource_type:i})}},e.del=function(t){var e=t.type,r=o(t,["type"]);{if("book"==e)return u(r);if("video"==e)return p(r);if("resource"==e)return h(r);if("audio"==e)return _(r)}},e.add=function(t){var e=t.type,r=o(t,["type"]);{if("book"==e)return u(r);if("video"==e)return c(r);if("resource"==e)return v(r)}},e.check=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=n.default.compile(restUrl_publish+"/api/components_paper/:id/check");return(0,a.request_get)(e(t))},e.bookList=l,e.bookInfo=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=n.default.compile(restUrl_publish+"/api/components_paper/:id");return(0,a.request_get)(e(t))},e.bookDel=u,e.bookSave=function(t){var e=t.id,r=o(t,["id"]);if(e){var i=n.default.compile(restUrl_publish+"/api/components_paper/:id");return(0,a.request_put)(i({id:e}),r)}return(0,a.request_post)(restUrl_publish+"/api/components_paper",r)},e.videoList=d,e.videoAdd=c,e.videoDel=p,e.resourceList=f,e.resourceAdd=v,e.resourceDel=h,e.groupList=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=n.default.compile(restUrl_publish+"/api/components_groups/:id/list");return(0,a.request_get)(e(t),t)},e.groupSave=function(t){var e=t.id,r=o(t,["id"]);if(e){var i=n.default.compile(restUrl_publish+"/api/components_groups/:id");return(0,a.request_put)(i({id:e}),r)}return(0,a.request_post)(restUrl_publish+"/api/components_groups",r)},e.groupDetail=function(t){var e=t.id,r=n.default.compile(restUrl_publish+"/api/components_groups/:id");return(0,a.request_get)(r({id:e}))},e.audioDel=_,e.saveEBook=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(t.current_id){var e=n.default.compile(restUrl_publish+"/api/components_ebooks/:id");return(0,a.request_put)(e({id:t.current_id}),t)}return(0,a.request_post)(restUrl_publish+"/api/components_ebooks",t)},e.getEBook=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=n.default.compile(restUrl_publish+"/api/components_ebooks/:id");return(0,a.request_get)(e(t))};var i,a=r(7),s=r(9),n=(i=s)&&i.__esModule?i:{default:i};function o(t,e){var r={};for(var i in t)0<=e.indexOf(i)||Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i]);return r}function l(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=n.default.compile(restUrl_publish+"/api/components_paper/:id/list");return(0,a.request_get)(e(t))}function u(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=n.default.compile(restUrl_publish+"/api/components_paper/:id");return(0,a.request_delete)(e(t))}function d(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=n.default.compile(restUrl_publish+"/api/components/:id/video");return(0,a.request_get)(e(t))}function c(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/components/video",t)}function p(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=n.default.compile(restUrl_publish+"/api/components/:id/video");return(0,a.request_delete)(e({id:t.constitute_id}))}function f(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=n.default.compile(restUrl_publish+"/api/components/:id/resource");return(0,a.request_get)(e(t),t)}function v(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/components/resource",t)}function h(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=n.default.compile(restUrl_publish+"/api/components/:id/resource");return(0,a.request_delete)(e({id:t.constitute_id}))}function _(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=n.default.compile(restUrl_publish+"/api/components_groups/:id");return(0,a.request_delete)(e(t),t)}},416:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getList=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)(restUrl_publish+"/api/comproduct/list",t)},e.getDetail=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)(restUrl_publish+"/api/comproduct",t)},e.del=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/comproduct/delete",t)},e.urgentDigitalBook=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_put)(restUrl_publish+"/api/comproduct/urgent",t)},e.audits=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_put)(restUrl_publish+"/api/comproduct/audits",t)},e.issuance=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,r=function(t,e){var r={};for(var i in t)0<=e.indexOf(i)||Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i]);return r}(t,["id"]),i=n.default.compile(restUrl_publish+"/api/comproduct/:id/issuance");return(0,a.request_put)(i({id:e}),r).then(function(t){return(0,o.suance)({id:e,info:t.data}),t})},e.addGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/comproduct/groups",t)},e.modifyGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=n.default.compile(restUrl_publish+"/api/comproduct/groups/:id");return(0,a.request_put)(e(t),t)},e.deleteGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/themes/groups/delete",t)},e.listGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)(restUrl_publish+"/api/comproduct/groups",t)},e.moveGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return t.rel_id=t.id,delete t.id,(0,a.request_put)(restUrl_publish+"/api/groups/comproduct",t)};var i,a=r(7),s=r(9),n=(i=s)&&i.__esModule?i:{default:i},o=r(85)},417:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.modify=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,r=o(t,["id"]),i=s.default.compile(restUrl_publish+"/api/contents/:id");return(0,a.request_put)(i({id:e}),r)},e.listContent=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)(restUrl_publish+"/api/contents",t)},e.educe=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,l.educeResListener)({res_url:(0,a.getFullPath)(restUrl_publish+"/api/contents/export"+i.default.stringify(t,{addQueryPrefix:!0}))}),(0,a.request_get)(restUrl_publish+"/api/contents/export",t)},e.putin=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/contents/import",t)},e.deleteContent=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/contents/delete",t)},e.detailContent=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=s.default.compile(restUrl_publish+"/api/contents/:id");return(0,a.request_get)(e(t))},e.add=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/contents",t).then(function(t){var e=t.data,r=e._id,i=e.name,a=e.abs,s=e.author,n=e.tag,o=e.type_name;return(0,l.addResListener)({res_id:r,res_type:o,res_name:i,res_author:s,res_exp:a,res_lables:[n]}),t})},e.modifyGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,r=o(t,["id"]),i=s.default.compile(restUrl_publish+"/api/contents/groups/:id");return(0,a.request_put)(i({id:e}),r)},e.listGroup=function(){return(0,a.request_get)(restUrl_publish+"/api/contents/groups")},e.deleteGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/contents/groups/delete",t)},e.addGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/contents/groups",t)},e.moveGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_put)(restUrl_publish+"/api/contents/groups",t)};var a=r(7),i=n(r(10)),s=n(r(9)),l=r(85);function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var r={};for(var i in t)0<=e.indexOf(i)||Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i]);return r}},418:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.add=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/librariess",t).then(function(t){var e=t.data,r=e._id,i=e.name,a=e.abs,s=e.author,n=e.tag,o=e.type_name;return(0,l.addResListener)({res_id:r,res_type:o,res_name:i,res_exp:a,res_author:s,res_lables:[n]}),t})},e.modify=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,r=o(t,["id"]),i=s.default.compile(restUrl_publish+"/api/librariess/:id");return(0,a.request_put)(i({id:e}),r)},e.listLibraries=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)(restUrl_publish+"/api/librariess",t)},e.educe=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,l.educeResListener)({res_url:(0,a.getFullPath)(restUrl_publish+"/api/librariess/export"+i.default.stringify(t,{addQueryPrefix:!0}))}),(0,a.request_get)(restUrl_publish+"/api/librariess/export",t)},e.putin=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/librariess/import",t)},e.deleteLibraries=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/librariess/delete",t)},e.detailLibraries=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=s.default.compile(restUrl_publish+"/api/librariess/:id");return(0,a.request_get)(e(t))},e.modifyGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,r=o(t,["id"]),i=s.default.compile(restUrl_publish+"/api/librariess/groups/:id");return(0,a.request_put)(i({id:e}),r)},e.deleteGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/librariess/groups/delete",t)},e.addGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/librariess/groups",t)},e.listGroup=function(){return(0,a.request_get)(restUrl_publish+"/api/librariess/groups")},e.moveGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_put)(restUrl_publish+"/api/librariess/groups",t)};var a=r(7),i=n(r(10)),s=n(r(9)),l=r(85);function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var r={};for(var i in t)0<=e.indexOf(i)||Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i]);return r}},422:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getList=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)(restUrl_publish+"/api/qrcode",t)},e.urgentDigital=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_put)(restUrl_publish+"/api/qrcode/urgent",t)},e.audits=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_put)(restUrl_publish+"/api/qrcode/audits",t)},e.save=function(t){var e=t.id,r=o(t,["id"]);if(e){var i=n.default.compile(restUrl_publish+"/api/qrcode/:id");return(0,a.request_put)(i({id:e}),r)}return(0,a.request_post)(restUrl_publish+"/api/qrcode",r)},e.detail=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=n.default.compile(restUrl_publish+"/api/qrcode/:id");return(0,a.request_get)(e(t),t)},e.del=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/qrcode/delete",t)},e.modifyGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,r=o(t,["id"]),i=n.default.compile(restUrl_publish+"/api/qrcode/groups/:id");return(0,a.request_put)(i({id:e}),r)},e.listGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)(restUrl_publish+"/api/qrcode/groups",t)},e.addGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/qrcode/groups",t)},e.deleteGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,r=o(t,["id"]),i=n.default.compile(restUrl_publish+"/api/qrcode/groups/:id");return(0,a.request_delete)(i({id:e}),r)},e.moveGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return t.rel_id=t.id,delete t.id,(0,a.request_put)(restUrl_publish+"/api/groups/qrcode",t)};var i,a=r(7),s=r(9),n=(i=s)&&i.__esModule?i:{default:i};function o(t,e){var r={};for(var i in t)0<=e.indexOf(i)||Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i]);return r}},425:function(t,e,r){"use strict";r.r(e);var i=r(449),a=r(397);for(var s in a)"default"!==s&&function(t){r.d(e,t,function(){return a[t]})}(s);r(448);var n=r(0),o=Object(n.a)(a.default,i.a,i.b,!1,null,"4e328e7a",null);e.default=o.exports},426:function(t,e,r){"use strict";r.r(e);var i=r(427),a=r.n(i);for(var s in i)"default"!==s&&function(t){r.d(e,t,function(){return i[t]})}(s);e.default=a.a},427:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["infoData","mediaType","infoDialog"],data:function(){return{metadata:this.infoData.attributes||[]}},computed:{hassVideo:function(){return 6==this.infoData.type||5==this.infoData.type||8==this.infoData.type}},methods:{detailType:function(){return this.infoData.img_status}},created:function(){}}},428:function(t,e,r){},429:function(t,e,r){"use strict";r.r(e);var i=r(430),a=r.n(i);for(var s in i)"default"!==s&&function(t){r.d(e,t,function(){return i[t]})}(s);e.default=a.a},430:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,a,s,n,o=r(84),l=((i=o)&&i.__esModule,function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}}(r(415)));e.default={props:["dataType","isShow","detailData","defaultList","isLabelHide","onlyShow"],data:function(){return{services:l,type:"1",list:[]}},created:function(){this.defaultList?this.list=this.defaultList:this.getList(this.dataType)},computed:{},methods:(a={handleClick:function(){},getList:function(t){var e=this;this.detailData&&this.detailData.id&&this.services.getList({type:t,id:this.detailData.id,resource_type:this.type}).then(function(t){e.list=t.data})}},s="handleClick",n=function(t){log(t)},s in a?Object.defineProperty(a,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[s]=n,a),watch:{defaultList:function(){this.list=this.defaultList},type:function(t){this.getList(this.dataType)}}}},431:function(t,e,r){},435:function(t,e,r){"use strict";r.r(e);var i=r(559),a=r(429);for(var s in a)"default"!==s&&function(t){r.d(e,t,function(){return a[t]})}(s);r(515);var n=r(0),o=Object(n.a)(a.default,i.a,i.b,!1,null,"c6b023a6",null);e.default=o.exports},439:function(t,e,r){"use strict";r.r(e);var i=r(440),a=r.n(i);for(var s in i)"default"!==s&&function(t){r.d(e,t,function(){return i[t]})}(s);e.default=a.a},440:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},s=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}}(r(415)),n=r(435),o=(i=n)&&i.__esModule?i:{default:i};e.default={components:{Tab:o.default},props:{groupDialog:{type:Boolean,default:!1},detailData:Object,item:{type:Object,default:{}},isMedia:{type:Number,default:1},onlyShow:Boolean,defaultData:Object},data:function(){return{information:{},list:[],addMediaType:"4"}},created:function(){Object.entries(this.item).length&&this.defaultData,this.information=this.item,this.list=this.item.children||[],2==this.isMedia&&(this.addMediaType="5")},computed:{setTitle:function(){return Object.entries(this.item).length?this.item.name||"修改组":"新增组"}},methods:{getInfo:function(){var i=this;s.groupDetail({id:this.item.id,type:this.isMedia}).then(function(t){i.information=t.data,i.list=t.data.constitute}).catch(function(t){var e=t.payload;for(var r in e.messages){i.$message.error(e.messages[r]);break}})},update:function(t){this.list=t},colse:function(){this.$emit("update:groupDialog",!1)},save:function(){var i=this;this.$refs.detailForm.valiAll()&&s.groupSave(a({id:this.item?this.item.id:""},this.information,{product_id:this.detailData.id,type:this.isMedia,constitute:this.list})).then(function(t){log(t),i.$message.success("保存成功"),i.$emit("save"),i.colse()}).catch(function(t){var e=t.payload;for(var r in e.messages){i.$message.error(e.messages[r]);break}})},del:function(e){var t=this.list.findIndex(function(t){return t.id===e.id});-1<t&&this.list.splice(t,1)}}}},441:function(t,e,r){},442:function(t,e,r){"use strict";r.r(e);var i=r(443),a=r.n(i);for(var s in i)"default"!==s&&function(t){r.d(e,t,function(){return i[t]})}(s);e.default=a.a},443:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}}(r(415));e.default={props:{detailData:Object,media:{type:Number,default:1},readOnly:{type:Boolean,default:!1},defaultData:Array},data:function(){return{audioList:[]}},created:function(){this.detailData&&this.detailData.id&&this.getAudio(),this.defaultData&&(this.audioList=this.defaultData)},computed:{},methods:{getAudio:function(){var e=this;n.groupList({id:this.detailData.id,type:this.media}).then(function(t){e.audioList=t.data})},del:function(t,e){var r=this,i=null,a=null;"object"==s(t.children)?i=t.id:(i=e.parent.data.id,a=t.id),log(i),n.audioDel({id:i,resource_id:a,product_id:this.detailData.id}).then(function(t){r.getAudio()})}}}},444:function(t,e,r){},446:function(t,e,r){"use strict";r.r(e);var i=r(450),a=r(399);for(var s in a)"default"!==s&&function(t){r.d(e,t,function(){return a[t]})}(s);r(447);var n=r(0),o=Object(n.a)(a.default,i.a,i.b,!1,null,"2628d7d4",null);e.default=o.exports},447:function(t,e,r){"use strict";var i=r(401);r.n(i).a},448:function(t,e,r){"use strict";var i=r(402);r.n(i).a},449:function(t,e,r){"use strict";function i(){var r=this,t=r.$createElement,i=r._self._c||t;return i("div",{staticClass:"div"},[r.readerDialog?i("Reader",{attrs:{readerDialog:r.readerDialog,currId:r.currknowledgeId,readerId:r.readerId,detailData:r.detailData,version:"production",markBtn:"锚点"},on:{"update:readerDialog":function(t){r.readerDialog=t},"update:reader-dialog":function(t){r.readerDialog=t},addAnchorSuccess:r.addAnchorSuccess}}):r._e(),i("div",{staticClass:"dialogs"},[i("el-dialog",{attrs:{center:!1,visible:r.groupDialog,"close-on-click-modal":!1,top:"50px",width:"500px","append-to-body":""},on:{"update:visible":function(t){r.groupDialog=t}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("el-tabs",{attrs:{value:"detail"}},[i("el-tab-pane",{attrs:{label:"知识点结构",name:"detail"}})],1)],1),i("VaForm",{ref:"groupFormVa"},[i("form",{ref:"groupForm"},[i("input",{staticClass:"hide",attrs:{name:"id"},domProps:{value:r.editGroup.id}}),r.groupDialog?i("div",{staticClass:"group"},[i("div",{staticClass:"label"},[r._v("名称:")]),i("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"}],staticClass:"form-control",attrs:{name:"name",type:"text"},domProps:{value:r.editGroup.name}})]):r._e(),i("div",{staticClass:"btns"},[i("el-button",{attrs:{size:"mediu",type:"primary"},on:{click:r.groupCommit}},[r._v("确定")]),i("el-button",{attrs:{size:"mediu",type:"info"},on:{click:function(t){r.groupDialog=!1}}},[r._v("取消")])],1)])])],1),i("el-dialog",{attrs:{center:!1,visible:r.knowledgeDialog,"close-on-click-modal":!1,top:"50px",width:"500px","append-to-body":""},on:{"update:visible":function(t){r.knowledgeDialog=t}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("el-tabs",{attrs:{value:"detail"}},[i("el-tab-pane",{attrs:{label:"知识点",name:"detail"}})],1)],1),i("VaForm",{ref:"KnowledgeFormVa"},[i("form",{ref:"KnowledgeForm"},[i("input",{staticClass:"hide",attrs:{name:"id"},domProps:{value:r.editKnowledge.id}}),r.knowledgeDialog?i("div",{staticClass:"group"},[i("div",{staticClass:"label"},[r._v("名称:")]),i("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"}],staticClass:"form-control",attrs:{name:"name",type:"text"},domProps:{value:r.editKnowledge.name}})]):r._e(),i("div",{staticClass:"btns"},[i("el-button",{attrs:{size:"mediu",type:"primary"},on:{click:r.KnowledgeCommit}},[r._v("确定")]),i("el-button",{attrs:{size:"mediu",type:"info"},on:{click:function(t){r.knowledgeDialog=!1}}},[r._v("取消")])],1)])])],1),i("el-dialog",{attrs:{center:!1,visible:r.addAnchorDialog,"close-on-click-modal":!1,top:"50px",width:"80%","append-to-body":"",title:"锚点添加"},on:{"update:visible":function(t){r.addAnchorDialog=t}}},[r.addAnchorDialog?i("AnchorList",{attrs:{type:r.anchorType,bookInfo:r.bookInfo,themeId:r.detailData.id,currknowledgeId:r.currknowledgeId,detailData:r.detailData},on:{anchorListCancle:r.anchorListCancle}}):r._e()],1)],1),i("div",{staticClass:"topWrap"},[r.mount&&0<r.mount.number&&100!=r.mount.number&&!r.readOnly?i("div",{staticClass:"mount"},[i("el-progress",{staticClass:"mountProgress",attrs:{"text-inside":!0,"stroke-width":18,percentage:r.mount.number}}),100<=r.mount.number?i("span",[r._v("挂载完成")]):i("span",[r._v('正在挂载"'+r._s(r.mount.name)+'"')])],1):r._e(),i("div",{staticClass:"btns"},[r.readOnly?r._e():i("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return r.groupEdit({})}}},[r._v("新增知识结构")]),r.currGroupId&&!r.readOnly?i("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:r.guaZai}},[r._v("一键挂载")]):r._e()],1)]),r.currGroupId?i("div",{staticClass:"content clearfix"},[i("div",{staticClass:"left"},[i("ul",r._l(r.glist,function(e){return i("div",{staticClass:"li",class:{currGroup:e.id==r.currGroupId},on:{click:function(t){return r.changeGroup(e)}}},[i("span",{staticClass:"name",attrs:{title:e.name+"(100)"},domProps:{textContent:r._s(e.name+"("+e.num+")")}}),r.readOnly?r._e():i("div",{staticClass:"btns"},[i("Icon",{attrs:{type:"icon-menu-publish"},on:{click:function(t){return t.stopPropagation(),r.groupEdit(e)}}}),i("Icon",{attrs:{type:"el-icon-delete"},on:{click:function(t){return t.stopPropagation(),r.groupDel(e)}}})],1)])}),0)]),i("div",{staticClass:"tableWrap"},[i("div",{staticClass:"nav clearfix"},[i("div",{staticClass:"name",domProps:{textContent:r._s(r.currGroup.name)}}),r.openAnchorList?i("div",{staticClass:"btns"},[i("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(t){r.openAnchorList=!1}}},[r._v("返回")]),r.isBook?r._e():i("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:r.addAnchor}},[r._v("增加锚点")]),!r.bookInfo||r.anchorType!=r.Anchors_chapter&&r.anchorType!=r.Anchors_content?r._e():i("el-select",{attrs:{placeholder:"书籍设置",size:"small"},on:{change:r.bookinfoChange,"visible-change":r.bookinfoBlur},model:{value:r.bookInfo.value,callback:function(t){r.$set(r.bookInfo,"value",t)},expression:"bookInfo.value"}},r._l(r.bookInfo.list,function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1),i("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(t){return r.removeAnchor()}}},[r._v("移除")])],1):i("div",{staticClass:"btns"},[r.readOnly?r._e():i("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(t){return r.KnowledgeEdit({})}}},[r._v("新增知识点")]),r.readOnly?r._e():i("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:r.toTop}},[r._v("置顶")]),r.readOnly?r._e():i("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(t){return r.knowDel()}}},[r._v("删除")])],1)]),r.openAnchorList?r._e():i("div",{ref:"mainListWrap",staticClass:"mainListWrap"},[i("table",{staticClass:"table"},[i("thead",[i("tr",[r.readOnly?r._e():i("th",[r._v("全选"),i("input",{attrs:{type:"checkbox"},on:{click:function(t){return r.checkedAllBtn(t,"checkedAll")}}})]),i("th",[r._v("名称")]),i("th",[r._v("数量")]),i("th",{attrs:{width:"160"}},[r._v("创建时间")]),r.readOnly?r._e():i("th",{staticStyle:{"text-align":"center"},attrs:{width:"250"}},[r._v("操作")])])]),i("tbody",r._l(r.list,function(e){return i("tr",[r.readOnly?r._e():i("th",[i("input",{attrs:{type:"checkbox",name:"ids"},domProps:{checked:r.checkedAll,value:e.id}})]),i("th",[r._v(r._s(e.name))]),i("th",[r._v(r._s(e.num))]),i("th",[r._v(r._s(e.create_time))]),r.readOnly?r._e():i("th",[i("div",{staticClass:"btns"},[i("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(t){return r.KnowledgeEdit(e)}}},[r._v("重命名")]),i("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(t){return r.setAnchor(e.id)}}},[r._v("设置锚点")]),i("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(t){return r.knowDel([e.id])}}},[r._v("删除")])],1)])])}),0)]),r.page?i("div",{staticClass:"pageWrap"},[i("el-pagination",{attrs:{small:!1,background:"","current-page":r.page.num,"page-sizes":[10,50,100],"page-size":r.page.offset,layout:"sizes,prev, pager, next, jumper",total:r.page.total},on:{"size-change":r.handleSizeChange,"current-change":r.handleCurrentChange}})],1):r._e(),i("div",{staticClass:"btns"})]),r.openAnchorList?i("div",{staticClass:"anchorListWrap"},[i("div",{staticClass:"article"},[r.openAnchorList?i("table",{ref:"anchorList",staticClass:"table"},[i("thead",[i("tr",[i("th",{attrs:{width:"50"}},[r._v("全选"),i("input",{attrs:{type:"checkbox"},on:{click:function(t){return r.checkedAllBtn(t,"anchorCheckedAll")}}})]),i("th",[i("div",{staticClass:"title"},[i("span",{staticClass:"btns"},r._l(r.anchorsList,function(t,e){return t?i("span",{class:{currAnchorType:r.isShowAnchors(e)},domProps:{textContent:r._s(r.getAnchorsText(e))},on:{click:function(t){return r.changeAnchorType(e)}}}):r._e()}),0)])]),i("th",{directives:[{name:"show",rawName:"v-show",value:r.isBook,expression:"isBook"}],attrs:{width:"180"}},[r._v("所属图书")]),i("th",{staticClass:"btns",staticStyle:{"padding-right":"30px"},attrs:{width:"50"}},[r._v("操作")])])]),i("tbody",{staticClass:"contentAnchors"},r._l(r.anchorList,function(e){return i("tr",[i("td",[i("div",{staticClass:"input"},[i("input",{attrs:{type:"checkbox",name:"ids"},domProps:{checked:r.anchorCheckedAll,value:e.id}})])]),i("td",{staticClass:"point"},[r.anchorType==r.Anchors_content?i("div",{staticClass:"div"},[r._v(r._s(e.point))]):i("div",{staticClass:"div"},[r._v(r._s(e.name))])]),r.isBook?i("td",[r._v(r._s(e.book_name))]):r._e(),i("td",[i("div",{staticClass:"btns"},[i("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(t){return r.removeAnchor([e.n_info_id])}}},[r._v("移除")])],1)])])}),0)]):r._e()])]):r._e()])]):r._e()],1)}var a=[];r.d(e,"a",function(){return i}),r.d(e,"b",function(){return a})},450:function(t,e,r){"use strict";function i(){var r=this,t=r.$createElement,i=r._self._c||t;return i("div",{staticClass:"div"},[i("div",{staticClass:"serachWrapd"},[i("div",{staticClass:"title"}),i("form",{ref:"mainForm"},[i("span",{staticClass:"group-inline"},[r.bookInfo&&"章节锚点"==r.type?i("el-select",{attrs:{placeholder:"选择所属书籍",size:"small",clearable:""},model:{value:r.bookInfo.value,callback:function(t){r.$set(r.bookInfo,"value",t)},expression:"bookInfo.value"}},r._l(r.bookInfo.list,function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1):r._e()],1),i("span",{staticClass:"group-inline"},[i("input",{staticClass:"form-control",attrs:{placeholder:r._f("formatHolder")(r.type),name:"name"}})]),i("span",{staticClass:"group-inline btn"},[i("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search",plain:""},on:{click:r.seareHandeler}},[r._v("搜索")]),i("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:r.addAnchorCommit}},[r._v("添加选中")])],1)])]),i("div",{staticClass:"tableWrap"},[i("table",{staticClass:"table"},[i("thead",[i("tr",[i("th",[r._v("全选"),i("input",{attrs:{type:"checkbox"},on:{click:r.checkedAll}})]),i("th",[r._v("名称")]),i("th",[r._v("创建时间")])])]),i("tbody",r._l(r.list,function(e){return i("tr",[i("th",[i("input",{ref:"ids",refInFor:!0,attrs:{type:"checkbox",name:"ids"},domProps:{checked:!!r.obj[e.id],value:e.id},on:{click:function(t){return r.choose(t,e)}}})]),i("th",[r._v(r._s(e.chapter_name||e.name))]),i("th",[r._v(r._s(e.create_time))])])}),0)]),r.page?i("div",{staticClass:"pageWrap"},[i("el-pagination",{attrs:{small:!1,background:"","current-page":r.page.num,"page-sizes":[10,50,100],"page-size":r.page.offset,layout:"total, sizes,prev, pager, next, jumper",total:r.page.total},on:{"size-change":r.handleSizeChange,"current-change":r.handleCurrentChange}})],1):r._e()]),i("div",{staticClass:"btns"},[i("el-button",{attrs:{type:"info"},on:{click:function(t){return r.$emit("anchorListCancle")}}},[r._v("取消")]),i("el-button",{attrs:{type:"primary"},on:{click:r.addAnchorCommit}},[r._v("确定")])],1)])}var a=[];r.d(e,"a",function(){return i}),r.d(e,"b",function(){return a})},451:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.addArticle=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/articles",t).then(function(t){var e=t.data,r=e._id,i=e.name,a=e.abs,s=e.author,n=e.tag,o=e.type_name;return(0,l.addResListener)({res_id:r,res_type:o,res_name:i,res_exp:a,res_author:s,res_lables:[n]}),t})},e.modifyArticle=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,r=o(t,["id"]),i=s.default.compile(restUrl_publish+"/api/articles/:id");return(0,a.request_put)(i({id:e}),r)},e.listArticle=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)(restUrl_publish+"/api/articles",t)},e.educe=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,l.educeResListener)({res_url:(0,a.getFullPath)(restUrl_publish+"/api/articles/export"+i.default.stringify(t,{addQueryPrefix:!0}))}),(0,a.request_get)(restUrl_publish+"/api/articles/export",t)},e.putin=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/articles/import",t)},e.deleteArticle=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/articles/delete",t)},e.detailArticle=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,r=o(t,["id"]),i=s.default.compile(restUrl_publish+"/api/articles/:id");return(0,a.request_get)(i({id:e}),r)},e.pushArticle=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/articles/push",t)},e.modifyGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,r=o(t,["id"]),i=s.default.compile(restUrl_publish+"/api/articles/groups/:id");return(0,a.request_put)(i({id:e}),r)},e.deleteGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/articles/groups/delete",t)},e.addGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/articles/groups",t)},e.listGroup=function(){return(0,a.request_get)(restUrl_publish+"/api/articles/groups")},e.moveGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_put)(restUrl_publish+"/api/articles/groups",t)};var a=r(7),i=n(r(10)),s=n(r(9)),l=r(85);function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var r={};for(var i in t)0<=e.indexOf(i)||Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i]);return r}},452:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.debrisList=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)(restUrl_publish+"/api/chapters",t)},e.addDebris=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/chapters",t)},e.modifyDebris=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=n.default.compile(restUrl_publish+"/api/chapters/:id");return(0,a.request_put)(e(t),t)},e.publishWork=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=n.default.compile(restUrl_publish+"/api/chapters/books");return(0,a.request_post)(e(t),t)},e.deleteDbris=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/chapters/delete",t)},e.detailDebris=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,r=o(t,["id"]),i=n.default.compile(restUrl_publish+"/api/chapters/:id");return(0,a.request_get)(i({id:e}),r)},e.listGroup=function(){return(0,a.request_get)(restUrl_publish+"/api/chapters/groups")},e.addGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/chapters/groups",t)},e.modifyGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,r=o(t,["id"]),i=n.default.compile(restUrl_publish+"/api/chapters/groups/:id");return(0,a.request_put)(i({id:e}),r)},e.deleteGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,r=o(t,["id"]),i=n.default.compile(restUrl_publish+"/api/chapters/groups/:id");return(0,a.request_delete)(i({id:e}),r)},e.moveGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_put)(restUrl_publish+"/api/groups/chapters",t)};var i,a=r(7),s=r(9),n=(i=s)&&i.__esModule?i:{default:i};function o(t,e){var r={};for(var i in t)0<=e.indexOf(i)||Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i]);return r}},453:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getList=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=n.default.compile(restUrl_publish+"/api/course_examination_paper/:id");return(0,a.request_get)(e(t))},e.save=function(t){var e=t.id,r=function(t,e){var r={};for(var i in t)0<=e.indexOf(i)||Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i]);return r}(t,["id"]);if(e){var i=n.default.compile(restUrl_publish+"/api/course_examination_paper/:id");return(0,a.request_put)(i({id:e}),r)}return(0,a.request_post)(restUrl_publish+"/api/course_examination_paper",r)},e.getInfo=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=n.default.compile(restUrl_publish+"/api/course_examination_paper/paper/:id");return(0,a.request_get)(e(t))},e.getInfos=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=n.default.compile(restUrl_publish+"/api/course_examination_paper/paper_info/:id");return(0,a.request_get)(e(t))},e.del=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_delete)(restUrl_publish+"/api/course_examination_paper/"+t.id)},e.saveExercise=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_put)(restUrl_publish+"/api/course_examination_paper/practice",t)},e.saveExercises=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_put)(restUrl_publish+"/api/course_examination_paper/practice_update",t)},e.getResource=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=n.default.compile(restUrl_publish+"/api/course_examination_paper/get_tp_list/:id");return(0,a.request_get)(e({id:t.course_id}))};var i,a=r(7),s=r(9),n=(i=s)&&i.__esModule?i:{default:i}},457:function(t,e,r){"use strict";r.r(e);var i=r(560),a=r(426);for(var s in a)"default"!==s&&function(t){r.d(e,t,function(){return a[t]})}(s);r(507);var n=r(0),o=Object(n.a)(a.default,i.a,i.b,!1,null,"45824198",null);e.default=o.exports},474:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.add=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/librariess_ar",t).then(function(t){var e=t.data,r=e._id,i=e.name,a=e.abs,s=e.author,n=e.tag,o=e.type_name;return(0,l.addResListener)({res_id:r,res_type:o,res_name:i,res_exp:a,res_author:s,res_lables:[n]}),t})},e.modify=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,r=o(t,["id"]),i=s.default.compile(restUrl_publish+"/api/librariess_ar/:id");return(0,a.request_put)(i({id:e}),r)},e.listLibraries=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)(restUrl_publish+"/api/librariess_ar",t)},e.educe=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,l.educeResListener)({res_url:(0,a.getFullPath)(restUrl_publish+"/api/librariess_ar/export"+i.default.stringify(t,{addQueryPrefix:!0}))}),(0,a.request_get)(restUrl_publish+"/api/librariess_ar/export",t)},e.putin=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/librariess_ar/import",t)},e.deleteLibraries=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/librariess_ar/delete",t)},e.detailLibraries=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=s.default.compile(restUrl_publish+"/api/librariess_ar/:id");return(0,a.request_get)(e(t))},e.modifyGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,r=o(t,["id"]),i=s.default.compile(restUrl_publish+"/api/librariess_ar/groups/:id");return(0,a.request_put)(i({id:e}),r)},e.deleteGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/librariess_ar/groups/delete",t)},e.addGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/librariess_ar/groups",t)},e.listGroup=function(){return(0,a.request_get)(restUrl_publish+"/api/librariess_ar/groups")},e.moveGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_put)(restUrl_publish+"/api/librariess_ar/groups",t)};var a=r(7),i=n(r(10)),s=n(r(9)),l=r(85);function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var r={};for(var i in t)0<=e.indexOf(i)||Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i]);return r}},475:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.add=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/librariess_vr",t).then(function(t){var e=t.data,r=e._id,i=e.name,a=e.abs,s=e.author,n=e.tag,o=e.type_name;return(0,l.addResListener)({res_id:r,res_type:o,res_name:i,res_exp:a,res_author:s,res_lables:[n]}),t})},e.modify=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,r=o(t,["id"]),i=s.default.compile(restUrl_publish+"/api/librariess_vr/:id");return(0,a.request_put)(i({id:e}),r)},e.listLibraries=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)(restUrl_publish+"/api/librariess_vr",t)},e.educe=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,l.educeResListener)({res_url:(0,a.getFullPath)(restUrl_publish+"/api/librariess_vr/export"+i.default.stringify(t,{addQueryPrefix:!0}))}),(0,a.request_get)(restUrl_publish+"/api/librariess_vr/export",t)},e.putin=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/librariess_vr/import",t)},e.deleteLibraries=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/librariess_vr/delete",t)},e.detailLibraries=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=s.default.compile(restUrl_publish+"/api/librariess_vr/:id");return(0,a.request_get)(e(t))},e.modifyGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,r=o(t,["id"]),i=s.default.compile(restUrl_publish+"/api/librariess_vr/groups/:id");return(0,a.request_put)(i({id:e}),r)},e.deleteGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/librariess_vr/groups/delete",t)},e.addGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/librariess_vr/groups",t)},e.listGroup=function(){return(0,a.request_get)(restUrl_publish+"/api/librariess_vr/groups")},e.moveGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_put)(restUrl_publish+"/api/librariess_vr/groups",t)};var a=r(7),i=n(r(10)),s=n(r(9)),l=r(85);function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var r={};for(var i in t)0<=e.indexOf(i)||Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i]);return r}},476:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.resourceList=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.type;e&&e.indexOf("-")&&(t.type=e.split("-")[1]);return(0,a.request_get)(restUrl_publish+"/api/databooks",t)},e.save=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,r=o(t,["id"]);if(e){var i=n.default.compile(restUrl_publish+"/api/databooks/:id");return(0,a.request_put)(i({id:e}),r)}return(0,a.request_post)(restUrl_publish+"/api/databooks",r)},e.detailResource=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,r=o(t,["id"]),i=n.default.compile(restUrl_publish+"/api/databooks/:id");return(0,a.request_get)(i({id:e}),r)},e.del=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/databooks/delete",t)},e.listGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)(restUrl_publish+"/api/databooks/groups",t)},e.addGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/databooks/groups",t)},e.modifyGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,r=o(t,["id"]),i=n.default.compile(restUrl_publish+"/api/databooks/groups/:id");return(0,a.request_put)(i({id:e}),r)},e.deleteGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,r=o(t,["id"]),i=n.default.compile(restUrl_publish+"/api/databooks/groups/:id");return(0,a.request_delete)(i({id:e}),r)},e.moveGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_put)(restUrl_publish+"/api/groups/databooks",t)};var i,a=r(7),s=r(9),n=(i=s)&&i.__esModule?i:{default:i};function o(t,e){var r={};for(var i in t)0<=e.indexOf(i)||Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i]);return r}},477:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.recomList=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)(restUrl_publish+"/api/rechapters",t)},e.detailRecom=function(t){var e=t.id,r=o(t,["id"]),i=n.default.compile(restUrl_publish+"/api/rechapters/:id");return(0,a.request_get)(i({id:e}),r)},e.deleteRecom=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/rechapters/delete",t)},e.updateRecom=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};n.default.compile(restUrl_publish+"/api/rechapters/:id");return(0,a.request_put)(put(t),t)},e.addRecom=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/rechapters",t)},e.save=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,r=o(t,["id"]);if(e)return(0,a.request_put)(restUrl_publish+"/api/rechapters/"+e,r);return(0,a.request_post)(restUrl_publish+"/api/rechapters",r)},e.listGroup=function(){return(0,a.request_get)(restUrl_publish+"/api/rechapters/groups")},e.addGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/rechapters/groups",t)},e.modifyGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,r=o(t,["id"]),i=n.default.compile(restUrl_publish+"/api/chapters/groups/:id");return(0,a.request_put)(i({id:e}),r)},e.deleteGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,r=o(t,["id"]),i=n.default.compile(restUrl_publish+"/api/chapters/groups/:id");return(0,a.request_delete)(i({id:e}),r)},e.moveGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_put)(restUrl_publish+"/api/groups/chapters",t)};var i,a=r(7),s=r(9),n=(i=s)&&i.__esModule?i:{default:i};function o(t,e){var r={};for(var i in t)0<=e.indexOf(i)||Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i]);return r}},480:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getList=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)(restUrl_publish+"/api/shared_resource",t)},e.getResource=function(){return(0,a.request_get)(restUrl_publish+"/api/shared_resource/list")},e.save=function(t){var e=t.id,r=function(t,e){var r={};for(var i in t)0<=e.indexOf(i)||Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i]);return r}(t,["id"]);if(e){var i=n.default.compile(restUrl_publish+"/api/shared_resource/:id");return(0,a.request_put)(i({id:e}),r)}return(0,a.request_post)(restUrl_publish+"/api/shared_resource",r)},e.getInfo=function(t){var e=n.default.compile(restUrl_publish+"/api/shared_resource/:id");return(0,a.request_get)(e({id:t}))},e.del=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/shared_resource/delete",t)},e.urgentDigital=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_put)(restUrl_publish+"/api/shared_resource/urgent",t)},e.audits=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_put)(restUrl_publish+"/api/shared_resource/audits",t)};var i,a=r(7),s=r(9),n=(i=s)&&i.__esModule?i:{default:i};r(85)},500:function(t,e,r){"use strict";r.r(e);var i=r(501),a=r.n(i);for(var s in i)"default"!==s&&function(t){r.d(e,t,function(){return i[t]})}(s);e.default=a.a},501:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});!function(t){{if(t&&t.__esModule)return;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);e.default=t}}(r(387));var i=n(r(628)),a=n(r(425)),s=n(r(630));function n(t){return t&&t.__esModule?t:{default:t}}e.default={components:{Info:i.default,Structure:s.default,Knowledge:a.default},props:["type","detailData","detailDialog","readOnly","defaultData"],created:function(){},data:function(){return{}},computed:{},methods:{handleClick:function(t,e){this.activeName=t.name}}}},502:function(t,e,r){"use strict";r.r(e);var i=r(503),a=r.n(i);for(var s in i)"default"!==s&&function(t){r.d(e,t,function(){return i[t]})}(s);e.default=a.a},503:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(r(5)),o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},l=(a(r(84)),function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}}(r(25))),u=r(584),i=r(858);function a(t){return t&&t.__esModule?t:{default:t}}function d(t){return function(){var o=t.apply(this,arguments);return new Promise(function(s,n){return function e(t,r){try{var i=o[t](r),a=i.value}catch(t){return void n(t)}if(!i.done)return Promise.resolve(a).then(function(t){e("next",t)},function(t){e("throw",t)});s(a)}("next")})}}e.default={props:["detailData","readOnly","defaultData"],data:function(){return{information:{},previewImgUrl:null,retailers:{clc_category:"",clc_category_id:"",cp_category:"",cp_category_id:"",describe:"",editor_recommend:"",book_directory:""},xRead:{},activeName:"1",keyWord:"",title:"作者",metadata:[],creatAuthorInfo:{},choiceDialog:!1,creatDialog:!1,authorList:[],authorInfo:{},authorOptions:[],authorValue:[],translatorOptions:[],translatorValue:[],out_print:"2",have_print:"2",imageCropperDialog:!1,file:null,oldBlob:null}},created:function(){this.detailData&&Object.entries(this.detailData).length&&this.getInfo(),this.defaultData&&this.setInfo(),this.init()},computed:{detailType:function(){return this.infoData.img_status},hassVideo:function(){return 6==this.infoData.type||5==this.infoData.type||8==this.infoData.type},gauthorList:function(){return this.authorList}},methods:{init:function(){var t=this;this.searchAuthor=(0,i.debounce)(function(){return t.getAuthors()},500)},setInfo:function(){this.information=this.xRead=this.defaultData.base||{},this.metadata=this.defaultData.attributes||[],this.retailers=this.defaultData.retailers||{},this.setEbookInfo()},getInfo:function(){var e=this;(0,u.getInfo)({id:this.detailData.id}).then(function(t){e.information=t.data,e.retailers=t.data.retailers,e.xRead=t.data["x-read"],e.metadata=t.data.pro_attributes,e.setEbookInfo()})},setEbookInfo:function(){this.out_print=this.retailers.out_print||"2",this.have_print=this.retailers.have_print||"2";var t=this.retailers.author?this.retailers.author.split(","):[],i=this.retailers.author_id?this.retailers.author_id.split(","):[],e=this.retailers.translator?this.retailers.translator.split(","):[],a=this.retailers.translator_id?this.retailers.translator_id.split(","):[];this.authorOptions=t.map(function(t,e){var r={};return r.value=i[e],r.label=t,r}),this.translatorOptions=e.map(function(t,e){var r={};return r.value=a[e],r.label=t,r}),this.authorValue=i,this.translatorValue=a},handleClick:function(t,e){this.$emit("infoClick",t)},previewImg:function(t,e){var r=this,i=t.target;this.file=i.files[0],this.imgFile=URL.createObjectURL(this.file),this.$ImageSize({file:this.file,ratio:.73,interval:.05}).then(function(t){r.previewImgUrl=URL.createObjectURL(r.file)},function(t){201!=t.status?r.$message.error(t.message):r.imageCropperDialog=!0})},addAuthor:function(t){this.title=t,this.keyWord="",this.authorList=[],this.choiceDialog=!0},choiceAuthor:function(){var t=this,r="作者"==this.title?"author":"translator",e=document.querySelector(".authorListForm").querySelectorAll('input[name="ids"]:checked');e.length||this.$message.warning("请选择你要添加的"+this.title);function i(e){if(t[r+"Options"].find(function(t){return e.value==t.value}))return"continue";t[r+"Options"].push({value:e.value,label:e.getAttribute("label")}),t[r+"Value"].push(e.value)}var a=!0,s=!1,n=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done);a=!0)i(o.value)}catch(t){s=!0,n=t}finally{try{!a&&l.return&&l.return()}finally{if(s)throw n}}this.$message.success("添加"+this.title+"成功!")},saveAuthor:function(){var e=this;return d(n.default.mark(function t(){return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.addAuthor({author_name:e.creatAuthorInfo.name}).then(function(t){e.$message.success("创建成功")}).catch(function(t){e.$message.error(t.messages)});case 2:e.creatDialog=!1;case 3:case"end":return t.stop()}},t,e)}))()},getAuthors:function(){var e=this;log(this.title),l.getAuthor({author_name:this.keyWord}).then(function(t){e.authorList=t.data,log(e.authorList)})},creatAuthor:function(){this.creatAuthorInfo={},this.creatDialog=!0},syncInfo:function(t){var p=this;this.$refs.isbn.value&&l.synchronization({id:this.$refs.isbn.value}).then(function(t){log(t);var e=t.data,r=e.bookname,i=e.writer,a=e.isbn,s=e.bookcatalog,n=e.majorword,o=e.bookbrief,l=e.readership,u=e.editornote,d=(e.price,e.price_min,e.weight,e.bookcategory),c=e.bookcategory2;p.information={name:r,book_isbn:a,abs:o},p.xRead={tag:"",author:i},p.retailers={subject_terms:n,target_audience:l,clc_category:d,cp_category:c,describe:o,editor_recommend:u,book_directory:s}}).catch(function(t){var e=t.payload;for(var r in e.messages){p.$message.error(e.messages[r]);break}})},submitDetail:function(){var s=this;return d(n.default.mark(function t(){var e,r,i,a;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=s.$refs.fenmian.files[0],s.$refs.detailForm.valiAll()){t.next=4;break}return t.abrupt("return");case 4:if(r=s.$loading({text:"正在上传",background:"rgba(0, 0, 0, 0.8)"}),t.prev=5,e)return t.next=9,l.getTask(e).then(function(t){s.information.img=t.data.path});t.next=9;break;case 9:return t.next=11,(0,u.save)(o({id:s.detailData.id},s.information)).then(function(t){s.$message.success("保存成功"),r.close(),s.$emit("saveok",t.data)});case 11:t.next=24;break;case 13:t.prev=13,t.t0=t.catch(5),i=t.t0.payload,r.close(),t.t1=n.default.keys(i.messages);case 18:if((t.t2=t.t1()).done){t.next=24;break}return a=t.t2.value,s.$message.error(i.messages[a]),t.abrupt("break",24);case 24:case"end":return t.stop()}},t,s,[[5,13]])}))()},preview:function(t){this.previewImgUrl=URL.createObjectURL(t),this.oldBlob=t,this.imageCropperDialog=!1},submitInfo:function(){var a=this;return d(n.default.mark(function t(){var e,r,i;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a.$refs.detailForm.valiAll()){t.next=3;break}return t.abrupt("return");case 3:if(e=a.$refs.fenmian.files[0],r=a.$loading({text:"正在上传",background:"rgba(0, 0, 0, 0.8)"}),i=o({},a.information,{pro_attributes:a.metadata,attributes:{xRead:o({},a.xRead),eCommerce:o({},a.retailers,{author_id:a.authorValue.join(","),translator_id:a.translatorValue.join(","),author:a.authorOptions.map(function(t){if(-1<a.authorValue.indexOf(t.value))return t.label}).filter(function(t){if(t)return t}).join(","),translator:a.translatorOptions.map(function(t){if(-1<a.translatorValue.indexOf(t.value))return t.label}).filter(function(t){if(t)return t}).join(","),out_print:a.have_print,have_print:a.have_print})}}),e)return a.oldBlob&&((e=a.oldBlob).name=a.file.name),t.next=10,l.getTask(e).then(function(t){i.img=t.data.path});t.next=10;break;case 10:return t.next=12,(0,u.save)(i).then(function(t){a.detailData.id||(a.information=t.data),r.close(),a.$message.success("操作成功!"),a.$emit("saveok",t.data)}).catch(function(t){r.close(),a.$message.error(t.message||"错误!")});case 12:case"end":return t.stop()}},t,a)}))()}}}},504:function(t,e,r){},505:function(t,e,r){"use strict";r.r(e);var i=r(506),a=r.n(i);for(var s in i)"default"!==s&&function(t){r.d(e,t,function(){return i[t]})}(s);e.default=a.a},506:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=g(r(5)),p=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=g(r(84)),f=m(r(415)),u=m(r(387)),s=g(r(457)),n=r(393),o=g(r(425)),l=g(r(631)),d=g(r(633)),v=g(r(514)),h=g(r(435)),_=g(r(516));function m(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function g(t){return t&&t.__esModule?t:{default:t}}function b(t){return function(){var o=t.apply(this,arguments);return new Promise(function(s,n){return function e(t,r){try{var i=o[t](r),a=i.value}catch(t){return void n(t)}if(!i.done)return Promise.resolve(a).then(function(t){e("next",t)},function(t){e("throw",t)});s(a)}("next")})}}e.default={props:["detailData","readOnly","defaultData"],components:{Tab:h.default,Book:l.default,Group:v.default,ContentDetail:s.default,EBook:d.default,Audio:_.default,Knowledge:o.default},data:function(){return{type:"book",soucesType:"1",audioInfo:{},detailAddDialog:!1,bookDialog:!1,groupDialog:!1,infoDialog:!1,currentItem:{},curSoucesList:{},dataList:[],page:null,infoData:{},mediaType:null,optional:[],singleElection:!0,defaultBList:null,defaultEList:null,defaultAList:null,defaultVList:null,defaultRList:null}},created:function(){this.detailData&&this.detailData.id&&this.check(),this.defaultData&&(this.defaultBList=this.defaultData.structure.book,this.defaultEList=this.defaultData.structure.ebooks[0],this.defaultAList=this.defaultData.structure.audios,this.defaultVList=this.defaultData.structure.videos,this.defaultRList=this.defaultData.structure.resources)},computed:{isShowBtn:function(){return 0<this.optional.length}},methods:{handleClick:function(t){this.type=t.name},check:function(){var e=this;this.detailData&&f.check({id:this.detailData.id}).then(function(t){e.optional=t.data})},getAudio:function(){var e=this;f.groupList({id:this.detailData.id,type:"1"}).then(function(t){e.audioList=t.data})},detail:function(t,e){"book"!=this.type?"audio"!=this.type||"object"!=(void 0===e?"undefined":i(e))?this.bookDetailInfo(t,t.type):this.addVideo(t):this.addBook(t)},del:function(t,e){var r=this;f.del(p({},t,{type:this.type})).then(function(t){r.getList()})},bookDetailInfo:function(t,e,r){var i=this,a=t.id,s=t.c_id;(0,n._themeDetail)({c_id:s,id:a,type:e}).then(function(t){i.infoData=t.data,i.infoDialog=!0}).catch(function(t){var e=t.payload;for(var r in e.messages){i.$message.error(e.messages[r]);break}})},getList:function(){this.$refs[this.type].getList(this.type),this.check()},query:function(){var t=(0,a.default)(document.querySelector("#detailSearchForm"),{hash:!0});this.getAddList(1,this.page.offset,t)},openResources:function(e){var r=this;return b(c.default.mark(function t(){return c.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r.singleElection=!0,r.soucesType=e,r.dataList=[],r.page=null,"audio"==r.type?r.curSoucesList=r.$refs.group.list:"e-book"==r.type?(r.singleElection=!1,r.curSoucesList=[]):r.curSoucesList=r.$refs[r.type].list,t.next=7,r.getAddList();case 7:r.detailAddDialog=!0;case 8:case"end":return t.stop()}},t,r)}))()},getAddList:function(t,e,r){var i=0<arguments.length&&void 0!==t?t:this.page&&this.page.num||1,a=this,s=1<arguments.length&&void 0!==e?e:this.page&&this.page.offset||10,n=r,o=this.soucesType,l=this.$refs.resource.type;if(14==o)switch(l){case"1":o="3";break;case"2":o="5";break;case"3":o="4";break;default:o="3"}u._addBooks(p({pageNum:i,pageOffset:s,type:o},n)).then(function(t){a.dataList=t.data,a.page=t.page})},addBook:function(e){var r=this;return b(c.default.mark(function t(){return c.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.check();case 2:r.currentItem=e||{},r.bookDialog=!0;case 4:case"end":return t.stop()}},t,r)}))()},addVideo:function(t){if(this.detailData&&!this.detailData.id)return this.$message.error("请保存产品信息后再做添加");t||(this.curSoucesList=[]),this.currentItem=t||{},this.groupDialog=!0},saveOk:function(){this.bookDialog=!1,this.getList()},handleSizeChange:function(t){var e=(0,a.default)(document.querySelector("#detailSearchForm"),{hash:!0});this.getAddList(1,t,e)},handleCurrentChange:function(t){var e=(0,a.default)(document.querySelector("#detailSearchForm"),{hash:!0});this.getAddList(t,this.page.offset,e)},isChecked:function(e){return-1<this.curSoucesList.findIndex(function(t){return t.id===e})},checkAll:function(r,t){document.querySelector("."+t).querySelectorAll('input[name="ids"]').forEach(function(t,e){t.checked=r.target.checked})},addSelection:function(){var d=this;return b(c.default.mark(function t(){var e,r,i,a,s,n,o,l,u;return c.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(d.detailData.id){t.next=2;break}return t.abrupt("return",d.$message.error("请保存产品信息后再做添加"));case 2:if(e=document.querySelector(".addBookForm"),(r=e.querySelectorAll('input[name="ids"]:checked')).length){t.next=6;break}return t.abrupt("return",d.$message.warning("请选择添加内容"));case 6:i=function(e){if(-1<d.curSoucesList.findIndex(function(t){return t.id==e.value}))return"continue";d.curSoucesList.push(p({},d.dataList.find(function(t){return t.id==e.value}),{action:"add"}))},s=!(a=!0),n=void 0,t.prev=10,o=r[Symbol.iterator]();case 12:if(a=(l=o.next()).done){t.next=20;break}if(u=l.value,"continue"===i(u))return t.abrupt("continue",17);t.next=17;break;case 17:a=!0,t.next=12;break;case 20:t.next=26;break;case 22:t.prev=22,t.t0=t.catch(10),s=!0,n=t.t0;case 26:t.prev=26,t.prev=27,!a&&o.return&&o.return();case 29:if(t.prev=29,s)throw n;t.next=32;break;case 32:return t.finish(29);case 33:return t.finish(26);case 34:if("audio"==d.type)return d.$refs.group.update(d.curSoucesList),d.detailAddDialog=!1,t.abrupt("return");t.next=38;break;case 38:if("e-book"==d.type)return t.next=41,d.$refs.ebook.getRelation(d.curSoucesList);t.next=43;break;case 41:return d.detailAddDialog=!1,t.abrupt("return");case 43:f.add({type:d.type,product_id:d.detailData.id,constitute:d.curSoucesList,resource_type:d.$refs.resource.type}).then(function(t){d.getList(),d.detailAddDialog=!1});case 44:case"end":return t.stop()}},t,d,[[10,22,26,34],[27,,29,33]])}))()},uncheckedAll:function(t){this.singleElection||(this.$refs.ids.forEach(function(t){return t.checked=!1}),t.target.checked=!0)},saveAudioOK:function(){this.$refs.audio.getAudio()},clear:function(){document.getElementById("text").value=""},clear2:function(){document.getElementById("text2").value=""}},watch:{detailData:function(){this.check()}}}},507:function(t,e,r){"use strict";var i=r(428);r.n(i).a},508:function(t,e,r){"use strict";r.r(e);var i=r(509),a=r.n(i);for(var s in i)"default"!==s&&function(t){r.d(e,t,function(){return i[t]})}(s);e.default=a.a},509:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(r(5)),s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},n=(i(r(84)),function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}}(r(25))),o=r(415);function i(t){return t&&t.__esModule?t:{default:t}}e.default={props:{bookDialog:{type:Boolean,default:!1},item:{type:Object,default:{}},detailData:Object,optional:Array,readOnly:Boolean},data:function(){return{information:{},previewImgUrl:null,metadata:[],radio:"paperback"}},created:function(){Object.entries(this.item).length?this.getInfo():this.radio=this.optional.length&&this.optional[0]||"paperback"},computed:{setTitle:function(){return Object.entries(this.item).length?this.item.name||"修改纸质书":"新增纸质书"}},methods:{getInfo:function(){var i=this;(0,o.bookInfo)({id:this.item.id}).then(function(t){i.information=t.data,i.metadata=t.data.attributes,i.radio=t.data.type}).catch(function(t){var e=t.payload;for(var r in e.messages){i.$message.error(e.messages[r]);break}})},colse:function(){this.$emit("update:bookDialog",!1)},save:function(){var i=this;return function(t){return function(){var o=t.apply(this,arguments);return new Promise(function(s,n){return function e(t,r){try{var i=o[t](r),a=i.value}catch(t){return void n(t)}if(!i.done)return Promise.resolve(a).then(function(t){e("next",t)},function(t){e("throw",t)});s(a)}("next")})}}(a.default.mark(function t(){var e,r;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i.$refs.detailForm.valiAll()){t.next=4;break}return log("验证失败"),t.abrupt("return");case 4:if(e=i.$refs.fenmian.files[0],r=i.$loading({text:"正在上传",background:"rgba(0, 0, 0, 0.8)"}),t.prev=6,e)return t.next=10,n.getTask(e).then(function(t){i.information.img=t.data.path});t.next=10;break;case 10:if(i.information.img){t.next=14;break}return i.$message.error("封面必填"),r.close(),t.abrupt("return");case 14:return t.next=16,(0,o.bookSave)(s({},i.information,{attributes:i.metadata,product_id:i.detailData.id,type:i.radio})).then(function(t){r.close(),i.$emit("saveok")});case 16:t.next=22;break;case 18:t.prev=18,t.t0=t.catch(6),t.t0.payload,r.close();case 22:case"end":return t.stop()}},t,i,[[6,18]])}))()},previewImg:function(t,e){var r=t.target.files[0];this.imgFile=r,e?this.previewPhotoUrl=URL.createObjectURL(r):this.previewImgUrl=URL.createObjectURL(r)},syncInfo:function(){var l=this;this.$refs.isbn.value&&n.synchronization({id:this.$refs.isbn.value}).then(function(t){log(t);var e=t.data,r=e.bookname,i=(e.writer,e.isbn),a=e.price,s=e.price_min,n=e.weight,o=e.isbn_ext;switch(e.bookbinding){case"平":l.radio="paperback";break;case"精":l.radio="hardcover";break;case"软":l.radio="soft_hardcover";break;case"线":l.radio="thread_bound"}l.information={name:r,book_isbn:i,price:a,sales_price_min:s,book_isbn_extension:o,book_weight:n}}).catch(function(t){var e=t.payload;for(var r in log(111,e),log(e),e.messages){l.$message.error(e.messages[r]);break}})},isShow:function(t){return!(-1<this.optional.indexOf(t))}}}},510:function(t,e,r){},511:function(t,e,r){"use strict";r.r(e);var i=r(512),a=r.n(i);for(var s in i)"default"!==s&&function(t){r.d(e,t,function(){return i[t]})}(s);e.default=a.a},512:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(r(5)),n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},o=(i(r(84)),function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}}(r(415))),l=(r(25),r(393));function i(t){return t&&t.__esModule?t:{default:t}}e.default={props:["detailData","readOnly","defaultData"],data:function(){return{information:{},activeName:"first",metadata:[],shopMetadata:[],book_id:null,retailer_id:null,constitute_id:null,ebook_shop:{},current_id:null}},created:function(){this.detailData&&this.detailData.id&&this.getEBook(),this.defaultData&&(this.information=this.defaultData,this.metadata=this.defaultData.attributes,this.ebook_shop=this.defaultData.ebook_shop||{},this.shopMetadata=this.defaultData.ebook_shop?this.defaultData.ebook_shop.attributes:[])},methods:{getEBook:function(){var r=this;o.getEBook({id:this.detailData.id}).then(function(t){var e=t.data||{};r.information=e,r.current_id=e.id,e.length||Object.entries(e).length?(r.constitute_id=e.constitute_id,r.book_id=e.book_id,r.metadata=e.attributes||[],r.ebook_shop=e.ebook_shop||{},e.ebook_shop&&(r.retailer_id=e.ebook_shop.id,r.shopMetadata=e.ebook_shop.attributes||[])):r.retailer_id=r.constitute_id=null})},getRelation:function(t){var i=this;if(t.length){var e=t[0],r=e.c_id,a=e.id,s=e.type;log(r,a,s),(0,l._themeDetail)({c_id:r,id:a,type:s}).then(function(t){i.information=t.data,i.metadata=i.information.attributes,i.constitute_id=null,i.book_id=a,log(i.information)}).catch(function(t){var e=t.payload;for(var r in e.messages){i.$message.error(e.messages[r]);break}})}},submit:function(){var a=this;return function(t){return function(){var o=t.apply(this,arguments);return new Promise(function(s,n){return function e(t,r){try{var i=o[t](r),a=i.value}catch(t){return void n(t)}if(!i.done)return Promise.resolve(a).then(function(t){e("next",t)},function(t){e("throw",t)});s(a)}("next")})}}(s.default.mark(function t(){var e,r,i;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a.$refs.detailForm.valiAll()){t.next=3;break}return t.abrupt("return",a.$message.error("电子书信息不全!"));case 3:return log(n({},a.information,a.ebook_shop,{book_id:a.book_id,components_id:a.detailData.id,attributes:a.metadata,shop_attributes:a.shopMetadata,constitute_id:a.constitute_id,retailer_id:a.retailer_id,current_id:a.current_id})),e=a.$progress(),t.prev=5,t.next=8,o.saveEBook(n({},a.information,a.ebook_shop,{book_id:a.book_id,components_id:a.detailData.id,attributes:a.metadata,shop_attributes:a.shopMetadata,constitute_id:a.constitute_id,retailer_id:a.retailer_id,id:a.information.id,current_id:a.current_id})).then(function(t){!a.current_id&&t.data&&(a.current_id=t.data.id)});case 8:a.$message.success("保存成功"),t.next=21;break;case 11:t.prev=11,t.t0=t.catch(5),r=t.t0.payload,t.t1=s.default.keys(r.messages);case 15:if((t.t2=t.t1()).done){t.next=21;break}return i=t.t2.value,a.$message.error(r.messages[i]),t.abrupt("break",21);case 21:e.close();case 22:case"end":return t.stop()}},t,a,[[5,11]])}))()}},computed:{detailType:function(){return this.infoData.img_status},hassVideo:function(){return 6==this.infoData.type||5==this.infoData.type||8==this.infoData.type}}}},513:function(t,e,r){},514:function(t,e,r){"use strict";r.r(e);var i=r(571),a=r(439);for(var s in a)"default"!==s&&function(t){r.d(e,t,function(){return a[t]})}(s);r(565);var n=r(0),o=Object(n.a)(a.default,i.a,i.b,!1,null,"9f5c06d6",null);e.default=o.exports},515:function(t,e,r){"use strict";var i=r(431);r.n(i).a},516:function(t,e,r){"use strict";r.r(e);var i=r(570),a=r(442);for(var s in a)"default"!==s&&function(t){r.d(e,t,function(){return a[t]})}(s);r(566);var n=r(0),o=Object(n.a)(a.default,i.a,i.b,!1,null,"3584d4e9",null);e.default=o.exports},517:function(t,e,r){},518:function(t,e,r){},559:function(t,e,r){"use strict";function i(){var r=this,t=r.$createElement,i=r._self._c||t;return r.list?i("div",{staticClass:"tableWrap"},[r.isShow&&!r.onlyShow?i("el-radio-group",{staticStyle:{"margin-bottom":"20px"},attrs:{size:"small"},model:{value:r.type,callback:function(t){r.type=t},expression:"type"}},[i("el-radio-button",{attrs:{label:"1"}},[r._v("图集")]),i("el-radio-button",{attrs:{label:"2"}},[r._v("视频集")]),i("el-radio-button",{attrs:{label:"3"}},[r._v("音频集")])],1):r._e(),i("table",{staticClass:"table"},[i("thead",[i("tr",[i("th",[r._v("名称")]),i("th",[r._v("类型")]),r.isLabelHide?r._e():i("th",[r._v("标签")]),i("th",[r._v("创建时间")]),i("th",{attrs:{width:"100"}},[r._v("操作")])])]),i("tbody",[r.list.length?r._e():i("tr",[i("td",{staticClass:"colspan",attrs:{colspan:r.isLabelHide?4:5}},[r._v("暂无数据")])]),r._l(r.list,function(e,t){return i("tr",[i("th",[i("div",{staticClass:"th-name"},[r._v(r._s(e.name))])]),i("th",[i("div",{staticClass:"th-name"},[r._v(r._s(e.type_name))])]),r.isLabelHide?r._e():i("th",[i("div",{staticClass:"th-name"},[r._v(r._s(e.tag))])]),i("th",[i("div",{staticClass:"th-name"},[r._v(r._s(e.create_time))])]),i("th",[i("div",{staticClass:"icon icon-detail",attrs:{title:"详情"},on:{click:function(t){return r.$emit("detail",e)}}}),r.onlyShow?r._e():i("div",{staticClass:"icon icon-delete",attrs:{title:"删除"},on:{click:function(t){return r.$emit("del",e)}}})])])})],2)])],1):r._e()}var a=[];r.d(e,"a",function(){return i}),r.d(e,"b",function(){return a})},560:function(t,e,r){"use strict";function i(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"div"},[r("el-dialog",{staticClass:"restBody2",attrs:{center:!1,visible:e.infoDialog,top:"50px",width:"1200px","show-close":!1,"append-to-body":""}},[r("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[r("i",{staticClass:"el-icon-close",on:{click:function(t){return e.$emit("update:infoDialog",!1)}}}),r("el-tabs",{attrs:{value:"ff"}},[r("el-tab-pane",{attrs:{label:"详情",name:"ff"}})],1)],1),r("form",{ref:"infoForm",staticClass:"infoForm"},[r("div",{staticClass:"group"},[r("div",{staticClass:"label"},[e._v("名称:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.infoData.name,expression:"infoData.name"}],staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:e.infoData.name},on:{input:function(t){t.target.composing||e.$set(e.infoData,"name",t.target.value)}}})]),r("div",{staticClass:"group"},[r("div",{staticClass:"label"},[e._v("类型:")]),r("span",{staticClass:"types"},[r("span",[e._v(" "+e._s(e.infoData.type_name))]),r("span",[e._v(" 创建时间: "+e._s(e.infoData.create_time))])])]),r("div",{staticClass:"group"},[r("div",{staticClass:"label"},[e._v("标签:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.infoData.tag,expression:"infoData.tag"}],staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:e.infoData.tag},on:{input:function(t){t.target.composing||e.$set(e.infoData,"tag",t.target.value)}}})]),r("div",{staticClass:"group"},[r("div",{staticClass:"label"},[e._v("简介:")]),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.infoData.abs,expression:"infoData.abs"}],staticClass:"textarea",attrs:{type:"text",disabled:""},domProps:{value:e.infoData.abs},on:{input:function(t){t.target.composing||e.$set(e.infoData,"abs",t.target.value)}}})]),r("div",{staticClass:"group"},[r("div",{staticClass:"label"},[e._v("详情:")])]),e.detailType&&3!=e.infoData.type?r("div",{staticClass:"group wailianinput"},[r("div",{staticClass:"label"}),r("span",[r("input",{ref:"otherImgInput",staticClass:"form-control",attrs:{disabled:""},domProps:{value:e.infoData.preview}})])]):e._e(),e.hassVideo||4==e.infoData.type?r("div",{staticClass:"group detailmain wailian"},[r("div",{staticClass:"label"}),r("span",{staticClass:"wrap"},[e.hassVideo?r("video",{attrs:{src:e.infoData.preview,controls:""}}):e._e(),4==e.infoData.type?r("audio",{attrs:{src:e.infoData.preview,controls:""}}):e._e(),r("span",{staticClass:"msg"},[r("div",{staticClass:"type"},[e._v("格式:"),r("span",{staticClass:"val",domProps:{textContent:e._s(e.infoData.format)}})]),r("div",{staticClass:"size"},[e._v("大小:"),r("span",{staticClass:"val",domProps:{textContent:e._s(((this.infoData.size||0)/1024).toFixed(2)+"KB")}})])])])]):e._e(),r("div",{staticClass:"group detailmain"},[r("div",{staticClass:"label"}),r("span",{staticClass:"wrap"},[3==e.infoData.type?r("img",{staticClass:"coverImg",attrs:{src:e.infoData.preview_path}}):e._e(),r("img",{staticClass:"coverImg",attrs:{src:e.infoData.img_src||e.infoData.img,"else-if":""}})])]),r("div",{staticClass:"group line"},[r("div",{staticClass:"label"},[e._v("扩展属性")])]),r("div",{staticClass:"group"},[r("MetaData",{attrs:{metadata:e.metadata,isShowBtn:!1,isOption:!1}})],1)]),r("div",{staticClass:"footer dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"info"},on:{click:function(t){return e.$emit("update:infoDialog",!1)}}},[e._v("取消")])],1)])],1)}var a=[];r.d(e,"a",function(){return i}),r.d(e,"b",function(){return a})},565:function(t,e,r){"use strict";var i=r(441);r.n(i).a},566:function(t,e,r){"use strict";var i=r(444);r.n(i).a},570:function(t,e,r){"use strict";function i(){var i=this,t=i.$createElement,a=i._self._c||t;return a("div",{staticClass:"div box"},[i._m(0),a("el-tree",{attrs:{data:i.audioList,"node-key":"id","default-expand-all":"","expand-on-click-node":!1},scopedSlots:i._u([{key:"default",fn:function(t){var e=t.node,r=t.data;return a("span",{staticClass:"custom-tree-node"},[a("span",[i._v(i._s(r.name))]),a("span",{staticClass:"options",staticStyle:{float:"right"}},[a("div",{staticClass:"icon icon-detail",attrs:{title:"详情"},on:{click:function(t){return i.$emit("detail",r,r.children)}}}),i.readOnly?i._e():a("div",{staticClass:"icon icon-delete",attrs:{title:"删除"},on:{click:function(t){return i.del(r,e)}}})])])}}])})],1)}var a=[function(){var t=this.$createElement,e=this._self._c||t;return e("table",{staticClass:"table"},[e("thead",[e("tr",[e("th",[this._v("组名称")]),e("th",{attrs:{width:"100"}},[this._v("操作")])])])])}];r.d(e,"a",function(){return i}),r.d(e,"b",function(){return a})},571:function(t,e,r){"use strict";function i(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-dialog",{staticClass:"restBody2",attrs:{center:!1,visible:e.groupDialog,top:"50px",width:"1200px","show-close":!1,"append-to-body":""}},[r("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[r("i",{staticClass:"el-icon-close",on:{click:e.colse}}),r("el-tabs",{attrs:{value:"ff"}},[r("el-tab-pane",{attrs:{label:e.setTitle,name:"ff"}})],1)],1),r("VaForm",{ref:"detailForm"},[r("form",{staticClass:"detailForm rowWrap"},[r("div",{staticClass:"group line"},[r("div",{staticClass:"label"},[e._v("基本信息(必填)")])]),r("div",{staticClass:"group"},[r("div",{staticClass:"label"},[e._v("组名称:")]),r("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required'}"},{name:"model",rawName:"v-model",value:e.information.group_name,expression:"information.group_name"}],staticClass:"form-control",attrs:{type:"text",disabled:e.onlyShow},domProps:{value:e.information.group_name},on:{input:function(t){t.target.composing||e.$set(e.information,"group_name",t.target.value)}}})]),r("div",{staticClass:"group"},[r("div",{staticClass:"label"},[e._v("定价:")]),r("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required'}"},{name:"model",rawName:"v-model",value:e.information.price,expression:"information.price"}],staticClass:"form-control",attrs:{type:"text",disabled:e.onlyShow},domProps:{value:e.information.price},on:{input:function(t){t.target.composing||e.$set(e.information,"price",t.target.value)}}}),r("span",[e._v(" 元")])]),r("div",{staticClass:"group"},[r("div",{staticClass:"label"},[e._v("最低定价:")]),r("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required'}"},{name:"model",rawName:"v-model",value:e.information.min_price,expression:"information.min_price"}],staticClass:"form-control",attrs:{type:"text",disabled:e.onlyShow},domProps:{value:e.information.min_price},on:{input:function(t){t.target.composing||e.$set(e.information,"min_price",t.target.value)}}}),r("span",[e._v(" 元")])]),r("div",{staticClass:"group"},[r("div",{staticClass:"label"},[e._v("主讲人:")]),r("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required'}"},{name:"model",rawName:"v-model",value:e.information.speaker,expression:"information.speaker"}],staticClass:"form-control",attrs:{type:"text",disabled:e.onlyShow},domProps:{value:e.information.speaker},on:{input:function(t){t.target.composing||e.$set(e.information,"speaker",t.target.value)}}})]),r("div",{staticClass:"group line"},[r("div",{staticClass:"label"},[e._v("其他信息")])]),r("div",{staticClass:"group"},[r("div",{staticClass:"label"},[e._v("试听地址:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.information.src,expression:"information.src"}],staticClass:"form-control",attrs:{type:"url",disabled:e.onlyShow},domProps:{value:e.information.src},on:{input:function(t){t.target.composing||e.$set(e.information,"src",t.target.value)}}})]),r("div",{staticClass:"group line"},[r("div",{staticClass:"label",domProps:{textContent:e._s("2"==e.isMedia?"关联视频":"关联音频")}})]),r("div",{staticClass:"group"},[r("Tab",{ref:"video",attrs:{dataType:"audio",onlyShow:e.onlyShow,defaultList:e.list,detailData:e.item},on:{detail:function(t){return e.$emit("detail",t)},del:function(t){return e.del(t)}}}),e.onlyShow?e._e():r("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.$emit("open",e.addMediaType)}}},[e._v("新增")])],1)])]),r("div",{staticClass:"footer dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"info"},on:{click:e.colse}},[e._v("取消")]),e.onlyShow?e._e():r("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("确定")])],1)],1)],1)}var a=[];r.d(e,"a",function(){return i}),r.d(e,"b",function(){return a})},574:function(t,e){},584:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.homeInfo=function(){return(0,a.request_get)(restUrl_publish+"/api/home/statistics")},e.getInfo=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=n.default.compile(restUrl_publish+"/api/comproduct/:id");return(0,a.request_get)(e(t))},e.save=function(t){var e=t.id,r=o(t,["id"]);if(e){var i=n.default.compile(restUrl_publish+"/api/comproduct/:id");return(0,a.request_put)(i({id:e}),r)}return(0,a.request_post)(restUrl_publish+"/api/comproduct/add",r)},e.saveInfo=function(t){t.id;var e=o(t,["id"]);return(0,a.request_post)(restUrl_publish+"/api/comproduct/attributes",e)};var i,a=r(7),s=r(9),n=(i=s)&&i.__esModule?i:{default:i};function o(t,e){var r={};for(var i in t)0<=e.indexOf(i)||Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i]);return r}},627:function(t,e,r){"use strict";r.r(e);var i=r(661),a=r(500);for(var s in a)"default"!==s&&function(t){r.d(e,t,function(){return a[t]})}(s);r(636);var n=r(0),o=Object(n.a)(a.default,i.a,i.b,!1,null,"e47e6618",null);e.default=o.exports},628:function(t,e,r){"use strict";r.r(e);var i=r(674),a=r(502);for(var s in a)"default"!==s&&function(t){r.d(e,t,function(){return a[t]})}(s);r(629);var n=r(0),o=Object(n.a)(a.default,i.a,i.b,!1,null,"532c98e1",null);e.default=o.exports},629:function(t,e,r){"use strict";var i=r(504);r.n(i).a},630:function(t,e,r){"use strict";r.r(e);var i=r(677),a=r(505);for(var s in a)"default"!==s&&function(t){r.d(e,t,function(){return a[t]})}(s);r(635);var n=r(0),o=Object(n.a)(a.default,i.a,i.b,!1,null,"1ccc8cde",null);e.default=o.exports},631:function(t,e,r){"use strict";r.r(e);var i=r(679),a=r(508);for(var s in a)"default"!==s&&function(t){r.d(e,t,function(){return a[t]})}(s);r(632);var n=r(0),o=Object(n.a)(a.default,i.a,i.b,!1,null,"1f37a8a1",null);e.default=o.exports},632:function(t,e,r){"use strict";var i=r(510);r.n(i).a},633:function(t,e,r){"use strict";r.r(e);var i=r(678),a=r(511);for(var s in a)"default"!==s&&function(t){r.d(e,t,function(){return a[t]})}(s);r(634);var n=r(0),o=Object(n.a)(a.default,i.a,i.b,!1,null,"543e02c7",null);e.default=o.exports},634:function(t,e,r){"use strict";var i=r(513);r.n(i).a},635:function(t,e,r){"use strict";var i=r(517);r.n(i).a},636:function(t,e,r){"use strict";var i=r(518);r.n(i).a},661:function(t,e,r){"use strict";function i(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"div"},[r("el-tabs",{attrs:{value:e.type}},[r("el-tab-pane",{attrs:{label:"产品信息",name:"info"}},[r("Info",{attrs:{detailData:e.detailData,readOnly:e.readOnly,defaultData:e.defaultData},on:{saveok:function(t){return e.$emit("saveok",t)}}})],1),r("el-tab-pane",{attrs:{label:"产品结构",name:"structure"}},[r("Structure",{attrs:{detailData:e.detailData,readOnly:e.readOnly,defaultData:e.defaultData}})],1),r("el-tab-pane",{attrs:{label:"知识点",name:"Knowledge"}},[r("Knowledge",{attrs:{detailData:e.detailData,readOnly:e.readOnly,defaultData:e.defaultData},on:{saveok:function(t){return e.$emit("saveok")}}})],1)],1)],1)}var a=[];r.d(e,"a",function(){return i}),r.d(e,"b",function(){return a})},674:function(t,e,r){"use strict";function i(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"div"},[e.imageCropperDialog?r("ImageCropper",{ref:"imageCropper",attrs:{imageCropperDialog:e.imageCropperDialog,imgFile:e.imgFile,autoCropWidth:290,autoCropHeight:400},on:{"update:imageCropperDialog":function(t){e.imageCropperDialog=t},"update:image-cropper-dialog":function(t){e.imageCropperDialog=t},preview:e.preview}}):e._e(),r("el-dialog",{attrs:{visible:e.choiceDialog,width:"500px","append-to-body":""},on:{"update:visible":function(t){e.choiceDialog=t}}},[r("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[r("el-tabs",{attrs:{value:"detail"}},[r("el-tab-pane",{attrs:{label:"选择"+e.title,name:"detail"}})],1)],1),r("form",{staticClass:"rowWrap"},[r("div",{staticClass:"group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.keyWord,expression:"keyWord"}],staticClass:"form-control",attrs:{placeholder:"输入查询"+e.title,type:"text"},domProps:{value:e.keyWord},on:{input:[function(t){t.target.composing||(e.keyWord=t.target.value)},e.searchAuthor]}}),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.creatAuthor}},[e._v("创建新"+e._s(e.title))])],1),r("ul",{staticClass:"authorListForm"},e._l(e.gauthorList,function(t){return r("li",[r("input",{ref:"ids",refInFor:!0,attrs:{name:"ids",type:"checkbox",label:t.name,id:"author_"+t.id},domProps:{value:t.id}}),r("label",{attrs:{for:"author_"+t.id}},[e._v(e._s(t.name))])])}),0)]),r("div",{staticClass:"div dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"info"},on:{click:function(t){e.choiceDialog=!1}}},[e._v("取消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.choiceAuthor}},[e._v("确定")])],1)]),r("el-dialog",{attrs:{visible:e.creatDialog,width:"500px","append-to-body":""},on:{"update:visible":function(t){e.creatDialog=t}}},[r("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[r("el-tabs",{attrs:{value:"detail"}},[r("el-tab-pane",{attrs:{label:"创建"+e.title,name:"detail"}})],1)],1),r("form",{staticClass:"authorInfo"},[r("div",{staticClass:"group"},[r("div",{staticClass:"label"},[e._v("姓名:")]),r("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required'}"},{name:"model",rawName:"v-model",value:e.creatAuthorInfo.name,expression:"creatAuthorInfo.name"}],staticClass:"form-control",attrs:{type:"text",name:"name"},domProps:{value:e.creatAuthorInfo.name},on:{input:function(t){t.target.composing||e.$set(e.creatAuthorInfo,"name",t.target.value)}}})])]),r("div",{staticClass:"div dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"info"},on:{click:function(t){e.creatDialog=!1}}},[e._v("取消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.saveAuthor}},[e._v("确定")])],1)]),r("VaForm",{ref:"detailForm"},[r("form",{staticClass:"detailForm"},[r("div",{staticClass:"group line"},[r("div",{staticClass:"label"},[e._v("基本信息")])]),r("div",{staticClass:"group"},[r("div",{staticClass:"label"},[e._v("*产品名称:")]),r("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required'}"},{name:"model",rawName:"v-model",value:e.information.name,expression:"information.name"}],staticClass:"form-control",attrs:{type:"text",disabled:e.readOnly},domProps:{value:e.information.name},on:{input:function(t){t.target.composing||e.$set(e.information,"name",t.target.value)}}})]),r("div",{staticClass:"group"},[r("div",{staticClass:"label"},[e._v("ISBN:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.information.ISBN||e.information.book_isbn,expression:"information.ISBN||information.book_isbn"}],ref:"isbn",staticClass:"form-control",attrs:{type:"text",disabled:e.readOnly},domProps:{value:e.information.ISBN||e.information.book_isbn},on:{input:function(t){t.target.composing||e.$set(e.information.ISBN||e.information,"book_isbn",t.target.value)}}}),e.readOnly?e._e():r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.syncInfo}},[e._v("同步")])],1),r("div",{staticClass:"group"},[r("div",{staticClass:"label"},[e._v("*内容简介:")]),r("textarea",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required'}"},{name:"model",rawName:"v-model",value:e.information.abs,expression:"information.abs"}],staticClass:"textarea",attrs:{maxlength:e.$config.ABS_MAX_LENGTH,type:"text",disabled:e.readOnly},domProps:{value:e.information.abs},on:{input:function(t){t.target.composing||e.$set(e.information,"abs",t.target.value)}}}),e.readOnly?e._e():r("span",{staticStyle:{"vertical-align":"bottom",color:"#606266","font-size":"12px"}},[e._v("您还可以输入"+e._s(e.$config.ABS_MAX_LENGTH-(e.information.abs?e.information.abs.length:0)))])]),r("div",{staticClass:"group"},[r("div",{staticClass:"label"},[e._v("*设置封面:")]),e.readOnly?e._e():r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.$refs.fenmian.click()}}},[e._v("上传")]),r("input",{ref:"fenmian",staticClass:"hide",attrs:{type:"file",accept:"image/jpeg,image/jpg,image/png"},on:{change:function(t){return e.previewImg(t)}}})],1),r("div",{staticClass:"group"},[r("div",{staticClass:"label"}),r("img",{staticClass:"previewImgUrl",attrs:{src:e.previewImgUrl||e.information.img_src}}),r("input",{attrs:{type:"hidden",name:"img"},domProps:{value:e.information.img}})]),r("p",{staticClass:"imgSizeWrap"},[r("span",{staticClass:"imgSize"},[e._v("建议图片大小：290*400px")])])]),r("div",{staticClass:"info"},[r("el-tabs",{staticClass:"tabs-nav",model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[r("el-tab-pane",{attrs:{label:"x-read信息",name:"1"}},[r("form",{staticClass:"readForm"},[r("div",{staticClass:"group line"},[r("div",{staticClass:"label"},[e._v("必填信息")])]),r("div",{staticClass:"group"},[r("div",{staticClass:"label"},[e._v("*标签:")]),r("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required'}"},{name:"model",rawName:"v-model",value:e.xRead.tag,expression:"xRead.tag"}],staticClass:"form-control",attrs:{type:"text",disabled:e.readOnly},domProps:{value:e.xRead.tag},on:{input:function(t){t.target.composing||e.$set(e.xRead,"tag",t.target.value)}}})]),r("div",{staticClass:"group"},[r("div",{staticClass:"label"},[e._v("*作者:")]),r("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required'}"},{name:"model",rawName:"v-model",value:e.xRead.author,expression:"xRead.author"}],staticClass:"form-control",attrs:{type:"text",disabled:e.readOnly},domProps:{value:e.xRead.author},on:{input:function(t){t.target.composing||e.$set(e.xRead,"author",t.target.value)}}})]),r("div",{staticClass:"group"},[r("div",{staticClass:"label"},[e._v("扩展属性:")]),r("MetaData",{attrs:{metadata:e.metadata,isShowBtn:!1,readOnly:e.readOnly}})],1)])]),e.$config.isShowRetailers?r("el-tab-pane",{attrs:{label:"电商信息",name:"2"}},[r("form",{staticClass:"commerceForm"},[r("div",{staticClass:"group line"},[r("div",{staticClass:"label"},[e._v("必填信息")])]),r("div",{staticClass:"group"},[r("div",{staticClass:"label"},[e._v("绝版:")]),r("el-radio",{staticClass:"el-radio",attrs:{name:"out_print",label:"1",disabled:e.readOnly},model:{value:e.out_print,callback:function(t){e.out_print=t},expression:"out_print"}},[e._v("是")]),r("el-radio",{staticClass:"el-radio",attrs:{name:"out_print",label:"2",disabled:e.readOnly},model:{value:e.out_print,callback:function(t){e.out_print=t},expression:"out_print"}},[e._v("否")])],1),r("div",{staticClass:"group"},[r("div",{staticClass:"label"},[e._v("是否有版:")]),r("el-radio",{staticClass:"el-radio",attrs:{name:"have_print",label:"1",disabled:e.readOnly},model:{value:e.have_print,callback:function(t){e.have_print=t},expression:"have_print"}},[e._v("是")]),r("el-radio",{staticClass:"el-radio",attrs:{name:"have_print",label:"2",disabled:e.readOnly},model:{value:e.have_print,callback:function(t){e.have_print=t},expression:"have_print"}},[e._v("否")])],1),r("div",{staticClass:"group"},[r("div",{staticClass:"label"},[e._v("作者:")]),r("el-select",{staticStyle:{"margin-right":"20px"},attrs:{multiple:"","collapse-tags":"",placeholder:"请选择",size:"small",name:"author",disabled:e.readOnly},model:{value:e.authorValue,callback:function(t){e.authorValue=t},expression:"authorValue"}},e._l(e.authorOptions,function(t){return r("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),e.readOnly?e._e():r("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.addAuthor("作者")}}},[e._v("添加")])],1),r("div",{staticClass:"group line"},[r("div",{staticClass:"label"},[e._v("其他信息")])]),r("div",{staticClass:"group"},[r("div",{staticClass:"label"},[e._v("译者:")]),r("el-select",{staticStyle:{"margin-right":"20px"},attrs:{multiple:"","collapse-tags":"",placeholder:"请选择",size:"small",name:"translator",disabled:e.readOnly},model:{value:e.translatorValue,callback:function(t){e.translatorValue=t},expression:"translatorValue"}},e._l(e.translatorOptions,function(t){return r("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),e.readOnly?e._e():r("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.addAuthor("译者")}}},[e._v("添加")])],1),r("div",{staticClass:"group"},[r("div",{staticClass:"label"},[e._v("主题词:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.retailers.subject_terms,expression:"retailers.subject_terms"}],staticClass:"form-control",attrs:{type:"text",disabled:e.readOnly},domProps:{value:e.retailers.subject_terms},on:{input:function(t){t.target.composing||e.$set(e.retailers,"subject_terms",t.target.value)}}})]),r("div",{staticClass:"group"},[r("div",{staticClass:"label"},[e._v("读者对象:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.retailers.target_audience,expression:"retailers.target_audience"}],staticClass:"form-control",attrs:{type:"text",disabled:e.readOnly},domProps:{value:e.retailers.target_audience},on:{input:function(t){t.target.composing||e.$set(e.retailers,"target_audience",t.target.value)}}})]),r("div",{staticClass:"group"},[r("div",{staticClass:"label"},[e._v("中图法分类:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.retailers.clc_category,expression:"retailers.clc_category"}],staticClass:"form-control",attrs:{type:"text",disabled:e.readOnly},domProps:{value:e.retailers.clc_category},on:{input:function(t){t.target.composing||e.$set(e.retailers,"clc_category",t.target.value)}}})]),r("div",{staticClass:"group"},[r("div",{staticClass:"label"},[e._v("营销分类:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.retailers.cp_category,expression:"retailers.cp_category"}],staticClass:"form-control",attrs:{type:"text",disabled:e.readOnly},domProps:{value:e.retailers.cp_category},on:{input:function(t){t.target.composing||e.$set(e.retailers,"cp_category",t.target.value)}}})]),r("div",{staticClass:"group"},[r("div",{staticClass:"label"},[e._v("内容简介:")]),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.retailers.describe,expression:"retailers.describe"}],staticClass:"textarea",attrs:{type:"text",disabled:e.readOnly},domProps:{value:e.retailers.describe},on:{input:function(t){t.target.composing||e.$set(e.retailers,"describe",t.target.value)}}})]),r("div",{staticClass:"group"},[r("div",{staticClass:"label"},[e._v("编辑推荐:")]),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.retailers.editor_recommend,expression:"retailers.editor_recommend"}],staticClass:"textarea",attrs:{type:"text",disabled:e.readOnly},domProps:{value:e.retailers.editor_recommend},on:{input:function(t){t.target.composing||e.$set(e.retailers,"editor_recommend",t.target.value)}}})]),r("div",{staticClass:"group"},[r("div",{staticClass:"label"},[e._v("图书目录:")]),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.retailers.book_directory,expression:"retailers.book_directory"}],staticClass:"textarea",attrs:{type:"text",disabled:e.readOnly},domProps:{value:e.retailers.book_directory},on:{input:function(t){t.target.composing||e.$set(e.retailers,"book_directory",t.target.value)}}})])])]):e._e(),r("el-tab-pane",{attrs:{name:"3"}},[r("span",{attrs:{slot:"label"},slot:"label"},[e._v("收起"),r("i",{staticClass:"el-icon-arrow-up"})])])],1)],1),r("div",{staticClass:"btns"},[e.readOnly?e._e():r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitInfo()}}},[e._v("保存")])],1)])],1)}var a=[];r.d(e,"a",function(){return i}),r.d(e,"b",function(){return a})},677:function(t,e,r){"use strict";function i(){var r=this,t=r.$createElement,i=r._self._c||t;return i("div",{staticClass:"div"},[r.infoDialog?i("ContentDetail",{attrs:{infoData:r.infoData,infoDialog:r.infoDialog,mediaType:r.mediaType},on:{"update:infoDialog":function(t){r.infoDialog=t},"update:info-dialog":function(t){r.infoDialog=t}}}):r._e(),r.groupDialog?i("Group",{ref:"group",attrs:{item:r.currentItem,detailData:r.detailData,groupDialog:r.groupDialog,onlyShow:r.readOnly},on:{"update:groupDialog":function(t){r.groupDialog=t},"update:group-dialog":function(t){r.groupDialog=t},open:r.openResources,detail:r.detail,del:r.del,save:r.saveAudioOK}}):r._e(),r.bookDialog?i("Book",{attrs:{item:r.currentItem,detailData:r.detailData,optional:r.optional,bookDialog:r.bookDialog,readOnly:r.readOnly},on:{"update:bookDialog":function(t){r.bookDialog=t},"update:book-dialog":function(t){r.bookDialog=t},saveok:r.saveOk}}):r._e(),i("el-dialog",{staticClass:"restBody2",attrs:{center:!1,visible:r.detailAddDialog,width:"1200px",top:"50px","append-to-body":""},on:{"update:visible":function(t){r.detailAddDialog=t}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("el-tabs",{attrs:{value:"detail"}},[i("el-tab-pane",{attrs:{label:"添加",name:"detail"}})],1)],1),i("el-form",{staticClass:"addBookForm"},[i("div",{staticClass:"serachWrap"},[i("form",{attrs:{id:"detailSearchForm"}},[i("span",{staticClass:"group-inline"},[i("input",{staticClass:"form-control",attrs:{placeholder:"输入名称",name:"name",id:"text"}}),i("span",{staticClass:"clear",on:{click:function(t){return r.clear()}}},[r._v("x")])]),i("span",{staticClass:"group-inline"},[i("input",{staticClass:"form-control",attrs:{placeholder:"输入标签",name:"tag",id:"text2"}}),i("span",{staticClass:"clear2",on:{click:function(t){return r.clear2()}}},[r._v("x")])]),i("span",{staticClass:"group-inline"},[i("TimePick",{attrs:{inputsName:["start_time","end_time"]}})],1),i("span",{staticClass:"group-inline"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-search",plain:""},on:{click:r.query}},[r._v("搜索")]),i("el-button",{attrs:{type:"primary",plain:""},on:{click:r.addSelection}},[r._v("添加选中")])],1)])]),i("table",{staticClass:"table",attrs:{width:"100%"}},[i("thead",[i("tr",[i("th",{attrs:{width:"80"}},[r.singleElection?i("input",{attrs:{type:"checkbox"},on:{click:function(t){return r.checkAll(t,"addBookForm")}}}):r._e(),i("span",{domProps:{textContent:r._s(r.singleElection?"全选":"选择")}})]),i("th",[r._v("名称")]),i("th",[r._v("标签")]),i("th",[r._v("类型")]),i("th",[r._v("创建时间")])])]),r.dataList.length?i("tbody",r._l(r.dataList,function(t,e){return i("tr",[i("td",[i("input",{ref:"ids",refInFor:!0,attrs:{type:"checkbox","data-type":t.status,name:"ids"},domProps:{value:t.id,checked:r.isChecked(t.id)},on:{click:r.uncheckedAll}})]),i("td",[r._v(r._s(t.name))]),i("td",[r._v(r._s(t.tag))]),i("td",[r._v(r._s(t.type_name))]),i("td",[r._v(r._s(t.create_time))])])}),0):r._e()]),r.page?i("div",{staticClass:"pageWrap"},[i("el-pagination",{attrs:{small:!1,background:"","current-page":r.page.num,"page-sizes":[10,50,100],"page-size":r.page.offset,layout:"total, sizes,prev, pager, next, jumper",total:r.page.total},on:{"size-change":r.handleSizeChange,"current-change":r.handleCurrentChange}})],1):r._e()]),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"info"},on:{click:function(t){r.detailAddDialog=!1}}},[r._v("取消")]),i("el-button",{attrs:{type:"primary"},on:{click:r.addSelection}},[r._v("确定")])],1)],1),i("el-tabs",{staticClass:"release-tab",attrs:{type:"border-card",value:r.type},on:{"tab-click":r.handleClick}},[i("el-tab-pane",{attrs:{label:"纸质书籍",name:"book"}},[i("Tab",{ref:"book",attrs:{dataType:"book",defaultList:r.defaultBList,detailData:r.detailData,isLabelHide:!0,onlyShow:r.readOnly},on:{detail:r.detail,del:r.del}}),r.isShowBtn&&!r.readOnly?i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return r.addBook()}}},[r._v("新增")]):r._e()],1),i("el-tab-pane",{attrs:{label:"电子书",name:"e-book"}},[i("EBook",{ref:"ebook",attrs:{defaultData:r.defaultEList,detailData:r.detailData,readOnly:r.readOnly},on:{open:r.openResources}})],1),i("el-tab-pane",{attrs:{label:"听读",name:"audio"}},[i("Audio",{ref:"audio",attrs:{detailData:r.detailData,defaultData:r.defaultAList,readOnly:r.readOnly},on:{detail:r.detail,del:r.del}}),r.readOnly?r._e():i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return r.addVideo()}}},[r._v("新增组")])],1),i("el-tab-pane",{attrs:{label:"视读",name:"video"}},[i("Tab",{ref:"video",attrs:{dataType:"video",defaultList:r.defaultVList,detailData:r.detailData,onlyShow:r.readOnly},on:{detail:r.detail,del:r.del}}),r.readOnly?r._e():i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return r.openResources("5")}}},[r._v("新增")])],1),i("el-tab-pane",{attrs:{label:"资源",name:"resource"}},[i("Tab",{ref:"resource",attrs:{dataType:"resource",defaultList:r.defaultRList,detailData:r.detailData,onlyShow:r.readOnly,isShow:!0},on:{detail:r.detail,del:r.del}}),r.readOnly?r._e():i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return r.openResources("14")}}},[r._v("新增")])],1)],1)],1)}var a=[];r.d(e,"a",function(){return i}),r.d(e,"b",function(){return a})},678:function(t,e,r){"use strict";function i(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"div"},[r("VaForm",{ref:"detailForm"},[r("form",{staticClass:"detailForm"},[r("div",{staticClass:"group line"},[r("div",{staticClass:"label"},[e._v("基本信息")])]),r("div",{staticClass:"group"},[r("div",{staticClass:"label"},[e._v("*关联书籍:")]),e.readOnly?e._e():r("el-button",{staticClass:"margin",attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.$emit("open","1")}}},[e._v("关联")])],1),r("div",{staticClass:"group"},[r("div",{staticClass:"label"},[e._v("*名称:")]),r("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required'}"},{name:"model",rawName:"v-model",value:e.information.name,expression:"information.name"}],staticClass:"form-control",attrs:{type:"text",disabled:e.readOnly},domProps:{value:e.information.name},on:{input:function(t){t.target.composing||e.$set(e.information,"name",t.target.value)}}})]),r("div",{staticClass:"group"},[r("div",{staticClass:"label"},[e._v("*作者:")]),r("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required'}"},{name:"model",rawName:"v-model",value:e.information.author,expression:"information.author"}],staticClass:"form-control",attrs:{type:"text",disabled:e.readOnly},domProps:{value:e.information.author},on:{input:function(t){t.target.composing||e.$set(e.information,"author",t.target.value)}}})]),r("div",{staticClass:"group"},[r("div",{staticClass:"label"},[e._v("*类型:")]),r("span",{staticClass:"types"},[r("span",[e._v(" "+e._s(e.information.type_name))]),r("span",[e._v(" 创建时间: "+e._s(e.information.create_time))])])]),r("div",{staticClass:"group"},[r("div",{staticClass:"label"},[e._v("简介:")]),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.information.abs,expression:"information.abs"}],staticClass:"textarea",attrs:{rows:"3",type:"text",maxlength:e.$config.ABS_MAX_LENGTH,disabled:e.readOnly},domProps:{value:e.information.abs},on:{input:function(t){t.target.composing||e.$set(e.information,"abs",t.target.value)}}}),e.readOnly?e._e():r("span",{staticStyle:{"vertical-align":"bottom",color:"#606266","font-size":"12px"}},[e._v("您还可以输入"+e._s(e.$config.ABS_MAX_LENGTH-(e.information.abs?e.information.abs.length:0)))])])]),r("div",{staticClass:"info"},[r("el-tabs",{staticClass:"tabs-nav restBody",model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[r("el-tab-pane",{attrs:{label:"x-read信息",name:"first"}},[r("form",{staticClass:"readForm"},[r("div",{staticClass:"group line"},[r("div",{staticClass:"label"},[e._v("扩展属性")])]),r("div",{staticClass:"group"},[r("div",{staticClass:"label"}),r("MetaData",{attrs:{metadata:e.metadata,isShowBtn:!1,readOnly:e.readOnly}})],1)])]),e.$config.isShowRetailers?r("el-tab-pane",{attrs:{label:"电商信息",name:"second"}},[r("form",{staticClass:"commerceForm"},[r("div",{staticClass:"group line"},[r("div",{staticClass:"label"},[e._v("必填信息")])]),r("div",{staticClass:"group"},[r("div",{staticClass:"label"},[e._v("定价:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.ebook_shop.sale_price,expression:"ebook_shop.sale_price"}],staticClass:"form-control",attrs:{type:"text",disabled:e.readOnly},domProps:{value:e.ebook_shop.sale_price},on:{input:function(t){t.target.composing||e.$set(e.ebook_shop,"sale_price",t.target.value)}}}),r("span",[e._v(" 元")])]),r("div",{staticClass:"group"},[r("div",{staticClass:"label"},[e._v("最低定价:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.ebook_shop.min_sale_price,expression:"ebook_shop.min_sale_price"}],staticClass:"form-control",attrs:{type:"text",disabled:e.readOnly},domProps:{value:e.ebook_shop.min_sale_price},on:{input:function(t){t.target.composing||e.$set(e.ebook_shop,"min_sale_price",t.target.value)}}}),r("span",[e._v(" 元")])]),r("div",{staticClass:"group"},[r("div",{staticClass:"label"},[e._v("内容阅读地址:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.ebook_shop.read_url,expression:"ebook_shop.read_url"}],staticClass:"form-control",attrs:{type:"text",disabled:e.readOnly},domProps:{value:e.ebook_shop.read_url},on:{input:function(t){t.target.composing||e.$set(e.ebook_shop,"read_url",t.target.value)}}})]),r("div",{staticClass:"group line"},[r("div",{staticClass:"label"},[e._v("其他信息")])]),r("div",{staticClass:"group"},[r("div",{staticClass:"label"},[e._v("内容试读地址:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.ebook_shop.trial_url,expression:"ebook_shop.trial_url"}],staticClass:"form-control",attrs:{type:"text",disabled:e.readOnly},domProps:{value:e.ebook_shop.trial_url},on:{input:function(t){t.target.composing||e.$set(e.ebook_shop,"trial_url",t.target.value)}}})]),r("div",{staticClass:"group line"},[r("div",{staticClass:"label"},[e._v("扩展属性")])]),r("div",{staticClass:"group"},[r("div",{staticClass:"label"}),r("MetaData",{attrs:{metadata:e.shopMetadata,isShowBtn:!1,readOnly:e.readOnly}})],1)])]):e._e(),r("el-tab-pane",[r("span",{attrs:{slot:"label"},slot:"label"},[e._v("收起"),r("i",{staticClass:"el-icon-arrow-up"})])])],1)],1),e.book_id?r("div",{staticClass:"btns"},[e.readOnly?e._e():r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submit("detailForm")}}},[e._v("保存")])],1):e._e()])],1)}var a=[];r.d(e,"a",function(){return i}),r.d(e,"b",function(){return a})},679:function(t,e,r){"use strict";function i(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-dialog",{staticClass:"restBody2",attrs:{center:!1,visible:e.bookDialog,top:"50px",width:"1200px","show-close":!1,"append-to-body":""}},[r("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[r("i",{staticClass:"el-icon-close",on:{click:e.colse}}),r("el-tabs",{attrs:{value:"ff"}},[r("el-tab-pane",{attrs:{label:e.setTitle,name:"ff"}})],1)],1),r("VaForm",{ref:"detailForm"},[r("form",{staticClass:"detailForm rowWrap"},[r("div",{staticClass:"group line"},[r("div",{staticClass:"label"},[e._v("基本信息(必填)")])]),r("div",{staticClass:"left"},[r("div",{staticClass:"group"},[r("div",{staticClass:"label"},[e._v("名称:")]),r("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required'}"},{name:"model",rawName:"v-model",value:e.information.name,expression:"information.name"}],staticClass:"form-control",attrs:{name:"name",type:"text",disabled:e.readOnly},domProps:{value:e.information.name},on:{input:function(t){t.target.composing||e.$set(e.information,"name",t.target.value)}}})]),r("div",{staticClass:"group"},[r("div",{staticClass:"label"},[e._v("ISBN:")]),r("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required'}"},{name:"model",rawName:"v-model",value:e.information.book_isbn,expression:"information.book_isbn"}],ref:"isbn",staticClass:"form-control",attrs:{type:"text",disabled:e.readOnly},domProps:{value:e.information.book_isbn},on:{input:function(t){t.target.composing||e.$set(e.information,"book_isbn",t.target.value)}}}),e.readOnly?e._e():r("el-button",{staticClass:"margin",attrs:{type:"primary",size:"small"},on:{click:e.syncInfo}},[e._v("同步")])],1),e.optional.length?r("div",{staticClass:"group"},[r("div",{staticClass:"label"},[e._v("类型:")]),r("el-radio",{staticClass:"el-radio",attrs:{disabled:e.isShow("paperback")||e.readOnly,label:"paperback"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("平装")]),r("el-radio",{staticClass:"el-radio",attrs:{disabled:e.isShow("hardcover")||e.readOnly,label:"hardcover"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("精装")]),r("el-radio",{staticClass:"el-radio",attrs:{disabled:e.isShow("soft_hardcover")||e.readOnly,label:"soft_hardcover"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("软精装")]),r("el-radio",{staticClass:"el-radio",attrs:{disabled:e.isShow("thread_bound")||e.readOnly,label:"thread_bound"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("线装")])],1):e._e(),r("div",{staticClass:"group"},[r("div",{staticClass:"label"},[e._v("定价:")]),r("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required'}"},{name:"model",rawName:"v-model",value:e.information.price,expression:"information.price"}],staticClass:"form-control",attrs:{type:"text",disabled:e.readOnly},domProps:{value:e.information.price},on:{input:function(t){t.target.composing||e.$set(e.information,"price",t.target.value)}}}),r("span",[e._v(" 元")])]),r("div",{staticClass:"group"},[r("div",{staticClass:"label"},[e._v("最低定价:")]),r("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required'}"},{name:"model",rawName:"v-model",value:e.information.sales_price_min,expression:"information.sales_price_min"}],staticClass:"form-control",attrs:{type:"text",disabled:e.readOnly},domProps:{value:e.information.sales_price_min},on:{input:function(t){t.target.composing||e.$set(e.information,"sales_price_min",t.target.value)}}}),r("span",[e._v(" 元")])])]),r("div",{staticClass:"right"},[r("img",{staticClass:"previewImgUrl",attrs:{src:e.previewImgUrl||e.information.img_src}}),r("input",{attrs:{type:"hidden",name:"img"},domProps:{value:e.information.img}}),e.readOnly?e._e():r("el-button",{staticClass:"margin",attrs:{size:"mini",type:"primary",plain:""},on:{click:function(t){return e.$refs.fenmian.click()}}},[e._v("选择封面")]),r("input",{ref:"fenmian",staticClass:"hide",attrs:{type:"file",accept:"image/jpeg,image/jpg,image/png"},on:{change:function(t){return e.previewImg(t)}}})],1),r("div",{staticClass:"group line"},[r("div",{staticClass:"label"},[e._v("其他信息")])]),r("div",{staticClass:"group"},[r("div",{staticClass:"label"},[e._v("ISBN扩展:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.information.book_isbn_extension,expression:"information.book_isbn_extension"}],staticClass:"form-control",attrs:{type:"text",disabled:e.readOnly},domProps:{value:e.information.book_isbn_extension},on:{input:function(t){t.target.composing||e.$set(e.information,"book_isbn_extension",t.target.value)}}})]),r("div",{staticClass:"group"},[r("div",{staticClass:"label"},[e._v("图书重量:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.information.book_weight,expression:"information.book_weight"}],staticClass:"form-control",attrs:{type:"text",disabled:e.readOnly},domProps:{value:e.information.book_weight},on:{input:function(t){t.target.composing||e.$set(e.information,"book_weight",t.target.value)}}}),r("span",[e._v(" KG")])]),r("div",{staticClass:"group line"},[r("div",{staticClass:"label"},[e._v("扩展属性")])]),r("div",{staticClass:"group"},[r("div",{staticClass:"label"}),r("MetaData",{attrs:{metadata:e.metadata,isShowBtn:!1,readOnly:e.readOnly}})],1)])]),r("div",{staticClass:"footer dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"info"},on:{click:e.colse}},[e._v("取消")]),e.readOnly?e._e():r("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("确定")])],1)],1)],1)}var a=[];r.d(e,"a",function(){return i}),r.d(e,"b",function(){return a})},870:function(t,e,r){"use strict";r.r(e);var i=r(871),a=r.n(i);for(var s in i)"default"!==s&&function(t){r.d(e,t,function(){return i[t]})}(s);e.default=a.a},871:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},a=p(r(84)),i=p(r(396)),s=p(r(158)),n=p(r(157)),l=p(r(384)),u=p(r(627)),d=r(126),c=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}}(r(416));function p(t){return t&&t.__esModule?t:{default:t}}e.default={mixins:[d.main],components:{Menu:s.default,Top:n.default,GroupList:l.default,Detail:u.default,Dispense:i.default},data:function(){return{services:c,list:null,page:null,groupList:null,detailDialog:!1,detailDialoaType:"info",detailData:{},publishDialog:!1,moveToOtherDiaolog:!1,moveIds:null,toId:null}},methods:{getList:function(t,e,r){var i=0<arguments.length&&void 0!==t?t:this.page&&this.page.num||1,a=this,s=1<arguments.length&&void 0!==e?e:this.page&&this.page.offset||10,n=2<arguments.length&&void 0!==r?r:null;c.getList(o({pageNum:i,pageOffset:s,group_id:this.currGroup},n)).then(function(t){a.list=t.data,a.page=t.page})},urgentDigitalBook:function(){for(var e=this,t=this.getChecked(),r=0,i=t.length;r<i;r++)for(var a=0,s=this.list.length;a<s;a++)if(this.list[a].id==t[r]&&1!=this.list[a].audits_status)return void this.$message.error("只能勾选待审核数据");t&&this.services.urgentDigitalBook({id:t}).then(function(t){return e.$message.success("已提交加急审核")})},opnePublishDialog:function(t){this.detailData=t,this.publishDialog=!0},delChoosens:function(t){var i=this,r=[];if(t)r.push(t);else{var e=Array.from(document.querySelectorAll('input[name="ids"]:checked'));if(e.forEach(function(t){r.push(t.value)}),!e.length)return void this.$message.error("请先选中!")}0<r.length&&this.$confirm("是否删除?").then(function(t){var e=(0,a.default)(document.querySelector("#mainForm"),{hash:!0});i.services.del({id:r}).then(function(t){i.getList(i.page.num,i.page.offset,e),i.getGroupList()}).catch(function(t){var e=t.payload;for(var r in e.messages){i.$message.error(e.messages[r]);break}})}).catch(function(t){})},KnowledgeClick:function(t){this.detailDialoaType=t},saveOk:function(t){this.detailData.id||(this.detailData=t),this.getList(),this.getGroupList()},handleClose:function(t){this.getList(),t()}}}},872:function(t,e,r){}}]);