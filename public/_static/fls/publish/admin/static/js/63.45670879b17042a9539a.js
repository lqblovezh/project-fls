/*!
 * {
 *   "buildtime": "2019-07-19 15:01:49",
 *   "workspace": "F:\\project\\x-book4\\js",
 *   "username": "Administrator",
 *   "hostname": "PC201608171616",
 *   "platform": "win32",
 *   "git": {
 *     "branch": "master",
 *     "hash": "b17f442a6",
 *     "message": [
 *       "commit b17f442a62eb78bc9ab78ffe68e3afb76c3e3548",
 *       "Author: YangZai <552396385@qq.com>",
 *       "Date:   Fri Jul 19 14:48:13 2019 +0800",
 *       "    xxxxxx"
 *     ],
 *     "user": "YangZai",
 *     "email": "552396385@qq.com",
 *     "remote": [
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (fetch)",
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (push)"
 *     ]
 *   }
 * }
 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{1329:function(e,t,a){"use strict";var l=a(959);a.n(l).a},1336:function(e,t,a){"use strict";function l(){var a=this,e=a.$createElement,l=a._self._c||e;return l("div",{staticClass:"indexs"},[l("Top",{attrs:{currentPlant:"X-PUBLISH"}}),l("Menu",{attrs:{curr:"/jurisdiction"}}),l("div",{staticClass:"mainRight"},[l("div",{staticClass:"maindata"},[l("div",{staticClass:"serachWrap"},[l("div",{staticClass:"NavList"},[l("el-tabs",{on:{"tab-click":a.handleNavClick},model:{value:a.activeName,callback:function(e){a.activeName=e},expression:"activeName"}},[l("el-tab-pane",{attrs:{label:"管理员列表",name:"manager"}}),l("el-tab-pane",{attrs:{label:"管理员日志",name:"journal"}}),l("el-tab-pane",{attrs:{label:"角色管理",name:"role"}})],1)],1),l("form",{attrs:{id:"mainForm"}},[a._m(0),l("span",{staticClass:"group-inline"},[l("el-button",{attrs:{type:"primary",icon:"el-icon-search",plain:""},on:{click:a.seareHandeler}},[a._v("搜索")]),l("el-button",{attrs:{type:"primary",icon:"el-icon-plus",plain:""},on:{click:function(e){return a.showDetaile()}}},[a._v("新增")])],1)])]),l("div",{staticClass:"tableWrap"},[l("table",{staticClass:"table"},[a._m(1),a.pageList.length?l("tbody",a._l(a.pageList,function(t){return l("tr",[l("td",{domProps:{textContent:a._s(t.name)}}),l("td",{domProps:{textContent:a._s(t.exp)}}),l("td",[l("Icon",{attrs:{type:"icon-detail",title:"详情",plain:"",size:"mini"},on:{click:function(e){return a.showDetaile(t.id)}}}),l("Icon",{attrs:{type:"icon-delete",title:"删除",plain:"",size:"mini"},on:{click:function(e){return a.deleteHandeler([t.id])}}})],1)])}),0):a._e()])])]),l("el-dialog",{attrs:{visible:a.detailVisible,"before-close":a.handleClose,"lock-scroll":!1,width:"70%"},on:{"update:visible":function(e){a.detailVisible=e}}},[l("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[l("el-tabs",{attrs:{value:"detail"}},[l("el-tab-pane",{attrs:{label:"详情",name:"detail"}})],1)],1),l("el-form",{ref:"detailDialog",attrs:{model:a.detailDate,rules:a.detailRules}},[l("el-form-item",{attrs:{label:"角色名:","label-width":"120px",prop:"name"}},[l("el-input",{model:{value:a.detailDate.name,callback:function(e){a.$set(a.detailDate,"name",e)},expression:"detailDate.name"}})],1),l("el-form-item",{attrs:{label:"角色描述:","label-width":"120px",prop:"exp"}},[l("el-input",{attrs:{type:"textarea"},model:{value:a.detailDate.exp,callback:function(e){a.$set(a.detailDate,"exp",e)},expression:"detailDate.exp"}})],1)],1),l("table",{staticClass:"table border",attrs:{width:"100%",id:"detailTable"}},[l("thead",[l("tr",[l("th",[l("span",[a._v("页面显示")]),a.detailDate.accesses?l("input",{ref:"checkAll",attrs:{type:"checkbox"},domProps:{checked:a.isAllChecked},on:{click:a.selectAll}}):a._e(),l("span",[a._v("全选")])]),l("th",[a._v("权限功能")])])]),l("tbody",a._l(a.detailDate.accesses,function(e,t){return l("tr",[l("td",{attrs:{align:"center"}},[l("input",{ref:"ids",refInFor:!0,attrs:{type:"checkbox",name:"pages",id:"item_"+e.id},domProps:{checked:a.isChecked(e)},on:{click:function(e){return a.handlePageClick(t,e)}}}),l("label",{attrs:{for:"item_"+e.id},domProps:{textContent:a._s(e.name)}})]),l("td",{attrs:{align:"left"}},[l("ul",{staticClass:"options"},[l("li",[l("input",{attrs:{type:"checkbox",id:"items_"+e.id+"add","data-type":"allow_create"},domProps:{checked:e.allow_create},on:{click:function(e){return a.handleOptionsClick(t,e)}}}),l("label",{attrs:{for:"items_"+e.id+"add"}},[a._v("新增")])]),l("li",[l("input",{attrs:{type:"checkbox",id:"items_"+e.id+"del","data-type":"allow_delete_all"},domProps:{checked:e.allow_delete_all},on:{click:function(e){return a.handleOptionsClick(t,e)}}}),l("label",{attrs:{for:"items_"+e.id+"del"}},[a._v("删除")])]),l("li",[l("input",{attrs:{type:"checkbox",id:"items_"+e.id+"mod","data-type":"allow_edit_all"},domProps:{checked:e.allow_edit_all},on:{click:function(e){return a.handleOptionsClick(t,e)}}}),l("label",{attrs:{for:"items_"+e.id+"mod"}},[a._v("修改")])]),l("li",[l("input",{attrs:{type:"checkbox",id:"items_"+e.id+"viw","data-type":"allow_view_all"},domProps:{checked:e.allow_view_all},on:{click:function(e){return a.handleOptionsClick(t,e)}}}),l("label",{attrs:{for:"items_"+e.id+"viw"}},[a._v("查询")])])])])])}),0)]),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{attrs:{type:"info"},on:{click:a.handleClose}},[a._v("取消")]),l("el-button",{attrs:{type:"primary"},on:{click:a.save}},[a._v("确定")])],1)],1)],1)],1)}var i=[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"group-inline"},[t("input",{staticClass:"form-control",attrs:{name:"name",placeholder:"输入角色名搜索"}})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",[a("th",[e._v("角色名")]),a("th",{attrs:{width:"400"}},[e._v("角色描述")]),a("th",[e._v("操作")])])])}];a.d(t,"a",function(){return l}),a.d(t,"b",function(){return i})},371:function(e,t,a){"use strict";a.r(t);var l=a(1336),i=a(957);for(var n in i)"default"!==n&&function(e){a.d(t,e,function(){return i[e]})}(n);a(1329);var r=a(0),s=Object(r.a)(i.default,l.a,l.b,!1,null,"5a44a03d",null);t.default=s.exports},957:function(e,t,a){"use strict";a.r(t);var l=a(958),i=a.n(l);for(var n in l)"default"!==n&&function(e){a.d(t,e,function(){return l[e]})}(n);t.default=i.a},958:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},l=(o(a(84)),o(a(158))),i=o(a(157)),r=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}}(a(129)),s=a(126);function o(e){return e&&e.__esModule?e:{default:e}}t.default={mixins:[s.publicMixin],data:function(){return{pageList:[],query:null,path:"jurisdiction",activeName:"role",detailVisible:!1,detailDate:{id:"",name:"",exp:"",accesses:{}},detailRules:{name:[{required:!0,message:"请输入角色名",trigger:"blur"}],exp:[{required:!0,message:"请输入角色描述",trigger:"blur"}]}}},methods:{getList:function(e,t,a){var l=this,i=n({pageNum:0<arguments.length&&void 0!==e?e:1,pageOffset:1<arguments.length&&void 0!==t?t:1e3},a);r.listRole(i).then(function(e){l.page=e.page,l.pageList=e.data})},showDetaile:function(a){var l=this;this.detailDate.id=this.detailDate.name=this.detailDate.exp="",r.detailRole({id:a}).then(function(e){if(a){var t=l.pageList.find(function(e){return e.id===a});l.detailDate.id=a,l.detailDate.name=t.name,l.detailDate.exp=t.exp}l.detailDate.accesses=e.data,l.detailVisible=!0})},deleteHandeler:function(e){var t=this,a=0<arguments.length&&void 0!==e?e:[];if(a.length||Array.from(document.querySelectorAll("[name='checkbox']:checked")).forEach(function(e){a.push(e.value)}),!a.length)return this.$message.error("请确认你要删除的内容！");this.$confirm("确认删除？").then(function(e){r.deleteRole({id:a}).then(function(e){t.getList()})}).catch(function(e){})},save:function(){var i=this;this.$refs.detailDialog.validate(function(e){if(!e)return!1;var l=i.$loading({text:"保存中...",background:"rgba(0, 0, 0, 0.8)"});r.role(i.detailDate).then(function(e){i.$message.success("保存成功"),l.close(),i.getList(),i.detailVisible=!1}).catch(function(e){var t=e.payload;for(var a in l.close(),t.messages){i.$message.error(t.messages[a]);break}})})},handlePageClick:function(e,t){var a=t.target.checked?1:0,l=this.detailDate.accesses[e];a||(this.$refs.checkAll.checked=!1),l.allow_create=a,l.allow_delete_all=a,l.allow_edit_all=a,l.allow_view_all=a},handleOptionsClick:function(e,t){t.target.checked||(this.$refs.checkAll.checked=!1);var a=t.target.getAttribute("data-type"),l=t.path[3].querySelectorAll("input").length,i=t.path[3].querySelectorAll("input:checked").length;this.detailDate.accesses[e][a]=l===i?1:0},isChecked:function(e){return e.allow_create&&e.allow_delete_all&&e.allow_edit_all&&e.allow_view_all},selectAll:function(e){var t=e.target.checked?1:0,a=this.detailDate.accesses;for(var l in a)a[l].allow_create=t,a[l].allow_delete_all=t,a[l].allow_edit_all=t,a[l].allow_view_all=t}},computed:{isAllChecked:function(){var e=this.detailDate.accesses,t=!0,a=!1,l=void 0;try{for(var i,n=Object.keys(e)[Symbol.iterator]();!(t=(i=n.next()).done);t=!0){var r=e[i.value];if(!(r.allow_create&&r.allow_delete_all&&r.allow_edit_all&&r.allow_view_all))return!1}}catch(e){a=!0,l=e}finally{try{!t&&n.return&&n.return()}finally{if(a)throw l}}return!0}},components:{Menu:l.default,Top:i.default}}},959:function(e,t,a){}}]);