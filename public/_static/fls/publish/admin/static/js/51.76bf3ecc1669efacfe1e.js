/*!
 * {
 *   "buildtime": "2019-07-19 15:01:49",
 *   "workspace": "F:\\project\\x-book4\\js",
 *   "username": "Administrator",
 *   "hostname": "PC201608171616",
 *   "platform": "win32",
 *   "git": {
 *     "branch": "master",
 *     "hash": "b17f442a6",
 *     "message": [
 *       "commit b17f442a62eb78bc9ab78ffe68e3afb76c3e3548",
 *       "Author: YangZai <552396385@qq.com>",
 *       "Date:   Fri Jul 19 14:48:13 2019 +0800",
 *       "    xxxxxx"
 *     ],
 *     "user": "YangZai",
 *     "email": "552396385@qq.com",
 *     "remote": [
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (fetch)",
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (push)"
 *     ]
 *   }
 * }
 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{1330:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.addBackups=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)("/common/api/db/backups",t).then(function(t){var e=result.data,n=e.task_id,s=e.status,a=e.percent,r=e.messages;e.create_time,e.update_time;return addResListener({res_id:n,res_status:s,res_percent:a,res_messages:r}),result})},e.backupAndRestoreList=function(){return(0,r.request_get)("/common/api/db/backups")},e.deleteBackupAndRestore=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_delete)("/common/api/db/backups/"+t.task_id)},e.restoreBackup=function(){return(0,r.request_post)("/common/api/db/restore")},e.queryBackupRestore=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_get)("/common/api/db/backups/"+t.task_id)};var s,a=n(10),r=((s=a)&&s.__esModule,n(7))},1331:function(t,e,n){"use strict";var s=n(962);n.n(s).a},1335:function(t,e,n){"use strict";function s(){var n=this,t=n.$createElement,s=n._self._c||t;return s("div",{staticClass:"indexs"},[s("Top",{attrs:{currentPlant:"X-PUBLISH"}}),s("Menu",{attrs:{curr:"/backupAndRestore"}}),s("div",{staticClass:"mainRight"},[s("div",{staticClass:"maindata"},[s("div",{staticClass:"backup"},[n._m(0),s("div",{staticClass:"backup_operate"},[s("p",[n._v("请确保你有足够的存储空间,并确保整个备份过程中系统运行的连续性，点击按钮开始备份")]),s("input",{attrs:{type:"button",value:"开始备份"},on:{click:function(t){return n.startBackup()}}})])]),s("div",{staticClass:"tableWrap"},[s("table",{staticClass:"table"},[n._m(1),s("tbody",n._l(n.backupInfoList,function(e){return s("tr",[s("td",[n._v(n._s(e.task_id))]),s("td",[n._v(n._s(e.status))]),s("td",[n._v(n._s(e.percent))]),s("td",[n._v(n._s(e.messages))]),s("td",[s("Icon",{attrs:{type:"icon-delete",title:"删除",plain:"",size:"mini"},on:{click:function(t){return n.deleteBackup([e.task_id])}}})],1)])}),0)])]),n._m(2)])])],1)}var a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"backup_title"},[n("div",{staticClass:"backup_title_line"}),n("span",[t._v("数据备份")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",[t._v("任务ID")]),n("th",[t._v("状态")]),n("th",[t._v("完成百分比")]),n("th",[t._v("任务状态说明")]),n("th",[t._v("操作")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"backup restore"},[n("div",{staticClass:"backup_title"},[n("div",{staticClass:"backup_title_line"}),n("span",[t._v("备份还原")])]),n("div",{staticClass:"restore_search"}),n("div",{staticClass:"backup_operate"},[n("p",[t._v("还原操作会覆盖现有数据，建议您当前数据先进行备份，整个还原操作过程需要3分钟，请确保系统运行的连续性，不然会造成数据丢失，点击按钮开始还原数据")]),n("input",{attrs:{type:"button",value:"开始还原"}})])])}];n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a})},372:function(t,e,n){"use strict";n.r(e);var s=n(1335),a=n(960);for(var r in a)"default"!==r&&function(t){n.d(e,t,function(){return a[t]})}(r);n(1331);var u=n(0),i=Object(u.a)(a.default,s.a,s.b,!1,null,"3656f3b8",null);e.default=i.exports},960:function(t,e,n){"use strict";n.r(e);var s=n(961),a=n.n(s);for(var r in s)"default"!==r&&function(t){n.d(e,t,function(){return s[t]})}(r);e.default=a.a},961:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s,a,r=d(n(5)),u=(d(n(84)),d(n(158))),i=d(n(157)),c=(function(t){{if(t&&t.__esModule)return;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);e.default=t}}(n(129)),n(126)),o=n(1330);function d(t){return t&&t.__esModule?t:{default:t}}function l(t){return function(){var i=t.apply(this,arguments);return new Promise(function(r,u){return function e(t,n){try{var s=i[t](n),a=s.value}catch(t){return void u(t)}if(!s.done)return Promise.resolve(a).then(function(t){e("next",t)},function(t){e("throw",t)});r(a)}("next")})}}e.default={mixins:[c.publicMixin],data:function(){return{path:"backupAndRestore",backupInfoList:[],queryInfoList:[]}},methods:{startBackup:(a=l(r.default.mark(function t(){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,o.addBackups)();case 2:return t.next=4,this.getList();case 4:case"end":return t.stop()}},t,this)})),function(){return a.apply(this,arguments)}),getList:(s=l(r.default.mark(function t(){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,o.backupAndRestoreList)();case 2:this.backupInfoList=t.sent.data,this.backupInfoList;case 4:case"end":return t.stop()}},t,this)})),function(){return s.apply(this,arguments)}),deleteBackup:function(e){var n=this;this.$confirm("确认删除？").then(function(t){(0,o.deleteBackupAndRestore)({task_id:e}).then(function(t){n.getList(),n.$message.success("删除成功")})}).catch(function(t){})},queryBackupStatus:function(t){var e=this;(0,o.queryBackupRestore)({task_id:t}).then(function(t){e.getList(),e.queryInfoList=(0,o.queryBackupRestore)().data})}},components:{Menu:u.default,Top:i.default}}},962:function(t,e,n){}}]);