/*!
 * {
 *   "buildtime": "2019-07-19 15:01:49",
 *   "workspace": "F:\\project\\x-book4\\js",
 *   "username": "Administrator",
 *   "hostname": "PC201608171616",
 *   "platform": "win32",
 *   "git": {
 *     "branch": "master",
 *     "hash": "b17f442a6",
 *     "message": [
 *       "commit b17f442a62eb78bc9ab78ffe68e3afb76c3e3548",
 *       "Author: YangZai <552396385@qq.com>",
 *       "Date:   Fri Jul 19 14:48:13 2019 +0800",
 *       "    xxxxxx"
 *     ],
 *     "user": "YangZai",
 *     "email": "552396385@qq.com",
 *     "remote": [
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (fetch)",
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (push)"
 *     ]
 *   }
 * }
 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{1304:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getList=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_get)(restUrl_publish+"/api/audio_product",t)},e.save=function(t){var e=t.id,a=l(t,["id"]);if(e)return(0,r.request_put)(restUrl_publish+"/api/audio_product/"+e,a);return(0,r.request_post)(restUrl_publish+"/api/audio_product",a)},e.getInfo=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=s.default.compile(restUrl_publish+"/api/audio_product/:id");return(0,r.request_get)(e(t),t)},e.del=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)(restUrl_publish+"/api/audio_product/delete",t)},e.urgentDigital=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_put)(restUrl_publish+"/api/audio_product/urgent",t)},e.audits=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_put)(restUrl_publish+"/api/audio_product/audits",t)},e.issuance=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,a=l(t,["id"]),i=s.default.compile(restUrl_publish+"/api/comproduct/:id/issuance");return(0,r.request_put)(i({id:e}),a).then(function(t){return(0,o.suance)({id:e,info:t.data}),t})},e.addGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)(restUrl_publish+"/api/audio_product/groups",t)},e.modifyGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=s.default.compile(restUrl_publish+"/api/audio_product/:id/groups");return(0,r.request_put)(e(t),t)},e.deleteGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=s.default.compile(restUrl_publish+"/api/audio_product/:id/groups");return(0,r.request_delete)(e({id:t.id[0]}),t)},e.listGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_get)(restUrl_publish+"/api/audio_product/groups",t)},e.moveGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return t.rel_id=t.id,delete t.id,(0,r.request_put)(restUrl_publish+"/api/groups/audio_product",t)};var i,r=a(7),n=a(9),s=(i=n)&&i.__esModule?i:{default:i},o=a(85);function l(t,e){var a={};for(var i in t)0<=e.indexOf(i)||Object.prototype.hasOwnProperty.call(t,i)&&(a[i]=t[i]);return a}},1305:function(t,e,a){"use strict";var i=a(902);a.n(i).a},1353:function(t,e,a){"use strict";function i(){var i=this,t=i.$createElement,r=i._self._c||t;return r("div",{staticClass:"index clearfix"},[r("Top",{attrs:{currentPlant:"X-PUBLISH"}}),r("Menu",{attrs:{curr:"/digitalProductLibrary/audio"}}),r("div",{staticClass:"mainRight"},[r("div",{staticClass:"contentWrap"},[r("div",{staticClass:"contentLeft"},[r("div",{staticClass:"maindata"},[r("div",{staticClass:"serachWrap"},[r("div",{staticClass:"title"}),r("form",{staticClass:"clearfix",attrs:{id:"mainForm"}},[r("span",{staticClass:"group-inline"},[r("el-input",{attrs:{placeholder:"听读名称",name:"name",clearable:""},model:{value:i.searchQuery.name,callback:function(t){i.$set(i.searchQuery,"name",t)},expression:"searchQuery.name"}})],1),r("span",{staticClass:"group-inline"},[r("TimePick",{attrs:{inputsName:["start_time","end_time"]}})],1),r("span",{staticClass:"group-inline"},[r("select",{staticClass:"form-control",staticStyle:{width:"110px"},attrs:{placeholder:"状态",name:"status"}},[r("option",{attrs:{value:""}},[i._v("审核状态")]),i._l(i.status,function(t,e){return r("option",{domProps:{value:e}},[i._v(i._s(t))])})],2)]),r("span",{staticClass:"group-inline"},[r("el-button",{attrs:{size:"mediu",type:"primary",icon:"el-icon-search",plain:""},on:{click:i.query}},[i._v("搜索")]),r("el-button",{attrs:{size:"mediu",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return i.opneDetailDialog("info")}}},[i._v("新建")])],1)])]),r("div",{staticClass:"tableWrap"},[r("div",{staticClass:"tableTop"},[r("div",{staticClass:"title vel-line"},[r("span",[i._v("全部 "),i.page?r("span",{staticClass:"totalNum"},[i._v("("+i._s(i.page.total)+")")]):i._e()]),r("div",{staticClass:"btns"},[r("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(t){return i.audits()}}},[i._v("审核")]),r("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:i.urgentDigital}},[i._v("加急审核")]),r("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:i.moveToOther}},[i._v("移动分组")]),r("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(t){return i.delChoosen(!1)}}},[i._v("删除")])],1)])]),r("table",{staticClass:"table"},[r("thead",[r("tr",[r("th",{staticClass:"allBtn"},[r("input",{attrs:{type:"checkbox"},on:{click:function(t){return i.checkAll(t)}}})]),r("th",[i._v("名称")]),r("th",[i._v("作者")]),r("th",[i._v("听读数量")]),r("th",{staticStyle:{width:"150px"}},[i._v("可分发平台")]),r("th",{attrs:{width:"70"}},[i._v("审核状态")]),r("th",{attrs:{width:"70"}},[i._v("分发状态")]),r("th",{staticClass:"time"},[i._v("分发时间")]),r("th",{staticClass:"operate"},[i._v("操作")])])]),i.list?r("tbody",i._l(i.list,function(a){return r("tr",[r("td",[r("input",{ref:"ids",refInFor:!0,attrs:{type:"checkbox",name:"ids","data-type":a.status},domProps:{value:a.id}})]),r("td",[r("img",{staticClass:"cover-photo",attrs:{src:a.img_src}}),r("div",{staticClass:"th-name bookName",attrs:{title:a.name}},[i._v(i._s(a.name))])]),r("td",[r("div",{staticClass:"th-name",attrs:{title:a.author}},[i._v(i._s(a.author))])]),r("td",[i._v(i._s(a.count))]),r("td",[r("ul",{staticClass:"contList"},i._l(a.platforms,function(t,e){return!a.platforms||"retailer"!=e||i.$config.isShowRetailers?r("li",[r("span",{class:{disabled:0==t},domProps:{textContent:i._s("retailer"==e?"电商平台":e)}})]):i._e()}),0)]),r("td",{class:i.getColor(a.status)},[i._v(i._s(a.status))]),r("td",[i._v(i._s(a.release_status_name||"-"))]),r("td",[i._v(i._s(a.release_time||"-"))]),r("td",[r("div",{staticClass:"btns"},[r("Icon",{attrs:{size:"mini",title:"详情",type:"icon-detail",plain:""},on:{click:function(t){return i.opneDetailDialog("info",a)}}}),1!=a.audits_status?r("Icon",{attrs:{size:"mini",title:"审核",type:"icon-menu-publish",plain:""},on:{click:function(t){return i.audits(a.id)}}}):i._e(),3==a.audits_status?r("Icon",{attrs:{size:"mini",title:"分发",type:"icon-fenfa",plain:""},on:{click:function(t){return i.opnePublishDialog(a)}}}):i._e(),1!=a.audits_status?r("Icon",{attrs:{size:"mini",title:"删除",type:"icon-delete",plain:""},on:{click:function(t){return i.delChoosen(a.id)}}}):i._e()],1)])])}),0):i._e()]),i.page?r("div",{staticClass:"pageWrap"},[r("el-pagination",{attrs:{small:!1,background:"","current-page":i.page.num,"page-sizes":[10,50,100],"page-size":i.page.offset,layout:"total, sizes,prev, pager, next, jumper",total:i.page.total},on:{"size-change":i.handleSizeChange,"current-change":i.handleCurrentChange}})],1):i._e()]),r("div",{staticClass:"gruopList"},[r("GroupList",{attrs:{groupList:i.groupList,currGroup:i.currGroup},on:{addGroup:i.addGroup,updateGroup:i.updateGroup,delGroup:i.delGroup,groupChange:i.groupChange}})],1)])])])]),r("div",{staticClass:"dialogs"},[i.publishDialog?r("Dispense",{attrs:{publishDialog:i.publishDialog,item:i.detailData},on:{"update:publishDialog":function(t){i.publishDialog=t},"update:publish-dialog":function(t){i.publishDialog=t},dispenseOk:i.dispenseOk}}):i._e(),r("Examine",{attrs:{examineDialog:i.examineDialog},on:{"update:examineDialog":function(t){i.examineDialog=t},"update:examine-dialog":function(t){i.examineDialog=t},saveExamine:i.saveExamine}}),r("el-dialog",{staticClass:"no-footer",attrs:{center:!1,visible:i.detailDialog,"close-on-click-modal":!1,top:"50px",width:"1200px"},on:{"update:visible":function(t){i.detailDialog=t}}},[r("div",{staticClass:"content",attrs:{slot:"title"},slot:"title"},[i.detailDialog?r("Detail",{attrs:{type:i.detailDialoaType,detailDialog:i.detailDialog,detailData:i.detailData,services:i.services,readOnly:i.readOnly},on:{saveok:i.saveOk,Knowledgeclick:i.KnowledgeClick,"update:detailDialog":function(t){i.detailDialog=t},"update:detail-dialog":function(t){i.detailDialog=t}}}):i._e()],1)]),r("el-dialog",{attrs:{center:!1,visible:i.moveToOtherDiaolog,"close-on-click-modal":!1,title:"移动分组",width:"500px"},on:{"update:visible":function(t){i.moveToOtherDiaolog=t}}},[r("div",{staticClass:"group"},[r("div",{staticClass:"label"},[i._v("移动到")]),r("select",{ref:"moveToId",staticClass:"form-control",attrs:{placeholder:"请选择"}},i._l(i.groupList,function(t,e){return t.id!=i.currGroup&&""!=t.id?r("option",{domProps:{value:t.id,textContent:i._s(t.name)}}):i._e()}),0)]),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"info"},on:{click:function(t){i.moveToOtherDiaolog=!1}}},[i._v("返回")]),r("el-button",{attrs:{type:"primary"},on:{click:i.moveToSubmit}},[i._v(" 确定")])],1)])],1)],1)}var r=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return r})},355:function(t,e,a){"use strict";a.r(e);var i=a(1353),r=a(900);for(var n in r)"default"!==n&&function(t){a.d(e,t,function(){return r[t]})}(n);a(1305);var s=a(0),o=Object(s.a)(r.default,i.a,i.b,!1,null,"577649e8",null);e.default=o.exports},375:function(t,e,a){"use strict";a.r(e);var i=a(376),r=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,function(){return i[t]})}(n);e.default=r.a},376:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["groupList","currGroup"],data:function(){return{newGroupDialogOpen:!1,updateGroupDialogOpen:!1,currEditGroup:null}},created:function(){},computed:{},methods:{groupChange:function(t){this.$emit("groupChange",t)},addGroupDialog:function(){},delGroup:function(e){var a=this;this.$confirm("是否删除分组:"+e.name).then(function(t){dir(t),a.$emit("delGroup",e.id)}).catch(function(t){dir(t)})},updateGroupDialog:function(t){this.updateGroupDialogOpen=!0,this.currEditGroup=t},addGroup:function(){if(this.$refs.addGroupForm.valiAll()){var t=document.querySelector("#addGroupForm");this.$emit("addGroup",t),this.newGroupDialogOpen=!1}},updateGroup:function(){if(this.$refs.updateGroupForm.valiAll()){var t=document.querySelector("#updateGroupForm");this.$emit("updateGroup",t),this.updateGroupDialogOpen=!1}}}}},377:function(t,e,a){},378:function(t,e,a){"use strict";a.r(e);var i=a(379),r=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,function(){return i[t]})}(n);e.default=r.a},379:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(126),r=a(127);e.default={mixins:[i.getIconStyle],props:{publishDialog:{type:Boolean,default:!1},item:{type:Object,default:{}},is_release:Boolean},data:function(){return{list:null,coverDialog:!1,choiceDialog:!1,currentItem:null,currentVersion:null}},created:function(){this.getList()},methods:{getList:function(){var i=this;(0,r.getDispense)({entity_type:this.item.type_number||this.item.type,id:this.item.id}).then(function(t){i.list=t.data}).catch(function(t){var e=t.payload;for(var a in e.messages){i.$message.error(e.messages[a]);break}})},colse:function(){this.$emit("update:publishDialog",!1)},save:function(){var e=[];this.$refs.dispense.querySelectorAll("input[type=checkbox]:checked").forEach(function(t){e.push(t.value)}),e.length?this.$emit("dispenseSave",e):this.$message.error("请选择你要发布的平台")},pushTime:function(t){return t?"最近"+t+"发布过":"最近暂无分发"},push:function(e){var a=this;this.currentItem=e,this.is_release&&e.release_msg.length?this.$confirm("信息不全是否分发?").then(function(t){e.version?a.coverDialog=!0:a.dispense()},function(t){var e=t.payload;log(e.message)}).catch(function(t){log("cancel")}):e.version&&e.version.length?this.coverDialog=!0:this.dispense()},dispense:function(t,e){var i=this;(0,r.dispense)({platform_id:this.currentItem.id,audits_id:this.item.audits_id,is_cover:t,version_id:e}).then(function(t){i.$message.success("分发提交成功,请稍后查看结果!"),i.$emit("dispenseOk")}).catch(function(t){var e=t.payload;for(var a in e.messages){i.$message.error(e.messages[a]);break}})},getdefect:function(t){return"缺失字段: "+t.release_msg.join("/")},getBtnName:function(t){return this.is_release&&!t.is_release?"缺少关键信息不能分发":t.release_msg&&t.release_msg.length?"确认分发":"分发"},coverDispense:function(){var e=this;if(!this.currentVersion)return this.$message.warning("请选择你要覆盖的版本号!");var t=this.currentItem.version.find(function(t){return t.xread_book_id===e.currentVersion}).version_id;this.dispense(this.currentVersion,t)}}}},380:function(t,e,a){},381:function(t,e,a){"use strict";a.r(e);var i=a(382),r=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,function(){return i[t]})}(n);e.default=r.a},382:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var p=r(a(5)),f=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},n=a(387),i=(r(a(84)),a(395));function r(t){return t&&t.__esModule?t:{default:t}}function v(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}e.default={props:{resourceDialog:{type:Boolean,default:!1},singleElection:{type:Boolean,default:!0},type:{type:[String,Number],default:"1"},curSoucesList:{type:Array,default:[]},isShowType:{type:Boolean,default:!1},idName:String,isShowSearch:Boolean,isShowResource:Boolean,isDebris:{default:!1},parameter:Object},data:function(){return{dataList:[],page:null,currentType:null,contentType:[{name:"电子书",value:"1"},{name:"图片",value:"3"},{name:"音频",value:"4"},{name:"视频",value:"5"},{name:"3D内容",value:"6"},{name:"VR",value:"7"},{name:"AR",value:"8"}],query:{},answerLevel:[{label:"简单",value:"easy"},{label:"一般",value:"general"},{label:"困难",value:"difficulty"}],groupList:[]}},created:function(){this.currentType=this.type||"1",this.isShowResource&&this.contentType.push({name:"共享资源",value:"22"}),this.type.includes("20")&&(this.contentType=[{name:"权威案例",value:"20-1"},{name:"法律法规",value:"20-2"},{name:"法律观点",value:"20-3"},{name:"裁判文书",value:"20-4"},{name:"图书",value:"20-6"},{name:"文书范本",value:"20-7"}]),31==this.type&&this.getGroupList()},methods:{getList:function(t,e){var a=this,i=0<arguments.length&&void 0!==t?t:this.page&&this.page.num||1,r=1<arguments.length&&void 0!==e?e:this.page&&this.page.offset||10;(0,n._addBooks)(f({pageNum:i,pageOffset:r,type:this.currentType||this.type},this.parameter,this.query)).then(function(t){a.dataList=t.data||[],a.page=t.page})},colse:function(){this.$emit("update:resourceDialog",!1)},save:function(){var e=[];this.$refs.dispense.querySelectorAll("input[type=checkbox]:checked").forEach(function(t){e.push(t.value)}),e.length?this.$emit("dispenseSave",e):this.$message.error("请选择你要发布的平台")},search:function(){this.getList(1,this.page.offset)},addSelection:function(){var d=this;return function(t){return function(){var o=t.apply(this,arguments);return new Promise(function(n,s){return function e(t,a){try{var i=o[t](a),r=i.value}catch(t){return void s(t)}if(!i.done)return Promise.resolve(r).then(function(t){e("next",t)},function(t){e("throw",t)});n(r)}("next")})}}(p.default.mark(function t(){var e,a,i,r,n,s,o,l,u,c;return p.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=document.querySelector(".addBookForm"),a=e.querySelectorAll('input[name="ids"]:checked'),i=[],a.length){t.next=5;break}return t.abrupt("return",d.$message.warning("请选择添加内容"));case 5:r=function(e){if(-1<d.curSoucesList.findIndex(function(t){return t.id==e.value||t.b_id==e.value}))return"continue";i.push(f({},d.dataList.find(function(t){return t.id==e.value}),{action:"add"}))},s=!(n=!0),o=void 0,t.prev=9,l=a[Symbol.iterator]();case 11:if(n=(u=l.next()).done){t.next=19;break}if(c=u.value,"continue"===r(c))return t.abrupt("continue",16);t.next=16;break;case 16:n=!0,t.next=11;break;case 19:t.next=25;break;case 21:t.prev=21,t.t0=t.catch(9),s=!0,o=t.t0;case 25:t.prev=25,t.prev=26,!n&&l.return&&l.return();case 28:if(t.prev=28,s)throw o;t.next=31;break;case 31:return t.finish(28);case 32:return t.finish(25);case 33:d.$emit("select",[].concat(i,v(d.curSoucesList)));case 34:case"end":return t.stop()}},t,d,[[9,21,25,33],[26,,28,32]])}))()},checkAll:function(i,t){var r=this;document.querySelector("."+t).querySelectorAll('input[name="ids"]').forEach(function(e,t){var a=r.curSoucesList.findIndex(function(t){return t.id==e.value||t.b_id==e.value});i.target.checked?-1==a&&r.curSoucesList.push(f({},r.dataList.find(function(t){return t.id==e.value}),{action:"add"})):r.curSoucesList.splice(a,1),e.checked=i.target.checked})},uncheckedAll:function(t,e){var a=this,i=this.curSoucesList.findIndex(function(t){return a.idName?t[a.idName]==e[a.idName]:t.id==e.id||t.b_id==e.id});t.target.checked?-1==i&&this.curSoucesList.push(e):this.curSoucesList.splice(i,1),this.singleElection||(this.$refs.ids.forEach(function(t){return t.checked=!1}),t.target.checked=!0)},isChecked:function(e){var a=this;return-1<this.curSoucesList.findIndex(function(t){return a.idName?t[a.idName]==e[a.idName]:t.id===e.id||t.b_id===e.id})},handleSizeChange:function(t){this.getList(1,t)},handleCurrentChange:function(t){this.getList(t,this.page.offset)},getGroupList:function(){var e=this;(0,i.listGroup)().then(function(t){e.groupList=t.data})}},watch:{currentType:function(t){this.getList()}}}},383:function(t,e,a){},384:function(t,e,a){"use strict";a.r(e);var i=a(386),r=a(375);for(var n in r)"default"!==n&&function(t){a.d(e,t,function(){return r[t]})}(n);a(385);var s=a(0),o=Object(s.a)(r.default,i.a,i.b,!1,null,"82bd0f98",null);e.default=o.exports},385:function(t,e,a){"use strict";var i=a(377);a.n(i).a},386:function(t,e,a){"use strict";function i(){var a=this,t=a.$createElement,i=a._self._c||t;return i("div",{staticClass:"div"},[i("div",{staticClass:"groupWrap"},[i("div",{staticClass:"list"},[i("ul",a._l(a.groupList,function(e){return i("li",{staticClass:"licontent",class:{red:e.id==a.currGroup}},[i("div",{staticClass:"name ellipsis",attrs:{title:e.name+"("+e.num+")"},on:{click:function(t){return a.groupChange(e.id)}}},[i("span",{staticClass:"title"},[a._v(a._s(e.name))]),i("span",[a._v(a._s("("+e.num+")"))])]),""!=e.id&&"non"!=e.id?i("div",{staticClass:"btns"},[i("span",{on:{click:function(t){return a.updateGroupDialog(e)}}},[i("i",{staticClass:"el-icon-edit"})]),i("span",{on:{click:function(t){return a.delGroup(e)}}},[i("i",{staticClass:"el-icon-delete"})])]):a._e()])}),0)]),i("div",{staticClass:"addGroupBtnWrap"},[i("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){a.newGroupDialogOpen=!0}}},[i("i",{staticClass:"el-icon-plus"},[a._v("新建分组")])])],1)]),i("div",{staticClass:"dialogs"},[a.newGroupDialogOpen?i("el-dialog",{attrs:{title:"新增",visible:a.newGroupDialogOpen,width:"500px"},on:{"update:visible":function(t){a.newGroupDialogOpen=t}}},[i("div",{staticClass:"formWrap"},[i("VaForm",{ref:"addGroupForm"},[i("form",{attrs:{id:"addGroupForm"}},[i("div",{staticClass:"group"},[i("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"}],staticClass:"form-control",attrs:{name:"name"}})])])])],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"info"},on:{click:function(t){a.newGroupDialogOpen=!1}}},[a._v("取消")]),i("el-button",{attrs:{type:"primary"},on:{click:a.addGroup}},[a._v("确定")])],1)]):a._e(),a.updateGroupDialogOpen?i("el-dialog",{attrs:{title:"修改",visible:a.updateGroupDialogOpen,width:"500px"},on:{"update:visible":function(t){a.updateGroupDialogOpen=t}}},[i("div",{staticClass:"formWrap"},[i("VaForm",{ref:"updateGroupForm"},[a.currEditGroup?i("form",{attrs:{id:"updateGroupForm"}},[i("div",{staticClass:"group"},[i("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"}],staticClass:"form-control",attrs:{name:"name"},domProps:{value:a.currEditGroup.name}}),i("input",{staticClass:"hide",attrs:{name:"id"},domProps:{value:a.currEditGroup.id}})])]):a._e()])],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"info"},on:{click:function(t){a.updateGroupDialogOpen=!1}}},[a._v("取消")]),i("el-button",{attrs:{type:"primary"},on:{click:a.updateGroup}},[a._v("确定")])],1)]):a._e()],1)])}var r=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return r})},391:function(t,e,a){"use strict";a.r(e);var i=a(406),r=a(381);for(var n in r)"default"!==n&&function(t){a.d(e,t,function(){return r[t]})}(n);a(405);var s=a(0),o=Object(s.a)(r.default,i.a,i.b,!1,null,"6c0c32d9",null);e.default=o.exports},393:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.addTheme=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)(restUrl_publish+"/api/themes",t).then(function(t){var e=t.data,a=e.id,i=e.name,r=e.type_name,n=e.abs,s=e.tag;return(0,f.addResListener)({res_id:a,res_type:r,res_name:i,res_exp:n,res_lables:[s]}),t})},e.modifyTheme=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,a=m(t,["id"]),i=h.default.compile(restUrl_publish+"/api/themes/:id");return(0,r.request_put)(i({id:e}),a)},e.ListTheme=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_get)(restUrl_publish+"/api/themes",t)},e.del=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)(restUrl_publish+"/api/themes/delete",t)},e.modifyGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,a=m(t,["id"]),i=h.default.compile(restUrl_publish+"/api/themes/groups/:id");return(0,r.request_put)(i({id:e}),a)},e.listGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_get)(restUrl_publish+"/api/themes/groups",t)},e.deleteGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)(restUrl_publish+"/api/themes/groups/delete",t)},e.addGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)(restUrl_publish+"/api/themes/groups",t)},e.moveGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_put)(restUrl_publish+"/api/themes/groups",t)},e.deleteThemeBook=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)(restUrl_publish+"/api/themes/book_remove",t)},e.detailTheme=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,a=m(t,["id"]),i=h.default.compile(restUrl_publish+"/api/themes/:id");return(0,r.request_get)(i({id:e}),a)},e.audits=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_put)(restUrl_publish+"/api/themes/issuance",e).then(function(t){return(0,f.suance)({id:e.id,info:t.data}),t})},e.detailUrgent=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_put)(restUrl_publish+"/api/themes/urgent",t)},e.backups=g,e._themeAdd=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.type,a=void 0===e?"book":e,i=m(t,["type"]);{if("book"==a)return(0,n.listBooks)(i);if("audio"==a)return(0,s.listAudio)(i);if("video"==a)return(0,o.listVideo)(i);if("3d"==a)return(0,u.listContent)(i);if("ar"==a)return(0,c.listLibraries)(i);if("product"==a)return(0,d.listDigitalBook)(i);if("release"==a)return(0,p.getList)(i)}},e._themeDetail=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.type,a=void 0===e?1:e,i=t.c_id,r=m(t,["type","c_id"]);{if(1==a)return i?g(r):(0,n.detailBooks)(r);if(3==a)return(0,l.detailPicture)(r);if(4==a)return(0,s.detailAudio)(r);if(5==a)return(0,o.detailVideo)(r);if(6==a)return(0,u.detailContent)(r);if(8==a)return(0,c.detailLibraries)(r);if(10==a)return(0,d.detailDigitalBook)(r);if(13==a);else if(31==a)return}};var i,r=a(7),n=a(394),s=a(408),o=a(392),l=a(407),u=a(417),c=a(418),d=a(387),p=a(416),f=a(85),v=a(9),h=(i=v)&&i.__esModule?i:{default:i};function m(t,e){var a={};for(var i in t)0<=e.indexOf(i)||Object.prototype.hasOwnProperty.call(t,i)&&(a[i]=t[i]);return a}function g(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,a=m(t,["id"]),i=h.default.compile(restUrl_publish+"/api/themes/book/:id");return(0,r.request_get)(i({id:e}),a)}},396:function(t,e,a){"use strict";a.r(e);var i=a(404),r=a(378);for(var n in r)"default"!==n&&function(t){a.d(e,t,function(){return r[t]})}(n);a(403);var s=a(0),o=Object(s.a)(r.default,i.a,i.b,!1,null,"cb351288",null);e.default=o.exports},397:function(t,e,a){"use strict";a.r(e);var i=a(398),r=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,function(){return i[t]})}(n);e.default=r.a},398:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=d(a(5)),l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},r=d(a(84)),i=d(a(159)),n=d(a(446)),s=d(a(420)),u=c(a(432));c(a(387));function c(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}function d(t){return t&&t.__esModule?t:{default:t}}function p(t){return function(){var o=t.apply(this,arguments);return new Promise(function(n,s){return function e(t,a){try{var i=o[t](a),r=i.value}catch(t){return void s(t)}if(!i.done)return Promise.resolve(r).then(function(t){e("next",t)},function(t){e("throw",t)});n(r)}("next")})}}var f="章节锚点",v="内容锚点";e.default={components:{VaForm:i.default,AnchorList:n.default,Reader:s.default},props:["type","constitute","detailData","readOnly","defaultData"],created:function(){var e=this;return p(o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.defaultData){t.next=7;break}if(e.glist=e.defaultData.knowledge,e.glist){t.next=4;break}return t.abrupt("return");case 4:e.currGroupId=e.glist[0].id,e.currGroup=e.glist[0],e.list=e.glist[0].nowledge_info;case 7:return t.prev=7,t.next=10,e.getGlist();case 10:return t.next=12,e.getProgress();case 12:t.next=16;break;case 14:t.prev=14,t.t0=t.catch(7);case 16:case"end":return t.stop()}},t,e,[[7,14]])}))()},data:function(){return{list:null,glist:null,anchorsList:[],page:null,Anchors_chapter:f,Anchors_content:v,Anchors_audio:"音频锚点",Anchors_video:"视频锚点",checkedAll:!1,currGroupId:null,currknowledgeId:null,currGroup:{},openAnchorList:!1,anchorType:f,anchorList:null,bookInfo:{value:"",lsit:[]},groupDialog:!1,knowledgeDialog:!1,addAnchorDialog:!1,readerDialog:!1,readerId:null,editGroup:{},editKnowledge:{},anchorCheckedAll:!1,mount:{number:0}}},computed:{isBook:function(){return this.anchorType==f||this.anchorType==v}},methods:{getGlist:function(){var i=this;return p(o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i.detailData.id){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,u.listGroup({id:i.detailData.id}).then(function(t){var e=t.data.findIndex(function(t){return i.currGroupId===t.id}),a=-1<e?e:0;i.glist=t.data,i.glist&&0<i.glist.length?(i.currGroupId=t.data[a].id,i.currGroup=t.data[a],i.anchorType=f,i.getList()):(i.list=i.glist=i.currGroupId=null,i.currGroup={})}).catch(function(t){var e=t.payload;for(var a in e.messages){i.$message.error(e.messages[a]);break}});case 4:case"end":return t.stop()}},t,i)}))()},getList:function(t,e,a){var i=0<arguments.length&&void 0!==t?t:1,r=this,n=1<arguments.length&&void 0!==e?e:10,s=a;return p(o.default.mark(function t(){var e;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r.anchorCheckedAll=!1,t.next=3,u.listKnowledge(l({pageNum:i,pageOffset:n},s,{id:r.detailData.id,group_id:r.currGroupId})).then(function(t){r.list=t.data,r.page=t.page}).catch(function(t){var e=t.payload;for(var a in e.messages){r.$message.error(e.messages[a]);break}});case 3:if(e=r.$refs.mainListWrap){t.next=6;break}return t.abrupt("return");case 6:e.querySelectorAll("input[type='checkbox']").forEach(function(t){t.checked=!1});case 8:case"end":return t.stop()}},t,r)}))()},groupDel:function(e){var a=this;this.$confirm("是否删除该知识结构?").then(function(t){u.deleteGroup({id:[e.id],type:a.detailData.type_number,pid:a.detailData.id}).then(function(t){a.getGlist(),a.$emit("saveok")}).catch(function(t){for(var e in payload.messages){a.$message.error(payload.messages[e]);break}})})},groupEdit:function(t){if(!this.detailData.id)return this.$message.error("请保存产品信息后再做添加");this.editGroup=t,this.groupDialog=!0},KnowledgeEdit:function(t){this.editKnowledge=t,this.knowledgeDialog=!0},groupCommit:function(){var i=this;return p(o.default.mark(function t(){var e,a;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i.$refs.groupFormVa.valiAll()){t.next=2;break}return t.abrupt("return");case 2:if(e=(0,r.default)(i.$refs.groupForm,{hash:!0}),t.prev=3,e.id){t.next=10;break}return e.id=i.detailData.id,t.next=8,u.addGroup(l({},e,{type:i.detailData.type_number,pid:i.detailData.id})).then(function(t){i.groupDialog=!1,i.getGlist(),i.$emit("saveok")});case 8:t.next=12;break;case 10:return t.next=12,u.modifyGroup(l({},e,{type:i.detailData.type_number,pid:i.detailData.id})).then(function(t){i.groupDialog=!1,i.getGlist(),i.$emit("saveok")});case 12:t.next=18;break;case 14:t.prev=14,t.t0=t.catch(3),a=t.t0.message,i.$message.error(a);case 18:case"end":return t.stop()}},t,i,[[3,14]])}))()},guaZai:function(){var i=this;return p(o.default.mark(function t(){var e,a;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.mount({id:i.detailData.id});case 3:return t.next=5,i.getProgress();case 5:t.next=17;break;case 7:t.prev=7,t.t0=t.catch(0),e=t.t0.payload,t.t1=o.default.keys(e.messages);case 11:if((t.t2=t.t1()).done){t.next=17;break}return a=t.t2.value,i.$message.error(e.messages[a]),t.abrupt("break",17);case 17:case"end":return t.stop()}},t,i,[[0,7]])}))()},getProgress:function(){var e=this;return p(o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.mountSchedule({id:e.detailData.id},function(t){"100"==t.data.number&&e.getList(),e.mount=l({},t.data,{number:parseInt(t.data.number)})}).then(function(t){e.mount=t.data});case 2:case"end":return t.stop()}},t,e)}))()},KnowledgeCommit:function(){var e=this;if(this.$refs.KnowledgeFormVa.valiAll()){var t=(0,r.default)(this.$refs.KnowledgeForm,{hash:!0});try{t.id?u.modifyNowledges(l({},t,{type:this.detailData.type_number,pid:this.detailData.id})).then(function(t){e.knowledgeDialog=!1,e.getList(),e.$emit("saveok")}):(t.t_id=this.detailData.id,t.group_id=this.currGroupId,u.addNowledges(l({},t,{type:this.detailData.type_number,pid:this.detailData.id})).then(function(t){e.knowledgeDialog=!1,e.getGlist(),e.getList(),e.$emit("saveok")}))}catch(t){var a=t.payload;for(var i in a.messages){this.$message.error(a.messages[i]);break}}}},toTop:function(){var i=this,e=[];if(this.$refs.mainListWrap.querySelectorAll("[name='ids']:checked").forEach(function(t){e.push(t.value)}),!e.length)return this.$message.error("请确认你要置顶的内容！");u.upNowledges({id:e}).then(function(t){i.getList()}).catch(function(t){var e=t.payload;for(var a in e.messages){i.$message.error(e.messages[a]);break}})},knowDel:function(t){var i=this,e=0<arguments.length&&void 0!==t?t:[],a=this.$refs.mainListWrap.querySelectorAll("[name='ids']:checked");if(e.length||a.forEach(function(t){e.push(t.value)}),!e.length)return this.$message.error("请确认你要删除的内容！");this.$confirm("是否删除选中知识点?").then(function(t){u.deleteNowledges({id:e,type:i.detailData.type_number,pid:i.detailData.id}).then(function(t){i.getGlist(),i.$emit("saveok")}).catch(function(t){var e=t.payload;for(var a in e.messages){i.$message.error(e.messages[a]);break}})})},removeAnchor:function(t){var i=this,e=0<arguments.length&&void 0!==t?t:[],a=this.$refs.anchorList.querySelectorAll("[name='ids']:checked");if(e.length||a.forEach(function(t){e.push(t.value)}),!e.length)return this.$message.error("请确认你要删除的锚点！");this.$confirm("是否删除选中锚点?").then(function(t){u.delAnchor({id:e,type:i.detailData.type_number,pid:i.detailData.id}).then(function(t){i.getAnchorList(),i.$emit("saveok")}).catch(function(t){var e=t.payload;for(var a in e.messages){i.$message.error(e.messages[a]);break}})})},handleSizeChange:function(t){this.getList(1,t)},handleCurrentChange:function(t){this.getList(t,this.page.offset)},changeGroup:function(e){if(this.checkedAll=!1,this.anchorCheckedAll=!1,this.currGroupId=e.id,this.currGroup=e,this.openAnchorList=!1,this.defaultData){var t=this.glist.findIndex(function(t){return t.id===e.id});this.list=this.glist[t].nowledge_info}else this.getList()},getbookList:function(){var i=this;return p(o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.listNowledges({id:i.detailData.id}).then(function(t){i.bookInfo.list=t.data}).catch(function(t){var e=t.payload;for(var a in e.messages){i.$message.error(e.messages[a]);break}});case 2:case"end":return t.stop()}},t,i)}))()},getBtn:function(){var e,i=this;u.nowledge_btn({id:this.detailData.id}).then((e=p(o.default.mark(function t(e){var a;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i.anchorsList=e.data,t.t0=o.default.keys(i.anchorsList);case 2:if((t.t1=t.t0()).done){t.next=9;break}if(a=t.t1.value,i.anchorsList[a])return i.anchorType=i["Anchors_"+a],t.abrupt("break",9);t.next=7;break;case 7:t.next=2;break;case 9:return t.next=11,i.getbookList();case 11:return t.next=13,i.getAnchorList();case 13:i.openAnchorList=!0;case 14:case"end":return t.stop()}},t,i)})),function(t){return e.apply(this,arguments)}))},addAnchor:function(){this.addAnchorDialog=!0},setAnchor:function(e){var a=this;return p(o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a.currknowledgeId=e,a.anchorList=[],t.next=4,a.getBtn();case 4:case"end":return t.stop()}},t,a)}))()},changeAnchorType:function(t){this.anchorType=this["Anchors_"+t],this.anchorList=[],this.getAnchorList()},getAnchorList:function(){var e=this;u.nowledge_info({type:this.anchorType,id:this.currknowledgeId}).then(function(t){e.anchorList=t.data}),this.getList()},bookinfoChange:function(t){if(this.anchorType==v)return this.readerId=t,void(this.readerDialog=!0);this.addAnchorDialog=!0},bookinfoBlur:function(t){this.bookInfo.value&&!t&&this.anchorType==f?this.addAnchorDialog=!0:this.bookInfo.value&&!t&&this.anchorType==v&&(this.readerId||(this.readerId=this.bookInfo.value),this.readerDialog=!0)},anchorListCancle:function(){this.addAnchorDialog=!1,this.getAnchorList(),this.$emit("saveok")},addAnchorSuccess:function(){this.$message.success("添加锚点成功!"),this.getAnchorList()},isShowAnchors:function(t){return this.anchorType==this["Anchors_"+t]},getAnchorsText:function(t){return this["Anchors_"+t]},checkedAllBtn:function(t,e){this[e]=t.target.checked}}}},399:function(t,e,a){"use strict";a.r(e);var i=a(400),r=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,function(){return i[t]})}(n);e.default=r.a},400:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s(a(5)),o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},r=s(a(84)),n=s(a(159)),l=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}}(a(432));function s(t){return t&&t.__esModule?t:{default:t}}e.default={components:{VaForm:n.default},props:["type","bookInfo","themeId","currknowledgeId","detailData"],created:function(){var e=this;return function(t){return function(){var o=t.apply(this,arguments);return new Promise(function(n,s){return function e(t,a){try{var i=o[t](a),r=i.value}catch(t){return void s(t)}if(!i.done)return Promise.resolve(r).then(function(t){e("next",t)},function(t){e("throw",t)});n(r)}("next")})}}(i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.getList();case 1:case"end":return t.stop()}},t,e)}))()},data:function(){return{list:null,page:null,query:null,obj:{}}},computed:{},methods:{getList:function(t,e,a){var i=0<arguments.length&&void 0!==t?t:this.page&&this.page.num||1,r=this,n=1<arguments.length&&void 0!==e?e:this.page&&this.page.offset||10,s=a;return l.NowledgesList(o({pageNum:i,pageOffset:n},s,{id:"章节锚点"==this.type?this.bookInfo.value:this.themeId,type:this.type})).then(function(t){r.list=t.data,r.page=t.page})},checkedAll:function(e){var a=this;e.target.checked?this.list.forEach(function(t){a.obj[t.id]=t}):this.list.forEach(function(t){a.obj[t.id]=null}),this.$refs.ids.forEach(function(t){t.checked=e.target.checked}),log(this.obj)},choose:function(t,e){t.target.checked?this.obj[e.id]=e:this.obj[e.id]=null},addAnchorCommit:function(){var i=this,t=[];for(var e in this.obj)this.obj.hasOwnProperty(e)&&this.obj[e]&&t.push(this.obj[e]);l.addAnchor({n_id:this.currknowledgeId,b_id:"章节锚点"==this.type?t.map(function(t){return t.id}):"",c_id:"章节锚点"==this.type?[this.bookInfo.value]:t.map(function(t){return t.id}),type:this.type,name:t.map(function(t){return t.chapter_name||t.name}),ptype:this.detailData.type_number,pid:this.detailData.id}).then(function(t){i.$message.success("添加成功"),i.$emit("anchorListCancle")}).catch(function(t){var e=t.payload;for(var a in e.messages){i.$message.error(e.messages[a]);break}})},handleSizeChange:function(t){this.getList(1,t)},handleCurrentChange:function(t){this.getList(t,this.page.offset)},seareHandeler:function(){this.query=(0,r.default)(this.$refs.mainForm,{hash:!0}),log(this.query),this.getList(1,10,this.query)}},filters:{formatHolder:function(t){return t.substr(0,2)+"名称"}}}},401:function(t,e,a){},402:function(t,e,a){},403:function(t,e,a){"use strict";var i=a(380);a.n(i).a},404:function(t,e,a){"use strict";function i(){var a=this,t=a.$createElement,i=a._self._c||t;return i("div",[i("el-dialog",{attrs:{center:!1,visible:a.coverDialog,top:"50px",width:"500px","show-close":!1,title:"x-read系统中已有该产品，选择你的操作"}},[i("div",{staticClass:"coverContent"},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){a.choiceDialog=!0}}},[a._v("覆盖原有产品")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return a.dispense()}}},[a._v("创建新的产品版本")])],1),i("div",{staticClass:"footer dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"info"},on:{click:function(t){a.coverDialog=!1}}},[a._v("取消")])],1)]),a.choiceDialog?i("el-dialog",{attrs:{center:!1,visible:a.choiceDialog,top:"50px",width:"500px","show-close":!1,title:"选择版本号"}},[i("div",{staticClass:"coverContent"},[i("el-radio-group",{model:{value:a.currentVersion,callback:function(t){a.currentVersion=t},expression:"currentVersion"}},a._l(a.currentItem.version,function(t){return i("el-radio",{key:t.xread_book_id,attrs:{label:t.xread_book_id}},[a._v(a._s(t.version_id))])}),1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:a.coverDispense}},[a._v("确定")]),i("el-button",{attrs:{type:"info"},on:{click:function(t){a.choiceDialog=!1}}},[a._v("取消")])],1)]):a._e(),i("el-dialog",{attrs:{center:!1,visible:a.publishDialog,top:"50px",width:"1000px","show-close":!1}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"el-icon-close",on:{click:a.colse}}),i("el-tabs",{attrs:{value:"ff"}},[i("el-tab-pane",{attrs:{label:"分发",name:"ff"}})],1)],1),i("ul",{ref:"dispense",staticClass:"content modular"},a._l(a.list,function(e){return i("li",[i("div",{staticClass:"icon"},[i("div",{class:a.getStyle(e.type)}),i("span",{domProps:{textContent:a._s(e.name)}})]),i("ul",{staticClass:"defect"},[e.release_msg&&!e.release_msg.length?i("li",{staticClass:"pass"},[a._v("可正常分发")]):a._e(),e.release_msg&&e.release_msg.length?i("li",{domProps:{textContent:a._s(a.getdefect(e))}}):a._e()]),i("el-button",{attrs:{type:!a.is_release||e.is_release?"primary":"info",size:"mini",plain:""},domProps:{textContent:a._s(a.getBtnName(e))},on:{click:function(t){a.is_release&&!e.is_release||a.push(e)}}})],1)}),0),i("div",{staticClass:"footer dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"info"},on:{click:a.colse}},[a._v("取消")])],1)])],1)}var r=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return r})},405:function(t,e,a){"use strict";var i=a(383);a.n(i).a},406:function(t,e,a){"use strict";function i(){var a=this,t=a.$createElement,i=a._self._c||t;return i("div",[i("el-dialog",{staticClass:"restBody2",attrs:{center:!1,visible:a.resourceDialog,width:"1200px",top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,"append-to-body":""},on:{"update:visible":function(t){a.resourceDialog=t}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("i",{staticClass:"el-icon-close",on:{click:a.colse}}),i("el-tabs",{attrs:{value:"detail"}},[i("el-tab-pane",{attrs:{label:"添加",name:"detail"}})],1)],1),i("el-form",{staticClass:"addBookForm"},[a.isShowType?i("span",{staticClass:"group-inline",staticStyle:{margin:"20px","margin-top":"0"}},[i("el-radio-group",{model:{value:a.currentType,callback:function(t){a.currentType=t},expression:"currentType"}},a._l(a.contentType,function(t){return i("el-radio-button",{key:t.id,attrs:{label:t.value}},[a._v(a._s(t.name))])}),1)],1):a._e(),a.isShowSearch?a._e():i("div",{staticClass:"serachWrap"},[i("form",{attrs:{id:"detailSearchForm"}},[i("span",{staticClass:"group-inline"},[i("input",{directives:[{name:"model",rawName:"v-model",value:a.query.name,expression:"query.name"}],staticClass:"form-control",attrs:{placeholder:"输入名称",name:"name"},domProps:{value:a.query.name},on:{input:function(t){t.target.composing||a.$set(a.query,"name",t.target.value)}}})]),31!=a.currentType?i("span",{staticClass:"group-inline"},[i("input",{directives:[{name:"model",rawName:"v-model",value:a.query.tag,expression:"query.tag"}],staticClass:"form-control",attrs:{placeholder:"输入标签",name:"tag"},domProps:{value:a.query.tag},on:{input:function(t){t.target.composing||a.$set(a.query,"tag",t.target.value)}}})]):a._e(),31==a.currentType?i("span",{staticClass:"group-inline"},[i("el-select",{attrs:{placeholder:"标签分组",clearable:""},model:{value:a.query.group_id,callback:function(t){a.$set(a.query,"group_id",t)},expression:"query.group_id"}},a._l(a.groupList,function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1):a._e(),i("span",{staticClass:"group-inline"},[i("TimePick",{attrs:{inputsName:["start_time","end_time"]}})],1),i("span",{staticClass:"group-inline"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-search",plain:""},on:{click:a.search}},[a._v("搜索")]),i("el-button",{attrs:{type:"primary",plain:""},on:{click:a.addSelection}},[a._v("添加选中")])],1)])]),i("table",{staticClass:"table",attrs:{width:"100%"}},[i("thead",[i("tr",[i("th",{attrs:{width:"80"}},[a.singleElection?i("input",{attrs:{type:"checkbox"},on:{click:function(t){return a.checkAll(t,"addBookForm")}}}):a._e(),i("span",{domProps:{textContent:a._s(a.singleElection?"全选":"选择")}})]),i("th",[a._v("名称")]),31!=a.currentType&&"coures"!=a.currentType?i("th",[a._v(a._s(22==a.currentType?"所属资源":"标签"))]):a._e(),31==a.currentType?i("th",[a._v("难易程度")]):a._e(),31==a.currentType?i("th",[a._v("分值")]):a._e(),"coures"==a.currentType?i("th",[a._v("所属教师")]):a._e(),i("th",[a._v("类型")]),i("th",[a._v("创建时间")])])]),a.dataList.length?i("tbody",a._l(a.dataList,function(e,t){return i("tr",[i("td",[i("input",{ref:"ids",refInFor:!0,attrs:{type:"checkbox","data-type":e.status,name:"ids"},domProps:{value:e.id,checked:a.isChecked(e)},on:{click:function(t){return a.uncheckedAll(t,e)}}})]),i("td",{staticClass:"namess",domProps:{innerHTML:a._s(e.name||e.title||e.question)}}),31!=a.currentType?i("td",[a._v(a._s(22==a.currentType?e.share_resource_name:e.tag))]):a._e(),31==a.currentType?i("td",[a._v(a._s(e.level_name))]):a._e(),31==a.currentType?i("td",[a._v(a._s(e.score))]):a._e(),"coures"==a.currentType?i("td",[a._v(a._s(e.teacher_name))]):a._e(),i("td",[a._v(a._s(e.type_name))]),i("td",[a._v(a._s(e.create_time))])])}),0):i("tbody",[i("tr",[i("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"5"}},[a._v("暂无数据")])])])]),a.page?i("div",{staticClass:"pageWrap"},[i("el-pagination",{attrs:{small:!1,background:"","current-page":a.page.num,"page-sizes":[10,50,100],"page-size":a.page.offset,layout:"total, sizes,prev, pager, next, jumper",total:a.page.total},on:{"size-change":a.handleSizeChange,"current-change":a.handleCurrentChange}})],1):a._e()]),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"info"},on:{click:a.colse}},[a._v("取消")]),i("el-button",{attrs:{type:"primary"},on:{click:a.addSelection}},[a._v("确定")])],1)],1)],1)}var r=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return r})},415:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getList=function(t){var e=t.type,a=t.id,i=t.resource_type;{if("book"==e)return l({id:a});if("video"==e)return c({id:a});if("resource"==e)return f({id:a,resource_type:i})}},e.del=function(t){var e=t.type,a=o(t,["type"]);{if("book"==e)return u(a);if("video"==e)return p(a);if("resource"==e)return h(a);if("audio"==e)return m(a)}},e.add=function(t){var e=t.type,a=o(t,["type"]);{if("book"==e)return u(a);if("video"==e)return d(a);if("resource"==e)return v(a)}},e.check=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=s.default.compile(restUrl_publish+"/api/components_paper/:id/check");return(0,r.request_get)(e(t))},e.bookList=l,e.bookInfo=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=s.default.compile(restUrl_publish+"/api/components_paper/:id");return(0,r.request_get)(e(t))},e.bookDel=u,e.bookSave=function(t){var e=t.id,a=o(t,["id"]);if(e){var i=s.default.compile(restUrl_publish+"/api/components_paper/:id");return(0,r.request_put)(i({id:e}),a)}return(0,r.request_post)(restUrl_publish+"/api/components_paper",a)},e.videoList=c,e.videoAdd=d,e.videoDel=p,e.resourceList=f,e.resourceAdd=v,e.resourceDel=h,e.groupList=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=s.default.compile(restUrl_publish+"/api/components_groups/:id/list");return(0,r.request_get)(e(t),t)},e.groupSave=function(t){var e=t.id,a=o(t,["id"]);if(e){var i=s.default.compile(restUrl_publish+"/api/components_groups/:id");return(0,r.request_put)(i({id:e}),a)}return(0,r.request_post)(restUrl_publish+"/api/components_groups",a)},e.groupDetail=function(t){var e=t.id,a=s.default.compile(restUrl_publish+"/api/components_groups/:id");return(0,r.request_get)(a({id:e}))},e.audioDel=m,e.saveEBook=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(t.current_id){var e=s.default.compile(restUrl_publish+"/api/components_ebooks/:id");return(0,r.request_put)(e({id:t.current_id}),t)}return(0,r.request_post)(restUrl_publish+"/api/components_ebooks",t)},e.getEBook=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=s.default.compile(restUrl_publish+"/api/components_ebooks/:id");return(0,r.request_get)(e(t))};var i,r=a(7),n=a(9),s=(i=n)&&i.__esModule?i:{default:i};function o(t,e){var a={};for(var i in t)0<=e.indexOf(i)||Object.prototype.hasOwnProperty.call(t,i)&&(a[i]=t[i]);return a}function l(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=s.default.compile(restUrl_publish+"/api/components_paper/:id/list");return(0,r.request_get)(e(t))}function u(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=s.default.compile(restUrl_publish+"/api/components_paper/:id");return(0,r.request_delete)(e(t))}function c(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=s.default.compile(restUrl_publish+"/api/components/:id/video");return(0,r.request_get)(e(t))}function d(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)(restUrl_publish+"/api/components/video",t)}function p(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=s.default.compile(restUrl_publish+"/api/components/:id/video");return(0,r.request_delete)(e({id:t.constitute_id}))}function f(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=s.default.compile(restUrl_publish+"/api/components/:id/resource");return(0,r.request_get)(e(t),t)}function v(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)(restUrl_publish+"/api/components/resource",t)}function h(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=s.default.compile(restUrl_publish+"/api/components/:id/resource");return(0,r.request_delete)(e({id:t.constitute_id}))}function m(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=s.default.compile(restUrl_publish+"/api/components_groups/:id");return(0,r.request_delete)(e(t),t)}},416:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getList=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_get)(restUrl_publish+"/api/comproduct/list",t)},e.getDetail=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_get)(restUrl_publish+"/api/comproduct",t)},e.del=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)(restUrl_publish+"/api/comproduct/delete",t)},e.urgentDigitalBook=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_put)(restUrl_publish+"/api/comproduct/urgent",t)},e.audits=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_put)(restUrl_publish+"/api/comproduct/audits",t)},e.issuance=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,a=function(t,e){var a={};for(var i in t)0<=e.indexOf(i)||Object.prototype.hasOwnProperty.call(t,i)&&(a[i]=t[i]);return a}(t,["id"]),i=s.default.compile(restUrl_publish+"/api/comproduct/:id/issuance");return(0,r.request_put)(i({id:e}),a).then(function(t){return(0,o.suance)({id:e,info:t.data}),t})},e.addGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)(restUrl_publish+"/api/comproduct/groups",t)},e.modifyGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=s.default.compile(restUrl_publish+"/api/comproduct/groups/:id");return(0,r.request_put)(e(t),t)},e.deleteGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)(restUrl_publish+"/api/themes/groups/delete",t)},e.listGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_get)(restUrl_publish+"/api/comproduct/groups",t)},e.moveGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return t.rel_id=t.id,delete t.id,(0,r.request_put)(restUrl_publish+"/api/groups/comproduct",t)};var i,r=a(7),n=a(9),s=(i=n)&&i.__esModule?i:{default:i},o=a(85)},418:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.add=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)(restUrl_publish+"/api/librariess",t).then(function(t){var e=t.data,a=e._id,i=e.name,r=e.abs,n=e.author,s=e.tag,o=e.type_name;return(0,l.addResListener)({res_id:a,res_type:o,res_name:i,res_exp:r,res_author:n,res_lables:[s]}),t})},e.modify=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,a=o(t,["id"]),i=n.default.compile(restUrl_publish+"/api/librariess/:id");return(0,r.request_put)(i({id:e}),a)},e.listLibraries=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_get)(restUrl_publish+"/api/librariess",t)},e.educe=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,l.educeResListener)({res_url:(0,r.getFullPath)(restUrl_publish+"/api/librariess/export"+i.default.stringify(t,{addQueryPrefix:!0}))}),(0,r.request_get)(restUrl_publish+"/api/librariess/export",t)},e.putin=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)(restUrl_publish+"/api/librariess/import",t)},e.deleteLibraries=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)(restUrl_publish+"/api/librariess/delete",t)},e.detailLibraries=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=n.default.compile(restUrl_publish+"/api/librariess/:id");return(0,r.request_get)(e(t))},e.modifyGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.id,a=o(t,["id"]),i=n.default.compile(restUrl_publish+"/api/librariess/groups/:id");return(0,r.request_put)(i({id:e}),a)},e.deleteGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)(restUrl_publish+"/api/librariess/groups/delete",t)},e.addGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)(restUrl_publish+"/api/librariess/groups",t)},e.listGroup=function(){return(0,r.request_get)(restUrl_publish+"/api/librariess/groups")},e.moveGroup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_put)(restUrl_publish+"/api/librariess/groups",t)};var r=a(7),i=s(a(10)),n=s(a(9)),l=a(85);function s(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var a={};for(var i in t)0<=e.indexOf(i)||Object.prototype.hasOwnProperty.call(t,i)&&(a[i]=t[i]);return a}},421:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={0:"未审核",1:"待审核",2:"未通过",3:"已通过"}},425:function(t,e,a){"use strict";a.r(e);var i=a(449),r=a(397);for(var n in r)"default"!==n&&function(t){a.d(e,t,function(){return r[t]})}(n);a(448);var s=a(0),o=Object(s.a)(r.default,i.a,i.b,!1,null,"4e328e7a",null);e.default=o.exports},426:function(t,e,a){"use strict";a.r(e);var i=a(427),r=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,function(){return i[t]})}(n);e.default=r.a},427:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["infoData","mediaType","infoDialog"],data:function(){return{metadata:this.infoData.attributes||[]}},computed:{hassVideo:function(){return 6==this.infoData.type||5==this.infoData.type||8==this.infoData.type}},methods:{detailType:function(){return this.infoData.img_status}},created:function(){}}},428:function(t,e,a){},429:function(t,e,a){"use strict";a.r(e);var i=a(430),r=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,function(){return i[t]})}(n);e.default=r.a},430:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r,n,s,o=a(84),l=((i=o)&&i.__esModule,function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}}(a(415)));e.default={props:["dataType","isShow","detailData","defaultList","isLabelHide","onlyShow"],data:function(){return{services:l,type:"1",list:[]}},created:function(){this.defaultList?this.list=this.defaultList:this.getList(this.dataType)},computed:{},methods:(r={handleClick:function(){},getList:function(t){var e=this;this.detailData&&this.detailData.id&&this.services.getList({type:t,id:this.detailData.id,resource_type:this.type}).then(function(t){e.list=t.data})}},n="handleClick",s=function(t){log(t)},n in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s,r),watch:{defaultList:function(){this.list=this.defaultList},type:function(t){this.getList(this.dataType)}}}},431:function(t,e,a){},435:function(t,e,a){"use strict";a.r(e);var i=a(559),r=a(429);for(var n in r)"default"!==n&&function(t){a.d(e,t,function(){return r[t]})}(n);a(515);var s=a(0),o=Object(s.a)(r.default,i.a,i.b,!1,null,"c6b023a6",null);e.default=o.exports},439:function(t,e,a){"use strict";a.r(e);var i=a(440),r=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,function(){return i[t]})}(n);e.default=r.a},440:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},n=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}}(a(415)),s=a(435),o=(i=s)&&i.__esModule?i:{default:i};e.default={components:{Tab:o.default},props:{groupDialog:{type:Boolean,default:!1},detailData:Object,item:{type:Object,default:{}},isMedia:{type:Number,default:1},onlyShow:Boolean,defaultData:Object},data:function(){return{information:{},list:[],addMediaType:"4"}},created:function(){Object.entries(this.item).length&&this.defaultData,this.information=this.item,this.list=this.item.children||[],2==this.isMedia&&(this.addMediaType="5")},computed:{setTitle:function(){return Object.entries(this.item).length?this.item.name||"修改组":"新增组"}},methods:{getInfo:function(){var i=this;n.groupDetail({id:this.item.id,type:this.isMedia}).then(function(t){i.information=t.data,i.list=t.data.constitute}).catch(function(t){var e=t.payload;for(var a in e.messages){i.$message.error(e.messages[a]);break}})},update:function(t){this.list=t},colse:function(){this.$emit("update:groupDialog",!1)},save:function(){var i=this;this.$refs.detailForm.valiAll()&&n.groupSave(r({id:this.item?this.item.id:""},this.information,{product_id:this.detailData.id,type:this.isMedia,constitute:this.list})).then(function(t){log(t),i.$message.success("保存成功"),i.$emit("save"),i.colse()}).catch(function(t){var e=t.payload;for(var a in e.messages){i.$message.error(e.messages[a]);break}})},del:function(e){var t=this.list.findIndex(function(t){return t.id===e.id});-1<t&&this.list.splice(t,1)}}}},441:function(t,e,a){},442:function(t,e,a){"use strict";a.r(e);var i=a(443),r=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,function(){return i[t]})}(n);e.default=r.a},443:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}}(a(415));e.default={props:{detailData:Object,media:{type:Number,default:1},readOnly:{type:Boolean,default:!1},defaultData:Array},data:function(){return{audioList:[]}},created:function(){this.detailData&&this.detailData.id&&this.getAudio(),this.defaultData&&(this.audioList=this.defaultData)},computed:{},methods:{getAudio:function(){var e=this;s.groupList({id:this.detailData.id,type:this.media}).then(function(t){e.audioList=t.data})},del:function(t,e){var a=this,i=null,r=null;"object"==n(t.children)?i=t.id:(i=e.parent.data.id,r=t.id),log(i),s.audioDel({id:i,resource_id:r,product_id:this.detailData.id}).then(function(t){a.getAudio()})}}}},444:function(t,e,a){},446:function(t,e,a){"use strict";a.r(e);var i=a(450),r=a(399);for(var n in r)"default"!==n&&function(t){a.d(e,t,function(){return r[t]})}(n);a(447);var s=a(0),o=Object(s.a)(r.default,i.a,i.b,!1,null,"2628d7d4",null);e.default=o.exports},447:function(t,e,a){"use strict";var i=a(401);a.n(i).a},448:function(t,e,a){"use strict";var i=a(402);a.n(i).a},449:function(t,e,a){"use strict";function i(){var a=this,t=a.$createElement,i=a._self._c||t;return i("div",{staticClass:"div"},[a.readerDialog?i("Reader",{attrs:{readerDialog:a.readerDialog,currId:a.currknowledgeId,readerId:a.readerId,detailData:a.detailData,version:"production",markBtn:"锚点"},on:{"update:readerDialog":function(t){a.readerDialog=t},"update:reader-dialog":function(t){a.readerDialog=t},addAnchorSuccess:a.addAnchorSuccess}}):a._e(),i("div",{staticClass:"dialogs"},[i("el-dialog",{attrs:{center:!1,visible:a.groupDialog,"close-on-click-modal":!1,top:"50px",width:"500px","append-to-body":""},on:{"update:visible":function(t){a.groupDialog=t}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("el-tabs",{attrs:{value:"detail"}},[i("el-tab-pane",{attrs:{label:"知识点结构",name:"detail"}})],1)],1),i("VaForm",{ref:"groupFormVa"},[i("form",{ref:"groupForm"},[i("input",{staticClass:"hide",attrs:{name:"id"},domProps:{value:a.editGroup.id}}),a.groupDialog?i("div",{staticClass:"group"},[i("div",{staticClass:"label"},[a._v("名称:")]),i("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"}],staticClass:"form-control",attrs:{name:"name",type:"text"},domProps:{value:a.editGroup.name}})]):a._e(),i("div",{staticClass:"btns"},[i("el-button",{attrs:{size:"mediu",type:"primary"},on:{click:a.groupCommit}},[a._v("确定")]),i("el-button",{attrs:{size:"mediu",type:"info"},on:{click:function(t){a.groupDialog=!1}}},[a._v("取消")])],1)])])],1),i("el-dialog",{attrs:{center:!1,visible:a.knowledgeDialog,"close-on-click-modal":!1,top:"50px",width:"500px","append-to-body":""},on:{"update:visible":function(t){a.knowledgeDialog=t}}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("el-tabs",{attrs:{value:"detail"}},[i("el-tab-pane",{attrs:{label:"知识点",name:"detail"}})],1)],1),i("VaForm",{ref:"KnowledgeFormVa"},[i("form",{ref:"KnowledgeForm"},[i("input",{staticClass:"hide",attrs:{name:"id"},domProps:{value:a.editKnowledge.id}}),a.knowledgeDialog?i("div",{staticClass:"group"},[i("div",{staticClass:"label"},[a._v("名称:")]),i("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"}],staticClass:"form-control",attrs:{name:"name",type:"text"},domProps:{value:a.editKnowledge.name}})]):a._e(),i("div",{staticClass:"btns"},[i("el-button",{attrs:{size:"mediu",type:"primary"},on:{click:a.KnowledgeCommit}},[a._v("确定")]),i("el-button",{attrs:{size:"mediu",type:"info"},on:{click:function(t){a.knowledgeDialog=!1}}},[a._v("取消")])],1)])])],1),i("el-dialog",{attrs:{center:!1,visible:a.addAnchorDialog,"close-on-click-modal":!1,top:"50px",width:"80%","append-to-body":"",title:"锚点添加"},on:{"update:visible":function(t){a.addAnchorDialog=t}}},[a.addAnchorDialog?i("AnchorList",{attrs:{type:a.anchorType,bookInfo:a.bookInfo,themeId:a.detailData.id,currknowledgeId:a.currknowledgeId,detailData:a.detailData},on:{anchorListCancle:a.anchorListCancle}}):a._e()],1)],1),i("div",{staticClass:"topWrap"},[a.mount&&0<a.mount.number&&100!=a.mount.number&&!a.readOnly?i("div",{staticClass:"mount"},[i("el-progress",{staticClass:"mountProgress",attrs:{"text-inside":!0,"stroke-width":18,percentage:a.mount.number}}),100<=a.mount.number?i("span",[a._v("挂载完成")]):i("span",[a._v('正在挂载"'+a._s(a.mount.name)+'"')])],1):a._e(),i("div",{staticClass:"btns"},[a.readOnly?a._e():i("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return a.groupEdit({})}}},[a._v("新增知识结构")]),a.currGroupId&&!a.readOnly?i("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:a.guaZai}},[a._v("一键挂载")]):a._e()],1)]),a.currGroupId?i("div",{staticClass:"content clearfix"},[i("div",{staticClass:"left"},[i("ul",a._l(a.glist,function(e){return i("div",{staticClass:"li",class:{currGroup:e.id==a.currGroupId},on:{click:function(t){return a.changeGroup(e)}}},[i("span",{staticClass:"name",attrs:{title:e.name+"(100)"},domProps:{textContent:a._s(e.name+"("+e.num+")")}}),a.readOnly?a._e():i("div",{staticClass:"btns"},[i("Icon",{attrs:{type:"icon-menu-publish"},on:{click:function(t){return t.stopPropagation(),a.groupEdit(e)}}}),i("Icon",{attrs:{type:"el-icon-delete"},on:{click:function(t){return t.stopPropagation(),a.groupDel(e)}}})],1)])}),0)]),i("div",{staticClass:"tableWrap"},[i("div",{staticClass:"nav clearfix"},[i("div",{staticClass:"name",domProps:{textContent:a._s(a.currGroup.name)}}),a.openAnchorList?i("div",{staticClass:"btns"},[i("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(t){a.openAnchorList=!1}}},[a._v("返回")]),a.isBook?a._e():i("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:a.addAnchor}},[a._v("增加锚点")]),!a.bookInfo||a.anchorType!=a.Anchors_chapter&&a.anchorType!=a.Anchors_content?a._e():i("el-select",{attrs:{placeholder:"书籍设置",size:"small"},on:{change:a.bookinfoChange,"visible-change":a.bookinfoBlur},model:{value:a.bookInfo.value,callback:function(t){a.$set(a.bookInfo,"value",t)},expression:"bookInfo.value"}},a._l(a.bookInfo.list,function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1),i("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(t){return a.removeAnchor()}}},[a._v("移除")])],1):i("div",{staticClass:"btns"},[a.readOnly?a._e():i("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(t){return a.KnowledgeEdit({})}}},[a._v("新增知识点")]),a.readOnly?a._e():i("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:a.toTop}},[a._v("置顶")]),a.readOnly?a._e():i("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(t){return a.knowDel()}}},[a._v("删除")])],1)]),a.openAnchorList?a._e():i("div",{ref:"mainListWrap",staticClass:"mainListWrap"},[i("table",{staticClass:"table"},[i("thead",[i("tr",[a.readOnly?a._e():i("th",[a._v("全选"),i("input",{attrs:{type:"checkbox"},on:{click:function(t){return a.checkedAllBtn(t,"checkedAll")}}})]),i("th",[a._v("名称")]),i("th",[a._v("数量")]),i("th",{attrs:{width:"160"}},[a._v("创建时间")]),a.readOnly?a._e():i("th",{staticStyle:{"text-align":"center"},attrs:{width:"250"}},[a._v("操作")])])]),i("tbody",a._l(a.list,function(e){return i("tr",[a.readOnly?a._e():i("th",[i("input",{attrs:{type:"checkbox",name:"ids"},domProps:{checked:a.checkedAll,value:e.id}})]),i("th",[a._v(a._s(e.name))]),i("th",[a._v(a._s(e.num))]),i("th",[a._v(a._s(e.create_time))]),a.readOnly?a._e():i("th",[i("div",{staticClass:"btns"},[i("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(t){return a.KnowledgeEdit(e)}}},[a._v("重命名")]),i("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(t){return a.setAnchor(e.id)}}},[a._v("设置锚点")]),i("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(t){return a.knowDel([e.id])}}},[a._v("删除")])],1)])])}),0)]),a.page?i("div",{staticClass:"pageWrap"},[i("el-pagination",{attrs:{small:!1,background:"","current-page":a.page.num,"page-sizes":[10,50,100],"page-size":a.page.offset,layout:"sizes,prev, pager, next, jumper",total:a.page.total},on:{"size-change":a.handleSizeChange,"current-change":a.handleCurrentChange}})],1):a._e(),i("div",{staticClass:"btns"})]),a.openAnchorList?i("div",{staticClass:"anchorListWrap"},[i("div",{staticClass:"article"},[a.openAnchorList?i("table",{ref:"anchorList",staticClass:"table"},[i("thead",[i("tr",[i("th",{attrs:{width:"50"}},[a._v("全选"),i("input",{attrs:{type:"checkbox"},on:{click:function(t){return a.checkedAllBtn(t,"anchorCheckedAll")}}})]),i("th",[i("div",{staticClass:"title"},[i("span",{staticClass:"btns"},a._l(a.anchorsList,function(t,e){return t?i("span",{class:{currAnchorType:a.isShowAnchors(e)},domProps:{textContent:a._s(a.getAnchorsText(e))},on:{click:function(t){return a.changeAnchorType(e)}}}):a._e()}),0)])]),i("th",{directives:[{name:"show",rawName:"v-show",value:a.isBook,expression:"isBook"}],attrs:{width:"180"}},[a._v("所属图书")]),i("th",{staticClass:"btns",staticStyle:{"padding-right":"30px"},attrs:{width:"50"}},[a._v("操作")])])]),i("tbody",{staticClass:"contentAnchors"},a._l(a.anchorList,function(e){return i("tr",[i("td",[i("div",{staticClass:"input"},[i("input",{attrs:{type:"checkbox",name:"ids"},domProps:{checked:a.anchorCheckedAll,value:e.id}})])]),i("td",{staticClass:"point"},[a.anchorType==a.Anchors_content?i("div",{staticClass:"div"},[a._v(a._s(e.point))]):i("div",{staticClass:"div"},[a._v(a._s(e.name))])]),a.isBook?i("td",[a._v(a._s(e.book_name))]):a._e(),i("td",[i("div",{staticClass:"btns"},[i("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(t){return a.removeAnchor([e.n_info_id])}}},[a._v("移除")])],1)])])}),0)]):a._e()])]):a._e()])]):a._e()],1)}var r=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return r})},450:function(t,e,a){"use strict";function i(){var a=this,t=a.$createElement,i=a._self._c||t;return i("div",{staticClass:"div"},[i("div",{staticClass:"serachWrapd"},[i("div",{staticClass:"title"}),i("form",{ref:"mainForm"},[i("span",{staticClass:"group-inline"},[a.bookInfo&&"章节锚点"==a.type?i("el-select",{attrs:{placeholder:"选择所属书籍",size:"small",clearable:""},model:{value:a.bookInfo.value,callback:function(t){a.$set(a.bookInfo,"value",t)},expression:"bookInfo.value"}},a._l(a.bookInfo.list,function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1):a._e()],1),i("span",{staticClass:"group-inline"},[i("input",{staticClass:"form-control",attrs:{placeholder:a._f("formatHolder")(a.type),name:"name"}})]),i("span",{staticClass:"group-inline btn"},[i("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search",plain:""},on:{click:a.seareHandeler}},[a._v("搜索")]),i("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:a.addAnchorCommit}},[a._v("添加选中")])],1)])]),i("div",{staticClass:"tableWrap"},[i("table",{staticClass:"table"},[i("thead",[i("tr",[i("th",[a._v("全选"),i("input",{attrs:{type:"checkbox"},on:{click:a.checkedAll}})]),i("th",[a._v("名称")]),i("th",[a._v("创建时间")])])]),i("tbody",a._l(a.list,function(e){return i("tr",[i("th",[i("input",{ref:"ids",refInFor:!0,attrs:{type:"checkbox",name:"ids"},domProps:{checked:!!a.obj[e.id],value:e.id},on:{click:function(t){return a.choose(t,e)}}})]),i("th",[a._v(a._s(e.chapter_name||e.name))]),i("th",[a._v(a._s(e.create_time))])])}),0)]),a.page?i("div",{staticClass:"pageWrap"},[i("el-pagination",{attrs:{small:!1,background:"","current-page":a.page.num,"page-sizes":[10,50,100],"page-size":a.page.offset,layout:"total, sizes,prev, pager, next, jumper",total:a.page.total},on:{"size-change":a.handleSizeChange,"current-change":a.handleCurrentChange}})],1):a._e()]),i("div",{staticClass:"btns"},[i("el-button",{attrs:{type:"info"},on:{click:function(t){return a.$emit("anchorListCancle")}}},[a._v("取消")]),i("el-button",{attrs:{type:"primary"},on:{click:a.addAnchorCommit}},[a._v("确定")])],1)])}var r=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return r})},457:function(t,e,a){"use strict";a.r(e);var i=a(560),r=a(426);for(var n in r)"default"!==n&&function(t){a.d(e,t,function(){return r[t]})}(n);a(507);var s=a(0),o=Object(s.a)(r.default,i.a,i.b,!1,null,"45824198",null);e.default=o.exports},458:function(t,e,a){"use strict";a.r(e);var i=a(459),r=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,function(){return i[t]})}(n);e.default=r.a},459:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=h(a(5)),u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=h(a(590)),n=h(a(435)),s=h(a(516)),o=h(a(514)),c=h(a(391)),d=h(a(457)),p=h(a(425)),f=a(393),v=a(25);function h(t){return t&&t.__esModule?t:{default:t}}e.default={components:{Info:r.default,Tab:n.default,Resource:c.default,ContentDetail:d.default,Audio:s.default,Group:o.default,Knowledge:p.default},props:{type:String,detailData:Object,detailDialog:Boolean,services:Object,media:{type:Number,default:1},defaultData:Object,readOnly:Boolean},created:function(){this.curSoucesList=this.detailData&&this.detailData.constitute||this.defaultData&&this.defaultData.structure||[],this.defaultData&&(this.defaultAList=this.defaultData.structure)},data:function(){return{resourceDialog:!1,curSoucesList:[],infoDialog:!1,infoData:null,metadata:[],currentItem:{},groupDialog:!1,defaultAList:null}},computed:{},methods:{handleClick:function(t,e){this.activeName=t.name},detail:function(t,e){if("object"==(void 0===e?"undefined":i(e)))return this.curSoucesList=t.children,void this.addVideo(t);this.bookDetailInfo(t,t.type)},del:function(e){var t=this.curSoucesList.findIndex(function(t){return t.id===e.id});-1<t&&this.curSoucesList.splice(t,1)},bookDetailInfo:function(t,e){var i=this,a=t.id,r=t.c_id;(0,f._themeDetail)({c_id:r,id:a,type:e}).then(function(t){i.infoData=t.data,i.infoDialog=!0}).catch(function(t){var e=t.payload;for(var a in e.messages){i.$message.error(e.messages[a]);break}})},openResources:function(t){this.resourceDialog=!0,log(t),this.resourceType=t},addSelcet:function(t){this.$refs.group.update(t),this.curSoucesList=t,this.resourceDialog=!1},addVideo:function(t){if(this.detailData&&!this.detailData.id)return this.$message.error("请保存产品信息后再做添加");t||(this.curSoucesList=[]),this.currentItem=t||{},this.groupDialog=!0},saveAudioOK:function(){this.$refs.audio.getAudio(),this.$emit("saveok")},submitDetail:function(){var o=this;return function(t){return function(){var o=t.apply(this,arguments);return new Promise(function(n,s){return function e(t,a){try{var i=o[t](a),r=i.value}catch(t){return void s(t)}if(!i.done)return Promise.resolve(r).then(function(t){e("next",t)},function(t){e("throw",t)});n(r)}("next")})}}(l.default.mark(function t(){var e,a,i,r,n,s;return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=o.$refs.info.$refs.fenmian.files[0],a=o.$refs.info.$refs.detailForm.valiAll(),i=o.$refs.info.information,a){t.next=5;break}return t.abrupt("return",o.$message.error("请完善产品信息后再提交!"));case 5:if(o.curSoucesList.length){t.next=7;break}return t.abrupt("return",o.$message.error("产品结构必传!"));case 7:if(r=o.$loading({text:"正在上传",background:"rgba(0, 0, 0, 0.8)"}),t.prev=8,e)return t.next=12,(0,v.getTask)(e).then(function(t){i.img=t.data.path});t.next=12;break;case 12:if(i.img){t.next=14;break}return t.abrupt("return",o.$message.error("请上传封面!"));case 14:return t.next=16,o.services.save(u({id:o.detailData.id},i,{constitute:o.curSoucesList,attributes:{xRead:o.$refs.info.retailers},pro_attributes:o.$refs.info.metadata})).then(function(t){o.$message.success("保存成功"),r.close(),o.$emit("saveok",t.data)});case 16:t.next=29;break;case 18:t.prev=18,t.t0=t.catch(8),n=t.t0.payload,r.close(),t.t1=l.default.keys(n.messages);case 23:if((t.t2=t.t1()).done){t.next=29;break}return s=t.t2.value,o.$message.error(n.messages[s]),t.abrupt("break",29);case 29:case"end":return t.stop()}},t,o,[[8,18]])}))()}}}},460:function(t,e,a){"use strict";a.r(e);var i=a(461),r=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,function(){return i[t]})}(n);e.default=r.a},461:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(a(5)),o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},l=(i(a(84)),a(25));function i(t){return t&&t.__esModule?t:{default:t}}e.default={props:["detailData","services","readOnly","defaultData"],data:function(){return{information:{},previewImgUrl:null,retailers:{},xRead:{},activeName:"1",metadata:[]}},created:function(){log("------",this.readOnly),this.detailData&&Object.entries(this.detailData).length&&this.getInfo(),this.defaultData&&(this.retailers=this.defaultData.retailers||{},this.information=this.defaultData.base||{},this.xRead=this.defaultData.xread||{},this.metadata=this.defaultData.attributes||[])},methods:{getInfo:function(){var e=this;this.services.getInfo({id:this.detailData.id}).then(function(t){e.retailers=t.data.retailers,e.information=t.data,e.xRead=t.data["x-read"],e.metadata=t.data.pro_attributes||[]})},previewImg:function(t,e){var a=t.target.files[0];this.imgFile=a,this.previewImgUrl=URL.createObjectURL(a)},submitDetail:function(){var n=this;return function(t){return function(){var o=t.apply(this,arguments);return new Promise(function(n,s){return function e(t,a){try{var i=o[t](a),r=i.value}catch(t){return void s(t)}if(!i.done)return Promise.resolve(r).then(function(t){e("next",t)},function(t){e("throw",t)});n(r)}("next")})}}(s.default.mark(function t(){var e,a,i,r;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=n.$refs.fenmian.files[0],n.$refs.detailForm.valiAll()){t.next=4;break}return t.abrupt("return");case 4:if(a=n.$loading({text:"正在上传",background:"rgba(0, 0, 0, 0.8)"}),t.prev=5,e)return t.next=9,(0,l.getTask)(e).then(function(t){n.information.img=t.data.path});t.next=9;break;case 9:return t.next=11,n.services.save(o({id:n.detailData.id},n.information,{attributes:{xRead:n.xRead,eCommerce:n.retailers},pro_attributes:n.metadata})).then(function(t){a.close(),n.$message.success("保存成功"),n.$emit("saveok",t.data)});case 11:t.next=24;break;case 13:t.prev=13,t.t0=t.catch(5),i=t.t0.payload,a.close(),t.t1=s.default.keys(i.messages);case 18:if((t.t2=t.t1()).done){t.next=24;break}return r=t.t2.value,n.$message.error(i.messages[r]),t.abrupt("break",24);case 24:case"end":return t.stop()}},t,n,[[5,13]])}))()}}}},462:function(t,e,a){},463:function(t,e,a){},507:function(t,e,a){"use strict";var i=a(428);a.n(i).a},514:function(t,e,a){"use strict";a.r(e);var i=a(571),r=a(439);for(var n in r)"default"!==n&&function(t){a.d(e,t,function(){return r[t]})}(n);a(565);var s=a(0),o=Object(s.a)(r.default,i.a,i.b,!1,null,"9f5c06d6",null);e.default=o.exports},515:function(t,e,a){"use strict";var i=a(431);a.n(i).a},516:function(t,e,a){"use strict";a.r(e);var i=a(570),r=a(442);for(var n in r)"default"!==n&&function(t){a.d(e,t,function(){return r[t]})}(n);a(566);var s=a(0),o=Object(s.a)(r.default,i.a,i.b,!1,null,"3584d4e9",null);e.default=o.exports},559:function(t,e,a){"use strict";function i(){var a=this,t=a.$createElement,i=a._self._c||t;return a.list?i("div",{staticClass:"tableWrap"},[a.isShow&&!a.onlyShow?i("el-radio-group",{staticStyle:{"margin-bottom":"20px"},attrs:{size:"small"},model:{value:a.type,callback:function(t){a.type=t},expression:"type"}},[i("el-radio-button",{attrs:{label:"1"}},[a._v("图集")]),i("el-radio-button",{attrs:{label:"2"}},[a._v("视频集")]),i("el-radio-button",{attrs:{label:"3"}},[a._v("音频集")])],1):a._e(),i("table",{staticClass:"table"},[i("thead",[i("tr",[i("th",[a._v("名称")]),i("th",[a._v("类型")]),a.isLabelHide?a._e():i("th",[a._v("标签")]),i("th",[a._v("创建时间")]),i("th",{attrs:{width:"100"}},[a._v("操作")])])]),i("tbody",[a.list.length?a._e():i("tr",[i("td",{staticClass:"colspan",attrs:{colspan:a.isLabelHide?4:5}},[a._v("暂无数据")])]),a._l(a.list,function(e,t){return i("tr",[i("th",[i("div",{staticClass:"th-name"},[a._v(a._s(e.name))])]),i("th",[i("div",{staticClass:"th-name"},[a._v(a._s(e.type_name))])]),a.isLabelHide?a._e():i("th",[i("div",{staticClass:"th-name"},[a._v(a._s(e.tag))])]),i("th",[i("div",{staticClass:"th-name"},[a._v(a._s(e.create_time))])]),i("th",[i("div",{staticClass:"icon icon-detail",attrs:{title:"详情"},on:{click:function(t){return a.$emit("detail",e)}}}),a.onlyShow?a._e():i("div",{staticClass:"icon icon-delete",attrs:{title:"删除"},on:{click:function(t){return a.$emit("del",e)}}})])])})],2)])],1):a._e()}var r=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return r})},560:function(t,e,a){"use strict";function i(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"div"},[a("el-dialog",{staticClass:"restBody2",attrs:{center:!1,visible:e.infoDialog,top:"50px",width:"1200px","show-close":!1,"append-to-body":""}},[a("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"el-icon-close",on:{click:function(t){return e.$emit("update:infoDialog",!1)}}}),a("el-tabs",{attrs:{value:"ff"}},[a("el-tab-pane",{attrs:{label:"详情",name:"ff"}})],1)],1),a("form",{ref:"infoForm",staticClass:"infoForm"},[a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[e._v("名称:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.infoData.name,expression:"infoData.name"}],staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:e.infoData.name},on:{input:function(t){t.target.composing||e.$set(e.infoData,"name",t.target.value)}}})]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[e._v("类型:")]),a("span",{staticClass:"types"},[a("span",[e._v(" "+e._s(e.infoData.type_name))]),a("span",[e._v(" 创建时间: "+e._s(e.infoData.create_time))])])]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[e._v("标签:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.infoData.tag,expression:"infoData.tag"}],staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:e.infoData.tag},on:{input:function(t){t.target.composing||e.$set(e.infoData,"tag",t.target.value)}}})]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[e._v("简介:")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.infoData.abs,expression:"infoData.abs"}],staticClass:"textarea",attrs:{type:"text",disabled:""},domProps:{value:e.infoData.abs},on:{input:function(t){t.target.composing||e.$set(e.infoData,"abs",t.target.value)}}})]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[e._v("详情:")])]),e.detailType&&3!=e.infoData.type?a("div",{staticClass:"group wailianinput"},[a("div",{staticClass:"label"}),a("span",[a("input",{ref:"otherImgInput",staticClass:"form-control",attrs:{disabled:""},domProps:{value:e.infoData.preview}})])]):e._e(),e.hassVideo||4==e.infoData.type?a("div",{staticClass:"group detailmain wailian"},[a("div",{staticClass:"label"}),a("span",{staticClass:"wrap"},[e.hassVideo?a("video",{attrs:{src:e.infoData.preview,controls:""}}):e._e(),4==e.infoData.type?a("audio",{attrs:{src:e.infoData.preview,controls:""}}):e._e(),a("span",{staticClass:"msg"},[a("div",{staticClass:"type"},[e._v("格式:"),a("span",{staticClass:"val",domProps:{textContent:e._s(e.infoData.format)}})]),a("div",{staticClass:"size"},[e._v("大小:"),a("span",{staticClass:"val",domProps:{textContent:e._s(((this.infoData.size||0)/1024).toFixed(2)+"KB")}})])])])]):e._e(),a("div",{staticClass:"group detailmain"},[a("div",{staticClass:"label"}),a("span",{staticClass:"wrap"},[3==e.infoData.type?a("img",{staticClass:"coverImg",attrs:{src:e.infoData.preview_path}}):e._e(),a("img",{staticClass:"coverImg",attrs:{src:e.infoData.img_src||e.infoData.img,"else-if":""}})])]),a("div",{staticClass:"group line"},[a("div",{staticClass:"label"},[e._v("扩展属性")])]),a("div",{staticClass:"group"},[a("MetaData",{attrs:{metadata:e.metadata,isShowBtn:!1,isOption:!1}})],1)]),a("div",{staticClass:"footer dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info"},on:{click:function(t){return e.$emit("update:infoDialog",!1)}}},[e._v("取消")])],1)])],1)}var r=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return r})},565:function(t,e,a){"use strict";var i=a(441);a.n(i).a},566:function(t,e,a){"use strict";var i=a(444);a.n(i).a},570:function(t,e,a){"use strict";function i(){var i=this,t=i.$createElement,r=i._self._c||t;return r("div",{staticClass:"div box"},[i._m(0),r("el-tree",{attrs:{data:i.audioList,"node-key":"id","default-expand-all":"","expand-on-click-node":!1},scopedSlots:i._u([{key:"default",fn:function(t){var e=t.node,a=t.data;return r("span",{staticClass:"custom-tree-node"},[r("span",[i._v(i._s(a.name))]),r("span",{staticClass:"options",staticStyle:{float:"right"}},[r("div",{staticClass:"icon icon-detail",attrs:{title:"详情"},on:{click:function(t){return i.$emit("detail",a,a.children)}}}),i.readOnly?i._e():r("div",{staticClass:"icon icon-delete",attrs:{title:"删除"},on:{click:function(t){return i.del(a,e)}}})])])}}])})],1)}var r=[function(){var t=this.$createElement,e=this._self._c||t;return e("table",{staticClass:"table"},[e("thead",[e("tr",[e("th",[this._v("组名称")]),e("th",{attrs:{width:"100"}},[this._v("操作")])])])])}];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return r})},571:function(t,e,a){"use strict";function i(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{staticClass:"restBody2",attrs:{center:!1,visible:e.groupDialog,top:"50px",width:"1200px","show-close":!1,"append-to-body":""}},[a("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"el-icon-close",on:{click:e.colse}}),a("el-tabs",{attrs:{value:"ff"}},[a("el-tab-pane",{attrs:{label:e.setTitle,name:"ff"}})],1)],1),a("VaForm",{ref:"detailForm"},[a("form",{staticClass:"detailForm rowWrap"},[a("div",{staticClass:"group line"},[a("div",{staticClass:"label"},[e._v("基本信息(必填)")])]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[e._v("组名称:")]),a("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required'}"},{name:"model",rawName:"v-model",value:e.information.group_name,expression:"information.group_name"}],staticClass:"form-control",attrs:{type:"text",disabled:e.onlyShow},domProps:{value:e.information.group_name},on:{input:function(t){t.target.composing||e.$set(e.information,"group_name",t.target.value)}}})]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[e._v("定价:")]),a("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required'}"},{name:"model",rawName:"v-model",value:e.information.price,expression:"information.price"}],staticClass:"form-control",attrs:{type:"text",disabled:e.onlyShow},domProps:{value:e.information.price},on:{input:function(t){t.target.composing||e.$set(e.information,"price",t.target.value)}}}),a("span",[e._v(" 元")])]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[e._v("最低定价:")]),a("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required'}"},{name:"model",rawName:"v-model",value:e.information.min_price,expression:"information.min_price"}],staticClass:"form-control",attrs:{type:"text",disabled:e.onlyShow},domProps:{value:e.information.min_price},on:{input:function(t){t.target.composing||e.$set(e.information,"min_price",t.target.value)}}}),a("span",[e._v(" 元")])]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[e._v("主讲人:")]),a("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required'}"},{name:"model",rawName:"v-model",value:e.information.speaker,expression:"information.speaker"}],staticClass:"form-control",attrs:{type:"text",disabled:e.onlyShow},domProps:{value:e.information.speaker},on:{input:function(t){t.target.composing||e.$set(e.information,"speaker",t.target.value)}}})]),a("div",{staticClass:"group line"},[a("div",{staticClass:"label"},[e._v("其他信息")])]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[e._v("试听地址:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.information.src,expression:"information.src"}],staticClass:"form-control",attrs:{type:"url",disabled:e.onlyShow},domProps:{value:e.information.src},on:{input:function(t){t.target.composing||e.$set(e.information,"src",t.target.value)}}})]),a("div",{staticClass:"group line"},[a("div",{staticClass:"label",domProps:{textContent:e._s("2"==e.isMedia?"关联视频":"关联音频")}})]),a("div",{staticClass:"group"},[a("Tab",{ref:"video",attrs:{dataType:"audio",onlyShow:e.onlyShow,defaultList:e.list,detailData:e.item},on:{detail:function(t){return e.$emit("detail",t)},del:function(t){return e.del(t)}}}),e.onlyShow?e._e():a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.$emit("open",e.addMediaType)}}},[e._v("新增")])],1)])]),a("div",{staticClass:"footer dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info"},on:{click:e.colse}},[e._v("取消")]),e.onlyShow?e._e():a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("确定")])],1)],1)],1)}var r=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return r})},589:function(t,e,a){"use strict";a.r(e);var i=a(602),r=a(458);for(var n in r)"default"!==n&&function(t){a.d(e,t,function(){return r[t]})}(n);a(592);var s=a(0),o=Object(s.a)(r.default,i.a,i.b,!1,null,"2ee670da",null);e.default=o.exports},590:function(t,e,a){"use strict";a.r(e);var i=a(605),r=a(460);for(var n in r)"default"!==n&&function(t){a.d(e,t,function(){return r[t]})}(n);a(591);var s=a(0),o=Object(s.a)(r.default,i.a,i.b,!1,null,"5837b292",null);e.default=o.exports},591:function(t,e,a){"use strict";var i=a(462);a.n(i).a},592:function(t,e,a){"use strict";var i=a(463);a.n(i).a},602:function(t,e,a){"use strict";function i(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"div"},[e.resourceDialog?a("Resource",{attrs:{type:e.resourceType,resourceDialog:e.resourceDialog,curSoucesList:e.curSoucesList},on:{"update:resourceDialog":function(t){e.resourceDialog=t},"update:resource-dialog":function(t){e.resourceDialog=t},select:e.addSelcet}}):e._e(),e.infoDialog?a("ContentDetail",{attrs:{infoData:e.infoData,infoDialog:e.infoDialog},on:{"update:infoDialog":function(t){e.infoDialog=t},"update:info-dialog":function(t){e.infoDialog=t}}}):e._e(),e.groupDialog?a("Group",{ref:"group",attrs:{item:e.currentItem,detailData:e.detailData,groupDialog:e.groupDialog,onlyShow:e.readOnly,isMedia:e.media},on:{"update:groupDialog":function(t){e.groupDialog=t},"update:group-dialog":function(t){e.groupDialog=t},open:e.openResources,detail:e.detail,del:e.del,save:e.saveAudioOK}}):e._e(),a("el-tabs",{attrs:{value:e.type}},[a("el-tab-pane",{attrs:{label:"产品信息",name:"info"}},[a("Info",{ref:"info",attrs:{detailData:e.detailData,services:e.services,readOnly:e.readOnly,defaultData:e.defaultData},on:{close:function(t){return e.$emit("update:detailDialog",!1)},saveok:function(t){return e.$emit("saveok",t)}}})],1),a("el-tab-pane",{attrs:{label:"产品结构",name:"structure"}},[a("Audio",{ref:"audio",attrs:{detailData:e.detailData,defaultData:e.defaultAList,media:e.media,readOnly:e.readOnly},on:{detail:e.detail,del:e.del}}),e.readOnly?e._e():a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.addVideo()}}},[e._v("新增组")])],1),1==e.media?a("el-tab-pane",{attrs:{label:"知识点",name:"Knowledge"}},[a("Knowledge",{attrs:{detailData:e.detailData,readOnly:e.readOnly,defaultData:e.defaultData},on:{saveok:function(t){return e.$emit("saveok")}}})],1):e._e()],1)],1)}var r=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return r})},605:function(t,e,a){"use strict";function i(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"div"},[a("VaForm",{ref:"detailForm"},[a("form",{staticClass:"detailForm"},[a("div",{staticClass:"group line"},[a("div",{staticClass:"label"},[e._v("基本信息")])]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[e._v("*产品名称:")]),a("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required'}"},{name:"model",rawName:"v-model",value:e.information.name,expression:"information.name"}],staticClass:"form-control",attrs:{type:"text",disabled:e.readOnly},domProps:{value:e.information.name},on:{input:function(t){t.target.composing||e.$set(e.information,"name",t.target.value)}}})]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[e._v("*内容简介:")]),a("textarea",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required'}"},{name:"model",rawName:"v-model",value:e.information.abs,expression:"information.abs"}],staticClass:"textarea",attrs:{maxlength:e.$config.ABS_MAX_LENGTH,type:"text",disabled:e.readOnly},domProps:{value:e.information.abs},on:{input:function(t){t.target.composing||e.$set(e.information,"abs",t.target.value)}}}),e.readOnly?e._e():a("span",{staticStyle:{"vertical-align":"bottom",color:"#606266","font-size":"12px"}},[e._v("您还可以输入"+e._s(e.$config.ABS_MAX_LENGTH-(e.information.abs?e.information.abs.length:0)))])]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[e._v("*设置封面:")]),e.readOnly?e._e():a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.$refs.fenmian.click()}}},[e._v("上传")]),a("input",{ref:"fenmian",staticClass:"hide",attrs:{type:"file",accept:"image/jpeg,image/jpg,image/png"},on:{change:function(t){return e.previewImg(t)}}})],1),a("div",{staticClass:"group"},[a("div",{staticClass:"label"}),a("img",{staticClass:"previewImgUrl",attrs:{src:e.previewImgUrl||e.information.img_src}}),a("input",{attrs:{type:"hidden",name:"img"},domProps:{value:e.information.img}})]),a("p",{staticClass:"imgSizeWrap"},[a("span",{staticClass:"imgSize"},[e._v("建议图片大小：250*140px")])])]),a("div",{staticClass:"info"},[a("el-tabs",{staticClass:"tabs-nav",model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"x-read信息",name:"1"}},[a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[e._v("标签:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.xRead.tag,expression:"xRead.tag"}],staticClass:"form-control",attrs:{type:"text",disabled:e.readOnly},domProps:{value:e.xRead.tag},on:{input:function(t){t.target.composing||e.$set(e.xRead,"tag",t.target.value)}}})]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[e._v("作者:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.xRead.author,expression:"xRead.author"}],staticClass:"form-control",attrs:{type:"text",disabled:e.readOnly},domProps:{value:e.xRead.author},on:{input:function(t){t.target.composing||e.$set(e.xRead,"author",t.target.value)}}})]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[e._v("扩展属性:")]),a("MetaData",{attrs:{metadata:e.metadata,isShowBtn:!1,readOnly:e.readOnly}})],1)]),e.$config.isShowRetailers?a("el-tab-pane",{attrs:{label:"电商信息",name:"2"}},[a("form",{staticClass:"commerceForm"},[a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[e._v("主题词:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.retailers.subject_terms,expression:"retailers.subject_terms"}],staticClass:"form-control",attrs:{type:"text",disabled:e.readOnly},domProps:{value:e.retailers.subject_terms},on:{input:function(t){t.target.composing||e.$set(e.retailers,"subject_terms",t.target.value)}}})]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[e._v("读者对象:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.retailers.target_audience,expression:"retailers.target_audience"}],staticClass:"form-control",attrs:{type:"text",disabled:e.readOnly},domProps:{value:e.retailers.target_audience},on:{input:function(t){t.target.composing||e.$set(e.retailers,"target_audience",t.target.value)}}})]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[e._v("中图法分类:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.retailers.clc_category,expression:"retailers.clc_category"}],staticClass:"form-control",attrs:{type:"text",disabled:e.readOnly},domProps:{value:e.retailers.clc_category},on:{input:function(t){t.target.composing||e.$set(e.retailers,"clc_category",t.target.value)}}})]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[e._v("营销分类:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.retailers.cp_category,expression:"retailers.cp_category"}],staticClass:"form-control",attrs:{type:"text",disabled:e.readOnly},domProps:{value:e.retailers.cp_category},on:{input:function(t){t.target.composing||e.$set(e.retailers,"cp_category",t.target.value)}}})]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[e._v("内容简介:")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.retailers.describe,expression:"retailers.describe"}],staticClass:"textarea",attrs:{type:"text",disabled:e.readOnly},domProps:{value:e.retailers.describe},on:{input:function(t){t.target.composing||e.$set(e.retailers,"describe",t.target.value)}}})]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[e._v("编辑推荐:")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.retailers.editor_recommend,expression:"retailers.editor_recommend"}],staticClass:"textarea",attrs:{type:"text",disabled:e.readOnly},domProps:{value:e.retailers.editor_recommend},on:{input:function(t){t.target.composing||e.$set(e.retailers,"editor_recommend",t.target.value)}}})])])]):e._e()],1)],1),e.readOnly?e._e():a("div",{staticClass:"btns"},[a("el-button",{attrs:{type:"info"},on:{click:function(t){return e.$emit("close")}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitDetail("detailForm")}}},[e._v("保存")])],1)])],1)}var r=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return r})},900:function(t,e,a){"use strict";a.r(e);var i=a(901),r=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,function(){return i[t]})}(n);e.default=r.a},901:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},r=f(a(84)),i=f(a(396)),n=f(a(158)),s=f(a(157)),l=f(a(384)),u=f(a(421)),c=f(a(589)),d=a(126),p=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}}(a(1304));function f(t){return t&&t.__esModule?t:{default:t}}e.default={mixins:[d.main],components:{Menu:n.default,Top:s.default,GroupList:l.default,Detail:c.default,Dispense:i.default},data:function(){return{services:p,list:null,page:null,groupList:null,detailDialog:!1,detailDialoaType:"info",detailData:{},publishDialog:!1,moveToOtherDiaolog:!1,moveIds:null,toId:null,status:u.default}},methods:{getList:function(t,e,a){var i=0<arguments.length&&void 0!==t?t:this.page&&this.page.num||1,r=this,n=1<arguments.length&&void 0!==e?e:this.page&&this.page.offset||10,s=2<arguments.length&&void 0!==a?a:null;p.getList(o({pageNum:i,pageOffset:n,group_id:this.currGroup},s)).then(function(t){r.list=t.data,r.page=t.page})},urgentDigital:function(){for(var e=this,t=this.getChecked(),a=0,i=t.length;a<i;a++)for(var r=0,n=this.list.length;r<n;r++)if(this.list[r].id==t[a]&&1!=this.list[r].audits_status)return void this.$message.error("只能勾选待审核数据");t&&this.services.urgentDigital({id:t}).then(function(t){return e.$message.success("已提交加急审核")})},opnePublishDialog:function(t){this.detailData=t,this.publishDialog=!0},delChoosens:function(t){var i=this,a=[];if(log(t),t)a.push(t);else{var e=Array.from(document.querySelectorAll('input[name="ids"]:checked'));if(e.forEach(function(t){a.push(t.value)}),!e.length)return void this.$message.error("请先选中!")}0<a.length&&this.$confirm("是否删除?").then(function(t){var e=(0,r.default)(document.querySelector("#mainForm"),{hash:!0});i.services.del({id:a}).then(function(t){i.getList(i.page.num,i.page.offset,e),i.getGroupList()}).catch(function(t){var e=t.payload;for(var a in e.messages){i.$message.error(e.messages[a]);break}})}).catch(function(t){})},KnowledgeClick:function(t){this.detailDialoaType=t},saveOk:function(t){this.detailData.id||(this.detailData=t),this.getList(),this.getGroupList()},clear:function(){document.getElementById("text").value=""}}}},902:function(t,e,a){}}]);