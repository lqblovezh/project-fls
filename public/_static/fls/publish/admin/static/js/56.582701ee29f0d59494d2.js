/*!
 * {
 *   "buildtime": "2019-07-19 15:01:49",
 *   "workspace": "F:\\project\\x-book4\\js",
 *   "username": "Administrator",
 *   "hostname": "PC201608171616",
 *   "platform": "win32",
 *   "git": {
 *     "branch": "master",
 *     "hash": "b17f442a6",
 *     "message": [
 *       "commit b17f442a62eb78bc9ab78ffe68e3afb76c3e3548",
 *       "Author: YangZai <552396385@qq.com>",
 *       "Date:   Fri Jul 19 14:48:13 2019 +0800",
 *       "    xxxxxx"
 *     ],
 *     "user": "YangZai",
 *     "email": "552396385@qq.com",
 *     "remote": [
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (fetch)",
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (push)"
 *     ]
 *   }
 * }
 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{1217:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getList=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,i.request_get)(restUrl_publish+"/api/content/export/list",t)},e.delTask=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=r.default.compile(restUrl_publish+"/api/tasks/:id");return(0,i.request_get)(e(t),t)};var a,i=s(7),n=s(9),r=(a=n)&&a.__esModule?a:{default:a}},1218:function(t,e,s){"use strict";var a=s(812);s.n(a).a},1374:function(t,e,s){"use strict";function a(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"indexs clearfix"},[a("Top",{attrs:{currentPlant:"X-PUBLISH"}}),a("Menu",{attrs:{curr:"/contentLibrary/transfer"}}),a("div",{staticClass:"mainRight"},[a("div",{staticClass:"contentWrap"},[a("div",{staticClass:"maindata"},[a("div",{staticClass:"groupList"},[a("div",{staticClass:"btns"},[a("div",{staticClass:"el-button",class:{"btn-active":"import"==s.name},attrs:{size:"mini",type:"primary",plain:""},on:{click:function(t){return s.getTasks("import")}}},[s._v("导入列表")]),a("div",{staticClass:"el-button",class:{"btn-active":"export"==s.name},attrs:{size:"mini",type:"primary",plain:""},on:{click:function(t){return s.getTasks("export")}}},[s._v("导出列表")])])]),a("div",{staticClass:"tableWrap"},[a("div",{staticClass:"tableTop"},[a("div",{staticClass:"title vel-line"},[a("span",[s._v("状态")]),a("span",{staticClass:"group-inline"},[a("el-select",{attrs:{name:"type"},on:{change:s.selectChange},model:{value:s.options.value,callback:function(t){s.$set(s.options,"value",t)},expression:"options.value"}},s._l(s.options.list,function(t){return a("el-option",{key:t.label,attrs:{value:t.value}})}),1)],1)])]),a("table",{staticClass:"table aProgress"},[s._m(0),s.list?a("tbody",s._l(s.list,function(e){return a("tr",{attrs:{"data-id":e._id}},[a("th",[s._v(s._s(e.info.res_total))]),a("th",[a("div",{staticClass:"th-name"},[s._v(s._s(e.create_time))])]),"success"==e.status?a("th",[a("el-progress",{staticClass:"tProgress",attrs:{percentage:parseInt(100),status:"success"}})],1):"failed"==e.status?a("th",[a("el-progress",{staticClass:"tProgress",attrs:{percentage:parseInt(0),status:"exception"}})],1):"sleep"==e.status&&void 0!==e.info.speed?a("th",[a("el-progress",{staticClass:"tProgress",attrs:{percentage:e.info.speed<=100?parseInt(e.info.speed):parseInt(0)}})],1):a("th",[a("el-progress",{staticClass:"tProgress",attrs:{percentage:parseInt(0)}})],1),"failed"==e.status&&"import"==s.name?a("th",[s._v(s._s(s.type[e.status])+"("+s._s(e.info.speed)+")")]):"import"==s.name?a("th",[s._v(s._s(s.type[e.status])+"("+s._s(e.info.data)+")")]):a("th",[s._v(s._s(s.type[e.status]))]),"export"==e.type?a("th",[s._v("导出")]):a("th",[s._v("导入")]),a("th",[s._v(s._s(s._f("formatSize")(e.info.zip_size)))]),a("th",[a("div",{staticClass:"btns"},["success"==e.status&&"export"==e.type?a("a",{staticClass:"download-btn",attrs:{href:e.info.url_zip,download:"files"}},[a("span",[s._v("下载")])]):s._e(),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return s.delTask(e.id)}}},[s._v("删除")])],1)])])}),0):s._e()])]),s.page?a("div",{staticClass:"pageWrap"},[a("el-pagination",{attrs:{small:!1,background:"","current-page":s.page.num,"page-sizes":[10,50,100],"page-size":s.page.offset,layout:"total,sizes ,prev, pager, next, jumper",total:s.page.total},on:{"size-change":s.handleSizeChange,"current-change":s.handleCurrentChange}})],1):s._e()])])])],1)}var i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",[t._v("名称")]),s("th",{staticClass:"time"},[t._v("任务创建时间")]),s("th",[t._v("进度")]),s("th",[t._v("状态")]),s("th",[t._v("类型")]),s("th",[t._v("文件大小")]),s("th",{staticClass:"operate"},[t._v("操作")])])])}];s.d(e,"a",function(){return a}),s.d(e,"b",function(){return i})},336:function(t,e,s){"use strict";s.r(e);var a=s(1374),i=s(810);for(var n in i)"default"!==n&&function(t){s.d(e,t,function(){return i[t]})}(n);s(1218);var r=s(0),l=Object(r.a)(i.default,a.a,a.b,!1,null,"13d4c816",null);e.default=l.exports},810:function(t,e,s){"use strict";s.r(e);var a=s(811),i=s.n(a);for(var n in a)"default"!==n&&function(t){s.d(e,t,function(){return a[t]})}(n);e.default=i.a},811:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a])}return t},a=r(s(158)),i=r(s(157)),o=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e.default=t,e}}(s(1217)),n=s(126);function r(t){return t&&t.__esModule?t:{default:t}}e.default={mixins:[n.main],components:{Menu:a.default,Top:i.default},data:function(){return{services:o,list:null,options:{value:"全部",list:[{label:0,value:"全部"},{label:1,value:"未开始"},{label:2,value:"进行中"},{label:3,value:"已完成"},{label:4,value:"失败"}]},type:{success:"成功",failed:"失败",sleep:"进行中",default:"未开始"},page:null,delay:1e4,timer:null,name:"export",status:-1}},methods:{getList:function(t,e,s){var a,i=0<arguments.length&&void 0!==t?t:this.page&&this.page.num||1,n=this,r=1<arguments.length&&void 0!==e?e:this.page&&this.page.offset||10;log("getList"),a=this.status<0?{name:this.name}:{name:this.name,status:this.status},this.timer&&clearTimeout(this.timer),o.getList(l({pageNum:i,pageOffset:r},a)).then(function(t){n.list=t.data,n.page=t.page,n.getTaskProgress()})},selectChange:function(t){var e=!0,s=!1,a=void 0;try{for(var i,n=this.options.list[Symbol.iterator]();!(e=(i=n.next()).done);e=!0){var r=i.value;r.value==t&&(this.page=null,this.status=r.label-1,this.getList())}}catch(t){s=!0,a=t}finally{try{!e&&n.return&&n.return()}finally{if(s)throw a}}},getTasks:function(t){this.name!==t&&(this.page=null,this.name=t,this.getList())},getTaskProgress:function(){this.timer=setTimeout(this.getList,this.delay),log("timer start: "+this.timer)},delTask:function(t){var e=this;o.delTask({id:t}).then(function(t){return e.getList()})}},destroyed:function(){this.timer&&(clearTimeout(this.timer),log("clear timer: "+this.timer))},filters:{formatSize:function(t){return void 0===t?"0MB":(t/1024/1024).toFixed(2)+"MB"}}}},812:function(t,e,s){}}]);