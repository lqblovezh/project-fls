/*!
 * {
 *   "buildtime": "2019-05-31 16:22:54",
 *   "workspace": "F:\\X-BOOK\\xcloud\\x-book4\\js",
 *   "username": "LQB",
 *   "hostname": "DESKTOP-QL56OJS",
 *   "platform": "win32",
 *   "git": {
 *     "branch": "master",
 *     "hash": "fbc007935",
 *     "message": [
 *       "commit fbc00793544e5767db1868f95f89c64b93f3aa79",
 *       "Author: 骆秋波 <1277678760@qq.com>",
 *       "Date:   Fri May 31 15:21:03 2019 +0800",
 *       "    打包上传"
 *     ],
 *     "user": "骆秋波",
 *     "email": "1277678760@qq.com",
 *     "remote": [
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (fetch)",
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (push)"
 *     ]
 *   }
 * }
 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{680:function(e,t,n){"use strict";n.r(t);var r=n(778),i=n(719);for(var a in i)"default"!==a&&function(e){n.d(t,e,function(){return i[e]})}(a);n(765);var s=n(35),o=Object(s.a)(i.default,r.a,r.b,!1,null,"7b669a90",null);t.default=o.exports},688:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.event_terminal_verison=t.event_terminal=void 0,t.cb=function(e){e&&!e.status&&console.warn(e)},t.getUserId=function(){var e=window.sessionStorage.getItem("userInfo");if(e)return e._id||e.id;return""};var r,i=n(698);(r=i)&&r.__esModule;var a=(0,n(699).detect)(),s=a.name,o=a.version;t.event_terminal=s,t.event_terminal_verison=o},689:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.suance=t.loginListener=t.createProListener=t.educeResListener=t.addResListener=void 0;var r=u(n(690)),i=u(n(691)),a=u(n(692)),s=u(n(693)),o=u(n(694));function u(e){return e&&e.__esModule?e:{default:e}}t.addResListener=r.default,t.educeResListener=i.default,t.createProListener=a.default,t.loginListener=s.default,t.suance=o.default},690:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.res_id,n=e.res_type,i=e.res_name,a=e.res_exp,s=e.res_author,o=void 0===s?"佚名":s,u=e.res_author_id,l=void 0===u?[]:u,c=e.res_tree,d=void 0===c?[]:c,_=e.res_lables,p=void 0===_?[]:_,f=e.res_attr,v=void 0===f?[]:f,m=e.user_id,g=void 0===m?"":m;if(window.DBI){g=g||(0,r.getUserId)();var h=new DBI.createEvent({event_class:"Resources",event_data:{Resources:[{res_id:t,res_type:n,res_name:i,res_exp:a,res_author:o,res_author_id:l,res_tree:d,res_lables:p,res_attr:v,user_id:g,res_total_play:0,res_total_order:0}]},event_target:"",event_type:"创建",event_source:"WEB",event_sources:r.origin,event_operator:g,event_temporary:"",event_system:"",event_system_verison:"",event_terminal:r.event_terminal,event_terminal_verison:r.event_terminal_verison});DBI.declare(h,r.cb)}};var r=n(688)},691:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.res_url,n=e.user_id,i=void 0===n?"":n;window.DBI&&(i=i||(0,r.getUserId)(),DBI.declare({event_class:"Resources",event_data:{Resources:[{res_url:t}]},event_target:"",event_type:"导出",event_source:"Web",event_sources:r.origin,event_operator:i,event_temporary:"",event_system:"",event_system_version:"",event_terminal:r.event_terminal,event_terminal_verison:r.event_terminal_verison},r.cb))};var r=n(688)},692:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.res_id,n=e.res_type,i=e.res_name,a=e.res_cover,s=e.res_covers,o=e.res_exp,u=e.res_author,l=e.res_author_id,c=e.res_Interpreter,d=e.res_Interpreter_id,_=e.res_lables,p=e.res_money,f=e.res_isbn,v=e.res_isbn_ext,m=e.user_id,g=void 0===m?"":m;if(window.DBI){g=g||(0,r.getUserId)();var h=new DBI.createEvent({event_class:"PDAMBook",event_data:{Resources:[{res_id:t,res_type:n,res_name:i,res_cover:a,res_covers:s,res_exp:o,res_author:u,res_author_id:l,res_Interpreter:c,res_Interpreter_id:d,res_lables:_,res_money:p,res_isbn:f,res_isbn_ext:v}]},event_target:t,event_type:"创建",event_source:"WEB",event_sources:r.origin,event_operator:g,event_temporary:"",event_system:"",event_system_verison:"",event_terminal:r.event_terminal,event_terminal_verison:r.event_terminal_verison});DBI.declare(h,r.cb)}};var r=n(688)},693:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.user_id,n=e.user_name,i=e.user_nick_name,a=e.user_phone,s=e.user_picture,o=e.user_picture_absolute,u=e.user_email,l=e.user_sex,c=e.user_date_of_birth,d=e.user_address,_=e.user_city;t=t||(0,r.getUserId)(),window.DBI&&DBI.declare({event_class:"User",event_data:{User:[{user_id:t,user_nick_name:i,user_name:n,user_sex:l,user_email:u,user_phone:a,user_picture:s,user_picture_absolute:o,user_address:d,user_city:_,user_date_of_birth:c}]},event_target:"",event_type:"登录",event_source:"",event_sources:r.origin,event_operator:t,event_temporary:"",event_system:"",event_system_version:"",event_terminal:r.event_terminal,event_terminal_verison:r.event_terminal_verison},r.cb)};var r=n(688)},694:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.id,n=e.info,i=e.user_id,a=void 0===i?"":i;a=a||(0,r.getUserId)(),window.DBI&&DBI.declare({event_class:"PDAMBook",event_data:{PDAMBook:[n]},event_target:t,event_type:"分发",event_source:"web",event_sources:r.origin,event_operator:a,event_temporary:"",event_system:"",event_system_version:"",event_terminal:r.event_terminal,event_terminal_verison:r.event_terminal_verison},r.cb)};var r=n(688)},696:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUserInfo=function(){return r.default.parse(window.sessionStorage.getItem("userInfo"))},t.getDefaultCover=function(){return(0,i.request_get)(restUrl_publish+"/api/videos/images")},t.commonPreview=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.request_get)(u(e))},t.commonPreviewCode=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.request_post)(restUrl_publish+"/api/preview",e)},t.platInfo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=s.default.compile(restUrl_publish+"/api/current");return(0,i.request_get)(t(e)).then(function(e){return a.default.app_id=e.data.id,sessionStorage.app_id=e.data.id,document.title=e.data.application?e.data.application.name:e.data.publisher.name,e})},t.fileExport=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.request_get)(l(e))},t.groupsDelete=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.request_post)(restUrl_publish+"/api/groups/delete",e)};var r=o(n(181)),i=n(179),a=o(n(253)),s=(n(689),o(n(180)));function o(e){return e&&e.__esModule?e:{default:e}}var u=s.default.compile(restUrl_publish+"/api/preview/:id");var l=s.default.compile(restUrl_publish+"/api/content/export/:id")},719:function(e,t,n){"use strict";n.r(t);var r=n(720),i=n.n(r);for(var a in r)"default"!==a&&function(e){n.d(t,e,function(){return r[e]})}(a);t.default=i.a},720:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=l(n(252)),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=(l(n(695)),u(n(696)),u(n(721))),o=(n(747),n(722),n(723));function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function l(e){return e&&e.__esModule?e:{default:e}}t.default={data:function(){return{info:{},previewImgUrl:null,list:[],id:1e5,data:{name:"",exp:"",logo:"",icon:"",setting:{banners:[{title:"",path:"",link:""}]}}}},created:function(){this.info=this.$config.plantInfo.publisher,this.list=Object.entries(this.info.setting).length&&this.info.setting.banners?this.info.setting.banners:[]},methods:{update:function(e){var t=this;(0,o.getTask)(e.target.files[0]).then(function(e){if("object"==a(t.currentRef)){var n=t.list.findIndex(function(e){return e.id===t.currentRef.id});t.$set(t.list[n],"path",e.data.path),t.$set(t.list[n],"url",e.data.url)}else t.info[t.currentRef]=e.data.path,t.info[t.currentRef+"_absolute"]=e.data.url}),this.$refs.updateImg.setAttribute("type","text"),this.$refs.updateImg.setAttribute("type","file")},updateImg:function(e){this.currentRef=e,this.$refs.updateImg.click()},save:function(){var e=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(this.list));e.forEach(function(e){"add"==e.act&&(e.id=null)});i({},this.detailDate,{list:e})},add:function(){this.id+=1,this.list.push({act:"add",title:"",path:"",link:"",id:this.id})},del:function(e){var t=this;this.$confirm("是否确认退出?").then(function(n){t.list.splice(e,1)}).catch(function(e){})},submit:function(){var e,t=this;return(e=r.default.mark(function e(){var n,i,a,o,u;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.info,i=n.name,a=n.exp,o=n.icon,u=n.logo,s.publisherSetting({name:i,exp:a,icon:o,logo:u,setting:{banners:t.list}}).then(function(e){e&&e.status&&t.$message.success("保存成功")},function(e){t.$message.error("保存失败")});case 2:case"end":return e.stop()}},e,t)}),function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(i,a){try{var s=t[i](a),o=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(o).then(function(e){r("next",e)},function(e){r("throw",e)});e(o)}("next")})})()}}}},721:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getInfo=function(){return(0,o.platInfo)({id:"current"})},t.setting=function(e){return(0,i.request_put)(u(e),e)},t.publisherSetting=function(e){return(0,i.request_put)("/common/api/publisher/setting",e)};var r,i=n(179),a=n(180),s=(r=a)&&r.__esModule?r:{default:r},o=n(696);var u=s.default.compile("/common/api/publisher/setting/app/:id")},722:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.save=void 0;var r,i,a=o(n(252));t.save=(r=a.default.mark(function e(t){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.id){e.next=4;break}return e.abrupt("return",(0,s.request_put)(u({id:t.id}),t));case 4:if(!t.key){e.next=8;break}return e.next=7,(0,s.request_post)("/system/api/setting/add",t);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e,this)}),i=function(){var e=r.apply(this,arguments);return new Promise(function(t,n){return function r(i,a){try{var s=e[i](a),o=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(o).then(function(e){r("next",e)},function(e){r("throw",e)});t(o)}("next")})},function(e){return i.apply(this,arguments)});t.getInfo=function(){return(0,s.request_get)("/system/api/setting/get_set_list",{pageStart:0,pageOffset:100}).then(function(e){var t={loginInfo:{},contact:{},outlink:[],ewm:[]};return e.data.forEach(function(e){"info"==e.name?t.loginInfo[e.key]=e:"contact"==e.name?t.contact[e.key]=e:"outlink"==e.name?t.outlink.push(e):"ewm"==e.name&&t.ewm.push(e)}),!Object.values(t.loginInfo).length<3&&(t.loginInfo.title=t.loginInfo.title||{name:"info",key:"title",value:"",type:1},t.loginInfo.ico=t.loginInfo.ico||{name:"info",key:"ico",value:"",type:2},t.loginInfo.logo=t.loginInfo.logo||{name:"info",key:"logo",value:"",type:2},t.loginInfo.banner=t.loginInfo.banner||{name:"info",key:"banner",value:"",type:2}),!Object.values(t.contact).length<3&&(t.contact.phone=t.contact.phone||{name:"contact",key:"phone",value:"",type:1},t.contact.qq=t.contact.qq||{name:"contact",key:"qq",value:"",type:1},t.contact.email=t.contact.email||{name:"contact",key:"email",value:"",type:1}),t})},t.del=function(e){return(0,s.request_delete)(u(e),e)},t.getTask=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];return e.size,e.size>=1048576?(t.is_chunk=!0,(0,s.request_post)("/api/files/upload_task?r="+Math.random(5)).then(function(r){if(r.status)return t.task_id=r.data.task_id,(0,s.request_file)("/api/files/upload",{file:e,data:t},n);throw new Error(r.messages)}).catch(function(e){throw new Error("上传失败")})):(t.is_chunk=!1,(0,s.request_file)("/api/files/upload",{file:e,data:t}))},t.sendInfo=function(e){return(0,s.request_post)("/system/api/app_manager/login",e)},t.getList=function(e){return(0,s.request_get)("/system/api/home/works")},t.getPartner=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.request_get)("/system/api/home/demo_demo",e)},t.isLogin=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,s.request_get)("/system/api/app_manager/is_login")},t.getClientToken=function(){return(0,s.request_post)("/system/api/app_manager/token/pcclient")},t.loginOut=function(){return(0,s.request_post)("/system/api/app_manager/logout")},t.accessible=function(e){return(0,s.request_get)("/system/api/fast_app_cation",e)};var s=n(179);function o(e){return e&&e.__esModule?e:{default:e}}var u=o(n(180)).default.compile("/system/api/setting/:id")},723:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTask=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];return e.size,e.size>=1048576?(t.is_chunk=!0,(0,r.request_post)("/common/api/files/upload_task?r="+Math.random(5)).then(function(i){if(i.status)return t.task_id=i.data.task_id,(0,r.request_file)("/common/api/files/upload",{file:e,data:t},n);throw new Error(i.messages)}).catch(function(e){throw new Error("上传失败")})):(t.is_chunk=!1,(0,r.request_file)("/common/api/files/upload",{file:e,data:t}))},t.getAppId=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_get)("/common/api/app/search_name",e).then(function(e){return i.default.app_id=e.data.id,sessionStorage.app_id=e.data.id,e})},t.getClientToken=function(){return(0,r.request_post)("/common/api/auth/token/pcclient")},t.platInfo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_get)(o(e)).then(function(e){return i.default.app_id=e.data.id,sessionStorage.app_id=e.data.id,document.title=e.data.name,e})},t.commonPreview=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_get)(l(e))},t.getDefaultCover=function(){return(0,r.request_get)("/api/videos/images")},t.generate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)("/common/api/qr_code/generate",e)},t.commonPreviewCode=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)("/api/preview",e)},t.getQrcode=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_get)("/common/api/get_qrcode",e)},t.synchronization=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_get)(u(e)).then(function(e){return e})},t.getAuthor=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_get)("/api/ecommerce/author",e)},t.addAuthor=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)("/api/ecommerce/author",e)},t.getWeixinConfig=function(e){return(0,r.request_get)("/common/api/third/wx_js_sdk/config",e)},t.getIndexInfo=function(){return(0,r.request_get)("/common/api/current")};s(n(181));var r=n(179),i=s(n(253)),a=s(n(180));function s(e){return e&&e.__esModule?e:{default:e}}a.default.compile("/common/api/files/upload_task/:id"),a.default.compile("/common/api/manager/managers/:id"),a.default.compile("/common/api/manager/roles/:id");var o=a.default.compile("/common/api/app/apps/:id"),u=a.default.compile("/common/api/dragon_infos/:id");var l=a.default.compile("/api/preview/:id")},724:function(e,t,n){},765:function(e,t,n){"use strict";var r=n(724);n.n(r).a},778:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content-wrap"},[n("div",{staticClass:"content"},[e._m(0),n("div",{staticClass:"tableWrap"},[n("div",{staticClass:"left"},[n("div",{staticClass:"group"},[n("label",[e._v("系统名称:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.info.name,expression:"info.name"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.info.name},on:{input:function(t){t.target.composing||e.$set(e.info,"name",t.target.value)}}})]),n("div",{staticClass:"group"},[n("label",[e._v("欢迎词:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.info.exp,expression:"info.exp"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.info.exp},on:{input:function(t){t.target.composing||e.$set(e.info,"exp",t.target.value)}}})]),n("div",{staticClass:"group"},[n("label",[e._v("logo:")]),n("img",{staticClass:"scanImg",attrs:{src:e.info.logo_absolute}}),n("el-button",{attrs:{plain:"",type:"primary",size:"mini"},on:{click:function(t){return e.updateImg("logo")}}},[e._v("选择")])],1),n("div",{staticClass:"group"},[n("label",[e._v("ico:")]),n("img",{staticClass:"scanImg",attrs:{src:e.info.icon_absolute}}),n("el-button",{attrs:{plain:"",type:"primary",size:"mini"},on:{click:function(t){return e.updateImg("icon")}}},[e._v("选择")])],1)]),n("div",{staticClass:"right"},[n("div",{staticClass:"btn"},[n("el-button",{staticClass:"el-icon-plus",attrs:{type:"primary",size:"small"},on:{click:function(t){return e.add()}}},[e._v("增加banner")])],1),e._l(e.list,function(t,r){return n("div",{key:r,staticClass:"list"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"item.title"}],staticClass:"form-control",attrs:{placeholder:"title"},domProps:{value:t.title},on:{input:function(n){n.target.composing||e.$set(t,"title",n.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.link,expression:"item.link"}],staticClass:"form-control",attrs:{placeholder:"path"},domProps:{value:t.link},on:{input:function(n){n.target.composing||e.$set(t,"link",n.target.value)}}}),n("img",{ref:t.id,refInFor:!0,staticClass:"img",attrs:{src:t.url}}),n("el-button",{attrs:{type:"primary",size:"small",plain:""},on:{click:function(n){return e.updateImg(t)}}},[e._v("上传")]),n("el-button",{attrs:{type:"primary",size:"small",plain:""},on:{click:function(t){return e.del(r)}}},[e._v("删除")])],1)})],2),n("div",{staticClass:"btns"},[n("input",{ref:"updateImg",staticClass:"hide",attrs:{type:"file",accept:"image/jpeg,image/jpg,image/png"},on:{change:function(t){return e.update(t)}}}),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submit()}}},[e._v("保存")])],1)])])])},i=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"titleWrap"},[t("div",{staticClass:"tableTop"},[t("div",{staticClass:"title vel-line"},[t("span",{staticClass:"titleText"},[this._v("首页配置")])])])])}];n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i})}}]);