/*!
 * {
 *   "buildtime": "2019-05-31 16:22:54",
 *   "workspace": "F:\\X-BOOK\\xcloud\\x-book4\\js",
 *   "username": "LQB",
 *   "hostname": "DESKTOP-QL56OJS",
 *   "platform": "win32",
 *   "git": {
 *     "branch": "master",
 *     "hash": "fbc007935",
 *     "message": [
 *       "commit fbc00793544e5767db1868f95f89c64b93f3aa79",
 *       "Author: 骆秋波 <1277678760@qq.com>",
 *       "Date:   Fri May 31 15:21:03 2019 +0800",
 *       "    打包上传"
 *     ],
 *     "user": "骆秋波",
 *     "email": "1277678760@qq.com",
 *     "remote": [
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (fetch)",
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (push)"
 *     ]
 *   }
 * }
 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{679:function(e,t,n){"use strict";n.r(t);var r=n(777),a=n(701);for(var s in a)"default"!==s&&function(e){n.d(t,e,function(){return a[e]})}(s);n(763);var o=n(35),i=Object(o.a)(a.default,r.a,r.b,!1,null,null,null);t.default=i.exports},688:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.event_terminal_verison=t.event_terminal=void 0,t.cb=function(e){e&&!e.status&&console.warn(e)},t.getUserId=function(){var e=window.sessionStorage.getItem("userInfo");if(e)return e._id||e.id;return""};var r,a=n(698);(r=a)&&r.__esModule;var s=(0,n(699).detect)(),o=s.name,i=s.version;t.event_terminal=o,t.event_terminal_verison=i},689:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.suance=t.loginListener=t.createProListener=t.educeResListener=t.addResListener=void 0;var r=u(n(690)),a=u(n(691)),s=u(n(692)),o=u(n(693)),i=u(n(694));function u(e){return e&&e.__esModule?e:{default:e}}t.addResListener=r.default,t.educeResListener=a.default,t.createProListener=s.default,t.loginListener=o.default,t.suance=i.default},690:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.res_id,n=e.res_type,a=e.res_name,s=e.res_exp,o=e.res_author,i=void 0===o?"佚名":o,u=e.res_author_id,l=void 0===u?[]:u,c=e.res_tree,d=void 0===c?[]:c,f=e.res_lables,p=void 0===f?[]:f,v=e.res_attr,_=void 0===v?[]:v,m=e.user_id,h=void 0===m?"":m;if(window.DBI){h=h||(0,r.getUserId)();var g=new DBI.createEvent({event_class:"Resources",event_data:{Resources:[{res_id:t,res_type:n,res_name:a,res_exp:s,res_author:i,res_author_id:l,res_tree:d,res_lables:p,res_attr:_,user_id:h,res_total_play:0,res_total_order:0}]},event_target:"",event_type:"创建",event_source:"WEB",event_sources:r.origin,event_operator:h,event_temporary:"",event_system:"",event_system_verison:"",event_terminal:r.event_terminal,event_terminal_verison:r.event_terminal_verison});DBI.declare(g,r.cb)}};var r=n(688)},691:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.res_url,n=e.user_id,a=void 0===n?"":n;window.DBI&&(a=a||(0,r.getUserId)(),DBI.declare({event_class:"Resources",event_data:{Resources:[{res_url:t}]},event_target:"",event_type:"导出",event_source:"Web",event_sources:r.origin,event_operator:a,event_temporary:"",event_system:"",event_system_version:"",event_terminal:r.event_terminal,event_terminal_verison:r.event_terminal_verison},r.cb))};var r=n(688)},692:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.res_id,n=e.res_type,a=e.res_name,s=e.res_cover,o=e.res_covers,i=e.res_exp,u=e.res_author,l=e.res_author_id,c=e.res_Interpreter,d=e.res_Interpreter_id,f=e.res_lables,p=e.res_money,v=e.res_isbn,_=e.res_isbn_ext,m=e.user_id,h=void 0===m?"":m;if(window.DBI){h=h||(0,r.getUserId)();var g=new DBI.createEvent({event_class:"PDAMBook",event_data:{Resources:[{res_id:t,res_type:n,res_name:a,res_cover:s,res_covers:o,res_exp:i,res_author:u,res_author_id:l,res_Interpreter:c,res_Interpreter_id:d,res_lables:f,res_money:p,res_isbn:v,res_isbn_ext:_}]},event_target:t,event_type:"创建",event_source:"WEB",event_sources:r.origin,event_operator:h,event_temporary:"",event_system:"",event_system_verison:"",event_terminal:r.event_terminal,event_terminal_verison:r.event_terminal_verison});DBI.declare(g,r.cb)}};var r=n(688)},693:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.user_id,n=e.user_name,a=e.user_nick_name,s=e.user_phone,o=e.user_picture,i=e.user_picture_absolute,u=e.user_email,l=e.user_sex,c=e.user_date_of_birth,d=e.user_address,f=e.user_city;t=t||(0,r.getUserId)(),window.DBI&&DBI.declare({event_class:"User",event_data:{User:[{user_id:t,user_nick_name:a,user_name:n,user_sex:l,user_email:u,user_phone:s,user_picture:o,user_picture_absolute:i,user_address:d,user_city:f,user_date_of_birth:c}]},event_target:"",event_type:"登录",event_source:"",event_sources:r.origin,event_operator:t,event_temporary:"",event_system:"",event_system_version:"",event_terminal:r.event_terminal,event_terminal_verison:r.event_terminal_verison},r.cb)};var r=n(688)},694:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.id,n=e.info,a=e.user_id,s=void 0===a?"":a;s=s||(0,r.getUserId)(),window.DBI&&DBI.declare({event_class:"PDAMBook",event_data:{PDAMBook:[n]},event_target:t,event_type:"分发",event_source:"web",event_sources:r.origin,event_operator:s,event_temporary:"",event_system:"",event_system_version:"",event_terminal:r.event_terminal,event_terminal_verison:r.event_terminal_verison},r.cb)};var r=n(688)},696:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUserInfo=function(){return r.default.parse(window.sessionStorage.getItem("userInfo"))},t.getDefaultCover=function(){return(0,a.request_get)(restUrl_publish+"/api/videos/images")},t.commonPreview=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)(u(e))},t.commonPreviewCode=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/preview",e)},t.platInfo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=o.default.compile(restUrl_publish+"/api/current");return(0,a.request_get)(t(e)).then(function(e){return s.default.app_id=e.data.id,sessionStorage.app_id=e.data.id,document.title=e.data.application?e.data.application.name:e.data.publisher.name,e})},t.fileExport=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)(l(e))},t.groupsDelete=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/groups/delete",e)};var r=i(n(181)),a=n(179),s=i(n(253)),o=(n(689),i(n(180)));function i(e){return e&&e.__esModule?e:{default:e}}var u=o.default.compile(restUrl_publish+"/api/preview/:id");var l=o.default.compile(restUrl_publish+"/api/content/export/:id")},697:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.detailRole=void 0;var r,a,s=f(n(252)),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.detailRole=(r=s.default.mark(function e(){var t,n,r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=a.id,i=p(a,["id"]);return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={accesses:{}},n={},r={},e.next=5,(0,u.request_get)("/common/api/current").then(function(e){n.common={name:"common",type:"common"},t.pointer=n,e.data.publisher.apps.forEach(function(e){n[e.id]={name:e.name,type:e.type}})});case 5:if(!o){e.next=13;break}return e.next=8,(0,u.request_get)(_({id:o}),i).then(function(e){e&&e.status&&(t.name=e.data.name,t.exp=e.data.exp,t.id=e.data.id,r=e.data.accesses)});case 8:return e.next=10,(0,u.request_get)("/common/api/user/accesses").then(function(e){var a=["checkedList","allow_create","allow_view_all","allow_view_own","allow_edit_all","allow_edit_own","allow_delete_all","allow_delete_own"],s=function(s){r[s]?t.accesses[s]=e.data[n[s].type].map(function(e){var t={};if(r[s][e.identifier]){var n=null;return(n=r[s][e.identifier]).allow_create&&n.allow_view_own&&n.allow_view_own&&n.allow_edit_all&&n.allow_edit_own&&n.allow_delete_all&&n.allow_delete_own?n.checkedList=1:n.checkedList=0,a.forEach(function(e){t[e]=n[e]}),t.name=n.name,t.identifier=n.access_identifier,t}return a.forEach(function(e){t[e]=0}),t.name=e.name,t.identifier=e.identifier,t}):t.accesses[s]=e.data[n[s].type].map(function(e){var t={};return a.forEach(function(e){t[e]=0}),t.name=e.name,t.identifier=e.identifier,t})};for(var o in n)s(o)});case 10:return e.abrupt("return",t);case 13:return e.next=15,(0,u.request_get)("/common/api/user/accesses").then(function(e){var r=["checkedList","allow_create","allow_view_all","allow_view_own","allow_edit_all","allow_edit_own","allow_delete_all","allow_delete_own"];for(var a in n)t.accesses[a]=e.data[n[a].type].map(function(e){var t={};return r.forEach(function(e){t[e]=0}),t.name=e.name,t.identifier=e.identifier,t})});case 15:return e.abrupt("return",t);case 16:case"end":return e.stop()}},e,this)}),a=function(){var e=r.apply(this,arguments);return new Promise(function(t,n){return function r(a,s){try{var o=e[a](s),i=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(i).then(function(e){r("next",e)},function(e){r("throw",e)});t(i)}("next")})},function(){return a.apply(this,arguments)});t.listRole=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,u.request_get)("/common/api/user/roles",e)},t.listManager=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,u.request_get)("/common/api/user/users/manager",e)},t.addManager=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,u.request_post)("/common/api/user/users/detail/manager",e)},t.modifyManager=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=p(e,["id"]);return(0,u.request_put)(v({id:t}),n)},t.detailManager=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=p(e,["id"]);return(0,u.request_get)(v({id:t}),n)},t.allJurisdiction=function(){return(0,u.request_get)("/common/api/user/accesses")},t._allJurisdiction=function(){return(0,u.request_get)("/common/api/user/accesses").then(function(e){return e.data.publish=e.data.publish.map(function(e){return o({},e,{allow_create:0,allow_delete_all:0,allow_edit_all:0,allow_view_all:0})}),e.data.read=e.data.read.map(function(e){return o({},e,{allow_create:0,allow_delete_all:0,allow_edit_all:0,allow_view_all:0})}),e})},t.role=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=p(e,["id"]);if(t)return(0,u.request_put)(_({id:t}),n);return(0,u.request_post)("/common/api/user/roles",n)},t.addRole=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,u.request_post)("/common/api/user/roles",e)},t.deleteManager=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,u.request_post)("/common/api/user/users/delete",e)},t.deleteRole=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,u.request_post)("/common/api/user/roles/delete",e)},t.logManager=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,u.request_get)("/common/api/user/logs",e)},t.login=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,u.request_post)("/common/api/manager/login",e)},t.isLogin=function(){return(0,u.request_get)("/api/auth/is_login/manager")},t.adminLogin=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,u.request_post)("/common/api/auth/login/manager",e).then(function(e){return(0,d.loginListener)({user_id:e.data.id,user_name:e.data.user.name,user_nick_name:e.data.user.nick_name,user_phone:e.data.user.phone,user_picture:e.data.user.user_picture,user_picture_absolute:e.data.user.user_picture_absolute,user_email:e.data.user.email,user_sex:e.data.user.sex,user_date_of_birth:e.data.user.date_of_birth,user_address:e.data.user.address,user_city:""}),window.sessionStorage.setItem("token",e.data.token),window.sessionStorage.setItem("userInfo",i.default.stringify(e.data.user)),c.default.token=e.data.token,e})},t.getSelectOptions=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,u.request_post)("/common/api/auth/login/manager_check",e)};var i=f(n(181)),u=n(179),l=f(n(180)),c=f(n(253)),d=n(689);function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var v=l.default.compile("/common/api/user/users/detail/:id"),_=l.default.compile("/common/api/user/roles/:id")},701:function(e,t,n){"use strict";n.r(t);var r=n(702),a=n.n(r);for(var s in r)"default"!==s&&function(e){n.d(t,e,function(){return r[e]})}(s);t.default=a.a},702:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=c(n(252)),a=c(n(748)),s=c(n(759)),o=n(697),i=n(746),u=n(696),l=c(n(181));function c(e){return e&&e.__esModule?e:{default:e}}t.default={components:{Menu:a.default,SwitchSys:s.default},data:function(){return{isCollspan:!1,isOpen:!1}},created:function(){},mounted:function(){var e,t=this;return(e=r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.checkLogin();case 2:return e.next=4,t.platInfo();case 4:case"end":return e.stop()}},e,t)}),function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(a,s){try{var o=t[a](s),i=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(i).then(function(e){r("next",e)},function(e){r("throw",e)});e(i)}("next")})})()},methods:{collspan:function(e){this.isCollspan=e},platInfo:function(){var e=this;(0,u.platInfo)().then(function(t){e.isOpen=!0,(0,i.addFavicon)(t.data.publisher.icon_absolute),e.$config.plantInfo=t.data})},checkLogin:function(){var e=this;(0,o.isLogin)().then(function(t){t&&t.status&&(sessionStorage.userInfo=l.default.stringify(t.data),sessionStorage.token=t.data.token,e.$refs.SwitchSys.update(t.data))},function(e){}),sessionStorage.userInfo}}}},703:function(e,t,n){"use strict";n.r(t);var r=n(704),a=n.n(r);for(var s in r)"default"!==s&&function(e){n.d(t,e,function(){return r[e]})}(s);t.default=a.a},704:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(749)),a=u(n(752)),s=u(n(754)),o=u(n(182)),i=n(256);n(696),n(746),u(n(698));function u(e){return e&&e.__esModule?e:{default:e}}t.default={components:{GliMenu:r.default,GliMenuTop:a.default,GliMenuItem:s.default},created:function(){var e=this;(0,i.menu)().then(function(t){e.showMenu=t.data,e.$store.state.mune=t.data;var n=!0,r=!1,a=void 0;try{for(var s,o=e.list[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var i=s.value,u=!0,l=!1,c=void 0;try{for(var d,f=i.items[Symbol.iterator]();!(u=(d=f.next()).done);u=!0){var p=d.value;t.data[p.name]&&(p.status=t.data[p.name].status,p.status&&(e.$router.push({path:t.data[p.name].index}),i.status=!0))}}catch(e){l=!0,c=e}finally{try{!u&&f.return&&f.return()}finally{if(l)throw c}}}}catch(e){r=!0,a=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw a}}var v=e.$route.path;e.showMenu[v].status||(e.$config.plantInfo.publisher&&e.$config.plantInfo.publisher.apps&&e.$config.plantInfo.publisher.apps[0]?(e.$store.state.url=e.$config.plantInfo.publisher.apps[0].base_url+"/admin",e.$router.push({path:"/app/error"})):history.back())})},data:function(){return{showMenu:{},list:[{txt:"系统设置",status:!1,items:[{iconClass:"icon-2",txt:"系统配置",index:(0,o.default)("/","/app/systemSetting"),name:"/app/systemSetting",status:!0},{iconClass:"icon-1",txt:"应用配置",index:(0,o.default)("/","/app/application"),name:"/app/systemManage/application",status:!0}]},{txt:"用户管理",status:!1,items:[{iconClass:"icon-4",txt:"会员列表",index:(0,o.default)("/","/app/memberlist"),name:"/app/systemManage/manager",status:!0},{iconClass:"icon-1",txt:"管理员管理",index:(0,o.default)("/","/app/systemManage/manager"),name:"/app/systemManage/manager",status:!0}]}],isCollapse:!1}},methods:{menuItemClickHandler:function(){},menuFoldHandler:function(e){this.$emit("collspan",!e)}},watch:{$route:function(e,t){var n=this.showMenu[e.path.replace("/","")];n&&!n.status&&this.$confirm("你没有权限访问此页面?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){history.back()}).catch(function(){history.back()})}}}},705:function(e,t,n){"use strict";n.r(t);var r=n(706),a=n.n(r);for(var s in r)"default"!==s&&function(e){n.d(t,e,function(){return r[e]})}(s);t.default=a.a},706:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(750),t.default={compName:"GliMenu",provide:function(){return{rootMenu:this}},props:{defaultActive:String,keepOneOpen:{type:Boolean,default:!1},menuRecreate:{type:Boolean,default:!0},changedRecreate:{type:Boolean,default:!1},router:{type:Boolean,default:!0},collapse:{type:Boolean,default:!1},topPx:{type:String,default:"10px"},topBarClass:{type:String,default:"icon-menuown-fold"},arrowClass:{type:String,default:"icon-menuown-right"},backgroundColor:{type:String,default:"#333744"},textColor:{type:String,default:"#fff"},activeTextColor:{type:String,default:"#44c3aa"}},created:function(){this.isFold=!this.collapse,this.isFold},mounted:function(){this.findCurrChild(!0)},data:function(){return{isFold:!0,styleObj:{backgroundColor:this.backgroundColor},scrollTop:0,rootMenu:!0}},watch:{defaultActive:function(){this.findCurrChild(!0)}},methods:{fold:function(){this.isFold=!this.isFold,this.isFold||this.hideChildrenName(this.$children),this.$emit("foldHandler",this.isFold)},hideChildrenName:function(e){var t=this;e.forEach(function(e){e.isFold=t.isFold,e.$children&&t.hideChildrenName(e.$children)})},itemClickHandler:function(e){this.$emit("itemClickHandler",e)},findCurrChild:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$children.forEach(function(n){e.currChild(n,e.defaultActive,t)})},currChild:function(e,t,n){var r=this,a=!1;e.$children.forEach(function(e){e.index==t||e.index==r.$route.query.index?(e.isCurr=!0,a=!0):e.isCurr=!1}),a?n&&(e.isOpen=!0):e.isOpen=!1},normalizeOther:function(e){this.$children.forEach(function(t){t.$children.forEach(function(t){t.index!=e&&(t.isCurr=!1)})})},findEachItem:function(){},closeOtherGroup:function(e){this.$children.forEach(function(t){t.txt!=e&&(t.isOpen=!1)})},scrollHander:function(e){if(!this.isFold){var t=e.target;this.scrollTop=t.scrollTop}}}}},707:function(e,t,n){},708:function(e,t,n){"use strict";n.r(t);var r=n(709),a=n.n(r);for(var s in r)"default"!==s&&function(e){n.d(t,e,function(){return r[e]})}(s);t.default=a.a},709:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={inject:["rootMenu"],props:{txt:{type:String},index:String},created:function(){this.isFold=this.rootMenu.isFold},mounted:function(){var e=this;setTimeout(function(){e.$refs.icon2.style.transition="transform 0.3s ease-in-out"},0)},data:function(){return{isOpen:!1,isFold:!0,currTip:!1}},methods:{open:function(){this.index&&this.$router.push({path:this.index}),this.isOpen=!this.isOpen,this.rootMenu.keepOneOpen&&this.rootMenu.closeOtherGroup(this.txt)}}}},710:function(e,t,n){},711:function(e,t,n){"use strict";n.r(t);var r=n(712),a=n.n(r);for(var s in r)"default"!==s&&function(e){n.d(t,e,function(){return r[e]})}(s);t.default=a.a},712:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={inject:["rootMenu"],props:{index:String,iconClass:String,txt:String},created:function(){},data:function(){return{isFold:!0,isCurr:!1,compType:"menuItem",currTip:!1}},computed:{currStyle:function(){if(this.isCurr)return{color:this.rootMenu.activeTextColor}}},methods:{goHref:function(){var e=this.rootMenu;e.router&&this.$router.push({path:this.index}),e.menuRecreate||(this.isCurr=!0,e.normalizeOther(this.index),e.itemClickHandler(this.index))},findRootMenu:function(e){return e.rootMenu?e:this.findRootMenu(e.$parent)},showRightTip:function(){this.currTip=!0},mouseenterHander:function(e){this.currTip=!0},mouseleaveHandler:function(e){this.currTip=!1}}}},713:function(e,t,n){},715:function(e,t,n){"use strict";n.r(t);var r=n(716),a=n.n(r);for(var s in r)"default"!==s&&function(e){n.d(t,e,function(){return r[e]})}(s);t.default=a.a},716:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=v(n(252)),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=v(n(695)),o=n(760),i=n(761),u=n(254),l=v(n(181)),c=v(n(182)),d=n(696),f=n(697),p=v(n(255));function v(e){return e&&e.__esModule?e:{default:e}}var _="common",m="system"==_&&!0&&"desktop"=="desktop";t.default={props:["leftName","title","currentPlant"],data:function(){return{userInfo:null,current:"",type:_,plantInfo:null,loginDialog:!1,showMoreTop:!1,outlink:"",isBase:!0,publisher:{},passData:{old_pass:null,new_pass:null,new_pass_confirm:null}}},mounted:function(){var e=this;"system"!=_&&(0,d.platInfo)().then(function(t){e.publisher=t.data.publisher,e.outlink=e.publisher.apps,e.outlink.forEach(function(t){t.is_current&&(e.isBase=!1)})}),this.current=this.currentPlant,sessionStorage.userInfo&&(this.userInfo=l.default.parse(sessionStorage.userInfo)),this.$config.userInfo&&(this.userInfo=this.$config.userInfo),this.$config.userInfo||sessionStorage.userInfo||this.checklogin()},computed:{left:function(){return this.leftName||"显示平台"},isXDataVisible:function(){return this.$store.state.xDataVisible},isXDataTextVisible:function(){return!0},userName:function(){return this.userInfo&&this.userInfo.user?this.userInfo.user.name:null}},methods:a({checklogin:function(){var e,t=this;return(e=r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,f.isLogin)().then(function(e){t.userInfo=e.data});case 2:case"end":return e.stop()}},e,t)}),function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(a,s){try{var o=t[a](s),i=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(i).then(function(e){r("next",e)},function(e){r("throw",e)});e(i)}("next")})})()},update:function(e){this.userInfo=e},handleClose:function(e){this.passData.old_pass=null,this.passDatanew_pass=null,this.passDatanew_pass_confirm=null,this.loginDialog=!1},changeCode:function(e){var t=e.currentTarget;t.src=t.src},logout:function(){this.$confirm("是否确认退出?").then(function(e){(m?i.loginOut:o.loginOut)().then(function(e){sessionStorage.clear(),window.location.href=m?"/system/admin":"/admin"})}).catch(function(e){})},backHome:function(){window.location.href=restUrl_system+"/system"},changePass:function(){this.loginDialog=!0},changePassword:function(){var e=this,t=(0,s.default)(this.$refs.passForm,{hash:!0});(m?i.changePass:o.changePass)(t).then(function(t){e.$message.success("修改密码成功！"),e.loginDialog=!1,window.location.href="../"}).catch(function(t){var n=t.payload;for(var r in n.messages){e.$message.error(n.messages[r]);break}})},goPage:function(e){"string"!=typeof e?e.name!=this.currentPlant?location.href=(0,c.default)(e.base_url,"admin"):this.$message.error("你正处在该平台"):location.href=e},showMore:function(){this.showMoreTop=!this.showMoreTop},handleCommand:function(t){p.default.set("token",sessionStorage.token,{expires:1,path:"/",domain:e.restUrl_system.replace("http://",".")}),location.href=t+"/common/admin"}},(0,u.mapMutations)(["updateUser","openXData","closeXData"]))}}).call(this,n(44))},717:function(e,t,n){},718:function(e,t,n){},746:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addFavicon=function(e){if(e){var t=document.querySelector("head"),n=document.createElement("link");n.rel="SHORTCUT ICON",n.href=e,t.appendChild(n)}},t.addLinks=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"js";return new Promise(function(n,r){!function(e,t,n,r){var a,s=document.getElementsByTagName("HEAD").item(0);"js"==t?((a=document.createElement("script")).type="text/javascript",a.src=e,a.onload=function(){n("load success!")},a.onerror=function(){r(e)}):((a=document.createElement("link")).type="text/css",a.rel="stylesheet",a.href=e,n("resolve css immediately"));s.appendChild(a)}(e,t,n,r)}).catch(function(e){console.error("js加载错误!"+e)})}},748:function(e,t,n){"use strict";n.r(t);var r=n(786),a=n(703);for(var s in a)"default"!==s&&function(e){n.d(t,e,function(){return a[e]})}(s);var o=n(35),i=Object(o.a)(a.default,r.a,r.b,!1,null,"17cbee7e",null);t.default=i.exports},749:function(e,t,n){"use strict";n.r(t);var r=n(788),a=n(705);for(var s in a)"default"!==s&&function(e){n.d(t,e,function(){return a[e]})}(s);n(751);var o=n(35),i=Object(o.a)(a.default,r.a,r.b,!1,null,"21763bd0",null);t.default=i.exports},750:function(e,t,n){},751:function(e,t,n){"use strict";var r=n(707);n.n(r).a},752:function(e,t,n){"use strict";n.r(t);var r=n(789),a=n(708);for(var s in a)"default"!==s&&function(e){n.d(t,e,function(){return a[e]})}(s);n(753);var o=n(35),i=Object(o.a)(a.default,r.a,r.b,!1,null,null,null);t.default=i.exports},753:function(e,t,n){"use strict";var r=n(710);n.n(r).a},754:function(e,t,n){"use strict";n.r(t);var r=n(790),a=n(711);for(var s in a)"default"!==s&&function(e){n.d(t,e,function(){return a[e]})}(s);n(755);var o=n(35),i=Object(o.a)(a.default,r.a,r.b,!1,null,"21ea082e",null);t.default=i.exports},755:function(e,t,n){"use strict";var r=n(713);n.n(r).a},759:function(e,t,n){"use strict";n.r(t);var r=n(787),a=n(715);for(var s in a)"default"!==s&&function(e){n.d(t,e,function(){return a[e]})}(s);n(762);var o=n(35),i=Object(o.a)(a.default,r.a,r.b,!1,null,"5d3b1c52",null);t.default=i.exports},760:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.register=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)("/common/api/user/register",e)},t.login=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)("/common/api/auth/login/user",e).then(function(e){return window.sessionStorage.setItem("token",e.data.token),window.localStorage.setItem("token",e.data.token),s.default.token=e.data.token,e})},t.thirdLogin=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.back_url.match(/.*(\?.*)#.*/),n=t&&t[1];n&&(e.back_url=e.back_url.replace(n,""));return(0,r.request_post)("/common/api/auth/third/link",e)},t.phoneLogin=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)("/common/api/auth/login_by_phone/phone",e).then(function(e){return window.sessionStorage.setItem("token",e.data.token),window.localStorage.setItem("token",e.data.token),s.default.token=e.data.token,e})},t.codeImage=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=Math.random().toFixed(3);return(0,r.request_get)("/common/api/captcha/image?code="+e)},t.codeCheck=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)("/common/api/captcha/check",e)},t.codePhone=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)("/common/api/captcha/mobile",e)},t.codeEmail=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)("/common/api/captcha/email",e)},t.getUserInfo=function(){return(0,r.request_get)("/api/auth/is_login/user")},t.save=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_put)("/common/api/user",e)},t.loginOut=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)("/common/api/auth/logout",e).then(function(e){return window.sessionStorage.removeItem("token"),window.sessionStorage.removeItem("userInfo"),s.default.token=null,e})},t.changePass=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_put)("/common/api/auth/pass",e).then(function(e){return window.sessionStorage.removeItem("token"),window.sessionStorage.removeItem("userInfo"),s.default.token=null,e})},t.saveMemberData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_put)(i(e),e)};var r=n(179),a=o(n(180)),s=(o(n(181)),o(n(253)));function o(e){return e&&e.__esModule?e:{default:e}}var i=a.default.compile("/common/api/user/:id")},761:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.listRole=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.request_get)("/system/api/manager/roles",e)},t.listManager=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.request_get)("/system/api/manager/managers",e)},t.addManager=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.request_post)("/system/api/manager/managers",e)},t.modifyManager=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=u(e,["id"]);return(0,s.request_put)(l({id:t}),n)},t.detailManager=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=u(e,["id"]);return(0,s.request_get)(l({id:t}),n)},t.detailRole=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=u(e,["id"]);return t?(0,s.request_get)(c({id:t}),n).then(function(e){var t={};if(e.status){t=e.data.accesses;var n={allow_create:0,allow_view_all:0,allow_edit_all:0,allow_delete_all:0};return d().then(function(a){if(a.status){var s=a.data,o={};for(var i in s)o[s[i].id]=r({},s[i],n),t[s[i].id]&&(o[s[i].id]=r({},s[i],t[s[i].id]));return a.data=o,log(e,222),a}})}}):f()},t.allJurisdiction=d,t._allJurisdiction=f,t.role=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=u(e,["id"]);if(log(n),t)return(0,s.request_put)(c({id:t}),n);return(0,s.request_post)("/system/api/manager/roles",n)},t.addRole=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.request_post)("/system/api/manager/roles",e)},t.deleteManager=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.request_post)("/system/api/manager/managers/delete",e)},t.deleteRole=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.request_post)("/system/api/manager/roles/delete",e)},t.logManager=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.request_get)("/system/api/manager/logs",e)},t.login=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.request_post)("/system/api/auth/login/manager",e)},t.isLogin=function(){return(0,s.request_get)("/system/api/auth/is_login/manager")},t.loginOut=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.request_post)("/system/api/auth/logout",e)},t.changePass=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.request_put)("/system/api/auth/pass",e).then(function(e){return window.sessionStorage.removeItem("token"),window.sessionStorage.removeItem("userInfo"),config.token=null,e})};var a,s=n(179),o=n(180),i=(a=o)&&a.__esModule?a:{default:a};function u(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var l=i.default.compile("/system/api/manager/managers/:id"),c=i.default.compile("/system/api/manager/roles/:id");function d(){return(0,s.request_get)("/system/api/manager/accesses")}function f(){return(0,s.request_get)("/system/api/manager/accesses").then(function(e){if(e.status){var t={allow_create:0,allow_view_all:0,allow_edit_all:0,allow_delete_all:0},n=e.data,a={};for(var s in n)a[n[s].id]=r({},n[s],t);return e.data=a,e}})}},762:function(e,t,n){"use strict";var r=n(717);n.n(r).a},763:function(e,t,n){"use strict";var r=n(718);n.n(r).a},777:function(e,t,n){"use strict";var r=function(){var e=this.$createElement,t=this._self._c||e;return this.isOpen?t("div",[t("div",{staticClass:"top"},[t("SwitchSys",{ref:"SwitchSys",attrs:{currentPlant:"X-SYSTEM"}})],1),this._v(" "),t("div",[t("Menu",{on:{collspan:this.collspan}})],1),this._v(" "),t("div",{staticClass:"main-content",class:this.isCollspan?"collspan":""},[t("div",{staticClass:"bg"}),this._v(" "),t("router-view")],1)]):this._e()},a=[];n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a})},786:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("GliMenu",{attrs:{menuRecreate:!1,topPx:"50px",keepOneOpen:!0,"default-active":e.$route.path,router:!0,collapse:e.isCollapse,"background-color":"#333744","text-color":"#fff","active-text-color":"#44c3aa"},on:{itemClickHandler:e.menuItemClickHandler,foldHandler:e.menuFoldHandler}},e._l(e.list,function(t){return n("GliMenuTop",{directives:[{name:"show",rawName:"v-show",value:t.status,expression:"top.status"}],key:t.txt,attrs:{txt:t.txt}},e._l(t.items,function(e){return n("GliMenuItem",{directives:[{name:"show",rawName:"v-show",value:e.status,expression:"item.status"}],key:e.index,attrs:{iconClass:e.iconClass,txt:e.txt,index:e.index}})}),1)}),1)],1)},a=[];n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a})},787:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"div"},[n("div",{staticClass:"alltop",class:{showMoreTop:e.showMoreTop},on:{mouseleave:function(t){e.showMoreTop=!1}}},[n("ul",{staticClass:"otherTop"},[n("li",{class:{active:e.isBase},on:{click:function(t){return e.goPage("/common/admin")}}},[e._m(0)]),e._l(e.outlink,function(t){return n("li",{class:{active:t.is_current},on:{click:function(n){return e.goPage(t)}}},[n("div",{staticClass:"content"},[n("p",{staticClass:"title"},[e._v(e._s(t.title))]),n("p",{staticClass:"name"},[e._v(e._s(t.name))])])])})],2),n("header",{staticClass:"header"},[n("div",{staticClass:"left",domProps:{textContent:e._s(e.left)},on:{click:e.showMore}}),e.plantInfo&&!e.isXDataVisible?n("div",{staticClass:"content"},[e._v("（"+e._s(e.plantInfo.name)+"）")]):e._e(),e.userInfo?n("div",{staticClass:"right"},["system"!=e.type?n("el-dropdown",{on:{command:e.handleCommand}},[n("span",{staticClass:"el-dropdown-link"},[e._v("平台切换"),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.userInfo.publishers,function(t){return n("el-dropdown-item",{key:t.id,attrs:{command:t.base_url,disabled:e.publisher.id==t.id}},[e._v(e._s(t.name))])}),1)],1):e._e(),n("span",{staticClass:"user"},[e._v(e._s(e.userName))]),n("span",{staticClass:"logoutBtn",on:{click:e.logout}},[e._v("退出登录")]),n("span",{staticClass:"logoutBtn",on:{click:e.changePass}},[e._v("修改密码")]),n("span",{staticClass:"logoutBtn",on:{click:e.backHome}},[e._v("返回首页")]),n("el-dialog",{attrs:{visible:e.loginDialog,width:"420px","close-on-click-modal":!1,"lock-scroll":!1,"before-close":e.handleClose,"append-to-body":!0},on:{"update:visible":function(t){e.loginDialog=t}}},[n("div",{staticClass:"top",attrs:{slot:"title"},slot:"title"},[n("el-tabs",{attrs:{value:"pass"}},[n("el-tab-pane",{attrs:{label:"修改密码",name:"pass"}})],1)],1),n("form",{ref:"passForm",staticClass:"passContent"},[n("div",{staticClass:"group"},[n("div",{staticClass:"label"},[e._v("旧密码:")]),n("input",{staticClass:"form-control",attrs:{name:"old_pass",type:"password"},domProps:{value:e.passData.old_pass}})]),n("div",{staticClass:"group"},[n("div",{staticClass:"label"},[e._v("新密码:")]),n("input",{staticClass:"form-control",attrs:{name:"new_pass",type:"password"},domProps:{value:e.passData.new_pass}})]),n("div",{staticClass:"group"},[n("div",{staticClass:"label"},[e._v("新密码确认:")]),n("input",{staticClass:"form-control",attrs:{name:"new_pass_confirm",type:"password"},domProps:{value:e.passData.new_pass_confirm}})])]),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.loginDialog=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.changePassword}},[e._v("确 定")])],1)])],1):e._e()])])])},a=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"content"},[t("p",{staticClass:"title"}),t("p",{staticClass:"name"},[this._v("基础设置")])])}];n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a})},788:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wrap",class:e.isFold?"open":"close",style:{top:e.topPx}},[n("div",{staticClass:"main",style:e.styleObj,on:{scroll:e.scrollHander}},[n("div",{staticClass:"topbar",class:e.isFold?"":"fold",on:{click:e.fold}},[n("span",{class:e.topBarClass})]),e._v(" "),n("div",{attrs:{color:"red"}},[e._t("default")],2)])])},a=[];n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a})},789:function(e,t,n){"use strict";var r=function(){var e,t=this,n=t.$createElement,r=t._self._c||n;return r("div",{staticClass:"menu-main"},[r("div",{staticClass:"title-item",on:{mouseleave:function(e){t.currTip=!1},mouseenter:function(e){t.currTip=!0},click:t.open}},[r("div",{directives:[{name:"show",rawName:"v-show",value:!t.rootMenu.isFold&&t.currTip,expression:"!rootMenu.isFold && currTip"}],staticClass:"rightTip",style:{marginTop:-t.rootMenu.scrollTop+"px"}},[r("div",[r("span",{staticClass:"tiptxt"},[t._v("\n          "+t._s(t.txt)+"\n        ")])])]),t._v(" "),r("div",{staticClass:"submenu__title",class:{isOpen:t.isOpen}},[r("span",{ref:"icon2",staticClass:"icon2",class:(e={isOpen:t.isOpen},e[t.rootMenu.arrowClass]=!0,e)}),t._v(" "),r("span",{staticClass:"name",class:t.rootMenu.isFold?"":"hide"},[t._v(t._s(t.txt))])])]),t._v(" "),r("div",{staticClass:"subs",class:t.isOpen?"open":"close"},[t._t("default")],2)])},a=[];n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a})},790:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"item-main curr",style:e.currStyle},[n("div",{on:{click:e.goHref,mouseleave:e.mouseleaveHandler,mouseenter:e.mouseenterHander}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!e.rootMenu.isFold&&e.currTip,expression:"!rootMenu.isFold && currTip"}],staticClass:"rightTip",style:{marginTop:-e.rootMenu.scrollTop+"px"}},[n("div",[n("span",{staticClass:"tiptxt"},[e._v("\n          "+e._s(e.txt)+"\n        ")])])]),e._v(" "),n("div",{staticClass:"title"},[n("span",{staticClass:"icon",class:e.iconClass}),e._v(" "),n("span",{staticClass:"name",class:e.rootMenu.isFold?"":"hide"},[e._v("\n        "+e._s(e.txt)+"\n      ")])])])])},a=[];n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a})}}]);