/*!
 * {
 *   "buildtime": "2019-05-31 16:22:54",
 *   "workspace": "F:\\X-BOOK\\xcloud\\x-book4\\js",
 *   "username": "LQB",
 *   "hostname": "DESKTOP-QL56OJS",
 *   "platform": "win32",
 *   "git": {
 *     "branch": "master",
 *     "hash": "fbc007935",
 *     "message": [
 *       "commit fbc00793544e5767db1868f95f89c64b93f3aa79",
 *       "Author: 骆秋波 <1277678760@qq.com>",
 *       "Date:   Fri May 31 15:21:03 2019 +0800",
 *       "    打包上传"
 *     ],
 *     "user": "骆秋波",
 *     "email": "1277678760@qq.com",
 *     "remote": [
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (fetch)",
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (push)"
 *     ]
 *   }
 * }
 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{684:function(e,t,r){"use strict";r.r(t);var n=r(782),a=r(734);for(var i in a)"default"!==i&&function(e){r.d(t,e,function(){return a[e]})}(i);r(769);var s=r(35),o=Object(s.a)(a.default,n.a,n.b,!1,null,"c4a328e6",null);t.default=o.exports},688:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.event_terminal_verison=t.event_terminal=void 0,t.cb=function(e){e&&!e.status&&console.warn(e)},t.getUserId=function(){var e=window.sessionStorage.getItem("userInfo");if(e)return e._id||e.id;return""};var n,a=r(698);(n=a)&&n.__esModule;var i=(0,r(699).detect)(),s=i.name,o=i.version;t.event_terminal=s,t.event_terminal_verison=o},689:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.suance=t.loginListener=t.createProListener=t.educeResListener=t.addResListener=void 0;var n=u(r(690)),a=u(r(691)),i=u(r(692)),s=u(r(693)),o=u(r(694));function u(e){return e&&e.__esModule?e:{default:e}}t.addResListener=n.default,t.educeResListener=a.default,t.createProListener=i.default,t.loginListener=s.default,t.suance=o.default},690:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.res_id,r=e.res_type,a=e.res_name,i=e.res_exp,s=e.res_author,o=void 0===s?"佚名":s,u=e.res_author_id,l=void 0===u?[]:u,c=e.res_tree,_=void 0===c?[]:c,d=e.res_lables,v=void 0===d?[]:d,f=e.res_attr,p=void 0===f?[]:f,m=e.user_id,h=void 0===m?"":m;if(window.DBI){h=h||(0,n.getUserId)();var g=new DBI.createEvent({event_class:"Resources",event_data:{Resources:[{res_id:t,res_type:r,res_name:a,res_exp:i,res_author:o,res_author_id:l,res_tree:_,res_lables:v,res_attr:p,user_id:h,res_total_play:0,res_total_order:0}]},event_target:"",event_type:"创建",event_source:"WEB",event_sources:n.origin,event_operator:h,event_temporary:"",event_system:"",event_system_verison:"",event_terminal:n.event_terminal,event_terminal_verison:n.event_terminal_verison});DBI.declare(g,n.cb)}};var n=r(688)},691:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.res_url,r=e.user_id,a=void 0===r?"":r;window.DBI&&(a=a||(0,n.getUserId)(),DBI.declare({event_class:"Resources",event_data:{Resources:[{res_url:t}]},event_target:"",event_type:"导出",event_source:"Web",event_sources:n.origin,event_operator:a,event_temporary:"",event_system:"",event_system_version:"",event_terminal:n.event_terminal,event_terminal_verison:n.event_terminal_verison},n.cb))};var n=r(688)},692:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.res_id,r=e.res_type,a=e.res_name,i=e.res_cover,s=e.res_covers,o=e.res_exp,u=e.res_author,l=e.res_author_id,c=e.res_Interpreter,_=e.res_Interpreter_id,d=e.res_lables,v=e.res_money,f=e.res_isbn,p=e.res_isbn_ext,m=e.user_id,h=void 0===m?"":m;if(window.DBI){h=h||(0,n.getUserId)();var g=new DBI.createEvent({event_class:"PDAMBook",event_data:{Resources:[{res_id:t,res_type:r,res_name:a,res_cover:i,res_covers:s,res_exp:o,res_author:u,res_author_id:l,res_Interpreter:c,res_Interpreter_id:_,res_lables:d,res_money:v,res_isbn:f,res_isbn_ext:p}]},event_target:t,event_type:"创建",event_source:"WEB",event_sources:n.origin,event_operator:h,event_temporary:"",event_system:"",event_system_verison:"",event_terminal:n.event_terminal,event_terminal_verison:n.event_terminal_verison});DBI.declare(g,n.cb)}};var n=r(688)},693:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.user_id,r=e.user_name,a=e.user_nick_name,i=e.user_phone,s=e.user_picture,o=e.user_picture_absolute,u=e.user_email,l=e.user_sex,c=e.user_date_of_birth,_=e.user_address,d=e.user_city;t=t||(0,n.getUserId)(),window.DBI&&DBI.declare({event_class:"User",event_data:{User:[{user_id:t,user_nick_name:a,user_name:r,user_sex:l,user_email:u,user_phone:i,user_picture:s,user_picture_absolute:o,user_address:_,user_city:d,user_date_of_birth:c}]},event_target:"",event_type:"登录",event_source:"",event_sources:n.origin,event_operator:t,event_temporary:"",event_system:"",event_system_version:"",event_terminal:n.event_terminal,event_terminal_verison:n.event_terminal_verison},n.cb)};var n=r(688)},694:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.id,r=e.info,a=e.user_id,i=void 0===a?"":a;i=i||(0,n.getUserId)(),window.DBI&&DBI.declare({event_class:"PDAMBook",event_data:{PDAMBook:[r]},event_target:t,event_type:"分发",event_source:"web",event_sources:n.origin,event_operator:i,event_temporary:"",event_system:"",event_system_version:"",event_terminal:n.event_terminal,event_terminal_verison:n.event_terminal_verison},n.cb)};var n=r(688)},697:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.detailRole=void 0;var n,a,i=d(r(252)),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.detailRole=(n=i.default.mark(function e(){var t,r,n,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=a.id,o=v(a,["id"]);return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={accesses:{}},r={},n={},e.next=5,(0,u.request_get)("/common/api/current").then(function(e){r.common={name:"common",type:"common"},t.pointer=r,e.data.publisher.apps.forEach(function(e){r[e.id]={name:e.name,type:e.type}})});case 5:if(!s){e.next=13;break}return e.next=8,(0,u.request_get)(p({id:s}),o).then(function(e){e&&e.status&&(t.name=e.data.name,t.exp=e.data.exp,t.id=e.data.id,n=e.data.accesses)});case 8:return e.next=10,(0,u.request_get)("/common/api/user/accesses").then(function(e){var a=["checkedList","allow_create","allow_view_all","allow_view_own","allow_edit_all","allow_edit_own","allow_delete_all","allow_delete_own"],i=function(i){n[i]?t.accesses[i]=e.data[r[i].type].map(function(e){var t={};if(n[i][e.identifier]){var r=null;return(r=n[i][e.identifier]).allow_create&&r.allow_view_own&&r.allow_view_own&&r.allow_edit_all&&r.allow_edit_own&&r.allow_delete_all&&r.allow_delete_own?r.checkedList=1:r.checkedList=0,a.forEach(function(e){t[e]=r[e]}),t.name=r.name,t.identifier=r.access_identifier,t}return a.forEach(function(e){t[e]=0}),t.name=e.name,t.identifier=e.identifier,t}):t.accesses[i]=e.data[r[i].type].map(function(e){var t={};return a.forEach(function(e){t[e]=0}),t.name=e.name,t.identifier=e.identifier,t})};for(var s in r)i(s)});case 10:return e.abrupt("return",t);case 13:return e.next=15,(0,u.request_get)("/common/api/user/accesses").then(function(e){var n=["checkedList","allow_create","allow_view_all","allow_view_own","allow_edit_all","allow_edit_own","allow_delete_all","allow_delete_own"];for(var a in r)t.accesses[a]=e.data[r[a].type].map(function(e){var t={};return n.forEach(function(e){t[e]=0}),t.name=e.name,t.identifier=e.identifier,t})});case 15:return e.abrupt("return",t);case 16:case"end":return e.stop()}},e,this)}),a=function(){var e=n.apply(this,arguments);return new Promise(function(t,r){return function n(a,i){try{var s=e[a](i),o=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(o).then(function(e){n("next",e)},function(e){n("throw",e)});t(o)}("next")})},function(){return a.apply(this,arguments)});t.listRole=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,u.request_get)("/common/api/user/roles",e)},t.listManager=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,u.request_get)("/common/api/user/users/manager",e)},t.addManager=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,u.request_post)("/common/api/user/users/detail/manager",e)},t.modifyManager=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,r=v(e,["id"]);return(0,u.request_put)(f({id:t}),r)},t.detailManager=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,r=v(e,["id"]);return(0,u.request_get)(f({id:t}),r)},t.allJurisdiction=function(){return(0,u.request_get)("/common/api/user/accesses")},t._allJurisdiction=function(){return(0,u.request_get)("/common/api/user/accesses").then(function(e){return e.data.publish=e.data.publish.map(function(e){return s({},e,{allow_create:0,allow_delete_all:0,allow_edit_all:0,allow_view_all:0})}),e.data.read=e.data.read.map(function(e){return s({},e,{allow_create:0,allow_delete_all:0,allow_edit_all:0,allow_view_all:0})}),e})},t.role=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,r=v(e,["id"]);if(t)return(0,u.request_put)(p({id:t}),r);return(0,u.request_post)("/common/api/user/roles",r)},t.addRole=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,u.request_post)("/common/api/user/roles",e)},t.deleteManager=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,u.request_post)("/common/api/user/users/delete",e)},t.deleteRole=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,u.request_post)("/common/api/user/roles/delete",e)},t.logManager=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,u.request_get)("/common/api/user/logs",e)},t.login=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,u.request_post)("/common/api/manager/login",e)},t.isLogin=function(){return(0,u.request_get)("/api/auth/is_login/manager")},t.adminLogin=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,u.request_post)("/common/api/auth/login/manager",e).then(function(e){return(0,_.loginListener)({user_id:e.data.id,user_name:e.data.user.name,user_nick_name:e.data.user.nick_name,user_phone:e.data.user.phone,user_picture:e.data.user.user_picture,user_picture_absolute:e.data.user.user_picture_absolute,user_email:e.data.user.email,user_sex:e.data.user.sex,user_date_of_birth:e.data.user.date_of_birth,user_address:e.data.user.address,user_city:""}),window.sessionStorage.setItem("token",e.data.token),window.sessionStorage.setItem("userInfo",o.default.stringify(e.data.user)),c.default.token=e.data.token,e})},t.getSelectOptions=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,u.request_post)("/common/api/auth/login/manager_check",e)};var o=d(r(181)),u=r(179),l=d(r(180)),c=d(r(253)),_=r(689);function d(e){return e&&e.__esModule?e:{default:e}}function v(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}var f=l.default.compile("/common/api/user/users/detail/:id"),p=l.default.compile("/common/api/user/roles/:id")},700:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.publicMixin=void 0;var n=s(r(252)),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=s(r(695));function s(e){return e&&e.__esModule?e:{default:e}}var o={mounted:function(){var e,t=this;return(e=n.default.mark(function e(){return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(log("typeof this.getList: "+a(t.getList)),"undefined"===t.getList){e.next=4;break}return e.next=4,t.getList();case 4:case"end":return e.stop()}},e,t)}),function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(a,i){try{var s=t[a](i),o=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(o).then(function(e){n("next",e)},function(e){n("throw",e)});e(o)}("next")})})()},methods:{handleNavClick:function(e){this.$router.push({path:this.path+"/"+e.name})},seareHandeler:function(){this.query=(0,i.default)(document.querySelector("#mainForm"),{hash:!0}),this.getList(1,10,this.query)},handleSizeChange:function(e){this.getList(1,e,this.query)},handleCurrentChange:function(e){this.getList(e,this.page.offset,this.query)},selcetAll:function(e){Array.from(document.querySelectorAll("[name='checkbox']")).forEach(function(t){t.checked=e.target.checked})},handleClose:function(){this.$refs.detailDialog.resetFields(),this.detailVisible=!1}}};t.publicMixin=o},734:function(e,t,r){"use strict";r.r(t);var n=r(735),a=r.n(n);for(var i in n)"default"!==i&&function(e){r.d(t,e,function(){return n[e]})}(i);t.default=a.a},735:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(r(252)),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=(u(r(695)),function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(697))),s=r(700),o=u(r(182));function u(e){return e&&e.__esModule?e:{default:e}}t.default={mixins:[s.publicMixin],data:function(){return{pageList:[],page:{num:1,offset:10,total:0},query:{id:""},path:(0,o.default)("/","/app/systemManage"),activeName:"journal",timeValue:null,roleInfo:{roleValue:"",roleList:[]}}},created:function(){var e,t=this;return(e=n.default.mark(function e(){return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.getRoleInfo();case 1:case"end":return e.stop()}},e,t)}),function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(a,i){try{var s=t[a](i),o=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(o).then(function(e){n("next",e)},function(e){n("throw",e)});e(o)}("next")})})()},methods:{getRoleInfo:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;i.listRole({pageNum:t,pageOffset:r}).then(function(t){e.roleInfo.roleList=t.data})},getList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.page.num,t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.page.offset,n=arguments[2];this.query.id=this.$route.query.id;var s=a({pageNum:e,pageOffset:r},n,this.query,{role:this.roleInfo.roleValue});i.logManager(s).then(function(e){t.page.total=e.page.total,t.pageList=e.data})}}}},736:function(e,t,r){},769:function(e,t,r){"use strict";var n=r(736);r.n(n).a},782:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"journal innerBox"},[r("div",{staticClass:"searchWrap searchBar"},[r("div",{staticClass:"NavList"},[r("el-tabs",{on:{"tab-click":e.handleNavClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[r("el-tab-pane",{attrs:{label:"管理员列表",name:"manager"}}),r("el-tab-pane",{attrs:{label:"操作日志",name:"journal"}}),r("el-tab-pane",{attrs:{label:"角色管理",name:"role"}})],1)],1),r("form",{attrs:{id:"mainForm"}},[e._m(0),e._m(1),e._m(2),r("span",{staticClass:"group-inline"},[r("TimePick",{attrs:{inputsName:["start_time","end_time"]}})],1),r("el-col",{staticClass:"right",attrs:{span:4}},[r("el-button",{attrs:{type:"primary",icon:"el-icon-search",plain:""},on:{click:e.seareHandeler}},[e._v("搜索")])],1)],1)]),r("div",{staticClass:"tableWrap"},[r("table",{staticClass:"table"},[e._m(3),e.pageList.length?r("tbody",e._l(e.pageList,function(t){return r("tr",[r("td",{domProps:{textContent:e._s(t.user_name)}}),r("td",{domProps:{textContent:e._s(t.user_nick_name)}}),r("td",{domProps:{textContent:e._s(t.client_ip)}}),r("td",{domProps:{textContent:e._s(t.create_time)}}),r("td",{domProps:{textContent:e._s(t.content)}})])}),0):e._e()])]),e.page?r("div",{staticClass:"pageWrap"},[r("el-pagination",{attrs:{small:!1,background:"","current-page":e.page.num,"page-sizes":[10,50,100],"page-size":e.page.offset,layout:"total, sizes, prev, pager, next, jumper",total:e.page.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1):e._e()])},a=[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"group-inline"},[t("input",{staticClass:"form-control",attrs:{name:"name",placeholder:"输入用户名搜索"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"group-inline"},[t("input",{staticClass:"form-control",attrs:{name:"nick_name",placeholder:"输入名称搜索"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"group-inline"},[t("input",{staticClass:"form-control",attrs:{name:"client_ip",placeholder:"输入IP搜索"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("thead",[t("tr",[t("th",[this._v("用户名")]),t("th",[this._v("名称")]),t("th",[this._v("IP地址")]),t("th",[this._v("操作时间")]),t("th",[this._v("操作记录")])])])}];r.d(t,"a",function(){return n}),r.d(t,"b",function(){return a})}}]);