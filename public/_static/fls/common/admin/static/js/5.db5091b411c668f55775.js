/*!
 * {
 *   "buildtime": "2019-05-31 16:22:54",
 *   "workspace": "F:\\X-BOOK\\xcloud\\x-book4\\js",
 *   "username": "LQB",
 *   "hostname": "DESKTOP-QL56OJS",
 *   "platform": "win32",
 *   "git": {
 *     "branch": "master",
 *     "hash": "fbc007935",
 *     "message": [
 *       "commit fbc00793544e5767db1868f95f89c64b93f3aa79",
 *       "Author: 骆秋波 <1277678760@qq.com>",
 *       "Date:   Fri May 31 15:21:03 2019 +0800",
 *       "    打包上传"
 *     ],
 *     "user": "骆秋波",
 *     "email": "1277678760@qq.com",
 *     "remote": [
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (fetch)",
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (push)"
 *     ]
 *   }
 * }
 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{681:function(e,t,n){"use strict";n.r(t);var r=n(785),i=n(725);for(var a in i)"default"!==a&&function(e){n.d(t,e,function(){return i[e]})}(a);n(766);var o=n(35),s=Object(o.a)(i.default,r.a,r.b,!1,null,"7906e48b",null);t.default=s.exports},688:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.event_terminal_verison=t.event_terminal=void 0,t.cb=function(e){e&&!e.status&&console.warn(e)},t.getUserId=function(){var e=window.sessionStorage.getItem("userInfo");if(e)return e._id||e.id;return""};var r,i=n(698);(r=i)&&r.__esModule;var a=(0,n(699).detect)(),o=a.name,s=a.version;t.event_terminal=o,t.event_terminal_verison=s},689:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.suance=t.loginListener=t.createProListener=t.educeResListener=t.addResListener=void 0;var r=u(n(690)),i=u(n(691)),a=u(n(692)),o=u(n(693)),s=u(n(694));function u(e){return e&&e.__esModule?e:{default:e}}t.addResListener=r.default,t.educeResListener=i.default,t.createProListener=a.default,t.loginListener=o.default,t.suance=s.default},690:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.res_id,n=e.res_type,i=e.res_name,a=e.res_exp,o=e.res_author,s=void 0===o?"佚名":o,u=e.res_author_id,c=void 0===u?[]:u,l=e.res_tree,_=void 0===l?[]:l,d=e.res_lables,f=void 0===d?[]:d,p=e.res_attr,v=void 0===p?[]:p,m=e.user_id,g=void 0===m?"":m;if(window.DBI){g=g||(0,r.getUserId)();var h=new DBI.createEvent({event_class:"Resources",event_data:{Resources:[{res_id:t,res_type:n,res_name:i,res_exp:a,res_author:s,res_author_id:c,res_tree:_,res_lables:f,res_attr:v,user_id:g,res_total_play:0,res_total_order:0}]},event_target:"",event_type:"创建",event_source:"WEB",event_sources:r.origin,event_operator:g,event_temporary:"",event_system:"",event_system_verison:"",event_terminal:r.event_terminal,event_terminal_verison:r.event_terminal_verison});DBI.declare(h,r.cb)}};var r=n(688)},691:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.res_url,n=e.user_id,i=void 0===n?"":n;window.DBI&&(i=i||(0,r.getUserId)(),DBI.declare({event_class:"Resources",event_data:{Resources:[{res_url:t}]},event_target:"",event_type:"导出",event_source:"Web",event_sources:r.origin,event_operator:i,event_temporary:"",event_system:"",event_system_version:"",event_terminal:r.event_terminal,event_terminal_verison:r.event_terminal_verison},r.cb))};var r=n(688)},692:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.res_id,n=e.res_type,i=e.res_name,a=e.res_cover,o=e.res_covers,s=e.res_exp,u=e.res_author,c=e.res_author_id,l=e.res_Interpreter,_=e.res_Interpreter_id,d=e.res_lables,f=e.res_money,p=e.res_isbn,v=e.res_isbn_ext,m=e.user_id,g=void 0===m?"":m;if(window.DBI){g=g||(0,r.getUserId)();var h=new DBI.createEvent({event_class:"PDAMBook",event_data:{Resources:[{res_id:t,res_type:n,res_name:i,res_cover:a,res_covers:o,res_exp:s,res_author:u,res_author_id:c,res_Interpreter:l,res_Interpreter_id:_,res_lables:d,res_money:f,res_isbn:p,res_isbn_ext:v}]},event_target:t,event_type:"创建",event_source:"WEB",event_sources:r.origin,event_operator:g,event_temporary:"",event_system:"",event_system_verison:"",event_terminal:r.event_terminal,event_terminal_verison:r.event_terminal_verison});DBI.declare(h,r.cb)}};var r=n(688)},693:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.user_id,n=e.user_name,i=e.user_nick_name,a=e.user_phone,o=e.user_picture,s=e.user_picture_absolute,u=e.user_email,c=e.user_sex,l=e.user_date_of_birth,_=e.user_address,d=e.user_city;t=t||(0,r.getUserId)(),window.DBI&&DBI.declare({event_class:"User",event_data:{User:[{user_id:t,user_nick_name:i,user_name:n,user_sex:c,user_email:u,user_phone:a,user_picture:o,user_picture_absolute:s,user_address:_,user_city:d,user_date_of_birth:l}]},event_target:"",event_type:"登录",event_source:"",event_sources:r.origin,event_operator:t,event_temporary:"",event_system:"",event_system_version:"",event_terminal:r.event_terminal,event_terminal_verison:r.event_terminal_verison},r.cb)};var r=n(688)},694:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.id,n=e.info,i=e.user_id,a=void 0===i?"":i;a=a||(0,r.getUserId)(),window.DBI&&DBI.declare({event_class:"PDAMBook",event_data:{PDAMBook:[n]},event_target:t,event_type:"分发",event_source:"web",event_sources:r.origin,event_operator:a,event_temporary:"",event_system:"",event_system_version:"",event_terminal:r.event_terminal,event_terminal_verison:r.event_terminal_verison},r.cb)};var r=n(688)},696:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUserInfo=function(){return r.default.parse(window.sessionStorage.getItem("userInfo"))},t.getDefaultCover=function(){return(0,i.request_get)(restUrl_publish+"/api/videos/images")},t.commonPreview=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.request_get)(u(e))},t.commonPreviewCode=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.request_post)(restUrl_publish+"/api/preview",e)},t.platInfo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=o.default.compile(restUrl_publish+"/api/current");return(0,i.request_get)(t(e)).then(function(e){return a.default.app_id=e.data.id,sessionStorage.app_id=e.data.id,document.title=e.data.application?e.data.application.name:e.data.publisher.name,e})},t.fileExport=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.request_get)(c(e))},t.groupsDelete=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.request_post)(restUrl_publish+"/api/groups/delete",e)};var r=s(n(181)),i=n(179),a=s(n(253)),o=(n(689),s(n(180)));function s(e){return e&&e.__esModule?e:{default:e}}var u=o.default.compile(restUrl_publish+"/api/preview/:id");var c=o.default.compile(restUrl_publish+"/api/content/export/:id")},721:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getInfo=function(){return(0,s.platInfo)({id:"current"})},t.setting=function(e){return(0,i.request_put)(u(e),e)},t.publisherSetting=function(e){return(0,i.request_put)("/common/api/publisher/setting",e)};var r,i=n(179),a=n(180),o=(r=a)&&r.__esModule?r:{default:r},s=n(696);var u=o.default.compile("/common/api/publisher/setting/app/:id")},722:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.save=void 0;var r,i,a=s(n(252));t.save=(r=a.default.mark(function e(t){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.id){e.next=4;break}return e.abrupt("return",(0,o.request_put)(u({id:t.id}),t));case 4:if(!t.key){e.next=8;break}return e.next=7,(0,o.request_post)("/system/api/setting/add",t);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e,this)}),i=function(){var e=r.apply(this,arguments);return new Promise(function(t,n){return function r(i,a){try{var o=e[i](a),s=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});t(s)}("next")})},function(e){return i.apply(this,arguments)});t.getInfo=function(){return(0,o.request_get)("/system/api/setting/get_set_list",{pageStart:0,pageOffset:100}).then(function(e){var t={loginInfo:{},contact:{},outlink:[],ewm:[]};return e.data.forEach(function(e){"info"==e.name?t.loginInfo[e.key]=e:"contact"==e.name?t.contact[e.key]=e:"outlink"==e.name?t.outlink.push(e):"ewm"==e.name&&t.ewm.push(e)}),!Object.values(t.loginInfo).length<3&&(t.loginInfo.title=t.loginInfo.title||{name:"info",key:"title",value:"",type:1},t.loginInfo.ico=t.loginInfo.ico||{name:"info",key:"ico",value:"",type:2},t.loginInfo.logo=t.loginInfo.logo||{name:"info",key:"logo",value:"",type:2},t.loginInfo.banner=t.loginInfo.banner||{name:"info",key:"banner",value:"",type:2}),!Object.values(t.contact).length<3&&(t.contact.phone=t.contact.phone||{name:"contact",key:"phone",value:"",type:1},t.contact.qq=t.contact.qq||{name:"contact",key:"qq",value:"",type:1},t.contact.email=t.contact.email||{name:"contact",key:"email",value:"",type:1}),t})},t.del=function(e){return(0,o.request_delete)(u(e),e)},t.getTask=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];return e.size,e.size>=1048576?(t.is_chunk=!0,(0,o.request_post)("/api/files/upload_task?r="+Math.random(5)).then(function(r){if(r.status)return t.task_id=r.data.task_id,(0,o.request_file)("/api/files/upload",{file:e,data:t},n);throw new Error(r.messages)}).catch(function(e){throw new Error("上传失败")})):(t.is_chunk=!1,(0,o.request_file)("/api/files/upload",{file:e,data:t}))},t.sendInfo=function(e){return(0,o.request_post)("/system/api/app_manager/login",e)},t.getList=function(e){return(0,o.request_get)("/system/api/home/works")},t.getPartner=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.request_get)("/system/api/home/demo_demo",e)},t.isLogin=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,o.request_get)("/system/api/app_manager/is_login")},t.getClientToken=function(){return(0,o.request_post)("/system/api/app_manager/token/pcclient")},t.loginOut=function(){return(0,o.request_post)("/system/api/app_manager/logout")},t.accessible=function(e){return(0,o.request_get)("/system/api/fast_app_cation",e)};var o=n(179);function s(e){return e&&e.__esModule?e:{default:e}}var u=s(n(180)).default.compile("/system/api/setting/:id")},723:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTask=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];return e.size,e.size>=1048576?(t.is_chunk=!0,(0,r.request_post)("/common/api/files/upload_task?r="+Math.random(5)).then(function(i){if(i.status)return t.task_id=i.data.task_id,(0,r.request_file)("/common/api/files/upload",{file:e,data:t},n);throw new Error(i.messages)}).catch(function(e){throw new Error("上传失败")})):(t.is_chunk=!1,(0,r.request_file)("/common/api/files/upload",{file:e,data:t}))},t.getAppId=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_get)("/common/api/app/search_name",e).then(function(e){return i.default.app_id=e.data.id,sessionStorage.app_id=e.data.id,e})},t.getClientToken=function(){return(0,r.request_post)("/common/api/auth/token/pcclient")},t.platInfo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_get)(s(e)).then(function(e){return i.default.app_id=e.data.id,sessionStorage.app_id=e.data.id,document.title=e.data.name,e})},t.commonPreview=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_get)(c(e))},t.getDefaultCover=function(){return(0,r.request_get)("/api/videos/images")},t.generate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)("/common/api/qr_code/generate",e)},t.commonPreviewCode=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)("/api/preview",e)},t.getQrcode=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_get)("/common/api/get_qrcode",e)},t.synchronization=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_get)(u(e)).then(function(e){return e})},t.getAuthor=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_get)("/api/ecommerce/author",e)},t.addAuthor=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)("/api/ecommerce/author",e)},t.getWeixinConfig=function(e){return(0,r.request_get)("/common/api/third/wx_js_sdk/config",e)},t.getIndexInfo=function(){return(0,r.request_get)("/common/api/current")};o(n(181));var r=n(179),i=o(n(253)),a=o(n(180));function o(e){return e&&e.__esModule?e:{default:e}}a.default.compile("/common/api/files/upload_task/:id"),a.default.compile("/common/api/manager/managers/:id"),a.default.compile("/common/api/manager/roles/:id");var s=a.default.compile("/common/api/app/apps/:id"),u=a.default.compile("/common/api/dragon_infos/:id");var c=a.default.compile("/api/preview/:id")},725:function(e,t,n){"use strict";n.r(t);var r=n(726),i=n.n(r);for(var a in r)"default"!==a&&function(e){n.d(t,e,function(){return r[e]})}(a);t.default=i.a},726:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(252)),i=(s(n(695)),o(n(696)),o(n(721))),a=(n(747),n(722),n(723));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function s(e){return e&&e.__esModule?e:{default:e}}t.default={data:function(){return{info:{},previewImgUrl:null,formData:{}}},created:function(){this.info=this.$config.plantInfo.publisher},methods:{getUrl:function(e,t,n){log(n),n[e+"_absolute"]=URL.createObjectURL(t.target.files[0])},submit:function(e,t,n,o){var s,u=this;return(s=r.default.mark(function s(){return r.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!t){r.next=5;break}return r.next=3,(0,a.getTask)(t).then(function(e){u.formData.logo=e.data.path});case 3:r.next=6;break;case 5:u.formData.logo=e.logo;case 6:if(!n){r.next=11;break}return r.next=9,(0,a.getTask)(n).then(function(e){u.formData.icon=e.data.path});case 9:r.next=12;break;case 11:u.formData.icon=e.icon;case 12:u.formData.name=e.name,u.formData.exp=e.exp,o&&(u.formData.id=o),i.setting(u.formData).then(function(e){e&&e.status&&u.$message.success("保存成功")},function(e){u.$message.error("保存失败")});case 16:case"end":return r.stop()}},s,u)}),function(){var e=s.apply(this,arguments);return new Promise(function(t,n){return function r(i,a){try{var o=e[i](a),s=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});t(s)}("next")})})()}}}},727:function(e,t,n){},766:function(e,t,n){"use strict";var r=n(727);n.n(r).a},785:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content-wrap"},[n("div",{staticClass:"content"},[n("div",{staticClass:"titleWrap"},[n("div",{staticClass:"tableTop"},[n("div",{staticClass:"title vel-line"},[n("span",{staticClass:"titleText"},[e._v("首页配置")]),n("div",{staticClass:"tableWrap"},[n("table",{staticClass:"table"},[e._m(0),n("tbody",e._l(e.info.apps,function(t,r){return n("tr",{key:t.id},[n("td",[e._v(e._s(t.type))]),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"item.name"}],attrs:{type:"text"},domProps:{value:t.name},on:{input:function(n){n.target.composing||e.$set(t,"name",n.target.value)}}})]),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.exp,expression:"item.exp"}],attrs:{type:"text"},domProps:{value:t.exp},on:{input:function(n){n.target.composing||e.$set(t,"exp",n.target.value)}}})]),n("td",[n("img",{staticClass:"scanImg",attrs:{src:t.logo_absolute}}),n("input",{ref:"logo"+r,refInFor:!0,staticClass:"hide",attrs:{type:"file",accept:"image/jpeg,image/jpg,image/png"},on:{change:function(n){return e.getUrl("logo",n,t)}}}),n("el-button",{attrs:{plain:"",type:"primary",size:"mini"},on:{click:function(t){e.$refs["logo"+r][0].click()}}},[e._v("浏览")])],1),n("td",[n("img",{staticClass:"scanImg",attrs:{src:t.icon_absolute}}),n("input",{ref:"ico"+r,refInFor:!0,staticClass:"hide",attrs:{type:"file",accept:"image/jpeg,image/jpg,image/png"},on:{change:function(n){return e.getUrl("icon",n,t)}}}),n("el-button",{attrs:{plain:"",type:"primary",size:"mini"},on:{click:function(t){e.$refs["ico"+r][0].click()}}},[e._v("浏览")])],1),n("td",[n("el-button",{attrs:{plain:"",type:"primary",size:"small"},on:{click:function(n){return e.submit(t,e.$refs["logo"+r][0].files[0],e.$refs["ico"+r][0].files[0],t.id)}}},[e._v("确认")])],1)])}),0)])])])])])])])},i=[function(){var e=this.$createElement,t=this._self._c||e;return t("thead",[t("tr",[t("th",{attrs:{width:""}},[this._v("应用类型 ")]),t("th",[this._v("系统名称")]),t("th",[this._v("欢迎词")]),t("th",[this._v("LOGO")]),t("th",[this._v("网站 ico")]),t("th",[this._v("操作")])])])}];n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i})}}]);