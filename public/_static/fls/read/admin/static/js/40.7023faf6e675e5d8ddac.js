/*!
 * {
 *   "buildtime": "2019-05-31 16:22:54",
 *   "workspace": "F:\\X-BOOK\\xcloud\\x-book4\\js",
 *   "username": "LQB",
 *   "hostname": "DESKTOP-QL56OJS",
 *   "platform": "win32",
 *   "git": {
 *     "branch": "master",
 *     "hash": "fbc007935",
 *     "message": [
 *       "commit fbc00793544e5767db1868f95f89c64b93f3aa79",
 *       "Author: 骆秋波 <1277678760@qq.com>",
 *       "Date:   Fri May 31 15:21:03 2019 +0800",
 *       "    打包上传"
 *     ],
 *     "user": "骆秋波",
 *     "email": "1277678760@qq.com",
 *     "remote": [
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (fetch)",
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (push)"
 *     ]
 *   }
 * }
 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{1250:function(e,t,a){"use strict";var i=a(616);a.n(i).a},1255:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"indexs"},[a("div",{staticClass:"mainRight"},[a("div",{staticClass:"maindata"},[a("div",{staticClass:"serachWrap"},[a("div",{staticClass:"NavList"},[a("el-tabs",{on:{"tab-click":e.handleNavClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"管理员列表",name:"manager"}}),a("el-tab-pane",{attrs:{label:"管理员日志",name:"journal"}}),a("el-tab-pane",{attrs:{label:"角色管理",name:"role"}})],1)],1),a("form",{attrs:{id:"mainForm"}},[e._m(0),e._m(1),e._m(2),e._m(3),a("span",{staticClass:"group-inline"},[a("TimePick",{attrs:{inputsName:["start_time","end_time"]}})],1),a("span",{staticClass:"group-inline"},[e.roleInfo.roleList?a("el-select",{attrs:{name:"role",placeholder:"选择角色搜索",clearable:""},model:{value:e.roleInfo.roleValue,callback:function(t){e.$set(e.roleInfo,"roleValue",t)},expression:"roleInfo.roleValue"}},e._l(e.roleInfo.roleList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1):e._e()],1),a("span",{staticClass:"group-inline"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",plain:""},on:{click:e.seareHandeler}},[e._v("搜索")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",plain:""},on:{click:function(t){return e.showDetaile()}}},[e._v("新增")])],1)])]),a("div",{staticClass:"tableWrap"},[a("table",{staticClass:"table"},[e._m(4),e.pageList.length?a("tbody",e._l(e.pageList,function(t){return a("tr",[a("td",{domProps:{textContent:e._s(t.name)}}),a("td",{domProps:{textContent:e._s(t.nick_name)}}),a("td",{domProps:{textContent:e._s(t.phone)}}),a("td",{domProps:{textContent:e._s(t.email)}}),a("td",{domProps:{textContent:e._s(t.create_time)}}),a("td",e._l(t.roles,function(t,i){return a("span",[e._v(e._s(t))])}),0),a("td",[a("span",{staticClass:"icon icon-detail",attrs:{type:"primary",title:"详情",plain:"",size:"mini"},on:{click:function(a){return e.showDetaile(t.id)}}}),a("span",{staticClass:"icon icon-preview",attrs:{type:"primary",title:"查看日志",plain:"",size:"mini"},on:{click:function(a){return e.viewLog(t.id)}}}),a("span",{staticClass:"icon icon-delete",attrs:{type:"primary",title:"删除",plain:"",size:"mini"},on:{click:function(a){return e.deleteHandeler([t.id])}}})])])}),0):e._e()])]),e.page?a("div",{staticClass:"pageWrap"},[a("el-pagination",{attrs:{small:!1,background:"","current-page":e.page.num,"page-sizes":[10,50,100],"page-size":e.page.offset,layout:"total, sizes, prev, pager, next, jumper",total:e.page.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1):e._e()]),a("el-dialog",{attrs:{visible:e.detailVisible,"before-close":e.handleClose,"lock-scroll":!1,"close-on-click-modal":!1},on:{"update:visible":function(t){e.detailVisible=t}}},[a("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[a("el-tabs",{attrs:{value:"detail"}},[a("el-tab-pane",{attrs:{label:"详情",name:"detail"}})],1)],1),a("el-form",{ref:"detailDialog",attrs:{model:e.detailDate,rules:e.detailRules}},[a("el-form-item",{attrs:{label:"用户名:","label-width":"120px",prop:"name"}},[a("el-input",{model:{value:e.detailDate.name,callback:function(t){e.$set(e.detailDate,"name",t)},expression:"detailDate.name"}})],1),a("el-form-item",{attrs:{label:"名称:","label-width":"120px",prop:"nick_name"}},[a("el-input",{model:{value:e.detailDate.nick_name,callback:function(t){e.$set(e.detailDate,"nick_name",t)},expression:"detailDate.nick_name"}})],1),a("el-form-item",{attrs:{label:"联系电话:","label-width":"120px",prop:"phone"}},[a("el-input",{model:{value:e.detailDate.phone,callback:function(t){e.$set(e.detailDate,"phone",t)},expression:"detailDate.phone"}})],1),a("el-form-item",{attrs:{label:"联系邮箱:","label-width":"120px",prop:"email"}},[a("el-input",{model:{value:e.detailDate.email,callback:function(t){e.$set(e.detailDate,"email",t)},expression:"detailDate.email"}})],1),a("el-form-item",{attrs:{label:"角色:","label-width":"120px",prop:"role"}},[e.roleInfo.roleList?a("el-select",{attrs:{name:"",placeholder:"选择角色"},model:{value:e.detailDate.role,callback:function(t){e.$set(e.detailDate,"role",t)},expression:"detailDate.role"}},e._l(e.roleInfo.roleList,function(e){return a("el-option",{key:e.name,attrs:{label:e.name,value:e.id}})}),1):e._e()],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.detailDate.id,expression:"detailDate.id"}],attrs:{label:"登录密码:","label-width":"120px"}},[a("el-button",{attrs:{type:"primary",size:"small",plain:""},on:{click:e.resetPassword}},[e._v("重置")]),a("span",{staticClass:"pass-tip"},[e._v("将重置为初始密码：123456")])],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info"},on:{click:e.handleClose}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("确定")])],1)],1)],1)])},n=[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"group-inline"},[t("input",{staticClass:"form-control",attrs:{name:"name",placeholder:"输入用户名搜索"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"group-inline"},[t("input",{staticClass:"form-control",attrs:{name:"nick_name",placeholder:"输入名称搜索"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"group-inline"},[t("input",{staticClass:"form-control",attrs:{name:"phone",placeholder:"输入电话搜索"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"group-inline"},[t("input",{staticClass:"form-control",attrs:{name:"email",placeholder:"输入邮箱搜索"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("thead",[t("tr",[t("th",[this._v("用户名")]),t("th",[this._v("名称")]),t("th",[this._v("联系电话")]),t("th",[this._v("联系邮箱")]),t("th",[this._v("创建时间")]),t("th",[this._v("角色")]),t("th",[this._v("操作")])])])}];a.d(t,"a",function(){return i}),a.d(t,"b",function(){return n})},251:function(e,t,a){"use strict";a.r(t);var i=a(1255),n=a(614);for(var l in n)"default"!==l&&function(e){a.d(t,e,function(){return n[e]})}(l);a(1250);var r=a(0),s=Object(r.a)(n.default,i.a,i.b,!1,null,"27aebf57",null);t.default=s.exports},614:function(e,t,a){"use strict";a.r(t);var i=a(615),n=a.n(i);for(var l in i)"default"!==l&&function(e){a.d(t,e,function(){return i[e]})}(l);t.default=n.a},615:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(a(19)),n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},l=(o(a(258)),o(a(419))),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(102)),s=a(265);function o(e){return e&&e.__esModule?e:{default:e}}function c(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,a){return function i(n,l){try{var r=t[n](l),s=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(s).then(function(e){i("next",e)},function(e){i("throw",e)});e(s)}("next")})}}t.default={mixins:[s.publicMixin],data:function(){return{pageList:[],page:null,query:null,path:"jurisdiction",activeName:"manager",timeValue:null,detailVisible:!1,roleInfo:{roleValue:"",roleList:[]},detailDate:{id:"",name:"",nick_name:"",phone:"",email:"",role:"",reset:""},detailRules:{name:[{required:!0,message:"请输入用户名",trigger:"blur"}],nick_name:[{required:!0,message:"请输入名称",trigger:"blur"}],phone:[{required:!0,message:"请输入联系电话",trigger:"blur"}],email:[{required:!0,message:"请输入联系邮箱",trigger:"blur"}],role:[{required:!0,message:"请选择角色",trigger:"change"}]}}},created:function(){var e=this;return c(i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getList();case 2:e.getRoleInfo();case 3:case"end":return t.stop()}},t,e)}))()},methods:{getRoleInfo:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;r.listRole({pageNum:t,pageOffset:a}).then(function(t){log(t.data),e.roleInfo.roleList=t.data})},getList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.page&&this.page.num||1,t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.page&&this.page.offset||10,i=arguments[2],l=n({pageNum:e,pageOffset:a},i,{role:this.roleInfo.roleValue});r.listManager(l).then(function(e){t.page=e.page,t.pageList=e.data})},showDetaile:function(e){if(this.detailDate.id=this.detailDate.name=this.detailDate.nick_name=this.detailDate.phone=this.detailDate.email=this.detailDate.reset=this.detailDate.role="",e){var t=this.pageList.find(function(t){return t.id===e});this.detailDate.id=e,this.detailDate.name=t.name,this.detailDate.nick_name=t.nick_name,this.detailDate.phone=t.phone,this.detailDate.email=t.email,this.detailDate.role=Object.keys(t.roles)[0],this.detailVisible=!0}else this.detailVisible=!0},deleteHandeler:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(t.length||Array.from(document.querySelectorAll("[name='checkbox']:checked")).forEach(function(e){t.push(e.value)}),!t.length)return this.$message.error("请确认你要删除的内容！");this.$confirm("确认删除？").then(function(a){r.deleteManager({id:t}).then(function(t){e.getList(),e.$message({message:"删除成功",type:"success"})})}).catch(function(e){})},save:function(){var e=this;return c(i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.$refs.detailDialog.validate(function(){var t=c(i.default.mark(function t(a){var l,s;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=22;break}if(t.prev=1,e.detailDate.id){t.next=6;break}return t.next=5,r.addManager(n({},e.detailDate,{roles:[e.detailDate.role]})).then(function(t){e.getList(),e.$message({message:"添加成功",type:"success"}),e.detailVisible=!1});case 5:return t.abrupt("return");case 6:return t.next=8,r.modifyManager(n({},e.detailDate,{roles:[e.detailDate.role]})).then(function(t){e.getList(),e.$message({message:"修改成功",type:"success"}),e.detailVisible=!1});case 8:t.next=20;break;case 10:t.prev=10,t.t0=t.catch(1),l=t.t0.payload,t.t1=i.default.keys(l.messages);case 14:if((t.t2=t.t1()).done){t.next=20;break}return s=t.t2.value,e.$message.error(l.messages[s]),t.abrupt("break",20);case 20:t.next=24;break;case 22:return t.abrupt("return",!1);case 24:case"end":return t.stop()}},t,e,[[1,10]])}));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}},t,e)}))()},resetPassword:function(){var e=this;this.$confirm("是否确认重置密码?").then(function(t){e.detailDate.reset="1"}).catch(function(e){})},viewLog:function(e){this.$router.push({path:"/wms/jurisdiction/journal",query:{id:e}})}},components:{Menu:l.default}}},616:function(e,t,a){}}]);