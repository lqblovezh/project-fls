/*!
 * {
 *   "buildtime": "2019-05-31 16:22:54",
 *   "workspace": "F:\\X-BOOK\\xcloud\\x-book4\\js",
 *   "username": "LQB",
 *   "hostname": "DESKTOP-QL56OJS",
 *   "platform": "win32",
 *   "git": {
 *     "branch": "master",
 *     "hash": "fbc007935",
 *     "message": [
 *       "commit fbc00793544e5767db1868f95f89c64b93f3aa79",
 *       "Author: 骆秋波 <1277678760@qq.com>",
 *       "Date:   Fri May 31 15:21:03 2019 +0800",
 *       "    打包上传"
 *     ],
 *     "user": "骆秋波",
 *     "email": "1277678760@qq.com",
 *     "remote": [
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (fetch)",
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (push)"
 *     ]
 *   }
 * }
 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{1237:function(t,e,a){"use strict";var i=a(589);a.n(i).a},1269:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[a("div",{staticClass:"top serachWrap"},[a("form",{attrs:{id:"mainForm"}},[a("span",{staticClass:"group-inline"},[a("el-input",{attrs:{placeholder:"输入用户名搜索",name:"name",clearable:""},model:{value:t.where.name,callback:function(e){t.$set(t.where,"name",e)},expression:"where.name"}})],1),a("span",{staticClass:"group-inline"},[a("el-input",{attrs:{placeholder:"输入手机号搜索",name:"phone",clearable:""},model:{value:t.where.phone,callback:function(e){t.$set(t.where,"phone",e)},expression:"where.phone"}})],1),a("span",{staticClass:"group-inline"},[a("TimePick",{attrs:{inputsName:["start_time","end_time"]}})],1),t._m(0),a("span",{staticClass:"group-inline right"},[a("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-search"},on:{click:t.search}},[t._v("搜索")]),a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){return t.educe()}}},[t._v("导出查询")])],1)])]),a("div",{staticClass:"content"},[a("table",{staticClass:"list"},[t._m(1),a("tbody",t._l(t.list,function(e,i){return a("tr",[a("td",[a("span",[t._v(t._s(i+1))]),a("input",{ref:"ids",refInFor:!0,attrs:{type:"hidden"},domProps:{value:e.id}})]),a("td",[t._v(t._s(e.name))]),a("td",[t._v(t._s(e.phone))]),a("td",[t._v(t._s(e.order_paid_count||"0.00"))]),a("td",[t._v(t._s(e.order_paid_money||"0.00"))]),a("td",[t._v(t._s(e.distribute_paid_count||"0.00"))]),a("td",[t._v(t._s(e.distribute_paid_money||"0.00"))]),a("td",[t._v(t._s(e.distribute_reward_money||"0.00"))]),a("td",[t._v(t._s(e.distribute_cashed_money||"0.00"))]),a("td",[t._v(t._s(e.credits||"0"))]),a("td",[t._v(t._s(e.last_login_time))]),a("td",[t._v(t._s("locked"==e.lock_status?"冻结":"正常"))]),a("td",[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(a){return t.detail(e.id)}}},[t._v("详情")])],1)])}),0)]),a("div",{staticClass:"page"},[a("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-sizes":[10,50,100],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:t.page.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)]),a("el-dialog",{attrs:{width:"1055px",visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-tabs",{attrs:{type:"card"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"详情",name:"first"}},[t.infoData?a("div",{staticClass:"userInfo"},[a("div",{staticClass:"head"},[t.infoData.picture_absolute?a("img",{attrs:{src:t.infoData.picture_absolute}}):t._e(),a("div",{staticClass:"info"},[a("div",{staticClass:"item"},[a("span",[t._v("用户名:")]),a("el-input",{staticClass:"width",attrs:{size:"small",disabled:""},model:{value:t.infoData.name.substr(0,12),callback:function(e){t.$set(t.infoData.name,"substr(0,12)",e)},expression:"infoData.name.substr(0,12)"}})],1),a("div",{staticClass:"item"},[a("span",[t._v("昵称:")]),a("el-input",{staticClass:"width",attrs:{size:"small",disabled:""},model:{value:t.infoData.nick_name,callback:function(e){t.$set(t.infoData,"nick_name",e)},expression:"infoData.nick_name"}})],1),a("div",{staticClass:"item other"},[a("span",[t._v("性别： "+t._s(t.infoData.sex))])]),a("div",{staticClass:"item other"},[a("span",[t._v("出生日期:")]),a("el-input",{staticClass:"width",attrs:{size:"small",type:"date",disabled:""},model:{value:t.infoData.date_of_birth,callback:function(e){t.$set(t.infoData,"date_of_birth",e)},expression:"infoData.date_of_birth"}})],1),a("div",{staticClass:"item other"},[a("span",[t._v("绑定手机号:")]),a("el-input",{staticClass:"width",attrs:{size:"small",disabled:""},model:{value:t.infoData.phone,callback:function(e){t.$set(t.infoData,"phone",e)},expression:"infoData.phone"}})],1),a("div",{staticClass:"item other"},[a("span",[t._v("联系邮箱:")]),a("el-input",{staticClass:"width",attrs:{size:"small",disabled:""},model:{value:t.infoData.email,callback:function(e){t.$set(t.infoData,"email",e)},expression:"infoData.email"}})],1),a("div",{staticClass:"item other w "},[a("span",[t._v("角色权限:")]),a("div",{staticClass:"auth"},t._l(t.infoData.roles,function(e,i){return a("span",{key:i,staticClass:"roles",attrs:{label:e.name}},[t._v(t._s(e.name))])}),0)])])]),a("div",{staticClass:"saleInfo other w sale"},[a("span",[t._v("消费金额： "+t._s(t.infoData.order_paid_money||"0.00"))]),a("span",[t._v("支付订单数： "+t._s(t.infoData.order_paid_count||"0.00"))]),a("span",[t._v("分销次数： "+t._s(t.infoData.distribute_paid_count||"0.00"))]),a("span",[t._v("分销总金额： "+t._s(t.infoData.distribute_paid_money||"0.00"))]),a("span",[t._v("累计奖励金额： "+t._s(t.infoData.distribute_reward_money||"0.00"))]),a("span",[t._v("累计提现金额： "+t._s(t.infoData.distribute_cashed_money||"0.00"))]),a("span",[t._v("用户积分： "+t._s(t.infoData.credits||"0"))])]),a("div",{staticClass:"title"},[t._v("已购产品")]),t.infoData.bought_goods.length?a("div",{staticClass:"imgList"},t._l(t.infoData.bought_goods,function(e){return a("div",{staticClass:"item"},[a("div",{staticClass:"img",style:{backgroundImage:"url("+e.img_src+")"}}),a("div",{staticClass:"goodsname"},[a("span",[t._v(t._s(e.name))])])])}),0):a("div",{staticClass:"noInfo"},[t._v("暂无数据")])]):t._e()])],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("关闭")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.save}},[t._v("保存")])],1)],1)],1)},n=[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"group-inline"},[e("select",{staticClass:"form-control width-small",attrs:{name:"lock_status"}},[e("option",{attrs:{value:""}},[this._v("所有")]),e("option",{attrs:{value:"normal"}},[this._v("正常")]),e("option",{attrs:{value:"locked"}},[this._v("冻结")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{width:"40"}},[t._v("序号")]),a("th",{attrs:{width:"165"}},[t._v("用户名")]),a("th",{attrs:{width:"150"}},[t._v("绑定手机号")]),a("th",[t._v("支付订单数")]),a("th",[t._v("累计消费金额")]),a("th",[t._v("分销次数")]),a("th",[t._v("分销总金额")]),a("th",[t._v("累计奖励金额")]),a("th",[t._v("累计提现金额")]),a("th",[t._v("用户积分")]),a("th",{attrs:{width:"200"}},[t._v("最近登录时间")]),a("th",[t._v("用户状态")]),a("th",[t._v("操作")])])])}];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n})},242:function(t,e,a){"use strict";a.r(e);var i=a(1269),n=a(586);for(var s in n)"default"!==s&&function(t){a.d(e,t,function(){return n[t]})}(s);a(1237);var o=a(0),r=Object(o.a)(n.default,i.a,i.b,!1,null,"3b18c204",null);e.default=r.exports},258:function(t,e){var a=/^(?:submit|button|image|reset|file)$/i,i=/^(?:input|select|textarea|keygen)/i,n=/(\[[^\[\]]*\])/g;function s(t,e,a){if(e.match(n)){!function t(e,a,i){if(0===a.length)return e=i;var n=a.shift(),s=n.match(/^\[(.+?)\]$/);if("[]"===n)return e=e||[],Array.isArray(e)?e.push(t(null,a,i)):(e._values=e._values||[],e._values.push(t(null,a,i))),e;if(s){var o=s[1],r=+o;isNaN(r)?(e=e||{})[o]=t(e[o],a,i):(e=e||[])[r]=t(e[r],a,i)}else e[n]=t(e[n],a,i);return e}(t,function(t){var e=[],a=new RegExp(n),i=/^([^\[\]]*)/.exec(t);for(i[1]&&e.push(i[1]);null!==(i=a.exec(t));)e.push(i[1]);return e}(e),a)}else{var i=t[e];i?(Array.isArray(i)||(t[e]=[i]),t[e].push(a)):t[e]=a}return t}function o(t,e,a){return a=a.replace(/(\r)?\n/g,"\r\n"),a=(a=encodeURIComponent(a)).replace(/%20/g,"+"),t+(t?"&":"")+encodeURIComponent(e)+"="+a}t.exports=function(t,e){"object"!=typeof e?e={hash:!!e}:void 0===e.hash&&(e.hash=!0);for(var n=e.hash?{}:"",r=e.serializer||(e.hash?s:o),l=t&&t.elements?t.elements:[],u=Object.create(null),c=0;c<l.length;++c){var d=l[c];if((e.disabled||!d.disabled)&&d.name&&i.test(d.nodeName)&&!a.test(d.type)){var h=d.name,f=d.value;if("checkbox"!==d.type&&"radio"!==d.type||d.checked||(f=void 0),e.empty){if("checkbox"!==d.type||d.checked||(f=""),"radio"===d.type&&(u[d.name]||d.checked?d.checked&&(u[d.name]=!0):u[d.name]=!1),void 0==f&&"radio"==d.type)continue}else if(!f)continue;if("select-multiple"!==d.type)n=r(n,h,f);else{f=[];for(var p=d.options,v=!1,m=0;m<p.length;++m){var _=p[m],g=e.empty&&!_.value,b=_.value||g;_.selected&&b&&(v=!0,n=e.hash&&"[]"!==h.slice(h.length-2)?r(n,h+"[]",_.value):r(n,h,_.value))}!v&&e.empty&&(n=r(n,h,""))}}}if(e.empty)for(var h in u)u[h]||(n=r(n,h,""));return n}},457:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.register=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.request_post)("/common/api/user/register",t)},e.login=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.request_post)("/common/api/auth/login/user",t).then(function(t){return window.sessionStorage.setItem("token",t.data.token),window.localStorage.setItem("token",t.data.token),s.default.token=t.data.token,t})},e.thirdLogin=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.back_url.match(/.*(\?.*)#.*/),a=e&&e[1];a&&(t.back_url=t.back_url.replace(a,""));return(0,i.request_post)("/common/api/auth/third/link",t)},e.phoneLogin=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.request_post)("/common/api/auth/login_by_phone/phone",t).then(function(t){return window.sessionStorage.setItem("token",t.data.token),window.localStorage.setItem("token",t.data.token),s.default.token=t.data.token,t})},e.codeImage=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=Math.random().toFixed(3);return(0,i.request_get)("/common/api/captcha/image?code="+t)},e.codeCheck=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.request_post)("/common/api/captcha/check",t)},e.codePhone=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.request_post)("/common/api/captcha/mobile",t)},e.codeEmail=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.request_post)("/common/api/captcha/email",t)},e.getUserInfo=function(){return(0,i.request_get)("/api/auth/is_login/user")},e.save=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.request_put)("/common/api/user",t)},e.loginOut=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.request_post)("/common/api/auth/logout",t).then(function(t){return window.sessionStorage.removeItem("token"),window.sessionStorage.removeItem("userInfo"),s.default.token=null,t})},e.changePass=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.request_put)("/common/api/auth/pass",t).then(function(t){return window.sessionStorage.removeItem("token"),window.sessionStorage.removeItem("userInfo"),s.default.token=null,t})},e.saveMemberData=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.request_put)(r(t),t)};var i=a(45),n=o(a(77)),s=(o(a(20)),o(a(47)));function o(t){return t&&t.__esModule?t:{default:t}}var r=n.default.compile("/common/api/user/:id")},552:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getList=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)("/api/user/users",t)},e.detail=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)(r(t),t)},e.lock=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)(l(t),t)},e.Unlock=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_delete)(l(t),t)},e.educe=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)("/api/user/export",t)};var i,n=a(45),s=a(77),o=(i=s)&&i.__esModule?i:{default:i};var r=o.default.compile("/api/user/users/:id"),l=o.default.compile("/api/user/lock/:id")},586:function(t,e,a){"use strict";a.r(e);var i=a(587),n=a.n(i);for(var s in i)"default"!==s&&function(t){a.d(e,t,function(){return i[t]})}(s);e.default=n.a},587:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(a(552)),n=(o(a(588)),a(457)),s=a(265);function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}e.default={mixins:[s.publicMixin],data:function(){return{services:i,pickerOptions:{},ctimePick:"",list:[],currentPage:1,page:"",multipleSelection:[],status:[{txt:"所有",value:""},{txt:"正常",value:"normal"},{txt:"冻结",value:"locked"}],imgListSrc:[{src:"../../../static/images/member/u6294.png"},{src:"../../../static/images/member/u6302.png"},{src:"/static/images/member/u6306.png"},{src:"/static/images/member/u6312.png"},{src:"/static/images/member/u6314.png"}],nameList:[],infoData:null,backMsg:"",stateValue:"",value:"",userInfo:{},checked:!1,where:{pageOffset:10,pageStart:0,name:"",phone:"",lock_status:"",time_start:"",time_end:""},dialogVisible:!1,activeName:"first"}},methods:{getList:function(t){var e=this;i.getList(t).then(function(t){e.list=t.data,e.page=t.page})},addInfo:function(){this.dialogVisible=!0},lock:function(t){var e=this;i.lock({id:t}).then(function(t){e.getList(e.where)})},unlock:function(t){var e=this;i.Unlock({id:t}).then(function(t){e.getList(e.where)})},addsend:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return alert("error submit!!"),!1;(0,n.saveMemberData)(e.infoAdd).then(function(t){e.getList(e.where)}),e.dialogVisible=!1,e.infoAdd={contents:"",title:"",type:""}})},search:function(){this.getList(this.where)},handleSizeChange:function(t){this.where.pageOffset=t,this.getList(this.where)},handleCurrentChange:function(t){this.where.pageStart=(t-1)*this.where.pageOffset,this.getList(this.where)},handleClick:function(){},detail:function(t){var e=this;i.detail({id:t}).then(function(t){e.infoData=t.data,e.infoData.roles=e.infoData.positions,e.infoData.reset_pwd=!1,e.dialogVisible=!0,log(e.infoData)})},backMsgSend:function(){var t=this;(0,n.saveMemberData)({feedback_id:this.infoData.data.id,content:this.backMsg}).then(function(e){t.$message.success("回复成功"),t.backMsg="",t.detail(t.infoData.data.id)})},save:function(t){var e=this;this.checked&&(this.infoData.reset_pass=1),this.infoData.roles.length||(this.infoData.roles=this.domList(this.roleList)),(0,n.saveMemberData)(this.infoData).then(function(t){e.dialogVisible=!1,e.$message.success("设置成功！！")})},domList:function(t){var e={};return t.forEach(function(t){e[t.id]=0}),e}},created:function(){this.getList(this.where)},watch:{ctimePick:function(){this.where.time_start=this.ctimePick[0],this.where.time_end=this.ctimePick[1]}}}},588:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getList=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)("/api/user/roles",t)},e.save=function(t){var e=t.id,a=function(t,e){var a={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(a[i]=t[i]);return a}(t,["id"]);if(e)return(0,n.request_put)(o({id:e}),a);return(0,n.request_post)("/api/user/roles",a)},e.detail=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)(o(t),t)},e.del=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/api/user/roles/delete",t)};var i,n=a(45),s=a(77);var o=((i=s)&&i.__esModule?i:{default:i}).default.compile("/api/user/roles/:id")},589:function(t,e,a){}}]);