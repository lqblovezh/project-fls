/*!
 * {
 *   "buildtime": "2019-05-31 16:22:54",
 *   "workspace": "F:\\X-BOOK\\xcloud\\x-book4\\js",
 *   "username": "LQB",
 *   "hostname": "DESKTOP-QL56OJS",
 *   "platform": "win32",
 *   "git": {
 *     "branch": "master",
 *     "hash": "fbc007935",
 *     "message": [
 *       "commit fbc00793544e5767db1868f95f89c64b93f3aa79",
 *       "Author: 骆秋波 <1277678760@qq.com>",
 *       "Date:   Fri May 31 15:21:03 2019 +0800",
 *       "    打包上传"
 *     ],
 *     "user": "骆秋波",
 *     "email": "1277678760@qq.com",
 *     "remote": [
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (fetch)",
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (push)"
 *     ]
 *   }
 * }
 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{1209:function(t,e,a){"use strict";var i=a(535);a.n(i).a},1277:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"index clearfix"},[a("div",{staticClass:"dialogs"},[t.moveToOtherDiaolog?a("MoveGroup",{attrs:{currGroup:t.currGroup,groupList:t.groupList},on:{back:function(e){t.moveToOtherDiaolog=!1},submit:t.moveToSubmit}}):t._e(),t.upShelfDiaolog?a("Grounding",{on:{back:function(e){t.upShelfDiaolog=!1},upShelf:t.upShelf}}):t._e(),t.detailDialog?a("el-dialog",{attrs:{center:!1,visible:t.detailDialog,"close-on-click-modal":!1,top:"50px",width:"1000px"},on:{"update:visible":function(e){t.detailDialog=e}}},[a("div",{staticClass:"content",attrs:{slot:"title"},slot:"title"},[a("Detail",{attrs:{typeDetail:"课件",type:t.detailDialoaType,detailData:t.detailData,services:t.services},on:{back:function(e){t.detailDialog=!1},change:t.change,delete:t.delVersion}})],1),a("div",{staticClass:"dialog-footer btns",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info"},on:{click:function(e){t.detailDialog=!1}}},[t._v("取消")])],1)]):t._e()],1),a("div",{staticClass:"mainRight"},[a("div",{staticClass:"contentWrap"},[a("div",{staticClass:"contentLeft"},[a("div",{staticClass:"maindata"},[a("div",{staticClass:"serachWrap"},[a("div",{staticClass:"title"}),a("form",{staticClass:"clearfix",attrs:{id:"mainForm"}},[a("span",{staticClass:"group-inline"},[a("el-input",{attrs:{placeholder:"名称",name:"name",clearable:""},model:{value:t.searchQuery.name,callback:function(e){t.$set(t.searchQuery,"name",e)},expression:"searchQuery.name"}})],1),a("span",{staticClass:"group-inline"},[a("el-input",{attrs:{placeholder:"标签",name:"tag",clearable:""},model:{value:t.searchQuery.tag,callback:function(e){t.$set(t.searchQuery,"tag",e)},expression:"searchQuery.tag"}})],1),a("span",{staticClass:"group-inline"},[a("TimePick",{attrs:{inputsName:["start_time","end_time"]}})],1),t._m(0),a("span",{staticClass:"group-inline right"},[a("el-button",{attrs:{size:"mediu",type:"primary",icon:"el-icon-search",plain:""},on:{click:t.query}},[t._v("搜索")])],1)])]),a("div",{staticClass:"tableWrap"},[a("div",{staticClass:"tableTop"},[a("div",{staticClass:"title vel-line"},[a("span",[t._v("全部 "),t.page?a("span",{staticClass:"totalNum"},[t._v("("+t._s(t.page.total)+")")]):t._e()]),a("div",{staticClass:"btns"},[a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:t.moveToOther}},[t._v("移动分组")]),a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){return t.showUpShelf()}}},[t._v("上架")]),a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){return t.downShelf()}}},[t._v("下架")]),a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){return t.delChoosen()}}},[t._v("删除")])],1)])]),a("table",{staticClass:"table"},[a("thead",[a("tr",[a("th",{staticClass:"table-check"},[a("input",{attrs:{type:"checkbox"},on:{click:function(e){return t.$checkAll(e)}}})]),a("th",[t._v("名称")]),a("th",[t._v("视频数量")]),a("th",[t._v("标签")]),a("th",{attrs:{width:"150"}},[t._v("创建时间")]),a("th",{attrs:{width:"70"}},[t._v("上架状态")]),a("th",{attrs:{width:"70"}},[t._v("使用版本")]),a("th",{attrs:{width:"80"}},[t._v("操作")])])]),t.list?a("tbody",t._l(t.list,function(e){return e.books_info?a("tr",[a("th",[a("input",{ref:"ids",refInFor:!0,attrs:{type:"checkbox",name:"ids"},domProps:{value:e.id}})]),a("th",[a("img",{staticClass:"cover-photo",attrs:{src:e.books_info.img_src}}),a("div",{staticClass:"th-name bookName",attrs:{title:e.books_info.name}},[t._v(t._s(e.books_info.name))])]),a("th",[a("div",{staticClass:"th-name"},[t._v(t._s(e.count))])]),a("th",[a("div",{staticClass:"th-name",attrs:{title:e.books_info.tag}},[t._v(t._s(e.books_info.tag))])]),a("th",[a("div",{staticClass:"th-name"},[t._v(t._s(e.create_time))])]),a("th",[a("div",{staticClass:"th-name"},[t._v(t._s(e.status_name))])]),a("th",["0"!=e.status?a("div",{staticClass:"th-name"},[t._v(t._s(e.version_id))]):t._e(),"0"==e.status?a("div",{staticClass:"th-name"},[a("select",{on:{change:function(a){return t.versionChage(a,e)}}},t._l(e.version_list,function(i,r){return a("option",{domProps:{value:i,selected:e.version_id==r}},[t._v(t._s(r))])}),0)]):t._e()]),a("th",[a("div",{staticClass:"btns"},["1"!=e.status?a("Icon",{attrs:{type:"icon-wms_msgComment",title:"设置"},on:{click:function(a){return t.putSet(e.id)}}}):t._e(),"0"!=e.status?a("Icon",{attrs:{type:"icon-reject",size:"mini",title:"下架"},on:{click:function(a){return t.downShelf(e.id)}}}):t._e(),"0"==e.status?a("Icon",{attrs:{type:"icon-upload",title:"上架"},on:{click:function(a){return t.showUpShelf(e)}}}):t._e(),a("Icon",{attrs:{type:"icon-detail",title:"详情"},on:{click:function(a){return t.opneDetailDialog("xq",e.id)}}})],1)])]):t._e()}),0):t._e()]),t.page?a("div",{staticClass:"pageWrap"},[a("el-pagination",{attrs:{small:!1,background:"","current-page":t.page.num,"page-sizes":[10,50,100],"page-size":t.page.offset,layout:"total, sizes,prev, pager, next, jumper",total:t.page.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1):t._e(),t.pustSetDialog?a("el-dialog",{attrs:{title:"价格设置",visible:t.pustSetDialog,width:"500px"},on:{"update:visible":function(e){t.pustSetDialog=e}}},[a("div",{staticClass:"formWrap"},[a("VaForm",{ref:"pustSetForm"},[a("form",{attrs:{id:"pustSetForm"}},[a("div",{staticClass:"group"},[a("span",{staticClass:"left"},[t._v("组名称")]),a("span",{staticClass:"right"},[t._v("价格")])]),t._l(t.currentPut.data,function(e,i){return a("div",{staticClass:"group"},[a("span",{staticClass:"left",domProps:{textContent:t._s(e.group_name)}}),a("span",{staticClass:"right"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.price,expression:"item.price"}],staticClass:"form-control info",attrs:{name:"prices"},domProps:{value:e.price},on:{input:function(a){a.target.composing||t.$set(e,"price",a.target.value)}}}),a("input",{staticClass:"hide",attrs:{name:"ids"},domProps:{value:e.price}})])])})],2)])],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"info"},on:{click:function(e){t.pustSetDialog=!1}}},[t._v("取消")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.pustSetSave}},[t._v("确定")])],1)]):t._e()],1),a("div",{staticClass:"gruopList"},[a("GroupList",{attrs:{groupList:t.groupList,currGroup:t.currGroup},on:{addGroup:t.addGroup,updateGroup:t.updateGroup,delGroup:t.delGroup,groupChange:t.groupChange}})],1)])])])])])},r=[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"group-inline"},[e("select",{staticClass:"form-control width-small",attrs:{placeholder:"标签",name:"status"}},[e("option",{attrs:{value:""}},[this._v("选择状态")]),e("option",{attrs:{value:"1"}},[this._v("已上架")]),e("option",{attrs:{value:"0"}},[this._v("未上架")])])])}];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return r})},227:function(t,e,a){"use strict";a.r(e);var i=a(1277),r=a(533);for(var n in r)"default"!==n&&function(t){a.d(e,t,function(){return r[t]})}(n);a(1209);var o=a(0),s=Object(o.a)(r.default,i.a,i.b,!1,null,"5ad6c6cb",null);e.default=s.exports},267:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(a(19));e.modifyNowledges=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.id,o=u(e,["id"]),l=n.default.compile(restUrl_publish+"/api/nowledges/:id");return(0,r.request_put)(l({id:a}),o).then((c=s(i.default.mark(function e(a){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p({id:o.pid,type:o.type});case 2:return t.abrupt("return",a);case 3:case"end":return t.stop()}},e,t)})),function(t){return c.apply(this,arguments)}));var c},e.deleteNowledges=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)(restUrl_publish+"/api/nowledges/delete",e).then((a=s(i.default.mark(function a(r){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p({id:e.pid,type:e.type});case 2:return t.abrupt("return",r);case 3:case"end":return t.stop()}},a,t)})),function(t){return a.apply(this,arguments)}));var a},e.addNowledges=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)(restUrl_publish+"/api/nowledges",e).then((a=s(i.default.mark(function a(r){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p({id:e.pid,type:e.type});case 2:return t.abrupt("return",r);case 3:case"end":return t.stop()}},a,t)})),function(t){return a.apply(this,arguments)}));var a},e.upNowledges=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_put)(restUrl_publish+"/api/nowledges",t)},e.modifyGroup=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.id,o=u(e,["id"]),l=n.default.compile(restUrl_publish+"/api/nowledges/groups/:id");return(0,r.request_put)(l({id:a}),o).then((c=s(i.default.mark(function e(a){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p({id:o.pid,type:o.type});case 2:return t.abrupt("return",a);case 3:case"end":return t.stop()}},e,t)})),function(t){return c.apply(this,arguments)}));var c},e.listGroup=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_get)(restUrl_publish+"/api/nowledges/groups",t)},e.deleteGroup=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)(restUrl_publish+"/api/nowledges/groups/delete",e).then((a=s(i.default.mark(function a(r){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p({id:e.pid,type:e.type});case 2:return t.abrupt("return",r);case 3:case"end":return t.stop()}},a,t)})),function(t){return a.apply(this,arguments)}));var a},e.addGroup=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)(restUrl_publish+"/api/nowledges/groups",e).then((a=s(i.default.mark(function a(r){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p({id:e.pid,type:e.type});case 2:return t.abrupt("return",r);case 3:case"end":return t.stop()}},a,t)})),function(t){return a.apply(this,arguments)}));var a},e.listNowledges=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,a=u(t,["id"]),i=n.default.compile(restUrl_publish+"/api/nowledges/book/:id");return(0,r.request_get)(i({id:e}),a)},e.audioNowledges=l,e.searchNowledges=c,e.videoNowledges=d,e.NowledgesList=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.type,a=u(t,["type"]);if("章节锚点"==e)return c(a);if("音频锚点"==e)return l(a);if("视频锚点"==e)return d(a)},e.listKnowledge=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_get)(restUrl_publish+"/api/nowledges",t)},e.addAnchor=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)(restUrl_publish+"/api/nowledge_info",e).then((a=s(i.default.mark(function a(r){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p({id:e.pid,type:e.ptype});case 2:return t.abrupt("return",r);case 3:case"end":return t.stop()}},a,t)})),function(t){return a.apply(this,arguments)}));var a},e.delAnchor=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)(restUrl_publish+"/api/nowledge_info/delete",e).then((a=s(i.default.mark(function a(r){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p({id:e.pid,type:e.type});case 2:return t.abrupt("return",r);case 3:case"end":return t.stop()}},a,t)})),function(t){return a.apply(this,arguments)}));var a},e.mount=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)(restUrl_publish+"/api/nowledge_info/mount",t).then(function(e){var a=JSON.parse(window.localStorage.getItem("mounts"))||[],i=a.findIndex(function(e){return e.tid===t.id}),r={tid:t.id,id:e.data.id};i>-1&&a.splice(i,1),a.push(r),window.localStorage.setItem("mounts",JSON.stringify(a))})},e.nowledge_info=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_get)(restUrl_publish+"/api/nowledge_info",t)},e.mountSchedule=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},a=t.id,i=(u(t,["id"]),(JSON.parse(window.localStorage.getItem("mounts"))||[]).find(function(t){return t.tid===a}));if(!i)return"";var o=n.default.compile(restUrl_publish+"/api/nowledge_info/:id");return(0,r.request_progress)(o({id:i.id}),e)},e.nowledge_btn=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_get)(restUrl_publish+"/api/nowledge_button",t)};var r=a(45),n=o(a(77));function o(t){return t&&t.__esModule?t:{default:t}}function s(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,a){return function i(r,n){try{var o=e[r](n),s=o.value}catch(t){return void a(t)}if(!o.done)return Promise.resolve(s).then(function(t){i("next",t)},function(t){i("throw",t)});t(s)}("next")})}}function u(t,e){var a={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(a[i]=t[i]);return a}function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,a=u(t,["id"]),i=n.default.compile(restUrl_publish+"/api/nowledges/audio/:id");return(0,r.request_get)(i({id:e}),a)}function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,a=u(t,["id"]),i=n.default.compile(restUrl_publish+"/api/nowledges/book/catalogs/:id");return(0,r.request_get)(i({id:e}),a)}function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,a=u(t,["id"]),i=n.default.compile(restUrl_publish+"/api/nowledges/video/:id");return(0,r.request_get)(i({id:e}),a)}function p(t){var e=t.id,a=t.type,i=n.default.compile(restUrl_publish+"/api/nowledge_status/:id");return(0,r.request_get)(i({id:e}),{type:a})}},268:function(t,e,a){"use strict";a.r(e);var i=a(269),r=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,function(){return i[t]})}(n);e.default=r.a},269:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["groupList","currGroup"],data:function(){return{newGroupDialogOpen:!1,updateGroupDialogOpen:!1,currEditGroup:null}},created:function(){},computed:{},methods:{groupChange:function(t){this.$emit("groupChange",t)},addGroupDialog:function(){},delGroup:function(t){var e=this;this.$confirm("是否删除分组:"+t.name).then(function(a){dir(a),e.$emit("delGroup",t.id)}).catch(function(t){dir(t)})},updateGroupDialog:function(t){this.currEditGroup=t,log(t),this.updateGroupDialogOpen=!0},addGroup:function(){if(this.$refs.addGroupForm.valiAll()){var t=document.querySelector("#addGroupForm");this.$emit("addGroup",t),this.newGroupDialogOpen=!1}},updateGroup:function(){if(this.$refs.updateGroupForm.valiAll()){var t=document.querySelector("#updateGroupForm");this.$emit("updateGroup",t),this.updateGroupDialogOpen=!1}},moveToSubmit:function(){this.$emit("moveGroup")}}}},270:function(t,e,a){},271:function(t,e,a){"use strict";a.r(e);var i=a(272),r=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,function(){return i[t]})}(n);e.default=r.a},272:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["groupList","currGroup"],created:function(){log("重庆插件")},data:function(){return{flag:!0}},methods:{submit:function(){var t=this.$refs.moveToId.value;this.$emit("submit",t)}},watch:{flag:function(){this.flag||this.$emit("back")}}}},278:function(t,e,a){"use strict";a.r(e);var i=a(279),r=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,function(){return i[t]})}(n);e.default=r.a},279:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=s(a(332)),n=(function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);e.default=t}(a(267)),s(a(340))),o=s(a(342));function s(t){return t&&t.__esModule?t:{default:t}}e.default={components:{Knowledge:r.default,Info:n.default,Group:o.default},props:{type:String,detailData:Object,isTheme:{type:Boolean,default:!1},services:Object,typeDetail:{type:String,default:"图书"},isCourse:{type:Boolean,default:!1}},data:function(){return{list:null,gList:null,currGroup:null,currType:"1",currIndex:"books",detailDataOwn:null,isKnowledge:!1,infoDialog:!1,infoData:{},infoValue:"xq",bookInfo:{},groupDialog:!1}},created:function(){if(this.bookInfo=this.detailData.books_info,this.bookInfo.knowledge&&this.bookInfo.knowledge.length){this.isKnowledge=!0;var t=this.bookInfo.knowledge;this.gList=t,this.currGroup=t[0],this.list=t[0]?t[0].nowledge_info:""}this.isTheme?this.detailDataOwn=this.bookInfo.components:("视读"==this.typeDetail||"课件"==this.typeDetail?this.currIndex="videos":"听读"==this.typeDetail&&(this.currIndex="audios"),this.detailDataOwn=this.bookInfo.components[this.currIndex],log(this.detailDataOwn))},methods:{handleClick:function(t,e){},submit:function(){this.$emit("back")},handKnowledgeClick:function(t){this.list=t.nowledge_info},change:function(t,e){this.currType=e,this.currIndex=t,this.detailDataOwn=this.bookInfo.components[this.currIndex]},preview:function(t,e){var a=this;if(log(1111,t),"object"==(void 0===e?"undefined":i(e)))return this.currentItem=t,void(this.groupDialog=!0);this.infoValue="xq",log(this.currType),this.services.preview({product_id:this.bookInfo.id,resource_id:t.id,type:2==this.currType?14:t.type}).then(function(t){a.infoData=t.data,a.infoDialog=!0}).catch(function(t){var e=t.payload;for(var i in e.messages){a.$message.error(e.messages[i]);break}})}},watch:{detailData:function(t){if(this.bookInfo=t.books_info,this.bookInfo.knowledge&&this.bookInfo.knowledge.length){this.isKnowledge=!0;var e=this.bookInfo.knowledge;this.gList=e,this.currGroup=e[0],this.list=e[0]?e[0].nowledge_info:""}this.isTheme?this.detailDataOwn=t.books_info.components:this.detailDataOwn=t.books_info.components[this.currIndex]}}}},280:function(t,e,a){"use strict";a.r(e);var i=a(281),r=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,function(){return i[t]})}(n);e.default=r.a},281:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=d(a(19)),r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},n=d(a(258)),o=d(a(333)),s=d(a(335)),u=c(a(267)),l=c(a(373));function c(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}function d(t){return t&&t.__esModule?t:{default:t}}function p(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,a){return function i(r,n){try{var o=e[r](n),s=o.value}catch(t){return void a(t)}if(!o.done)return Promise.resolve(s).then(function(t){i("next",t)},function(t){i("throw",t)});t(s)}("next")})}}e.default={components:{AnchorList:o.default,Reader:s.default},props:["type","constitute","detailId"],created:function(){var t=this;return p(i.default.mark(function e(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case 1:case"end":return t.stop()}},e,t)}))()},data:function(){return{list:null,glist:null,page:null,Anchors_chapter:"章节锚点",Anchors_contetn:"内容锚点",Anchors_audio:"音频锚点",Anchors_video:"视频锚点",checkedAll:!1,timePick:null,currGroupId:null,currknowledgeId:null,currGroup:{},openAnchorList:!1,anchorType:"章节锚点",anchorList:null,bookInfo:{value:"",lsit:[]},groupDialog:!1,knowledgeDialog:!1,addAnchorDialog:!1,readerDialog:!1,readerId:null,editGroup:{},editKnowledge:{},anchorCheckedAll:!1,mount:{number:0}}},computed:{isBook:function(){return"章节锚点"==this.anchorType||"内容锚点"==this.anchorType}},methods:{getGlist:function(){var t=this;return p(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.listGroup({id:t.detailId}).then(function(e){var a=e.data.findIndex(function(e){return t.currGroupId===e.id}),i=a>-1?a:0;t.glist=e.data,t.glist&&t.glist.length>0?(t.currGroupId=e.data[i].id,t.currGroup=e.data[i],t.anchorType="章节锚点",t.getList()):(t.currGroupId=null,t.currGroup={})}).catch(function(e){var a=e.payload;for(var i in a.messages){t.$message.error(a.messages[i]);break}});case 2:case"end":return e.stop()}},e,t)}))()},getList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments[2];return p(i.default.mark(function o(){var s;return i.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,u.listKnowledge(r({pageNum:t,pageOffset:a},n,{id:e.detailId,group_id:e.currGroupId})).then(function(t){e.list=t.data,e.page=t.page}).catch(function(t){var a=t.payload;for(var i in a.messages){e.$message.error(a.messages[i]);break}});case 2:s=e.$refs.mainListWrap,s.querySelectorAll("input[type='checkbox']").forEach(function(t){t.checked=!1});case 5:case"end":return i.stop()}},o,e)}))()},groupDel:function(t){var e=this;this.$confirm("是否删除该分组?").then(function(a){u.deleteGroup({id:t.id}).then(function(t){e.getGlist()}).catch(function(t){for(var a in payload.messages){e.$message.error(payload.messages[a]);break}})})},KnowledgeEdit:function(t){this.editKnowledge=t,this.knowledgeDialog=!0},groupCommit:function(){var t=this;if(this.$refs.groupFormVa.valiAll()){var e=(0,n.default)(this.$refs.groupForm,{hash:!0});e.id?u.modifyGroup(e).then(function(e){t.groupDialog=!1,t.getGlist()}):(e.id=this.detailId,u.addGroup(e).then(function(e){t.groupDialog=!1,t.getGlist()}))}},KnowledgeCommit:function(){var t=this;if(this.$refs.KnowledgeFormVa.valiAll()){var e=(0,n.default)(this.$refs.KnowledgeForm,{hash:!0});try{e.id?u.modifyNowledges(e).then(function(e){t.knowledgeDialog=!1,t.getList()}):(e.t_id=this.detailId,e.group_id=this.currGroupId,u.addNowledges(e).then(function(e){t.knowledgeDialog=!1,t.getGlist(),t.getList()}))}catch(t){var a=t.payload;for(var i in a.messages){this.$message.error(a.messages[i]);break}}}},toTop:function(){var t=this,e=[];if(this.$refs.mainListWrap.querySelectorAll("[name='ids']:checked").forEach(function(t){e.push(t.value)}),!e.length)return this.$message.error("请确认你要置顶的内容！");u.upNowledges({id:e}).then(function(e){t.getList()}).catch(function(e){var a=e.payload;for(var i in a.messages){t.$message.error(a.messages[i]);break}})},knowDel:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=this.$refs.mainListWrap.querySelectorAll("[name='ids']:checked");if(e.length||a.forEach(function(t){e.push(t.value)}),!e.length)return this.$message.error("请确认你要删除的内容！");this.$confirm("是否删除选中知识点?").then(function(a){u.deleteNowledges({id:e}).then(function(e){t.getGlist()}).catch(function(e){var a=e.payload;for(var i in a.messages){t.$message.error(a.messages[i]);break}})})},removeAnchor:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=this.$refs.anchorList.querySelectorAll("[name='ids']:checked");if(e.length||a.forEach(function(t){e.push(t.value)}),!e.length)return this.$message.error("请确认你要删除的锚点！");this.$confirm("是否删除选中锚点?").then(function(a){l.delAnchor({id:e}).then(function(e){t.getAnchorList()}).catch(function(e){var a=e.payload;for(var i in a.messages){t.$message.error(a.messages[i]);break}})})},handleSizeChange:function(t){this.getList(1,t)},handleCurrentChange:function(t){this.getList(t,this.page.offset)},changeGroup:function(t){this.currGroupId=t.id,this.currGroup=t,this.openAnchorList=!1,this.getList()},getbookList:function(){var t=this;return p(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.listNowledges({id:t.detailId}).then(function(e){t.bookInfo.list=e.data}).catch(function(e){var a=e.payload;for(var i in a.messages){t.$message.error(a.messages[i]);break}});case 2:case"end":return e.stop()}},e,t)}))()},addAnchor:function(){this.addAnchorDialog=!0},setAnchor:function(t){var e=this;return p(i.default.mark(function a(){return i.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.currknowledgeId=t,a.next=3,e.getbookList();case 3:e.getAnchorList(),e.openAnchorList=!0;case 5:case"end":return a.stop()}},a,e)}))()},changeAnchorType:function(t){this.anchorType=t,this.getAnchorList()},getAnchorList:function(){var t=this;u.nowledge_info({type:this.anchorType,id:this.currknowledgeId}).then(function(e){t.anchorList=e.data})},bookinfoChange:function(t){if("内容锚点"==this.anchorType)return this.readerId=t,void(this.readerDialog=!0);this.addAnchorDialog=!0},bookinfoBlur:function(t){this.bookInfo.value&&!t&&"章节锚点"==this.anchorType?this.addAnchorDialog=!0:this.bookInfo.value&&!t&&"内容锚点"==this.anchorType&&(this.readerDialog=!0)},anchorListCancle:function(){this.addAnchorDialog=!1,this.getAnchorList()},addAnchorSuccess:function(){this.getAnchorList()}}}},282:function(t,e,a){"use strict";a.r(e);var i=a(283),r=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,function(){return i[t]})}(n);e.default=r.a},283:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s(a(19)),r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},n=s(a(258)),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}(a(267));function s(t){return t&&t.__esModule?t:{default:t}}e.default={components:{},props:["type","bookInfo","themeId","currknowledgeId"],created:function(){var t,e=this;return(t=i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.getList();case 1:case"end":return t.stop()}},t,e)}),function(){var e=t.apply(this,arguments);return new Promise(function(t,a){return function i(r,n){try{var o=e[r](n),s=o.value}catch(t){return void a(t)}if(!o.done)return Promise.resolve(s).then(function(t){i("next",t)},function(t){i("throw",t)});t(s)}("next")})})()},data:function(){return{list:null,page:null,query:null,obj:{}}},computed:{},methods:{getList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,i=arguments[2];return o.NowledgesList(r({pageNum:t,pageOffset:a},i,{id:"章节锚点"==this.type?this.bookInfo.value:this.themeId,type:this.type})).then(function(t){e.list=t.data,e.page=t.page})},checkedAll:function(t){var e=this;t.target.checked?this.list.forEach(function(t){e.obj[t.id]=t}):this.list.forEach(function(t){e.obj[t.id]=null}),this.$refs.ids.forEach(function(e){e.checked=t.target.checked}),log(this.obj)},choose:function(t,e){t.target.checked?this.obj[e.id]=e:this.obj[e.id]=null},addAnchorCommit:function(){var t=this,e=[];for(var a in this.obj)this.obj.hasOwnProperty(a)&&this.obj[a]&&e.push(this.obj[a]);o.addAnchor({n_id:this.currknowledgeId,b_id:"章节锚点"==this.type?e.map(function(t){return t.id}):"",c_id:"章节锚点"==this.type?[this.bookInfo.value]:e.map(function(t){return t.id}),type:this.type,name:e.map(function(t){return t.chapter_name||t.name})}).then(function(e){t.$emit("anchorListCancle")})},handleSizeChange:function(t){this.getList(1,t)},handleCurrentChange:function(t){this.getList(t,this.page.offset)},seareHandeler:function(){this.query=(0,n.default)(this.$refs.mainForm,{hash:!0}),log(this.query),this.getList(1,10,this.query)}},filters:{formatHolder:function(t){return t.substr(0,2)+"名称"}}}},284:function(t,e,a){},285:function(t,e,a){"use strict";a.r(e);var i=a(286),r=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,function(){return i[t]})}(n);e.default=r.a},286:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=a(19),n=(i=r)&&i.__esModule?i:{default:i},o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}(a(336)),s=a(267);function u(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,a){return function i(r,n){try{var o=e[r](n),s=o.value}catch(t){return void a(t)}if(!o.done)return Promise.resolve(s).then(function(t){i("next",t)},function(t){i("throw",t)});t(s)}("next")})}}e.default={props:{readerDialog:{type:Boolean,default:!1},title:{type:String,default:"阅读器"},readerId:{type:String,default:""},currId:{type:String,default:""},version:{type:String,default:"production"},markBtn:{type:String,default:""}},data:function(){return{}},created:function(){var t=this;this.$nextTick(function(){var e={};e.do_mark=t.do_mark,e.get_chapter=t.get_chapter,e.get_book=t.get_book,new Reader3({imagePath:"http://xcloud.kf.gli.cn/pc/",markBtnText:t.markBtn,copyEnabled:!0,services:e,params:{bookId:t.readerId}}).mount(document.getElementById("readerIframe"),function(){})})},methods:{colse:function(){this.$emit("update:readerDialog",!1)},do_mark:function(t){var e=this,a=t.bookId,i=t.rangeJSON,r=t.selectedText,n=t.chapterRid,o=t.chapterName,u=void 0===o?"":o;(0,s.addAnchor)({name:[u],range:i,point:r,n_id:this.currId,b_id:[n],c_id:[a],type:"内容锚点"}).then(function(t){e.$emit("addAnchorSuccess")}).catch(function(t){var a=t.payload;for(var i in a.messages){e.$message.error(a.messages[i]);break}})},get_chapter:function(t){var e=this,a=t.bookId,i=t.chapterRid;return u(n.default.mark(function t(){return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.get_chapter({bookId:a,chapterRid:i,version:e.version});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,e)}))()},get_book:function(t){var e=this,a=t.bookId;return u(n.default.mark(function t(){return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.get_book({bookId:a,version:e.version});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,e)}))()}}}},287:function(t,e,a){},288:function(t,e,a){},289:function(t,e,a){"use strict";a.r(e);var i=a(290),r=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,function(){return i[t]})}(n);e.default=r.a},290:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a(80);var i,r=a(258);(i=r)&&i.__esModule,n(a(78)),n(a(395));function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}e.default={props:["type","infoData","infoDialog","typeDetail"],data:function(){return{}},computed:{detailType:function(){return this.infoData.img_status},hassVideo:function(){return 6==this.infoData.type||5==this.infoData.type||8==this.infoData.type}},methods:{handleClick:function(t,e){this.$emit("infoClick",t)}}}},291:function(t,e,a){},292:function(t,e,a){"use strict";a.r(e);var i=a(293),r=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,function(){return i[t]})}(n);e.default=r.a},293:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}(a(309)),o=a(343),s=(i=o)&&i.__esModule?i:{default:i};e.default={components:{Tab:s.default},props:{groupDialog:{type:Boolean,default:!1},detailData:Object,item:{type:Object,default:{}},isMedia:{type:Number,default:1},onlyShow:Boolean,defaultData:Object},data:function(){return{information:{},list:[],addMediaType:"4"}},created:function(){Object.entries(this.item).length&&this.defaultData,this.information=this.item,this.list=this.item.children||[],2==this.isMedia&&(this.addMediaType="5")},computed:{setTitle:function(){return Object.entries(this.item).length?this.item.name||"修改组":"新增组"}},methods:{getInfo:function(){var t=this;n.groupDetail({id:this.item.id,type:this.isMedia}).then(function(e){t.information=e.data,t.list=e.data.constitute}).catch(function(e){var a=e.payload;for(var i in a.messages){t.$message.error(a.messages[i]);break}})},update:function(t){this.list=t},colse:function(){this.$emit("update:groupDialog",!1)},save:function(){var t=this;this.$refs.detailForm.valiAll()&&n.groupSave(r({id:this.item?this.item.id:""},this.information,{product_id:this.detailData.id,type:this.isMedia,constitute:this.list})).then(function(e){log(e),t.$message.success("保存成功"),t.$emit("save"),t.colse()}).catch(function(e){var a=e.payload;for(var i in a.messages){t.$message.error(a.messages[i]);break}})},del:function(t){var e=this.list.findIndex(function(e){return e.id===t.id});e>-1&&this.list.splice(e,1)}}}},294:function(t,e,a){"use strict";a.r(e);var i=a(295),r=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,function(){return i[t]})}(n);e.default=r.a},295:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=a(258),n=((i=r)&&i.__esModule,function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}(a(309)));e.default={props:["dataType","isShow","detailData","defaultList","isLabelHide","onlyShow"],data:function(){return{services:n,type:"1",list:[]}},created:function(){this.defaultList?this.list=this.defaultList:this.getList(this.dataType)},computed:{},methods:function(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}({handleClick:function(){},getList:function(t){var e=this;this.detailData&&this.detailData.id&&this.services.getList({type:t,id:this.detailData.id,resource_type:this.type}).then(function(t){e.list=t.data})}},"handleClick",function(t){log(t)}),watch:{defaultList:function(){this.list=this.defaultList},type:function(t){this.getList(this.dataType)}}}},296:function(t,e,a){},297:function(t,e,a){},298:function(t,e,a){},302:function(t,e,a){"use strict";a.r(e);var i=a(303),r=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,function(){return i[t]})}(n);e.default=r.a},303:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},n=a(258),o=(i=n)&&i.__esModule?i:{default:i},s=(a(265),function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}(a(370)));e.default={props:["pustSetDialog","putData"],data:function(){return{services:s,currentPut:null,radio2:"2",radio:"1",currType:"1",currIndex:"books",putDetailData:{},twoList:{value:"",list:[]},oneList:{value:"",list:[]},threeList:{value:"",list:[]}}},created:function(){log(this.putData),this.setDate()},methods:{setDate:function(){var t=this.putData.prices;for(var e in t)if(t[e]&&t[e].chapters&&t[e].chapters.length>0){switch(this.currIndex=e,e){case"books":this.currType="1";break;case"pictures":this.currType="2";break;case"audios":this.currType="3";break;case"videos":this.currType="4";break;case"resources":this.currType="5";break;default:this.currType="1"}break}this.currentPut=this.putData,this.putDetailData.books_free_ids=this.getFreeids(t.books),this.putDetailData.pictures_free_ids=this.getFreeids(t.pictures),this.putDetailData.audios_free_ids=this.getFreeids(t.audios),this.putDetailData.videos_free_ids=this.getFreeids(t.videos),this.putDetailData.resources_free_ids=this.getFreeids(t.resources),this.putDetailData.books_all_price=t.books&&t.books.price||"",this.putDetailData.picture_all_price=t.pictures&&t.pictures.price||"",this.putDetailData.audio_all_price=t.audios&&t.audios.price||"",this.putDetailData.video_all_price=t.videos&&t.videos.price||"",this.putDetailData.resources_all_price=t.resources&&t.resources.price||"",this.radio2=this.putData.prices.books&&this.putData.prices.books.price_type?this.putData.prices.books.price_type.toString():1,this.putDetailData.put_audio=this.putData.put_audio,this.putDetailData.put_video=this.putData.put_video,this.oneList.list=this.putData.book_store.cate_list,this.oneList.value=this.getValue(this.oneList.list),this.twoList.list=this.getTwoList(this.putData.book_store.cate_list),this.twoList.value=this.getValue(this.twoList.list),this.threeList.list=this.putData.book_store.head_book,this.threeList.value=this.getValue(this.threeList.list)},getValue:function(t){var e=t.find(function(t){return t.is_select});return e?e.id:null},getFreeids:function(t){var e=[];if(!t||!t.chapters)return[];var a=t.chapters,i=!0,r=!1,n=void 0;try{for(var o,s=a[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var u=o.value;0==u.price&&e.push(u.id)}}catch(t){r=!0,n=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw n}}return e},getTwoList:function(t){var e=[];if(!t)return[];var a=!0,i=!1,r=void 0;try{for(var n,o=t[Symbol.iterator]();!(a=(n=o.next()).done);a=!0){var s=n.value;s.is_select&&s.children&&(e=s.children)}}catch(t){i=!0,r=t}finally{try{!a&&o.return&&o.return()}finally{if(i)throw r}}return e},oneChange:function(t){var e=this.oneList.list.find(function(e){return e.id===t}).children;this.twoList.list=e||[],this.twoList.value=e.length?e[0].id:""},noFree:function(t,e){var a=this.putDetailData[this.currIndex+"_free_ids"],i=this.currentPut.prices[this.currIndex].chapters.findIndex(function(e){return e.id===t}),r=a.indexOf(t);r>-1&&a.splice(r,1);var n=this.currentPut.prices[this.currIndex].chapters[i].old_price;this.currentPut.prices[this.currIndex].chapters[i].price=n>0?n:null},free:function(t,e){var a=this.putDetailData[this.currIndex+"_free_ids"],i=this.currentPut.prices[this.currIndex].chapters.findIndex(function(e){return e.id===t}),r=a.indexOf(t);r>-1&&a.splice(r,1),a.push(t),this.currentPut.prices[this.currIndex].chapters[i].price="0"},pustSetSave:function(){var t=this,e=this.$loading({text:"正在上传",background:"rgba(0, 0, 0, 0.8)"}),a=(0,o.default)(document.getElementById("pustSetForm"),{hash:!0});log(a,this.threeList.value),this.services.putSave(r({},this.putDetailData,{book_id:this.currentPut.product_id},a,{put_audio:a.put_audio,put_video:a.put_video,category_id:a.put_category?0==this.twoList.list.length?this.oneList.value:this.twoList.value:"",head_book_id:a.put_head_book?this.threeList.value:""})).then(function(a){e.close(),t.$emit("save")}).catch(function(a){var i=a.payload;for(var r in e.close(),i.messages){t.$message.error(i.messages[r]);break}})},changeCurrType:function(t,e){this.currType=e,this.currIndex=t},computePrice:function(){var t=this,e=document.querySelector("."+this.currIndex+"_all_price").value;log(e);var a=(0,o.default)(document.getElementById("pustSetForm"),{hash:!0}),i=this.putDetailData[this.currIndex+"_free_ids"];if(!e)return this.$message.error("请填写价格");this.services.computePrice({book_id:this.currentPut.product_id,type:a.books_type,resource_type:this.currType,all_price:e,id:i}).then(function(e){t.currentPut.prices[t.currIndex]=e.data})},getText:function(t){switch(this.currIndex){case"pictures":return"图片"+t;case"audios":return"音频"+t;case"videos":return"视频"+t;case"resources":return"资源"+t;case"books":default:return"章节"+t}},clickChebox:function(t){this.currentPut[t]=this.currentPut[t]>0?"0":"1"},handleClose:function(){this.$emit("close")}},computed:{constitute:function(){var t=this.currentPut.prices[this.currIndex];return"books"==this.currIndex?t?t.chapters:[]:t&&t.chapters||[]}},watch:{putData:function(){this.setDate()}}}},304:function(t,e,a){},309:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getList=function(t){var e=t.type,a=t.id,i=t.resource_type;if("book"==e)return u({id:a});if("video"==e)return c({id:a});if("resource"==e)return f({id:a,resource_type:i})},e.del=function(t){var e=t.type,a=s(t,["type"]);if("book"==e)return l(a);if("video"==e)return p(a);if("resource"==e)return h(a);if("audio"==e)return m(a)},e.add=function(t){var e=t.type,a=s(t,["type"]);if("book"==e)return l(a);if("video"==e)return d(a);if("resource"==e)return v(a)},e.check=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=o.default.compile(restUrl_publish+"/api/components_paper/:id/check");return(0,r.request_get)(e(t))},e.bookList=u,e.bookInfo=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=o.default.compile(restUrl_publish+"/api/components_paper/:id");return(0,r.request_get)(e(t))},e.bookDel=l,e.bookSave=function(t){var e=t.id,a=s(t,["id"]);if(e){var i=o.default.compile(restUrl_publish+"/api/components_paper/:id");return(0,r.request_put)(i({id:e}),a)}return(0,r.request_post)(restUrl_publish+"/api/components_paper",a)},e.videoList=c,e.videoAdd=d,e.videoDel=p,e.resourceList=f,e.resourceAdd=v,e.resourceDel=h,e.groupList=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=o.default.compile(restUrl_publish+"/api/components_groups/:id/list");return(0,r.request_get)(e(t),t)},e.groupSave=function(t){var e=t.id,a=s(t,["id"]);if(e){var i=o.default.compile(restUrl_publish+"/api/components_groups/:id");return(0,r.request_put)(i({id:e}),a)}return(0,r.request_post)(restUrl_publish+"/api/components_groups",a)},e.groupDetail=function(t){var e=t.id,a=o.default.compile(restUrl_publish+"/api/components_groups/:id");return(0,r.request_get)(a({id:e}))},e.audioDel=m,e.saveEBook=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.current_id){var e=o.default.compile(restUrl_publish+"/api/components_ebooks/:id");return(0,r.request_put)(e({id:t.current_id}),t)}return(0,r.request_post)(restUrl_publish+"/api/components_ebooks",t)},e.getEBook=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=o.default.compile(restUrl_publish+"/api/components_ebooks/:id");return(0,r.request_get)(e(t))};var i,r=a(45),n=a(77),o=(i=n)&&i.__esModule?i:{default:i};function s(t,e){var a={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(a[i]=t[i]);return a}function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=o.default.compile(restUrl_publish+"/api/components_paper/:id/list");return(0,r.request_get)(e(t))}function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=o.default.compile(restUrl_publish+"/api/components_paper/:id");return(0,r.request_delete)(e(t))}function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=o.default.compile(restUrl_publish+"/api/components/:id/video");return(0,r.request_get)(e(t))}function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)(restUrl_publish+"/api/components/video",t)}function p(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=o.default.compile(restUrl_publish+"/api/components/:id/video");return(0,r.request_delete)(e({id:t.constitute_id}))}function f(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=o.default.compile(restUrl_publish+"/api/components/:id/resource");return(0,r.request_get)(e(t),t)}function v(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)(restUrl_publish+"/api/components/resource",t)}function h(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=o.default.compile(restUrl_publish+"/api/components/:id/resource");return(0,r.request_delete)(e({id:t.constitute_id}))}function m(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=o.default.compile(restUrl_publish+"/api/components_groups/:id");return(0,r.request_delete)(e(t),t)}},315:function(t,e,a){"use strict";a.r(e);var i=a(323),r=a(268);for(var n in r)"default"!==n&&function(t){a.d(e,t,function(){return r[t]})}(n);a(316);var o=a(0),s=Object(o.a)(r.default,i.a,i.b,!1,null,"01130e0a",null);e.default=s.exports},316:function(t,e,a){"use strict";var i=a(270);a.n(i).a},318:function(t,e,a){"use strict";a.r(e);var i=a(322),r=a(271);for(var n in r)"default"!==n&&function(t){a.d(e,t,function(){return r[t]})}(n);var o=a(0),s=Object(o.a)(r.default,i.a,i.b,!1,null,"66ea60dc",null);e.default=s.exports},322:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"div"},[t.flag?a("el-dialog",{attrs:{center:!1,visible:t.flag,"close-on-click-modal":!1,title:"移动分组",width:"400px"},on:{"update:visible":function(e){t.flag=e}}},[a("span",{}),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("移动到")]),a("select",{ref:"moveToId",staticClass:"form-control",attrs:{placeholder:"请选择"}},t._l(t.groupList,function(e,i){return e.id!=t.currGroup&&""!=e.id?a("option",{domProps:{value:e.id,textContent:t._s(e.name)}}):t._e()}),0)]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info"},on:{click:function(e){t.flag=!1}}},[t._v("返回")]),a("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v(" 确定  ")])],1)]):t._e()],1)},r=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return r})},323:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"div"},[a("div",{staticClass:"groupWrap"},[a("div",{staticClass:"list"},[a("ul",t._l(t.groupList,function(e){return a("li",{staticClass:"licontent",class:{red:e.id==t.currGroup}},[a("div",{staticClass:"name ellipsis",attrs:{title:e.name+"("+e.num+")"},on:{click:function(a){return t.groupChange(e.id)}}},[a("span",{staticClass:"title"},[t._v(t._s(e.name))]),a("span",[t._v(t._s("("+e.num+")"))])]),""!=e.id&&"non"!=e.id?a("div",{staticClass:"btns"},[a("span",{on:{click:function(a){return t.updateGroupDialog(e)}}},[a("i",{staticClass:"el-icon-edit"})]),a("span",{on:{click:function(a){return t.delGroup(e)}}},[a("i",{staticClass:"el-icon-delete"})])]):t._e()])}),0)]),a("div",{staticClass:"addGroupBtnWrap"},[a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){t.newGroupDialogOpen=!0}}},[a("i",{staticClass:"el-icon-plus"},[t._v("新建分组")])])],1)]),a("div",{staticClass:"dialogs"},[t.newGroupDialogOpen?a("el-dialog",{attrs:{title:"新增",visible:t.newGroupDialogOpen,width:"500px"},on:{"update:visible":function(e){t.newGroupDialogOpen=e}}},[a("div",{staticClass:"formWrap"},[a("VaForm",{ref:"addGroupForm"},[a("form",{attrs:{id:"addGroupForm"}},[a("div",{staticClass:"group"},[a("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"}],staticClass:"form-control",attrs:{name:"name"}})])])])],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info"},on:{click:function(e){t.newGroupDialogOpen=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.addGroup}},[t._v("确定")])],1)]):t._e(),t.updateGroupDialogOpen?a("el-dialog",{attrs:{title:"修改",visible:t.updateGroupDialogOpen,width:"500px"},on:{"update:visible":function(e){t.updateGroupDialogOpen=e}}},[a("div",{staticClass:"formWrap"},[a("VaForm",{ref:"updateGroupForm"},[t.currEditGroup?a("form",{attrs:{id:"updateGroupForm"}},[a("div",{staticClass:"group"},[a("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"}],staticClass:"form-control",attrs:{name:"name"},domProps:{value:t.currEditGroup.name}}),a("input",{staticClass:"hide",attrs:{name:"id"},domProps:{value:t.currEditGroup.id}})])]):t._e()])],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info"},on:{click:function(e){t.updateGroupDialogOpen=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.updateGroup}},[t._v("确定")])],1)]):t._e()],1)])},r=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return r})},331:function(t,e,a){"use strict";a.r(e);var i=a(348),r=a(278);for(var n in r)"default"!==n&&function(t){a.d(e,t,function(){return r[t]})}(n);a(346);var o=a(0),s=Object(o.a)(r.default,i.a,i.b,!1,null,"d9b761fa",null);e.default=s.exports},332:function(t,e,a){"use strict";a.r(e);var i=a(349),r=a(280);for(var n in r)"default"!==n&&function(t){a.d(e,t,function(){return r[t]})}(n);a(339);var o=a(0),s=Object(o.a)(r.default,i.a,i.b,!1,null,"5a5db156",null);e.default=s.exports},333:function(t,e,a){"use strict";a.r(e);var i=a(354),r=a(282);for(var n in r)"default"!==n&&function(t){a.d(e,t,function(){return r[t]})}(n);a(334);var o=a(0),s=Object(o.a)(r.default,i.a,i.b,!1,null,"36fc5e1d",null);e.default=s.exports},334:function(t,e,a){"use strict";var i=a(284);a.n(i).a},335:function(t,e,a){"use strict";a.r(e);var i=a(352),r=a(285);for(var n in r)"default"!==n&&function(t){a.d(e,t,function(){return r[t]})}(n);a(338);var o=a(0),s=Object(o.a)(r.default,i.a,i.b,!1,null,"9cc197b4",null);e.default=s.exports},336:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var a=[],i=!0,r=!1,n=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(a.push(o.value),!e||a.length!==e);i=!0);}catch(t){r=!0,n=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw n}}return a}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t};e.get_book=function(t,e){var a=t.bookId,i=e.extraParams;return(0,u.request_post)(l+"/reader/books",r({book_id:a},i)).then(function(t){var e=t.data;return e})},e.get_catalogs=function(t,e){var a=t.bookId,i=t.chapterId,n=e.extraParams;return(0,u.request_post)(l+"/reader/catalogs",r({book_id:a,catalog_pid:i},n)).then(function(t){var e=t.data;return e})},e.get_chapters=function(t,e){var a=t.bookId,i=t.chapterIds,n=e.extraParams;return(0,u.request_post)(l+"/reader/chapters",r({chapter_id:i,book_id:a},n)).then(function(t){var e=t.data;return e})},e.search=function(t,e){var a=t.keyword,i=t.bookId,n=t.page,o=t.chapterRid,s=e.extraParams;return(0,u.request_post)(l+"/reader/search",r({keyword:a,book_id:i,chapter_id:o,pageStart:n.start,pageOffset:n.offset},s)).then(function(t){var e=t.data,a=t.page;return{list:e,page:a}})},e.get_labels=function(t,e){var a=t.bookId,i=e.extraParams;return(0,u.request_get)("/api/book_notes",{book_id:a,user_id:i.user_id}).then(function(t){var e=t.data;return e})},e.add_label=function(t,e){var a=t.bookId,i=t.chapterRid,n=t.chapterName,o=t.userText,s=t.rangeJSON,l=t.selectedText,c=t.status,d=e.extraParams;return(0,u.request_post)("/api/book_notes",r({book_id:a,chapter_id:i,chapter_name:n,chapter_value:l,comm_text:o,range:s,protected:c},d)).then(function(t){var e=t.data;return e})},e.get_bookmarks=function(t,e){var a=t.bookId,i=e.extraParams;return(0,u.request_get)("/api/book_marks",{book_id:a,user_id:i.user_id}).then(function(t){var e=t.data;return e})},e.add_bookmark=function(t,e){var a=t.bookId,i=t.chapterRid,n=t.chapterName,o=t.rangeJSON,s=t.text,l=e.extraParams;return(0,u.request_post)("/api/book_marks",r({book_id:a,chapter_id:i,chapter_name:n,chapter_value:s,range:o},l)).then(function(t){var e=t.data;return e})},e.remove_bookmarks=function(t,e){c(t,e)},e.remove_labels=function(t,e){c(t,e)},e.modify_label=function(t){return t.range=JSON.stringify(t.range),t.comm_text=t.userText,delete t.userText,(0,u.request_put)("/api/book_notes",r({},t)).then(function(t){return t.data})},e.backup_setting=function(t){return(0,u.request_post)("/api/user_read_setting",{data:JSON.stringify(t)})},e.restore_setting=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,u.request_get)("/api/user_read_setting").then(function(t){var e=t.data,a=s.default.isArray(e)&&e[0]||e;return a?JSON.parse(a):{}})},e.set_progress=function(t,e){var a=t.bookId,i=(t.chapterRid,t.progressJSON),r=t.percentJSON,n=e.extraParams;return(0,u.request_post)("/api/read_record",{data:i,proportion:r,release_id:n.release_id,book_id:a})},e.get_progress=function(t,e){var a=t.bookId,r=e.extraParams;return(0,u.request_get)("/api/read_record",{book_id:a,release_id:r.release_id}).then(function(t){var e=i(t.data,1),a=e[0];return a})};var n,o=a(413),s=(n=o)&&n.__esModule?n:{default:n},u=a(45);var l="publish"=="read"?"/api":"/common/api";function c(t,e){var a=t.ids,i=e.extraParams;return(0,u.request_post)("/api/book_exegesis/delete",r({id:a},i)).then(function(t){return t.data})}},338:function(t,e,a){"use strict";var i=a(287);a.n(i).a},339:function(t,e,a){"use strict";var i=a(288);a.n(i).a},340:function(t,e,a){"use strict";a.r(e);var i=a(351),r=a(289);for(var n in r)"default"!==n&&function(t){a.d(e,t,function(){return r[t]})}(n);a(341);var o=a(0),s=Object(o.a)(r.default,i.a,i.b,!1,null,"78dd6ef4",null);e.default=s.exports},341:function(t,e,a){"use strict";var i=a(291);a.n(i).a},342:function(t,e,a){"use strict";a.r(e);var i=a(350),r=a(292);for(var n in r)"default"!==n&&function(t){a.d(e,t,function(){return r[t]})}(n);a(345);var o=a(0),s=Object(o.a)(r.default,i.a,i.b,!1,null,"9f5c06d6",null);e.default=s.exports},343:function(t,e,a){"use strict";a.r(e);var i=a(353),r=a(294);for(var n in r)"default"!==n&&function(t){a.d(e,t,function(){return r[t]})}(n);a(344);var o=a(0),s=Object(o.a)(r.default,i.a,i.b,!1,null,"c6b023a6",null);e.default=s.exports},344:function(t,e,a){"use strict";var i=a(296);a.n(i).a},345:function(t,e,a){"use strict";var i=a(297);a.n(i).a},346:function(t,e,a){"use strict";var i=a(298);a.n(i).a},348:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"div"},[t.groupDialog?a("Group",{ref:"group",attrs:{item:t.currentItem,detailData:t.detailData,groupDialog:t.groupDialog,onlyShow:!0},on:{"update:groupDialog":function(e){t.groupDialog=e},"update:group-dialog":function(e){t.groupDialog=e},detail:t.preview}}):t._e(),a("el-dialog",{attrs:{visible:t.infoDialog,width:"1000px",top:"50px","append-to-body":""},on:{"update:visible":function(e){t.infoDialog=e}}},[a("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[t.infoDialog?a("Info",{attrs:{type:t.infoValue,infoDialog:t.infoDialog,infoData:t.infoData,typeDetail:t.typeDetail}}):t._e()],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info"},on:{click:function(e){t.infoDialog=!1}}},[t._v("取消")])],1)]),t.detailData.version_list?a("div",{staticClass:"choiceVersion"},[a("span",[t._v("版本选择")]),a("select",{on:{change:function(e){return t.$emit("change",e,t.bookInfo)}}},t._l(t.detailData.version_list,function(e,i){return a("option",{domProps:{value:e,selected:t.detailData.version_id==i}},[t._v(t._s(i))])}),0),"1"!=t.detailData.status?a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){return t.$emit("delete",t.detailData)}}},[t._v("删除当前版本")]):t._e()],1):t._e(),a("el-tabs",{attrs:{value:t.type},on:{"tab-click":t.handleClick}},[a("el-tab-pane",{attrs:{label:"详情",name:"xq"}},[a("div",{staticClass:"div"},[a("VaForm",{ref:"detailForm"},[a("form",{ref:"detailForm",staticClass:"detailForm"},[a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("名称:")]),a("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"},{name:"model",rawName:"v-model",value:t.bookInfo.name,expression:"bookInfo.name"}],staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.bookInfo.name},on:{input:function(e){e.target.composing||t.$set(t.bookInfo,"name",e.target.value)}}})]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("类型:")]),t.isTheme?a("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"},{name:"model",rawName:"v-model",value:t.bookInfo.theme_type,expression:"bookInfo.theme_type"}],staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.bookInfo.theme_type},on:{input:function(e){e.target.composing||t.$set(t.bookInfo,"theme_type",e.target.value)}}}):t._e(),t.isTheme?t._e():a("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"}],staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.typeDetail}})]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("作者:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.bookInfo.author,expression:"bookInfo.author"}],staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.bookInfo.author},on:{input:function(e){e.target.composing||t.$set(t.bookInfo,"author",e.target.value)}}})]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("标签:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.bookInfo.tag,expression:"bookInfo.tag"}],staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.bookInfo.tag},on:{input:function(e){e.target.composing||t.$set(t.bookInfo,"tag",e.target.value)}}})]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("简介:")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.bookInfo.abs,expression:"bookInfo.abs"}],staticClass:"textarea",attrs:{type:"text",disabled:""},domProps:{value:t.bookInfo.abs},on:{input:function(e){e.target.composing||t.$set(t.bookInfo,"abs",e.target.value)}}})]),a("div",{staticClass:"group detailmain"},[a("div",{staticClass:"label"},[t._v("封面")]),a("span",{staticClass:"wrap"},[a("img",{staticClass:"coverImg",attrs:{src:t.bookInfo.img_src||t.bookInfo.img,disabled:""}})])]),t.isTheme?t._e():a("div",{staticClass:"group constiuteGroup"},[a("div",{staticClass:"label"},[t._v(t._s(t.typeDetail)+"构成:")]),a("span",{staticClass:"constiute"},["视读"!=t.typeDetail&&"听读"!=t.typeDetail&&"课件"!=t.typeDetail?[a("span",{staticClass:"li",class:{isCurrType:"1"==t.currType},on:{click:function(e){return t.change("books","1")}}},[t._v("阅读")]),a("span",{staticClass:"li",class:{isCurrType:"2"==t.currType},on:{click:function(e){return t.change("resources","2")}}},[t._v("资源")]),a("span",{staticClass:"li",class:{isCurrType:"4"==t.currType},on:{click:function(e){return t.change("audios","4")}}},[t._v("音频")]),a("span",{staticClass:"li",class:{isCurrType:"5"==t.currType},on:{click:function(e){return t.change("videos","5")}}},[t._v(" 视频")])]:t._e()],2)]),t.isTheme?a("div",{staticClass:"group constiuteGroup"},[a("div",{staticClass:"label"},[t._v("主题构成:")])]):t._e(),"课件"==t.typeDetail?a("div",{staticClass:"grouping"},[a("table",{staticClass:"table"},[a("thead",[a("tr",[a("th",[t._v("组名称")]),a("th",{attrs:{width:"100"}},[t._v("操作")])])])]),a("el-tree",{attrs:{data:t.bookInfo.components.videos,"node-key":"id","default-expand-all":"","expand-on-click-node":!1},scopedSlots:t._u([{key:"default",fn:function(e){e.node;var i=e.data;return a("span",{staticClass:"custom-tree-node"},[a("span",[t._v(t._s(i.name))]),a("span",{staticClass:"options",staticStyle:{float:"right"}},[a("div",{staticClass:"icon icon-detail",attrs:{title:"详情"},on:{click:function(e){return t.preview(i,i.children)}}})])])}}],null,!1,1640714200)})],1):t._e(),t.detailDataOwn&&"课件"!=t.typeDetail?a("div",{staticClass:"tableWrap"},[a("table",{staticClass:"table"},[a("thead",[a("tr",[a("th",[t._v("名称")]),a("th",[t._v("标签")]),a("th",[t._v("类型")]),a("th",[t._v("创建时间")]),a("th",[t._v("操作")])])]),a("tbody",t._l(t.detailDataOwn,function(e,i){return a("tr",[a("td",[a("div",{staticClass:"th-name"},[t._v(t._s(e.name))])]),a("td",[a("div",{staticClass:"th-name"},[t._v(t._s(e.tag))])]),a("td",[a("div",{staticClass:"th-name"},[t._v(t._s(e.type_name))])]),a("td",[a("div",{staticClass:"th-name"},[t._v(t._s(e.create_time))])]),a("td",[a("div",{staticClass:"th-name"},[a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(a){return t.preview(e)}}},[t._v("预览")])],1)])])}),0)])]):t._e()])])],1)]),a("el-tab-pane",{attrs:{label:"元数据",name:"data"}},[a("div",{staticClass:"meta"},t._l(t.bookInfo.attributes,function(e,i){return a("div",{staticClass:"group rowWrap"},[a("span",{domProps:{textContent:t._s(i+1)}}),a("span",{staticClass:"left",domProps:{textContent:t._s(e.key)}}),a("span",{staticClass:"right",domProps:{textContent:t._s(e.value)}})])}),0)]),a("el-tab-pane",{attrs:{label:"知识点",name:"know"}},[t.list?a("div",{staticClass:"KnowledgeWrap"},[a("ul",{staticClass:"left"},t._l(t.gList,function(e){return a("li",{on:{click:function(a){return t.handKnowledgeClick(e)}}},[t._v(t._s(e.name))])}),0),a("div",{staticClass:"right"},[a("p",{staticClass:"name",domProps:{textContent:t._s(t.currGroup.name)}}),a("table",{staticClass:"table"},[a("thead",[a("tr",[a("th",[t._v("知识点名称")]),a("th",[t._v("数量")]),a("th",[t._v("创建时间")])])]),a("tbody",t._l(t.list,function(e){return a("tr",[a("th",[t._v(t._s(e.name))]),a("th",[t._v(t._s(e.num))]),a("th",[t._v(t._s(e.create_time))])])}),0)])])]):t._e()])],1)],1)},r=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return r})},349:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"div"},[t.currGroupId?a("div",{staticClass:"content clearfix"},[a("div",{staticClass:"left"},[a("ul",t._l(t.glist,function(e){return a("div",{staticClass:"li",class:{currGroup:e.id==t.currGroupId},on:{click:function(a){return t.changeGroup(e)}}},[a("span",{staticClass:"name",attrs:{title:e.name+"(100)"},domProps:{textContent:t._s(e.name+"("+e.num+")")}})])}),0)]),a("div",{staticClass:"tableWrap"},[a("div",{staticClass:"nav clearfix"},[a("div",{staticClass:"name",domProps:{textContent:t._s(t.currGroup.name)}}),t.openAnchorList?a("div",{staticClass:"btns"},[a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){t.openAnchorList=!1}}},[t._v("返回")]),t.isBook?t._e():a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:t.addAnchor}},[t._v("增加锚点")]),!t.bookInfo||t.anchorType!=t.Anchors_chapter&&t.anchorType!=t.Anchors_contetn?t._e():a("el-select",{attrs:{placeholder:"书籍设置",size:"small"},on:{change:t.bookinfoChange,"visible-change":t.bookinfoBlur},model:{value:t.bookInfo.value,callback:function(e){t.$set(t.bookInfo,"value",e)},expression:"bookInfo.value"}},t._l(t.bookInfo.list,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1),a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){return t.removeAnchor()}}},[t._v("移除")])],1):a("div",{staticClass:"btns"},[a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){return t.KnowledgeEdit({})}}},[t._v("新增知识点")]),a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:t.toTop}},[t._v("置顶")]),a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){return t.knowDel()}}},[t._v("删除")])],1)]),t.openAnchorList?t._e():a("div",{ref:"mainListWrap",staticClass:"mainListWrap"},[a("table",{staticClass:"table"},[a("thead",[a("tr",[a("th",[t._v("全选"),a("input",{attrs:{type:"checkbox"},on:{click:function(e){t.checkedAll=!t.checkedAll}}})]),a("th",[t._v("名称")]),a("th",[t._v("数量")]),a("th",{attrs:{width:"160"}},[t._v("创建时间")]),a("th",{staticStyle:{"text-align":"center"},attrs:{width:"250"}},[t._v("操作")])])]),a("tbody",t._l(t.list,function(e){return a("tr",[a("th",[a("input",{attrs:{type:"checkbox",name:"ids"},domProps:{checked:t.checkedAll,value:e.id}})]),a("th",[t._v(t._s(e.name))]),a("th",[t._v(t._s(e.num))]),a("th",[t._v(t._s(e.create_time))]),a("th",[a("div",{staticClass:"btns"},[a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(a){return t.KnowledgeEdit(e)}}},[t._v("重命名")]),a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(a){return t.setAnchor(e.id)}}},[t._v("设置锚点")]),a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(a){return t.knowDel([e.id])}}},[t._v("删除")])],1)])])}),0)]),t.page?a("div",{staticClass:"pageWrap"},[a("el-pagination",{attrs:{small:!1,background:"","current-page":t.page.num,"page-sizes":[10,50,100],"page-size":t.page.offset,layout:"sizes,prev, pager, next, jumper",total:t.page.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1):t._e(),a("div",{staticClass:"btns"})]),t.openAnchorList?a("div",{staticClass:"anchorListWrap"},[a("div",{staticClass:"article"},[t.openAnchorList?a("table",{ref:"anchorList",staticClass:"table"},[a("thead",[a("tr",[a("th",{attrs:{colspan:"2"}},[a("div",{staticClass:"title"},[t._v("全选"),a("input",{attrs:{type:"checkbox"},on:{click:function(e){t.anchorCheckedAll=!t.anchorCheckedAll}}}),a("span",{staticClass:"btns"},[a("span",{class:{currAnchorType:t.anchorType==t.Anchors_chapter},on:{click:function(e){return t.changeAnchorType(t.Anchors_chapter)}}},[t._v("章节锚点")]),a("span",{class:{currAnchorType:t.anchorType==t.Anchors_contetn},on:{click:function(e){return t.changeAnchorType(t.Anchors_contetn)}}},[t._v("内容锚点")]),a("span",{class:{currAnchorType:t.anchorType==t.Anchors_audio},on:{click:function(e){return t.changeAnchorType(t.Anchors_audio)}}},[t._v("音频锚点")]),a("span",{class:{currAnchorType:t.anchorType==t.Anchors_video},on:{click:function(e){return t.changeAnchorType(t.Anchors_video)}}},[t._v("视频锚点")])])])]),a("th",{directives:[{name:"show",rawName:"v-show",value:t.isBook,expression:"isBook"}]},[t._v("所属图书")]),a("th",{staticClass:"btns",staticStyle:{"padding-right":"30px"},attrs:{width:"50"}},[t._v("操作")])])]),a("tbody",t._l(t.anchorList,function(e){return a("tr",[a("td",{staticStyle:{"padding-left":"50px",width:"100px","max-width":"100px"}},[a("input",{staticStyle:{"padding-left":"20px"},attrs:{type:"checkbox",name:"ids"},domProps:{checked:t.anchorCheckedAll,value:e.id}})]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.name))]),t.isBook?a("td",[t._v(t._s(e.book_name))]):t._e(),a("td",[a("div",{staticClass:"btns"},[a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(a){return t.removeAnchor([e.n_info_id])}}},[t._v("移除")])],1)])])}),0)]):t._e()])]):t._e()])]):t._e()])},r=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return r})},350:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{staticClass:"restBody2",attrs:{center:!1,visible:t.groupDialog,top:"50px",width:"1200px","show-close":!1,"append-to-body":""}},[a("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"el-icon-close",on:{click:t.colse}}),a("el-tabs",{attrs:{value:"ff"}},[a("el-tab-pane",{attrs:{label:t.setTitle,name:"ff"}})],1)],1),a("VaForm",{ref:"detailForm"},[a("form",{staticClass:"detailForm rowWrap"},[a("div",{staticClass:"group line"},[a("div",{staticClass:"label"},[t._v("基本信息(必填)")])]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("组名称:")]),a("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required'}"},{name:"model",rawName:"v-model",value:t.information.group_name,expression:"information.group_name"}],staticClass:"form-control",attrs:{type:"text",disabled:t.onlyShow},domProps:{value:t.information.group_name},on:{input:function(e){e.target.composing||t.$set(t.information,"group_name",e.target.value)}}})]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("定价:")]),a("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required'}"},{name:"model",rawName:"v-model",value:t.information.price,expression:"information.price"}],staticClass:"form-control",attrs:{type:"text",disabled:t.onlyShow},domProps:{value:t.information.price},on:{input:function(e){e.target.composing||t.$set(t.information,"price",e.target.value)}}}),a("span",[t._v(" 元")])]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("最低定价:")]),a("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required'}"},{name:"model",rawName:"v-model",value:t.information.min_price,expression:"information.min_price"}],staticClass:"form-control",attrs:{type:"text",disabled:t.onlyShow},domProps:{value:t.information.min_price},on:{input:function(e){e.target.composing||t.$set(t.information,"min_price",e.target.value)}}}),a("span",[t._v(" 元")])]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("主讲人:")]),a("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required'}"},{name:"model",rawName:"v-model",value:t.information.speaker,expression:"information.speaker"}],staticClass:"form-control",attrs:{type:"text",disabled:t.onlyShow},domProps:{value:t.information.speaker},on:{input:function(e){e.target.composing||t.$set(t.information,"speaker",e.target.value)}}})]),a("div",{staticClass:"group line"},[a("div",{staticClass:"label"},[t._v("其他信息")])]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("试听地址:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.information.src,expression:"information.src"}],staticClass:"form-control",attrs:{type:"url",disabled:t.onlyShow},domProps:{value:t.information.src},on:{input:function(e){e.target.composing||t.$set(t.information,"src",e.target.value)}}})]),a("div",{staticClass:"group line"},[a("div",{staticClass:"label",domProps:{textContent:t._s("2"==t.isMedia?"关联视频":"关联音频")}})]),a("div",{staticClass:"group"},[a("Tab",{ref:"video",attrs:{dataType:"audio",onlyShow:t.onlyShow,defaultList:t.list,detailData:t.item},on:{detail:function(e){return t.$emit("detail",e)},del:function(e){return t.del(e)}}}),t.onlyShow?t._e():a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.$emit("open",t.addMediaType)}}},[t._v("新增")])],1)])]),a("div",{staticClass:"footer dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info"},on:{click:t.colse}},[t._v("取消")]),t.onlyShow?t._e():a("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("确定")])],1)],1)],1)},r=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return r})},351:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"div"},[a("el-tabs",{attrs:{value:t.type},on:{"tab-click":t.handleClick}},[a("el-tab-pane",{attrs:{label:"详情",name:"xq"}},[a("div",{staticClass:"div"},[a("form",{ref:"infoForm",staticClass:"infoForm"},[a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("名称:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.infoData.name,expression:"infoData.name"}],staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.infoData.name},on:{input:function(e){e.target.composing||t.$set(t.infoData,"name",e.target.value)}}})]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("类型:")]),a("span",{staticClass:"types"},[a("span",[t._v(" "+t._s(t.infoData.type_name))]),a("span",[t._v(" 创建时间: "+t._s(t.infoData.create_time))])])]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("作者:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.infoData.author,expression:"infoData.author"}],staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.infoData.author},on:{input:function(e){e.target.composing||t.$set(t.infoData,"author",e.target.value)}}})]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("标签:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.infoData.tag,expression:"infoData.tag"}],staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.infoData.tag},on:{input:function(e){e.target.composing||t.$set(t.infoData,"tag",e.target.value)}}})]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("简介:")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.infoData.abs,expression:"infoData.abs"}],staticClass:"textarea",attrs:{type:"text",disabled:""},domProps:{value:t.infoData.abs},on:{input:function(e){e.target.composing||t.$set(t.infoData,"abs",e.target.value)}}})]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("详情:")])]),t.detailType&&3!=t.infoData.type?a("div",{staticClass:"group wailianinput"},[a("div",{staticClass:"label"}),a("span",[a("input",{ref:"otherImgInput",staticClass:"form-control",attrs:{disabled:""},domProps:{value:t.infoData.preview}})])]):t._e(),t.hassVideo||4==t.infoData.type?a("div",{staticClass:"group detailmain wailian"},[a("div",{staticClass:"label"}),a("span",{staticClass:"wrap"},[t.hassVideo?a("video",{attrs:{src:t.infoData.preview,controls:""}}):t._e(),4==t.infoData.type?a("audio",{attrs:{src:t.infoData.preview,controls:""}}):t._e(),a("span",{staticClass:"msg"},[a("div",{staticClass:"type"},[t._v("格式:"),a("span",{staticClass:"val",domProps:{textContent:t._s(t.infoData.format)}})]),a("div",{staticClass:"size"},[t._v("大小:"),a("span",{staticClass:"val",domProps:{textContent:t._s((t.infoData.size/1024).toFixed(2)+"KB")}})])])])]):t._e(),a("div",{staticClass:"group detailmain"},[a("div",{staticClass:"label"}),a("span",{staticClass:"wrap"},[a("img",{staticClass:"coverImg",attrs:{src:t.infoData.img_src||t.infoData.img}}),3==t.infoData.type?a("img",{staticClass:"coverImg",attrs:{src:t.infoData.preview_path}}):t._e()])]),10==t.infoData.type?a("div",{staticClass:"group"},[a("table",{staticClass:"table border",attrs:{width:"100%"}},[a("thead",[a("tr",[a("th",[t._v("名称")]),a("th",[t._v("标签")]),a("th",[t._v("作者")]),a("th",[t._v("发布时间")])])]),a("tbody",t._l(t.infoData.constitute,function(e,i){return a("tr",[a("td",{domProps:{textContent:t._s(e.name)}}),a("td",{domProps:{textContent:t._s(e.tag)}}),a("td",{domProps:{textContent:t._s(e.author)}}),a("td",{domProps:{textContent:t._s(e.create_time)}})])}),0)])]):t._e()])])]),"视读"!=t.typeDetail&&"听读"!=t.typeDetail?a("el-tab-pane",{attrs:{label:"元数据",name:"data"}},[a("div",{staticClass:"meta"},t._l(t.infoData.attributes,function(e,i){return t.infoData?a("div",{staticClass:"group rowWrap"},[a("div",{staticClass:"label",domProps:{textContent:t._s(i+1)}}),a("span",{staticClass:"form-control left",domProps:{textContent:t._s(e.key)}}),a("span",{staticClass:"form-control right",domProps:{textContent:t._s(e.value)}})]):t._e()}),0)]):t._e()],1)],1)},r=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return r})},352:function(t,e,a){"use strict";var i=function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("el-dialog",{attrs:{center:!1,visible:this.readerDialog,top:"50px",width:"1000px","show-close":!1,"append-to-body":""}},[e("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[e("i",{staticClass:"el-icon-close",on:{click:this.colse}}),e("el-tabs",{attrs:{value:"reader"}},[e("el-tab-pane",{attrs:{label:this.title,name:"reader"}})],1)],1),e("div",{ref:"readerIframe",staticClass:"content"},[e("div",{staticStyle:{height:"500px"},attrs:{id:"readerIframe"}})]),e("div",{staticClass:"footer dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"info"},on:{click:this.colse}},[this._v("关闭")])],1)])],1)},r=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return r})},353:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.list?a("div",{staticClass:"tableWrap"},[t.isShow&&!t.onlyShow?a("el-radio-group",{staticStyle:{"margin-bottom":"20px"},attrs:{size:"small"},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[a("el-radio-button",{attrs:{label:"1"}},[t._v("图集")]),a("el-radio-button",{attrs:{label:"2"}},[t._v("视频集")]),a("el-radio-button",{attrs:{label:"3"}},[t._v("音频集")])],1):t._e(),a("table",{staticClass:"table"},[a("thead",[a("tr",[a("th",[t._v("名称")]),a("th",[t._v("类型")]),t.isLabelHide?t._e():a("th",[t._v("标签")]),a("th",[t._v("创建时间")]),a("th",{attrs:{width:"100"}},[t._v("操作")])])]),a("tbody",[t.list.length?t._e():a("tr",[a("td",{staticClass:"colspan",attrs:{colspan:t.isLabelHide?4:5}},[t._v("暂无数据")])]),t._l(t.list,function(e,i){return a("tr",[a("th",[a("div",{staticClass:"th-name"},[t._v(t._s(e.name))])]),a("th",[a("div",{staticClass:"th-name"},[t._v(t._s(e.type_name))])]),t.isLabelHide?t._e():a("th",[a("div",{staticClass:"th-name"},[t._v(t._s(e.tag))])]),a("th",[a("div",{staticClass:"th-name"},[t._v(t._s(e.create_time))])]),a("th",[a("div",{staticClass:"icon icon-detail",attrs:{title:"详情"},on:{click:function(a){return t.$emit("detail",e)}}}),t.onlyShow?t._e():a("div",{staticClass:"icon icon-delete",attrs:{title:"删除"},on:{click:function(a){return t.$emit("del",e)}}})])])})],2)])],1):t._e()},r=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return r})},354:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"div"},[a("div",{staticClass:"serachWrapd"},[a("div",{staticClass:"title"}),a("form",{ref:"mainForm"},[a("span",{staticClass:"group-inline"},[t.bookInfo&&"章节锚点"==t.type?a("el-select",{attrs:{placeholder:"选择所属书籍",size:"small",clearable:""},model:{value:t.bookInfo.value,callback:function(e){t.$set(t.bookInfo,"value",e)},expression:"bookInfo.value"}},t._l(t.bookInfo.list,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1):t._e()],1),a("span",{staticClass:"group-inline"},[a("input",{staticClass:"form-control",attrs:{placeholder:t._f("formatHolder")(t.type),name:"name"}})]),a("span",{staticClass:"group-inline btn"},[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search",plain:""},on:{click:t.seareHandeler}},[t._v("搜索")]),a("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:t.addAnchorCommit}},[t._v("添加选中")])],1)])]),a("div",{staticClass:"tableWrap"},[a("table",{staticClass:"table"},[a("thead",[a("tr",[a("th",[t._v("全选"),a("input",{attrs:{type:"checkbox"},on:{click:t.checkedAll}})]),a("th",[t._v("名称")]),a("th",[t._v("创建时间")])])]),a("tbody",t._l(t.list,function(e){return a("tr",[a("th",[a("input",{ref:"ids",refInFor:!0,attrs:{type:"checkbox",name:"ids"},domProps:{checked:!!t.obj[e.id],value:e.id},on:{click:function(a){return t.choose(a,e)}}})]),a("th",[t._v(t._s(e.chapter_name||e.name))]),a("th",[t._v(t._s(e.create_time))])])}),0)]),t.page?a("div",{staticClass:"pageWrap"},[a("el-pagination",{attrs:{small:!1,background:"","current-page":t.page.num,"page-sizes":[10,50,100],"page-size":t.page.offset,layout:"total, sizes,prev, pager, next, jumper",total:t.page.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1):t._e()]),a("div",{staticClass:"btns"},[a("el-button",{attrs:{type:"info"},on:{click:function(e){return t.$emit("anchorListCancle")}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.addAnchorCommit}},[t._v("确定")])],1)])},r=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return r})},374:function(t,e,a){"use strict";a.r(e);var i=a(381),r=a(302);for(var n in r)"default"!==n&&function(t){a.d(e,t,function(){return r[t]})}(n);a(375);var o=a(0),s=Object(o.a)(r.default,i.a,i.b,!1,null,"ef8b70a8",null);e.default=s.exports},375:function(t,e,a){"use strict";var i=a(304);a.n(i).a},381:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"div"},[t.pustSetDialog?a("el-dialog",{attrs:{title:"上架设置",visible:t.pustSetDialog,width:"1000px",top:"50px","before-close":t.handleClose}},[a("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[a("el-tabs",{attrs:{value:"detail"}},[a("el-tab-pane",{attrs:{label:"上架设置",name:"detail"}})],1),t.putData.version_list?a("div",{staticClass:"choiceVersion"},[a("span",[t._v("版本选择")]),t._v(" "),a("select",{on:{change:function(e){return t.$emit("change",e,t.putData)}}},t._l(t.putData.version_list,function(e,i){return a("option",{domProps:{value:e,selected:t.putData.version_id==i}},[t._v(t._s(i))])}),0)]):t._e(),a("div",{staticClass:"formWrap"},[a("VaForm",{ref:"pustSetForm"},[a("form",{attrs:{id:"pustSetForm"}},[a("div",{staticClass:"group constiuteGroup"},[a("div",{staticClass:"label"},[t._v("图书构成:")]),a("span",{staticClass:"constiute"},[t.currentPut.prices.books?a("span",{staticClass:"li",class:{isCurrType:"1"==t.currType},on:{click:function(e){return t.changeCurrType("books","1")}}},[t._v("阅读")]):t._e(),t.currentPut.prices.resources?a("span",{staticClass:"li",class:{isCurrType:"5"==t.currType},on:{click:function(e){return t.changeCurrType("resources","5")}}},[t._v("资源")]):t._e(),t.currentPut.prices.audios?a("span",{staticClass:"li",class:{isCurrType:"3"==t.currType},on:{click:function(e){return t.changeCurrType("audios","3")}}},[t._v("音频")]):t._e(),t.currentPut.prices.videos?a("span",{staticClass:"li",class:{isCurrType:"4"==t.currType},on:{click:function(e){return t.changeCurrType("videos","4")}}},[t._v(" 视频")]):t._e()]),a("div",{staticClass:"btns"},[a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){return t.computePrice()}}},[t._v("计算价格")])],1),a("div",{staticClass:"line"}),a("div",{staticClass:"headerNav"},[a("div",{staticClass:"left",attrs:{id:"all_price"}},[a("span",{domProps:{textContent:t._s(t.getText("合集定价:"))}}),a("input",{directives:[{name:"show",rawName:"v-show",value:"books"==t.currIndex,expression:'currIndex=="books"'},{name:"model",rawName:"v-model",value:t.putDetailData.books_all_price,expression:"putDetailData.books_all_price"}],staticClass:"form-control books_all_price",attrs:{type:"text",name:"books_all_price"},domProps:{value:t.putDetailData.books_all_price},on:{input:function(e){e.target.composing||t.$set(t.putDetailData,"books_all_price",e.target.value)}}}),a("input",{directives:[{name:"show",rawName:"v-show",value:"resources"==t.currIndex,expression:'currIndex=="resources"'},{name:"model",rawName:"v-model",value:t.putDetailData.resources_all_price,expression:"putDetailData.resources_all_price"}],staticClass:"form-control resources_all_price",attrs:{type:"text",name:"resources_all_price"},domProps:{value:t.putDetailData.resources_all_price},on:{input:function(e){e.target.composing||t.$set(t.putDetailData,"resources_all_price",e.target.value)}}}),a("input",{directives:[{name:"show",rawName:"v-show",value:"audios"==t.currIndex,expression:'currIndex=="audios"'},{name:"model",rawName:"v-model",value:t.putDetailData.audio_all_price,expression:"putDetailData.audio_all_price"}],staticClass:"form-control audios_all_price",attrs:{type:"text",name:"audio_all_price"},domProps:{value:t.putDetailData.audio_all_price},on:{input:function(e){e.target.composing||t.$set(t.putDetailData,"audio_all_price",e.target.value)}}}),a("input",{directives:[{name:"show",rawName:"v-show",value:"videos"==t.currIndex,expression:'currIndex=="videos"'},{name:"model",rawName:"v-model",value:t.putDetailData.video_all_price,expression:"putDetailData.video_all_price"}],staticClass:"form-control videos_all_price",attrs:{type:"text",name:"video_all_price"},domProps:{value:t.putDetailData.video_all_price},on:{input:function(e){e.target.composing||t.$set(t.putDetailData,"video_all_price",e.target.value)}}}),a("span",[t._v("元")])]),a("div",{staticClass:"right"},[a("span",{domProps:{textContent:t._s(t.getText("定价策略:"))}}),"books"!=t.currIndex?a("el-radio",{attrs:{label:"1"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("平均定价")]):t._e(),"books"==t.currIndex?a("el-radio",{attrs:{label:"1",name:"books_type"},model:{value:t.radio2,callback:function(e){t.radio2=e},expression:"radio2"}},[t._v("平均定价")]):t._e(),"books"==t.currIndex?a("el-radio",{attrs:{label:"2",name:"books_type"},model:{value:t.radio2,callback:function(e){t.radio2=e},expression:"radio2"}},[t._v("篇幅定价")]):t._e()],1)]),t.currentPut?a("div",{staticClass:"tableBox"},[a("table",{staticClass:"table"},[a("thead",[a("tr",[a("th",{domProps:{textContent:t._s(t.getText("名称"))}}),a("th",{domProps:{textContent:t._s(t.getText("价格"))}}),a("th",[t._v("操作")])])]),a("tbody",t._l(t.constitute,function(e,i){return a("tr",["books"==t.currIndex?a("td",[a("div",{staticClass:"th-name"},[t._v(t._s(e.name))])]):t._e(),"books"==t.currIndex?a("td",[a("div",{staticClass:"th-name"},[t._v(t._s(e.price))])]):t._e(),"books"!=t.currIndex?a("td",[a("div",{staticClass:"th-name"},[t._v(t._s(e.name))])]):t._e(),"books"!=t.currIndex?a("td",[a("div",{staticClass:"th-name"},[t._v(t._s(e.price))])]):t._e(),a("td",[a("div",{staticClass:"th-name"},[0==e.price?a("el-button",{attrs:{size:"mini","data-type":"free",type:"primary",plain:""},domProps:{textContent:t._s("已免费")},on:{click:function(a){return t.noFree(e.id,a)}}},[t._v("已免费")]):t._e(),0!=e.price?a("el-button",{attrs:{size:"mini","data-type":"nofree",type:"primary",plain:""},domProps:{textContent:t._s(t.getText("免费"))},on:{click:function(a){return t.free(e.id,a)}}}):t._e()],1)])])}),0)])]):t._e(),a("div",{staticClass:"line"})]),a("div",{staticClass:"group putPlate"},[a("label",{staticClass:"label"},[t._v("上架板块:")]),t.currentPut.prices.audios?a("div",{staticClass:"div"},[a("input",{ref:"put_audio",attrs:{type:"checkbox",name:"put_audio",disabled:t.currentPut.audios_disabled,value:"1"},domProps:{checked:t.currentPut.put_audio>0},on:{click:function(e){return t.clickChebox("put_audio")}}}),a("span",[t._v("听读")])]):t._e(),t.currentPut.prices.videos?a("div",{staticClass:"div"},[a("input",{ref:"put_video",attrs:{type:"checkbox",name:"put_video",disabled:t.currentPut.videos_disabled,value:"1"},domProps:{checked:t.currentPut.put_video>0},on:{click:function(e){return t.clickChebox("put_video")}}}),a("span",[t._v("视读")])]):t._e(),a("div",{staticClass:"div"},[a("input",{ref:"put_category",attrs:{type:"checkbox",name:"put_category",value:"1"},domProps:{checked:t.currentPut.put_category>0},on:{click:function(e){return t.clickChebox("put_category")}}}),a("span",[t._v("书城分类")]),t.oneList.list?a("el-select",{staticClass:"select",attrs:{name:"category_id"},on:{change:function(e){return t.oneChange(e)}},model:{value:t.oneList.value,callback:function(e){t.$set(t.oneList,"value",e)},expression:"oneList.value"}},t._l(t.oneList.list,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1):t._e(),t.twoList.list.length?a("el-select",{staticClass:"select",attrs:{name:"category_id"},model:{value:t.twoList.value,callback:function(e){t.$set(t.twoList,"value",e)},expression:"twoList.value"}},t._l(t.twoList.list,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1):t._e()],1),a("div",{staticClass:"div"},[a("input",{ref:"put_head_book",attrs:{type:"checkbox",name:"put_head_book",value:"1"},domProps:{checked:t.currentPut.put_head_book>0},on:{click:function(e){return t.clickChebox("put_head_book")}}}),a("span",[t._v("书城头部")]),t.threeList.list?a("el-select",{staticClass:"select",attrs:{name:"head_book_id"},model:{value:t.threeList.value,callback:function(e){t.$set(t.threeList,"value",e)},expression:"threeList.value"}},t._l(t.threeList.list,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1):t._e()],1)]),a("div",{staticClass:"line"}),a("div",{staticClass:"group putPlate"},[a("label",{staticClass:"label"},[t._v("分销设置:")]),a("div",{staticClass:"div"},[a("input",{ref:"distribute",attrs:{type:"checkbox",id:"fenxiao",name:"distribute",value:"1"},domProps:{checked:t.currentPut.distribute>0},on:{click:function(e){return t.clickChebox("distribute")}}}),a("label",{attrs:{for:"fenxiao"}},[t._v("启用分销")])])])])])],1),a("div",{staticClass:"dialog-footer btns",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info"},on:{click:function(e){return t.$emit("close")}}},[t._v("取消")]),"1"!=t.putData.status?a("el-button",{attrs:{type:"primary"},on:{click:t.pustSetSave}},[t._v("确定")]):t._e()],1)],1)]):t._e()],1)},r=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return r})},533:function(t,e,a){"use strict";a.r(e);var i=a(534),r=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,function(){return i[t]})}(n);e.default=r.a},534:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},r=p(a(315)),n=(p(a(258)),a(265)),o=p(a(331)),s=p(a(318)),u=p(a(374)),l=d(a(710)),c=(d(a(78)),a(46));function d(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}function p(t){return t&&t.__esModule?t:{default:t}}e.default={components:{GroupList:r.default,Detail:o.default,MoveGroup:s.default,putSetPage:u.default},mixins:[n.main],data:function(){return{services:l,detailDialog:!1,detailDialoaType:"xq",detailData:null,putDetailData:{},moveToOtherDiaolog:!1,moveIds:null,toId:null,pustSetDialog:!1}},methods:i({setList:function(t){this.setMediaBooklist(t)},setGroupList:function(t){this.setMediaBookGrouplist(t)},setPage:function(t){this.setMediaBooklistPage(t)}},(0,c.mapMutations)(["setMediaBooklist","setMediaBookGrouplist","setMediaBooklistPage"]),{putSet:function(t){var e=this;this.services.courseSetInfo({id:t}).then(function(a){e.currentPut={book_id:t,data:a.data},e.pustSetDialog=!0})},pustSetSave:function(){var t=this;this.services.putSave(this.currentPut).then(function(e){t.pustSetDialog=!1,t.getList()})}}),computed:i({},(0,c.mapState)({list:function(t){return t.mediaBook.list},groupList:function(t){return t.mediaBook.groupList},page:function(t){return t.mediaBook.page}}))}},535:function(t,e,a){}}]);