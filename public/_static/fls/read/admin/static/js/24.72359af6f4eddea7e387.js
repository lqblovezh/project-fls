/*!
 * {
 *   "buildtime": "2019-05-31 16:22:54",
 *   "workspace": "F:\\X-BOOK\\xcloud\\x-book4\\js",
 *   "username": "LQB",
 *   "hostname": "DESKTOP-QL56OJS",
 *   "platform": "win32",
 *   "git": {
 *     "branch": "master",
 *     "hash": "fbc007935",
 *     "message": [
 *       "commit fbc00793544e5767db1868f95f89c64b93f3aa79",
 *       "Author: 骆秋波 <1277678760@qq.com>",
 *       "Date:   Fri May 31 15:21:03 2019 +0800",
 *       "    打包上传"
 *     ],
 *     "user": "骆秋波",
 *     "email": "1277678760@qq.com",
 *     "remote": [
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (fetch)",
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (push)"
 *     ]
 *   }
 * }
 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{1229:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetDefaultAudio=void 0;var r,i,a=s(n(19)),o=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.resetDefaultAudio=(r=a.default.mark(function e(t,n){var r=o(t,2),i=r[0],s=r[1],d=o(n,2),l=d[0],f=d[1];return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=4;break}return e.next=3,(0,c.getTask)(i,{is_chunk:!0,size:1048576});case 3:l=e.sent.data.path;case 4:if(!s){e.next=8;break}return e.next=7,(0,c.getTask)(s,{is_chunk:!0,size:1048576});case 7:f=e.sent.data.path;case 8:return e.abrupt("return",(0,u.request_post)("/api/audio_product",{preview:l,img:f}));case 9:case"end":return e.stop()}},e,this)}),i=function(){var e=r.apply(this,arguments);return new Promise(function(t,n){return function r(i,a){try{var o=e[i](a),u=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});t(u)}("next")})},function(e,t){return i.apply(this,arguments)});t.getDefaultInfo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,u.request_get)("/api/audio_product/default_audio",e)};var u=n(45),c=(s(n(77)),n(327));function s(e){return e&&e.__esModule?e:{default:e}}},1230:function(e,t,n){"use strict";var r=n(576);n.n(r).a},1273:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mainRight"},[n("div",{staticClass:"contentWrap"},[n("div",{staticClass:"contentLeft"},[n("div",{staticClass:"maindata"},[n("div",{staticClass:"box"},[e._m(0),n("div",{staticClass:"AudioInfo"},[n("div",{staticClass:"videoAddr"},[n("p",[e._v("默认音频:")]),n("audio",{ref:"media",attrs:{src:e.previewMediaUrl,controls:""}})]),n("div",{staticClass:"select"},[n("el-button",{staticStyle:{"margin-top":"20px"},attrs:{size:"mini",type:"primary",plain:""},on:{click:function(t){return e.$refs.meidaFile.click()}}},[e._v("音频上传")]),n("input",{ref:"meidaFile",staticClass:"hide",attrs:{type:"file",accept:e.mediaType&&"voice"==e.mediaType?e.$config.voiceAccept:e.$config.videoAccept},on:{change:e.previewMedia}})],1),n("div",{staticClass:"imgAddr"},[n("p",[e._v("默认封面:")]),n("img",{staticClass:"coverImg",attrs:{src:e.previewImgUrl}})]),n("div",{staticClass:"select"},[n("el-button",{staticStyle:{"margin-top":"20px"},attrs:{size:"mini",type:"primary",plain:""},on:{click:function(t){return e.$refs.coverInput.click()}}},[e._v("图片上传")]),n("input",{ref:"coverInput",staticClass:"hide",attrs:{type:"file",accept:e.$config.imgAccept},on:{change:e.previewImg}}),n("div",{staticClass:"submit"},[n("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(t){return e.submit()}}},[e._v("确定")])],1)],1)])])])])])])},i=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"tableWrap"},[t("div",{staticClass:"tableTop"},[t("div",{staticClass:"title vel-line"},[t("span",[this._v("默认音频(默认为用户打开任何音频是播放音频，建议上传出版社介绍音频)")])])])])}];n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i})},238:function(e,t,n){"use strict";n.r(t);var r=n(1273),i=n(574);for(var a in i)"default"!==a&&function(e){n.d(t,e,function(){return i[e]})}(a);n(1230);var o=n(0),u=Object(o.a)(i.default,r.a,r.b,!1,null,"1d37c4c2",null);t.default=u.exports},327:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTask=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];return e.size,e.size>=1048576?(t.is_chunk=!0,(0,r.request_post)("/common/api/files/upload_task?r="+Math.random(5)).then(function(i){if(i.status)return t.task_id=i.data.task_id,(0,r.request_file)("/common/api/files/upload",{file:e,data:t},n);throw new Error(i.messages)}).catch(function(e){throw new Error("上传失败")})):(t.is_chunk=!1,(0,r.request_file)("/common/api/files/upload",{file:e,data:t}))},t.getAppId=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_get)("/common/api/app/search_name",e).then(function(e){return i.default.app_id=e.data.id,sessionStorage.app_id=e.data.id,e})},t.getClientToken=function(){return(0,r.request_post)("/common/api/auth/token/pcclient")},t.platInfo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_get)(u(e)).then(function(e){return i.default.app_id=e.data.id,sessionStorage.app_id=e.data.id,document.title=e.data.name,e})},t.commonPreview=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_get)(s(e))},t.getDefaultCover=function(){return(0,r.request_get)("/api/videos/images")},t.generate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)("/common/api/qr_code/generate",e)},t.commonPreviewCode=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)("/api/preview",e)},t.getQrcode=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_get)("/common/api/get_qrcode",e)},t.synchronization=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_get)(c(e)).then(function(e){return e})},t.getAuthor=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_get)("/api/ecommerce/author",e)},t.addAuthor=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)("/api/ecommerce/author",e)},t.getWeixinConfig=function(e){return(0,r.request_get)("/common/api/third/wx_js_sdk/config",e)},t.getIndexInfo=function(){return(0,r.request_get)("/common/api/current")};o(n(20));var r=n(45),i=o(n(47)),a=o(n(77));function o(e){return e&&e.__esModule?e:{default:e}}a.default.compile("/common/api/files/upload_task/:id"),a.default.compile("/common/api/manager/managers/:id"),a.default.compile("/common/api/manager/roles/:id");var u=a.default.compile("/common/api/app/apps/:id"),c=a.default.compile("/common/api/dragon_infos/:id");var s=a.default.compile("/api/preview/:id")},574:function(e,t,n){"use strict";n.r(t);var r=n(575),i=n.n(r);for(var a in r)"default"!==a&&function(e){n.d(t,e,function(){return r[e]})}(a);t.default=i.a},575:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(19)),i=(a(n(106)),n(1229));n(327);function a(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(i,a){try{var o=t[i](a),u=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}("next")})}}t.default={data:function(){return{defaultAudioInfo:"",mediaFile:null,coverFile:null,previewImgUrl:null,previewMediaUrl:null,mediaType:"voice",mediaTypeName:"音频"}},mounted:function(){this.getAudioInfo()},methods:{getAudioInfo:function(){var e=this;return o(r.default.mark(function t(){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,i.getDefaultInfo)().then(function(t){e.previewImgUrl=t.data.img_src,e.previewMediaUrl=t.data.preview_src});case 2:case"end":return t.stop()}},t,e)}))()},previewImg:function(e){var t=e.target.files[0];this.coverFile=t,this.previewImgUrl=URL.createObjectURL(t)},previewMedia:function(e){var t=e.target.files[0];this.mediaFile=t,dir(t),this.previewMediaUrl=URL.createObjectURL(t)},submit:function(){var e=this;return o(r.default.mark(function t(){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,i.resetDefaultAudio)([e.mediaFile,e.coverFile],[e.previewMediaUrl,e.previewImgUrl]).then(function(e){return e.data.path});case 3:e.$message.success("媒体文件上传成功!"),t.next=11;break;case 6:return t.prev=6,t.t0=t.catch(0),console.error(t.t0),e.$message.error("媒体文件上传失败!"),t.abrupt("return");case 11:case"end":return t.stop()}},t,e,[[0,6]])}))()}}}},576:function(e,t,n){}}]);