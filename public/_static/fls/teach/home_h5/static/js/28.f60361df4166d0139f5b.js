/*!
 * {
 *   "buildtime": "2019-05-31 16:22:54",
 *   "workspace": "F:\\X-BOOK\\xcloud\\x-book4\\js",
 *   "username": "LQB",
 *   "hostname": "DESKTOP-QL56OJS",
 *   "platform": "win32",
 *   "git": {
 *     "branch": "master",
 *     "hash": "fbc007935",
 *     "message": [
 *       "commit fbc00793544e5767db1868f95f89c64b93f3aa79",
 *       "Author: 骆秋波 <1277678760@qq.com>",
 *       "Date:   Fri May 31 15:21:03 2019 +0800",
 *       "    打包上传"
 *     ],
 *     "user": "骆秋波",
 *     "email": "1277678760@qq.com",
 *     "remote": [
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (fetch)",
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (push)"
 *     ]
 *   }
 * }
 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{195:function(e,t,n){"use strict";n.r(t);var i=n(855),o=n(406);for(var a in o)"default"!==a&&function(e){n.d(t,e,function(){return o[e]})}(a);n(630);var r=n(0),s=Object(r.a)(o.default,i.a,i.b,!1,null,"75971dc0",null);t.default=s.exports},221:function(e,t,n){"use strict";n.r(t);var i=n(222),o=n.n(i);for(var a in i)"default"!==a&&function(e){n.d(t,e,function(){return i[e]})}(a);t.default=o.a},222:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{hideBack:{},type:{},privateStyle:{},isRewrite:{type:Boolean,default:!1}},computed:{isShowSearch:function(){return!!this.isSearch},isShowBack:function(){return!this.hideBack}},methods:{goBack:function(){this.isRewrite?this.$emit("back"):this.$router.go(-1)},goSearch:function(){this.$router.push({name:"search"})},share:function(){}}}},223:function(e,t,n){},224:function(e,t,n){"use strict";n.r(t);var i=n(226),o=n(221);for(var a in o)"default"!==a&&function(e){n.d(t,e,function(){return o[e]})}(a);n(225);var r=n(0),s=Object(r.a)(o.default,i.a,i.b,!1,null,"bc7c4e9e",null);t.default=s.exports},225:function(e,t,n){"use strict";var i=n(223);n.n(i).a},226:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"header",style:e.privateStyle},[n("div",{staticClass:"header-left"},[e._t("left",[n("span",{staticClass:"icon-go-back icon-back",on:{click:e.goBack}})])],2),n("div",{staticClass:"header-center text-center"},[e._t("center")],2),n("div",{staticClass:"header-right text-right"},[e._t("right",["share"===e.type?n("span",{staticClass:"icon-share",on:{click:e.share}}):"search"===e.type?n("span",{staticClass:"icon-search_h",on:{click:e.goSearch}}):n("span",{staticClass:"placeholder"})])],2)])},o=[];n.d(t,"a",function(){return i}),n.d(t,"b",function(){return o})},227:function(e,t,n){"use strict";function i(e){return e&&"[object Array]"===Object.prototype.toString.call(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.findItem=function(e,t){return t.filter(function(t){return t.id===e||t.children.some(function(t){return t.id===e})})},t.isArray=i,t.isEmptyObj=function(e){for(var t in e)return!1;return!0},t.getResource=function(e,t){var n={};return e&&t&&t.forEach(function(t){e.forEach(function(e){e.teaching_plan.forEach(function(e){e.teaching_plan_info.forEach(function(e){e.b_id===t.b_id&&(n[t.b_id]=e)})})})}),n},t.extract=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"reply";e.forEach(function(e){!function n(o){o.forEach(function(o){i(o[t])&&o[t].length>0&&n(o[t]),o.layer>2&&e[t].push(o)})}(e[t]),e[t].sort(function(e,t){return Date.parse(t.create_time)-Date.parse(e.create_time)})})},t.getInfoOfResource=function(e,t){var n={};return n.course_id=e.id,e.course_period_list&&e.course_period_list.forEach(function(e){e.teaching_plan&&e.teaching_plan.forEach(function(i){i.teaching_plan_info&&i.teaching_plan_info.forEach(function(o){o.id===t&&(n.course_hour_id=e.id,n.course_teaching_id=i.id,n.type=o.type)})})}),n.course_teaching_plan_id=t,n},t.getNextResource=function(e,t){var n={course_teaching_plan_id:-1},i=0;return e.course_period_list&&e.course_period_list.forEach(function(e){e.teaching_plan&&e.teaching_plan.forEach(function(o){o.teaching_plan_info&&o.teaching_plan_info.forEach(function(a){1!==i&&a.id!==t||(n.type=a.type,n.course_teaching_plan_id=a.id,n.course_teaching_id=o.id,n.course_hour_id=e.id),i=a.id===t?1:0})})}),n},t.getCurResource=function(e,t){var n={ids:{},data:null};return e.course_period_list&&e.course_period_list.forEach(function(i){i.teaching_plan&&i.teaching_plan.forEach(function(o){o.teaching_plan_info&&o.teaching_plan_info.forEach(function(a){a.id===t&&(n.data=a,n.ids={course_id:e.id,course_hour_id:i.id,course_plan_id:o.id,course_plan_info_id:a.id})})})}),n}},229:function(e,t,n){"use strict";var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=u(n(235)),a=n(227),r=n(230),s=n(6),c=u(n(239));function u(e){return e&&e.__esModule?e:{default:e}}var d=new o.default({phone:{required:!0,length:11,message:{required:"请输入手机号",length:"手机号码长度应为11位"}}}),l={data:function(){return{img_code:{code_id:null,code_img:null},img_code_val:null,code_tip:"发送验证码",duration:60,timer:null}},methods:{getImgCode:function(){var e=this;this.$service.user.codeImage().then(function(t){e.img_code=t.data})},validatePhone:function(){var e=d.validate({phone:this.info.phone});return!(e.length>0)||(this.$Toast({message:e[0].toString()}),!1)},setTimer:function(){var e=this;if(null===this.timer){var t=this.duration;!function n(){e.code_tip=t+"秒后再试",t-- >0?e.timer=setTimeout(n,1e3):(e.code_tip="发送验证码",e.timer=null)}()}},sendCheckCode:function(){var e=this;null!==this.img_code_val?this.validatePhone()&&!this.timer&&this.$service.user.codePhone({phone:this.info.phone,code_id_img:this.img_code.code_id,code_val_img:this.img_code_val,not_check_user_exist:1}).then(function(t){e.$Toast({message:"发送成功",iconClass:"icon-toast icon-success"}),e.setTimer(),e.info.code_id=t.data.code_id}).catch(function(t){e.$Toast({iconClass:"icon-toast icon-failed",message:"发送失败"})}):this.$Toast({message:"请输入图片验证码"})}}},f={computed:i({},(0,s.mapState)("user",["userInfo"])),methods:i({},(0,s.mapMutations)("common",["setLoginLayer"]),{checkIsLogin:function(){return!!this.userInfo||(this.setLoginLayer(!0),!1)}})},h={data:function(){return{next:null}},computed:i({},(0,s.mapState)("course",["courseInfo","curResources"])),mounted:function(){this.next=(0,a.getNextResource)(JSON.parse(JSON.stringify(this.courseInfo)),this.curResources.id)}},_={computed:i({},(0,s.mapState)("course",{courseInfo:function(e){return e.courseInfo}}),(0,s.mapGetters)("course",["cItem"])),methods:i({},(0,s.mapMutations)("course",["SET_RESOURCE"]),{continueStudy:function(){var e=this.getCurrent();if(e){var t=e.data;this.SET_RESOURCE(t);switch(t.type){case 1:this.goReader(e);break;case 3:this.goPlayer("pic",e);break;case 4:this.goPlayer("audio",e);break;case 5:this.goPlayer("video",e)}}},goPlayer:function(e,t){var n=t.ids;this.$goByName(e,{query:i({},n)})},goReader:function(e,t){var n=this,o=t.ids,a=t.data;c.default.setItem("access_code",a.access_code).then(function(){n.$goByName("reader",{query:i({book_id:a.b_id,product_id:n.courseInfo.publish_id},o)})})},getCurrent:function(){return this.courseInfo.end_speed_info?(0,a.getCurResource)(JSON.parse(JSON.stringify(this.courseInfo)),this.courseInfo.end_speed_info.course_teaching_plan_id):this.cItem[0]}})},p={computed:i({},(0,s.mapState)("course",["courseInfo"])),methods:i({},(0,s.mapMutations)("course",["SET_RESOURCE"]),{viewResource:function(e){var t=(0,r.getRelatedRescourse)(JSON.parse(JSON.stringify(this.courseInfo)),e.b_id);switch(t.data&&this.SET_RESOURCE(t.data),t.data.type){case 1:this.goReader(t);break;case 3:this.goPlayer("pic",t);break;case 4:this.goPlayer("audio",t);break;case 5:this.goPlayer("video",t)}},goPlayer:function(e,t){var n=t.ids;this.$goByName(e,{query:i({},n)})},goReader:function(e){var t=this,n=e.ids,o=e.data;c.default.setItem("access_code",o.access_code).then(function(){t.$goByName("reader",{query:i({book_id:o.b_id,product_id:t.courseInfo.publish_id},n)})})}})},g={computed:i({},(0,s.mapState)("course",["courseInfo"])),beforeMount:function(){!this.courseInfo&&this.$route.query.cid&&this.SET_COURSE_INFO(this.$route.query.cid)},methods:i({},(0,s.mapActions)("course",["SET_COURSE_INFO"]))};e.exports={code:l,user:f,inputArea:{data:function(){return{isShowTextField:!1,commentList:[],word:"",myReply:null}},methods:{showTextField:function(){var e=this;this.$refs.layer.show(),this.$nextTick(function(){e.$refs.myInput.focus()})},hideTextField:function(e){this.isShowTextField=!1,this.initState()},initState:function(){this.word="",this.myph="发表评论",this.myReply=null}}},charEll:{data:function(){return{maxLength:46}},methods:{maxSlice:function(e){return"string"==typeof e&&e.length>this.maxLength?e.slice(0,this.maxLength)+"...":e}}},nextResource:h,continueStudy:_,releateToResource:p,CourseInfo:g}},230:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRelatedRescourse=function(e,t){var n={ids:{},data:null};return e.course_period_list&&e.course_period_list.forEach(function(i){i.teaching_plan&&i.teaching_plan.forEach(function(o){o.teaching_plan_info&&o.teaching_plan_info.forEach(function(a){a.b_id===t&&(n.ids={course_id:e.id,course_hour_id:i.id,course_plan_id:o.id,course_plan_info_id:a.id},n.data=a)})})}),n}},406:function(e,t,n){"use strict";n.r(t);var i=n(407),o=n.n(i);for(var a in i)"default"!==a&&function(e){n.d(t,e,function(){return i[e]})}(a);t.default=o.a},407:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=n(6),a=s(n(224)),r=(s(n(235)),n(229));function s(e){return e&&e.__esModule?e:{default:e}}t.default={mixins:[r.code],data:function(){return{info:{phone:null,code_id:null,code_val:null}}},components:{Head:a.default},mounted:function(){this.getImgCode()},methods:i({},(0,o.mapMutations)("user",["setUserInfo"]),{backToLogin:function(){this.$router.replace({path:"login"})},login:function(){var e=this;this.$service.user.phoneLogin(i({},this.info)).then(function(t){e.$Toast("登陆成功"),e.setUserInfo(t.data.user),e.$router.go(-1)}).catch(function(t){e.$Toast({message:t.payload.errors[0]})})}})}},408:function(e,t,n){},630:function(e,t,n){"use strict";var i=n(408);n.n(i).a},855:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pt88-static__vh"},[n("Head",[n("p",{attrs:{slot:"left"},on:{click:e.backToLogin},slot:"left"},[n("span",{staticClass:"icon-back"})]),n("p",{attrs:{slot:"center"},slot:"center"},[e._v("短信验证码登录")]),n("p",{attrs:{slot:"right"},slot:"right"})]),n("div",{staticClass:"p3"},[e._m(0),n("form",[e._m(1),n("div",{staticClass:"form-control"},[n("span",{staticClass:"icon-phone"}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.info.phone,expression:"info.phone"}],attrs:{type:"text",placeholder:"请输入手机号"},domProps:{value:e.info.phone},on:{input:function(t){t.target.composing||e.$set(e.info,"phone",t.target.value)}}})]),n("div",{staticClass:"form-control"},[n("span",{staticClass:"icon-envelope_s"}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.img_code_val,expression:"img_code_val"}],attrs:{type:"text",placeholder:"请输入图片验证码"},domProps:{value:e.img_code_val},on:{input:function(t){t.target.composing||(e.img_code_val=t.target.value)}}}),n("img",{attrs:{src:e.img_code.code_img},on:{click:e.getImgCode}})]),n("div",{staticClass:"form-control"},[n("span",{staticClass:"icon-key"}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.info.code_val,expression:"info.code_val"}],attrs:{type:"text",placeholder:"请输入短信验证码"},domProps:{value:e.info.code_val},on:{input:function(t){t.target.composing||e.$set(e.info,"code_val",t.target.value)}}}),n("span",{staticClass:"btn-send",on:{click:e.sendCheckCode}},[e._v("获取验证码")])])]),n("button",{staticClass:"btn-large",on:{click:function(t){return t.preventDefault(),e.login(t)}}},[e._v("登录")])])],1)},o=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"img-panel text-center"},[t("div",{staticClass:"img-login_bg"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"info-menu"},[t("div",{staticClass:"info-item"},[t("p",[this._v("国家/地区")]),t("p",[this._v("中国 +86"),t("span",{staticClass:"icon-small icon-enter"})])])])}];n.d(t,"a",function(){return i}),n.d(t,"b",function(){return o})}}]);