/*!
 * {
 *   "buildtime": "2019-05-31 16:22:54",
 *   "workspace": "F:\\X-BOOK\\xcloud\\x-book4\\js",
 *   "username": "LQB",
 *   "hostname": "DESKTOP-QL56OJS",
 *   "platform": "win32",
 *   "git": {
 *     "branch": "master",
 *     "hash": "fbc007935",
 *     "message": [
 *       "commit fbc00793544e5767db1868f95f89c64b93f3aa79",
 *       "Author: 骆秋波 <1277678760@qq.com>",
 *       "Date:   Fri May 31 15:21:03 2019 +0800",
 *       "    打包上传"
 *     ],
 *     "user": "骆秋波",
 *     "email": "1277678760@qq.com",
 *     "remote": [
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (fetch)",
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (push)"
 *     ]
 *   }
 * }
 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{219:function(t,e,i){"use strict";i.r(e);var r=i(853),n=i(528);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);i(801);var s=i(0),c=Object(s.a)(n.default,r.a,r.b,!1,null,"100145f4",null);e.default=c.exports},221:function(t,e,i){"use strict";i.r(e);var r=i(222),n=i.n(r);for(var o in r)"default"!==o&&function(t){i.d(e,t,function(){return r[t]})}(o);e.default=n.a},222:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{hideBack:{},type:{},privateStyle:{},isRewrite:{type:Boolean,default:!1}},computed:{isShowSearch:function(){return!!this.isSearch},isShowBack:function(){return!this.hideBack}},methods:{goBack:function(){this.isRewrite?this.$emit("back"):this.$router.go(-1)},goSearch:function(){this.$router.push({name:"search"})},share:function(){}}}},223:function(t,e,i){},224:function(t,e,i){"use strict";i.r(e);var r=i(226),n=i(221);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);i(225);var s=i(0),c=Object(s.a)(n.default,r.a,r.b,!1,null,"bc7c4e9e",null);e.default=c.exports},225:function(t,e,i){"use strict";var r=i(223);i.n(r).a},226:function(t,e,i){"use strict";var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"header",style:t.privateStyle},[i("div",{staticClass:"header-left"},[t._t("left",[i("span",{staticClass:"icon-go-back icon-back",on:{click:t.goBack}})])],2),i("div",{staticClass:"header-center text-center"},[t._t("center")],2),i("div",{staticClass:"header-right text-right"},[t._t("right",["share"===t.type?i("span",{staticClass:"icon-share",on:{click:t.share}}):"search"===t.type?i("span",{staticClass:"icon-search_h",on:{click:t.goSearch}}):i("span",{staticClass:"placeholder"})])],2)])},n=[];i.d(e,"a",function(){return r}),i.d(e,"b",function(){return n})},227:function(t,e,i){"use strict";function r(t){return t&&"[object Array]"===Object.prototype.toString.call(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.findItem=function(t,e){return e.filter(function(e){return e.id===t||e.children.some(function(e){return e.id===t})})},e.isArray=r,e.isEmptyObj=function(t){for(var e in t)return!1;return!0},e.getResource=function(t,e){var i={};return t&&e&&e.forEach(function(e){t.forEach(function(t){t.teaching_plan.forEach(function(t){t.teaching_plan_info.forEach(function(t){t.b_id===e.b_id&&(i[e.b_id]=t)})})})}),i},e.extract=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"reply";t.forEach(function(t){!function i(n){n.forEach(function(n){r(n[e])&&n[e].length>0&&i(n[e]),n.layer>2&&t[e].push(n)})}(t[e]),t[e].sort(function(t,e){return Date.parse(e.create_time)-Date.parse(t.create_time)})})},e.getInfoOfResource=function(t,e){var i={};return i.course_id=t.id,t.course_period_list&&t.course_period_list.forEach(function(t){t.teaching_plan&&t.teaching_plan.forEach(function(r){r.teaching_plan_info&&r.teaching_plan_info.forEach(function(n){n.id===e&&(i.course_hour_id=t.id,i.course_teaching_id=r.id,i.type=n.type)})})}),i.course_teaching_plan_id=e,i},e.getNextResource=function(t,e){var i={course_teaching_plan_id:-1},r=0;return t.course_period_list&&t.course_period_list.forEach(function(t){t.teaching_plan&&t.teaching_plan.forEach(function(n){n.teaching_plan_info&&n.teaching_plan_info.forEach(function(o){1!==r&&o.id!==e||(i.type=o.type,i.course_teaching_plan_id=o.id,i.course_teaching_id=n.id,i.course_hour_id=t.id),r=o.id===e?1:0})})}),i},e.getCurResource=function(t,e){var i={ids:{},data:null};return t.course_period_list&&t.course_period_list.forEach(function(r){r.teaching_plan&&r.teaching_plan.forEach(function(n){n.teaching_plan_info&&n.teaching_plan_info.forEach(function(o){o.id===e&&(i.data=o,i.ids={course_id:t.id,course_hour_id:r.id,course_plan_id:n.id,course_plan_info_id:o.id})})})}),i}},528:function(t,e,i){"use strict";i.r(e);var r=i(529),n=i.n(r);for(var o in r)"default"!==o&&function(t){i.d(e,t,function(){return r[t]})}(o);e.default=n.a},529:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},o=i(6),s=i(224),c=(r=s)&&r.__esModule?r:{default:r},a=i(227);e.default={data:function(){return{isPlay:!1,progress_focus:!1,videoConfig:{currentTime:"00:00:00",totalTime:"00:00:00",progress:"0"},progressConfig:{x0:0,x1:0}}},computed:n({},(0,o.mapState)("course",["curResources","courseInfo"])),components:{Head:c.default},mounted:function(){var t=this;this.$nextTick(function(){t.courseInfo&&t.courseInfo.end_speed_info&&t.$route.query.continue&&(t.$refs.video.currentTime=parseFloat(t.courseInfo.end_speed_info.course_time))})},methods:{formatTime:function(t){var e=Math.floor(t/60),i=t%60,r=function(t){return t>9?t:"0"+t};return r(Math.floor(e/60))+":"+r(e)+":"+r(i)},togglePlayStatus:function(){this.isPlay=!this.isPlay,this.isPlay?this.$refs.video.play():this.$refs.video.pause()},canplay:function(){this.videoConfig.currentTime=this.formatTime(Math.round(this.$refs.video.currentTime)),this.videoConfig.totalTime=this.formatTime(Math.round(this.curResources.length))},changeProgressByTime:function(){this.videoConfig.progress=(this.$refs.video.currentTime/this.$refs.video.duration*100).toFixed(1)},timeupdate:function(){this.videoConfig.currentTime=this.formatTime(Math.round(this.$refs.video.currentTime)),this.changeProgressByTime()},timeend:function(){this.isPlay=!1},start:function(t){this.progress_focus=!0,this.progressConfig.x0=t.touches[0].clientX},move:function(t){if(this.progress_focus){var e=((t.touches[0].clientX-this.$refs.myProgress.offsetLeft)/this.$refs.myProgress.offsetWidth).toFixed(2);e>1&&(e=1),e<0&&(e=0),this.videoConfig.progress=100*e,this.$refs.video.currentTime=parseInt(this.$refs.video.duration*e)}},stop:function(){this.progress_focus=!1},back:function(){this.$router.go(-1)}},beforeRouteLeave:function(t,e,i){var r=this.$refs.video.currentTime,o=this.$refs.video.duration;0===r&&i();var s=(0,a.getInfoOfResource)(this.courseInfo,this.curResources.id);this.$service.course.leaveVideoPonit(n({},s,{course_time:r,resource_time:o})).then(function(t){i()})}}},530:function(t,e,i){},801:function(t,e,i){"use strict";var r=i(530);i.n(r).a},853:function(t,e,i){"use strict";var r=function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("Head",[e("p",{attrs:{slot:"center"},slot:"center"},[this._v(this._s(this.curResources.name))]),e("p",{attrs:{slot:"right"},slot:"right"})]),e("div",{staticClass:"videoLayer"},[e("div",{staticClass:"video-box"},[e("div",{staticClass:"video"},[e("video",{ref:"video",attrs:{id:"video",src:this.curResources.preview,controlsList:"nodownload",preload:"auto",poster:this.curResources.img_src,"webkit-playsinline":"true",playsinline:"true","x-webkit-airplay":"true","x5-video-player-type":"h5","x5-video-player-fullscreen":"true","x5-video-ignore-metadata":"true",controls:""}})])]),e("button",{staticClass:"exit",on:{click:this.back}},[this._v("退出")])])],1)},n=[];i.d(e,"a",function(){return r}),i.d(e,"b",function(){return n})}}]);