/*!
 * {
 *   "buildtime": "2019-05-31 16:22:54",
 *   "workspace": "F:\\X-BOOK\\xcloud\\x-book4\\js",
 *   "username": "LQB",
 *   "hostname": "DESKTOP-QL56OJS",
 *   "platform": "win32",
 *   "git": {
 *     "branch": "master",
 *     "hash": "fbc007935",
 *     "message": [
 *       "commit fbc00793544e5767db1868f95f89c64b93f3aa79",
 *       "Author: 骆秋波 <1277678760@qq.com>",
 *       "Date:   Fri May 31 15:21:03 2019 +0800",
 *       "    打包上传"
 *     ],
 *     "user": "骆秋波",
 *     "email": "1277678760@qq.com",
 *     "remote": [
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (fetch)",
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (push)"
 *     ]
 *   }
 * }
 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{215:function(t,e,i){"use strict";i.r(e);var n=i(810),s=i(513);for(var r in s)"default"!==r&&function(t){i.d(e,t,function(){return s[t]})}(r);i(795);var a=i(0),c=Object(a.a)(s.default,n.a,n.b,!1,null,null,null);e.default=c.exports},221:function(t,e,i){"use strict";i.r(e);var n=i(222),s=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=s.a},222:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{hideBack:{},type:{},privateStyle:{},isRewrite:{type:Boolean,default:!1}},computed:{isShowSearch:function(){return!!this.isSearch},isShowBack:function(){return!this.hideBack}},methods:{goBack:function(){this.isRewrite?this.$emit("back"):this.$router.go(-1)},goSearch:function(){this.$router.push({name:"search"})},share:function(){}}}},223:function(t,e,i){},224:function(t,e,i){"use strict";i.r(e);var n=i(226),s=i(221);for(var r in s)"default"!==r&&function(t){i.d(e,t,function(){return s[t]})}(r);i(225);var a=i(0),c=Object(a.a)(s.default,n.a,n.b,!1,null,"bc7c4e9e",null);e.default=c.exports},225:function(t,e,i){"use strict";var n=i(223);i.n(n).a},226:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"header",style:t.privateStyle},[i("div",{staticClass:"header-left"},[t._t("left",[i("span",{staticClass:"icon-go-back icon-back",on:{click:t.goBack}})])],2),i("div",{staticClass:"header-center text-center"},[t._t("center")],2),i("div",{staticClass:"header-right text-right"},[t._t("right",["share"===t.type?i("span",{staticClass:"icon-share",on:{click:t.share}}):"search"===t.type?i("span",{staticClass:"icon-search_h",on:{click:t.goSearch}}):i("span",{staticClass:"placeholder"})])],2)])},s=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return s})},227:function(t,e,i){"use strict";function n(t){return t&&"[object Array]"===Object.prototype.toString.call(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.findItem=function(t,e){return e.filter(function(e){return e.id===t||e.children.some(function(e){return e.id===t})})},e.isArray=n,e.isEmptyObj=function(t){for(var e in t)return!1;return!0},e.getResource=function(t,e){var i={};return t&&e&&e.forEach(function(e){t.forEach(function(t){t.teaching_plan.forEach(function(t){t.teaching_plan_info.forEach(function(t){t.b_id===e.b_id&&(i[e.b_id]=t)})})})}),i},e.extract=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"reply";t.forEach(function(t){!function i(s){s.forEach(function(s){n(s[e])&&s[e].length>0&&i(s[e]),s.layer>2&&t[e].push(s)})}(t[e]),t[e].sort(function(t,e){return Date.parse(e.create_time)-Date.parse(t.create_time)})})},e.getInfoOfResource=function(t,e){var i={};return i.course_id=t.id,t.course_period_list&&t.course_period_list.forEach(function(t){t.teaching_plan&&t.teaching_plan.forEach(function(n){n.teaching_plan_info&&n.teaching_plan_info.forEach(function(s){s.id===e&&(i.course_hour_id=t.id,i.course_teaching_id=n.id,i.type=s.type)})})}),i.course_teaching_plan_id=e,i},e.getNextResource=function(t,e){var i={course_teaching_plan_id:-1},n=0;return t.course_period_list&&t.course_period_list.forEach(function(t){t.teaching_plan&&t.teaching_plan.forEach(function(s){s.teaching_plan_info&&s.teaching_plan_info.forEach(function(r){1!==n&&r.id!==e||(i.type=r.type,i.course_teaching_plan_id=r.id,i.course_teaching_id=s.id,i.course_hour_id=t.id),n=r.id===e?1:0})})}),i},e.getCurResource=function(t,e){var i={ids:{},data:null};return t.course_period_list&&t.course_period_list.forEach(function(n){n.teaching_plan&&n.teaching_plan.forEach(function(s){s.teaching_plan_info&&s.teaching_plan_info.forEach(function(r){r.id===e&&(i.data=r,i.ids={course_id:t.id,course_hour_id:n.id,course_plan_id:s.id,course_plan_info_id:r.id})})})}),i}},229:function(t,e,i){"use strict";var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},s=u(i(235)),r=i(227),a=i(230),c=i(6),o=u(i(239));function u(t){return t&&t.__esModule?t:{default:t}}var l=new s.default({phone:{required:!0,length:11,message:{required:"请输入手机号",length:"手机号码长度应为11位"}}}),d={data:function(){return{img_code:{code_id:null,code_img:null},img_code_val:null,code_tip:"发送验证码",duration:60,timer:null}},methods:{getImgCode:function(){var t=this;this.$service.user.codeImage().then(function(e){t.img_code=e.data})},validatePhone:function(){var t=l.validate({phone:this.info.phone});return!(t.length>0)||(this.$Toast({message:t[0].toString()}),!1)},setTimer:function(){var t=this;if(null===this.timer){var e=this.duration;!function i(){t.code_tip=e+"秒后再试",e-- >0?t.timer=setTimeout(i,1e3):(t.code_tip="发送验证码",t.timer=null)}()}},sendCheckCode:function(){var t=this;null!==this.img_code_val?this.validatePhone()&&!this.timer&&this.$service.user.codePhone({phone:this.info.phone,code_id_img:this.img_code.code_id,code_val_img:this.img_code_val,not_check_user_exist:1}).then(function(e){t.$Toast({message:"发送成功",iconClass:"icon-toast icon-success"}),t.setTimer(),t.info.code_id=e.data.code_id}).catch(function(e){t.$Toast({iconClass:"icon-toast icon-failed",message:"发送失败"})}):this.$Toast({message:"请输入图片验证码"})}}},_={computed:n({},(0,c.mapState)("user",["userInfo"])),methods:n({},(0,c.mapMutations)("common",["setLoginLayer"]),{checkIsLogin:function(){return!!this.userInfo||(this.setLoginLayer(!0),!1)}})},f={data:function(){return{next:null}},computed:n({},(0,c.mapState)("course",["courseInfo","curResources"])),mounted:function(){this.next=(0,r.getNextResource)(JSON.parse(JSON.stringify(this.courseInfo)),this.curResources.id)}},h={computed:n({},(0,c.mapState)("course",{courseInfo:function(t){return t.courseInfo}}),(0,c.mapGetters)("course",["cItem"])),methods:n({},(0,c.mapMutations)("course",["SET_RESOURCE"]),{continueStudy:function(){var t=this.getCurrent();if(t){var e=t.data;this.SET_RESOURCE(e);switch(e.type){case 1:this.goReader(t);break;case 3:this.goPlayer("pic",t);break;case 4:this.goPlayer("audio",t);break;case 5:this.goPlayer("video",t)}}},goPlayer:function(t,e){var i=e.ids;this.$goByName(t,{query:n({},i)})},goReader:function(t,e){var i=this,s=e.ids,r=e.data;o.default.setItem("access_code",r.access_code).then(function(){i.$goByName("reader",{query:n({book_id:r.b_id,product_id:i.courseInfo.publish_id},s)})})},getCurrent:function(){return this.courseInfo.end_speed_info?(0,r.getCurResource)(JSON.parse(JSON.stringify(this.courseInfo)),this.courseInfo.end_speed_info.course_teaching_plan_id):this.cItem[0]}})},p={computed:n({},(0,c.mapState)("course",["courseInfo"])),methods:n({},(0,c.mapMutations)("course",["SET_RESOURCE"]),{viewResource:function(t){var e=(0,a.getRelatedRescourse)(JSON.parse(JSON.stringify(this.courseInfo)),t.b_id);switch(e.data&&this.SET_RESOURCE(e.data),e.data.type){case 1:this.goReader(e);break;case 3:this.goPlayer("pic",e);break;case 4:this.goPlayer("audio",e);break;case 5:this.goPlayer("video",e)}},goPlayer:function(t,e){var i=e.ids;this.$goByName(t,{query:n({},i)})},goReader:function(t){var e=this,i=t.ids,s=t.data;o.default.setItem("access_code",s.access_code).then(function(){e.$goByName("reader",{query:n({book_id:s.b_id,product_id:e.courseInfo.publish_id},i)})})}})},v={computed:n({},(0,c.mapState)("course",["courseInfo"])),beforeMount:function(){!this.courseInfo&&this.$route.query.cid&&this.SET_COURSE_INFO(this.$route.query.cid)},methods:n({},(0,c.mapActions)("course",["SET_COURSE_INFO"]))};t.exports={code:d,user:_,inputArea:{data:function(){return{isShowTextField:!1,commentList:[],word:"",myReply:null}},methods:{showTextField:function(){var t=this;this.$refs.layer.show(),this.$nextTick(function(){t.$refs.myInput.focus()})},hideTextField:function(t){this.isShowTextField=!1,this.initState()},initState:function(){this.word="",this.myph="发表评论",this.myReply=null}}},charEll:{data:function(){return{maxLength:46}},methods:{maxSlice:function(t){return"string"==typeof t&&t.length>this.maxLength?t.slice(0,this.maxLength)+"...":t}}},nextResource:f,continueStudy:h,releateToResource:p,CourseInfo:v}},230:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getRelatedRescourse=function(t,e){var i={ids:{},data:null};return t.course_period_list&&t.course_period_list.forEach(function(n){n.teaching_plan&&n.teaching_plan.forEach(function(s){s.teaching_plan_info&&s.teaching_plan_info.forEach(function(r){r.b_id===e&&(i.ids={course_id:t.id,course_hour_id:n.id,course_plan_id:s.id,course_plan_info_id:r.id},i.data=r)})})}),i}},513:function(t,e,i){"use strict";i.r(e);var n=i(514),s=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=s.a},514:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=u(i(5)),s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},r=u(i(224)),a=i(6),c=i(227),o=i(229);function u(t){return t&&t.__esModule?t:{default:t}}var l=new Map([["single",1],["multi",1],["judgment",2]]);e.default={mixins:[o.releateToResource],data:function(){return{cur:1,exam_type:0,single:["A","B","C","D"],list:[],resource:null}},components:{Head:r.default},mounted:function(){this.cur=this.$route.query.index,this.errorList?this.list=this.errorList:this.getList()},computed:s({},(0,a.mapState)("course",["errorList"]),{cur_question:function(){var t=this.list[this.cur-1]||{};return this.exam_type=l.get(t.type),this.resource=(0,c.getResource)(this.courseInfo.course_period_list,t.tp_constitute_info_array),t}}),methods:s({},(0,a.mapMutations)("course",["SET_COURSE_INFO"]),{getList:function(){var t,e=this;return(t=n.default.mark(function t(){var i;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$service.course.getDetailErrors({id:e.$route.query.id});case 2:i=t.sent,e.list=i.data;case 4:case"end":return t.stop()}},t,e)}),function(){var e=t.apply(this,arguments);return new Promise(function(t,i){return function n(s,r){try{var a=e[s](r),c=a.value}catch(t){return void i(t)}if(!a.done)return Promise.resolve(c).then(function(t){n("next",t)},function(t){n("throw",t)});t(c)}("next")})})()},jumpTo:function(t){this.cur=t},nextQuestion:function(){this.cur++>=this.list.length&&this.cur--},prevExam:function(){this.cur>1&&this.cur--}})}},515:function(t,e,i){},795:function(t,e,i){"use strict";var n=i(515);i.n(n).a},810:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("Head",{attrs:{isSearch:"true"}},[i("p",{attrs:{slot:"center"},slot:"center"},[t._v("历史错题集")])]),i("div",{staticClass:"pt88"},[i("ul",{staticClass:"ui-slide exam-indexs"},t._l(t.list,function(e,n){return i("li",{class:{active:t.cur==n+1},on:{click:function(e){return t.jumpTo(n+1)}}},[t._v(t._s(e.sort))])}),0),i("div",{staticClass:"line-part"}),i("div",{staticClass:"exam-content"},[i("p",{staticClass:"exam-title"},[i("span",{staticClass:"type"},[t._v("【"+t._s(t.cur_question.type_name)+"】")]),t._v(t._s(t.cur_question.question)),i("span",{staticClass:"score"},[t._v("("+t._s(t.cur_question.score)+"分)")])]),"single"===t.cur_question.type||"multi"===t.cur_question.type?i("div",{staticClass:"exam-main top-border"},t._l(t.cur_question.option,function(e,n){return i("div",{staticClass:"exam-choice"},[i("span",{class:{"exam-select__active":t.cur_question.user_answer.indexOf(t.single[n])>-1}},[t._v(t._s(t.single[n]))]),t._v(t._s(e.title))])}),0):"judgment"===t.cur_question.type?i("div",{staticClass:"exam-main"},[i("div",{staticClass:"exam-choice"},[i("span",{staticClass:"exam-select",class:{"exam-select__active":"true"===t.cur_question.answer}},[t._v("A")]),t._v("正确")]),i("div",{staticClass:"exam-choice"},[i("span",{staticClass:"exam-select",class:{"exam-select__active":"false"===t.cur_question.answer}},[t._v("B")]),t._v("错误")])]):t._e(),"judgment"===t.cur_question.type||"single"===t.cur_question.type||"multi"===t.cur_question.type?i("div",{staticClass:"exam-analysis"},[i("div",{staticClass:"analysis-title"},[4==t.cur_question.status?i("p",{staticClass:"error"},[i("span",{staticClass:"icon icon-error"}),t._v("选择错误")]):2==t.cur_question.status?i("p",[i("span",{staticClass:"icon icon-right"}),t._v("选择正确")]):t._e(),i("p",{staticClass:"normal-black"},[t._v("本题正确答案为："+t._s(t.cur_question.answer))])]),i("div",{staticClass:"analysis-content"},[t._v("解析："),i("span",{staticClass:"gray"},[t._v(t._s(t.cur_question.analysis))])]),i("div",{staticClass:"analysis-link"},[t._v("课时计划链接："),t._l(t.cur_question.tp_constitute_info_array,function(e){return i("span",{on:{click:function(i){return t.viewResource(e)}}},[t._v(t._s(e.period_info)+"/"+t._s(e.teaching_plan_info)+"/"+t._s(t.resource[e.b_id].name))])})],2)]):i("div",{staticClass:"exam-analysis"},[i("div",{staticClass:"analysis-title"},[t._v("得分："),i("span",{staticClass:"orange"},[t._v(t._s(t.cur_question.score)+"分")])]),i("div",{staticClass:"analysis-content"},[t._v("你的答案："),i("span",{staticClass:"normal-black"},[t._v(t._s(t.cur_question.user_answer))])]),t.cur_question.img?i("div",{staticClass:"analysis-img"},[i("img",{attrs:{src:t.cur_question.img}})]):t._e(),i("div",{staticClass:"analysis-content"},[t._v("教师回答："),i("span",{staticClass:"gray"},[t._v(t._s(t.cur_question.analysis))])]),i("div",{staticClass:"analysis-link"},[t._v("课时计划链接："),t._l(t.cur_question.tp_constitute_info_array,function(e){return i("span",{on:{click:function(i){return t.viewResource(e)}}},[t._v(t._s(e.period_info)+"/"+t._s(e.teaching_plan_info)+"/"+t._s(t.resource[e.b_id].name))])})],2)])]),i("div",{staticClass:"check-exam flex flex-center-sb p3"},[i("button",{class:[1===t.cur?"icon-prev":"icon-prev__active"],on:{click:t.prevExam}}),i("button",{class:[t.cur<t.list.length?"icon-next__active":"icon-next"],on:{click:t.nextQuestion}})])])],1)},s=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return s})}}]);