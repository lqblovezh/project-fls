/*!
 * {
 *   "buildtime": "2019-05-31 16:22:54",
 *   "workspace": "F:\\X-BOOK\\xcloud\\x-book4\\js",
 *   "username": "LQB",
 *   "hostname": "DESKTOP-QL56OJS",
 *   "platform": "win32",
 *   "git": {
 *     "branch": "master",
 *     "hash": "fbc007935",
 *     "message": [
 *       "commit fbc00793544e5767db1868f95f89c64b93f3aa79",
 *       "Author: 骆秋波 <1277678760@qq.com>",
 *       "Date:   Fri May 31 15:21:03 2019 +0800",
 *       "    打包上传"
 *     ],
 *     "user": "骆秋波",
 *     "email": "1277678760@qq.com",
 *     "remote": [
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (fetch)",
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (push)"
 *     ]
 *   }
 * }
 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{212:function(e,t,n){"use strict";n.r(t);var r=n(814),i=n(490);for(var a in i)"default"!==a&&function(e){n.d(t,e,function(){return i[e]})}(a);n(786);var s=n(0),c=Object(s.a)(i.default,r.a,r.b,!1,null,null,null);t.default=c.exports},221:function(e,t,n){"use strict";n.r(t);var r=n(222),i=n.n(r);for(var a in r)"default"!==a&&function(e){n.d(t,e,function(){return r[e]})}(a);t.default=i.a},222:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{hideBack:{},type:{},privateStyle:{},isRewrite:{type:Boolean,default:!1}},computed:{isShowSearch:function(){return!!this.isSearch},isShowBack:function(){return!this.hideBack}},methods:{goBack:function(){this.isRewrite?this.$emit("back"):this.$router.go(-1)},goSearch:function(){this.$router.push({name:"search"})},share:function(){}}}},223:function(e,t,n){},224:function(e,t,n){"use strict";n.r(t);var r=n(226),i=n(221);for(var a in i)"default"!==a&&function(e){n.d(t,e,function(){return i[e]})}(a);n(225);var s=n(0),c=Object(s.a)(i.default,r.a,r.b,!1,null,"bc7c4e9e",null);t.default=c.exports},225:function(e,t,n){"use strict";var r=n(223);n.n(r).a},226:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"header",style:e.privateStyle},[n("div",{staticClass:"header-left"},[e._t("left",[n("span",{staticClass:"icon-go-back icon-back",on:{click:e.goBack}})])],2),n("div",{staticClass:"header-center text-center"},[e._t("center")],2),n("div",{staticClass:"header-right text-right"},[e._t("right",["share"===e.type?n("span",{staticClass:"icon-share",on:{click:e.share}}):"search"===e.type?n("span",{staticClass:"icon-search_h",on:{click:e.goSearch}}):n("span",{staticClass:"placeholder"})])],2)])},i=[];n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i})},322:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTask=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];return e.size,e.size>=1048576?(t.is_chunk=!0,(0,r.request_post)("/common/api/files/upload_task?r="+Math.random(5)).then(function(i){if(i.status)return t.task_id=i.data.task_id,(0,r.request_file)("/common/api/files/upload",{file:e,data:t},n);throw new Error(i.messages)}).catch(function(e){throw new Error("上传失败")})):(t.is_chunk=!1,(0,r.request_file)("/common/api/files/upload",{file:e,data:t}))},t.getAppId=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_get)("/common/api/app/search_name",e).then(function(e){return i.default.app_id=e.data.id,sessionStorage.app_id=e.data.id,e})},t.getClientToken=function(){return(0,r.request_post)("/common/api/auth/token/pcclient")},t.platInfo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_get)(c(e)).then(function(e){return i.default.app_id=e.data.id,sessionStorage.app_id=e.data.id,document.title=e.data.name,e})},t.commonPreview=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_get)(o(e))},t.getDefaultCover=function(){return(0,r.request_get)("/api/videos/images")},t.generate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)("/common/api/qr_code/generate",e)},t.commonPreviewCode=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)("/api/preview",e)},t.getQrcode=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_get)("/common/api/get_qrcode",e)},t.synchronization=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_get)(u(e)).then(function(e){return e})},t.getAuthor=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_get)("/api/ecommerce/author",e)},t.addAuthor=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)("/api/ecommerce/author",e)},t.getWeixinConfig=function(e){return(0,r.request_get)("/common/api/third/wx_js_sdk/config",e)},t.getIndexInfo=function(){return(0,r.request_get)("/common/api/current")};s(n(39));var r=n(1),i=s(n(52)),a=s(n(3));function s(e){return e&&e.__esModule?e:{default:e}}a.default.compile("/common/api/files/upload_task/:id"),a.default.compile("/common/api/manager/managers/:id"),a.default.compile("/common/api/manager/roles/:id");var c=a.default.compile("/common/api/app/apps/:id"),u=a.default.compile("/common/api/dragon_infos/:id");var o=a.default.compile("/api/preview/:id")},490:function(e,t,n){"use strict";n.r(t);var r=n(491),i=n.n(r);for(var a in r)"default"!==a&&function(e){n.d(t,e,function(){return r[e]})}(a);t.default=i.a},491:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=l(n(5)),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=l(n(224)),s=n(6),c=n(782),u=l(n(783)),o=l(n(784));function l(e){return e&&e.__esModule?e:{default:e}}function d(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(i,a){try{var s=t[i](a),c=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}("next")})}}var f=new Map([["single",1],["multi",1],["judgment",2]]);t.default={mixins:[c.uploadPic],data:function(){return{cur:1,input_type:{single:"radio",multi:"checkbox"},actions:null,tested:!1,sheetVisible:!1,cur_answer:"",exam_type:"",my_answer:{},single:["A","B","C","D"],list:[],test:""}},components:{Head:a.default,Choice:u.default,ChoiceQuestion:o.default},mounted:function(){this.getList()},computed:i({},(0,s.mapState)("course",{examList:function(e){return e.examList||[]}}),{intro:function(){var e=this;return this.examList&&this.examList.filter(function(t){return t.id===e.$route.query.paper_id})[0]||{}},cur_question:function(){if(!this.list)return{};var e=this.list[this.cur-1]||{};this.exam_type=f.get(e.type);var t=this.my_answer[e.id];return this.cur_answer=t&&t.answer||("multi"===e.type?[]:""),this.img_url=t&&t.img,e},hasImg:function(){return this.cur_question.option.some(function(e){return!!e.img})}}),methods:{getList:function(){var e=this;return d(r.default.mark(function t(){var n;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$service.course.getExercise({id:e.$route.query.paper_id});case 3:n=t.sent,e.list=n.data,t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),e.$Toast("获取试题失败"),e.$router.go(-1);case 11:case"end":return t.stop()}},t,e,[[0,7]])}))()},jumpTo:function(e){this.cur=e},showActionSheet:function(){this.actions=[{name:"拍照",method:this.go},{name:"从相册中选择",method:this.chooseByGraph}],this.sheetVisible=!0},chooseByGraph:function(){this.$refs.myInput.click()},nextQuestion:function(){this.cur++>=this.list.length&&this.cur--},prevExam:function(){this.cur>1&&this.cur--},clearImg:function(){this.img_url=null},next:function(){var e=this;return d(r.default.mark(function t(){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.cur_answer){t.next=3;break}return e.$Toast("请完成当前题目!"),t.abrupt("return");case 3:e.my_answer[e.cur_question.id]={answer:e.cur_answer},e.img_url?e.uploadImg().then(function(t){e.my_answer[e.cur_question.id].img=e.img_url,e.my_answer[e.cur_question.id].path=t.data.path,e.img_url=null,e.ifComplete()}):e.ifComplete();case 5:case"end":return t.stop()}},t,e)}))()},ifComplete:function(){var e=this;this.cur++>=this.list.length&&this.cur--&&this.$MessageBox.confirm("确认提交试卷？").then(function(t){e.sendMyAnsewr()}).catch(console.error)},sendMyAnsewr:function(){var e=this;this.$service.course.answer({id:this.$route.query.paper_id,data:this.formatMyAnswer()}).then(function(t){e.$route.query.source?e.$router.go(-2):e.$router.go(-1)}).catch(console.error)},formatMyAnswer:function(){var e=[];for(var t in this.my_answer)e.push({id:t,answer:this.my_answer[t].answer.toString(),img:this.my_answer[t].path});return e}}}},492:function(e,t,n){"use strict";n.r(t);var r=n(493),i=n.n(r);for(var a in r)"default"!==a&&function(e){n.d(t,e,function(){return r[e]})}(a);t.default=i.a},493:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{value:{}}}},494:function(e,t,n){"use strict";n.r(t);var r=n(495),i=n.n(r);for(var a in r)"default"!==a&&function(e){n.d(t,e,function(){return r[e]})}(a);t.default=i.a},495:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{item:{required:!0},txt:{type:String},hasImg:{type:Boolean,default:!1}}}},496:function(e,t,n){},497:function(e,t,n){},782:function(e,t,n){"use strict";var r,i=n(5),a=(r=i)&&r.__esModule?r:{default:r},s=n(322);var c={data:function(){return{img_url:null}},methods:{previewImg:function(e){var t=e.target.files[0],n=URL.createObjectURL(t);this.img_url=n},uploadImg:function(){var e,t=this;return(e=a.default.mark(function e(){var n,r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.$refs.myInput.files[0],r=void 0,e.prev=2,!n){e.next=7;break}return e.next=6,(0,s.getTask)(n);case 6:r=e.sent;case 7:e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(2),new Error("图片更新失败");case 12:return e.abrupt("return",r);case 13:case"end":return e.stop()}},e,t,[[2,9]])}),function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(i,a){try{var s=t[i](a),c=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}("next")})})()}}};e.exports={uploadPic:c}},783:function(e,t,n){"use strict";n.r(t);var r=n(871),i=n(492);for(var a in i)"default"!==a&&function(e){n.d(t,e,function(){return i[e]})}(a);var s=n(0),c=Object(s.a)(i.default,r.a,r.b,!1,null,null,null);t.default=c.exports},784:function(e,t,n){"use strict";n.r(t);var r=n(872),i=n(494);for(var a in i)"default"!==a&&function(e){n.d(t,e,function(){return i[e]})}(a);n(785);var s=n(0),c=Object(s.a)(i.default,r.a,r.b,!1,null,"d240b3f4",null);t.default=c.exports},785:function(e,t,n){"use strict";var r=n(496);n.n(r).a},786:function(e,t,n){"use strict";var r=n(497);n.n(r).a},814:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pt88-static__vh main-color"},[n("Head",{attrs:{isSearch:"true"}},[n("p",{attrs:{slot:"center"},slot:"center"},[e._v(e._s(e.intro&&e.intro.name))])]),e.tested?e._e():n("div",[n("ul",{staticClass:"ui-slide exam-indexs"},e._l(e.list,function(t,r){return n("li",{class:{active:e.cur==r+1},on:{click:function(t){return e.jumpTo(r+1)}}},[e._v(e._s(r+1))])}),0),n("div",{staticClass:"exam-content"},[n("div",{staticClass:"exam-title"},[n("span",{staticClass:"type"},[e._v("【"+e._s(e.cur_question&&e.cur_question.type_name)+"】 ("+e._s(e.cur_question&&e.cur_question.score)+"分)")]),n("div",{staticClass:"exam-title__detail",domProps:{innerHTML:e._s(e.cur_question&&e.cur_question.question)}})]),1===e.exam_type?n("div",{staticClass:"exam-main top-boder"},e._l(e.cur_question.option,function(t,r){return n("ChoiceQuestion",{attrs:{item:t,txt:e.$changeIntoCharCode(r),"has-img":e.hasImg}},["checkbox"===e.input_type[e.cur_question.type]?n("input",{directives:[{name:"model",rawName:"v-model",value:e.cur_answer,expression:"cur_answer"}],attrs:{name:"answer",type:"checkbox"},domProps:{value:e.$changeIntoCharCode(r),checked:Array.isArray(e.cur_answer)?e._i(e.cur_answer,e.$changeIntoCharCode(r))>-1:e.cur_answer},on:{change:function(t){var n=e.cur_answer,i=t.target,a=!!i.checked;if(Array.isArray(n)){var s=e.$changeIntoCharCode(r),c=e._i(n,s);i.checked?c<0&&(e.cur_answer=n.concat([s])):c>-1&&(e.cur_answer=n.slice(0,c).concat(n.slice(c+1)))}else e.cur_answer=a}}}):"radio"===e.input_type[e.cur_question.type]?n("input",{directives:[{name:"model",rawName:"v-model",value:e.cur_answer,expression:"cur_answer"}],attrs:{name:"answer",type:"radio"},domProps:{value:e.$changeIntoCharCode(r),checked:e._q(e.cur_answer,e.$changeIntoCharCode(r))},on:{change:function(t){e.cur_answer=e.$changeIntoCharCode(r)}}}):n("input",{directives:[{name:"model",rawName:"v-model",value:e.cur_answer,expression:"cur_answer"}],attrs:{name:"answer",type:e.input_type[e.cur_question.type]},domProps:{value:e.$changeIntoCharCode(r),value:e.cur_answer},on:{input:function(t){t.target.composing||(e.cur_answer=t.target.value)}}})])}),1):2===e.exam_type?n("div",{staticClass:"exam-main top-boder"},[n("div",{staticClass:"exam-choice"},[n("div",{staticClass:"checkbox"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.cur_answer,expression:"cur_answer"}],attrs:{type:"radio",name:"answer",value:"true"},domProps:{checked:e._q(e.cur_answer,"true")},on:{change:function(t){e.cur_answer="true"}}}),n("label",[e._v("A")])]),e._v("正确")]),n("div",{staticClass:"exam-choice"},[n("div",{staticClass:"checkbox"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.cur_answer,expression:"cur_answer"}],attrs:{type:"radio",name:"answer",value:"false"},domProps:{checked:e._q(e.cur_answer,"false")},on:{change:function(t){e.cur_answer="false"}}}),n("label",[e._v("B")])]),e._v("错误")])]):n("div",{staticClass:"exam-main"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.cur_answer,expression:"cur_answer"}],attrs:{placeholder:"请输入你的答案"},domProps:{value:e.cur_answer},on:{input:function(t){t.target.composing||(e.cur_answer=t.target.value)}}}),n("p",{staticClass:"file-upload pr"},[n("input",{ref:"myInput",attrs:{type:"file",accept:"image/*",capture:"camera"},on:{change:function(t){return e.previewImg(t)}}}),n("label",{on:{click:e.showActionSheet}},[e._v(e._s(e.img_url?"更改图片":"上传图片"))])]),e.img_url?n("div",{staticClass:"file-img"},[n("img",{attrs:{src:e.img_url}}),n("div",{staticClass:"icon icon-img-close",on:{click:e.clearImg}})]):e._e()]),n("div",{staticClass:"btn-wrap text-center"},[n("button",{staticClass:"btn-test circle c-bg-theme",on:{click:e.next}},[e._v("确定")])])]),n("div",{staticClass:"check-exam flex flex-center-sb p3"},[n("button",{staticClass:"icon-prev",class:[1===e.cur?"icon-prev":"icon-prev__active"],on:{click:e.prevExam}}),n("button",{staticClass:"icon-next__active",class:[e.cur<e.list.length?"icon-next__active":"icon-next"],on:{click:e.nextQuestion}})]),n("mt-actionsheet",{attrs:{actions:e.actions},model:{value:e.sheetVisible,callback:function(t){e.sheetVisible=t},expression:"sheetVisible"}})],1)],1)},i=[];n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i})},871:function(e,t,n){"use strict";var r=function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"ui-choice"},[this._t("default")],2)},i=[];n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i})},872:function(e,t,n){"use strict";var r=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"exam-choices"},[t("div",{staticClass:"flex"},[t("div",{staticClass:"ui-choice ib pr"},[this._t("default"),t("label",{staticClass:"tc"},[this._v(this._s(this.txt))])],2),t("p",{domProps:{innerHTML:this._s(this.item.title)}})]),t("img",{attrs:{src:this.item.img}})])},i=[];n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i})}}]);