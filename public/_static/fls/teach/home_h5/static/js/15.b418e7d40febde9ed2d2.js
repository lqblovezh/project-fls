/*!
 * {
 *   "buildtime": "2019-05-31 16:22:54",
 *   "workspace": "F:\\X-BOOK\\xcloud\\x-book4\\js",
 *   "username": "LQB",
 *   "hostname": "DESKTOP-QL56OJS",
 *   "platform": "win32",
 *   "git": {
 *     "branch": "master",
 *     "hash": "fbc007935",
 *     "message": [
 *       "commit fbc00793544e5767db1868f95f89c64b93f3aa79",
 *       "Author: 骆秋波 <1277678760@qq.com>",
 *       "Date:   Fri May 31 15:21:03 2019 +0800",
 *       "    打包上传"
 *     ],
 *     "user": "骆秋波",
 *     "email": "1277678760@qq.com",
 *     "remote": [
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (fetch)",
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (push)"
 *     ]
 *   }
 * }
 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{220:function(t,e,i){"use strict";i.r(e);var n=i(830),r=i(531);for(var a in r)"default"!==a&&function(t){i.d(e,t,function(){return r[t]})}(a);i(804);var o=i(0),s=Object(o.a)(r.default,n.a,n.b,!1,null,"6d13e112",null);e.default=s.exports},221:function(t,e,i){"use strict";i.r(e);var n=i(222),r=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,function(){return n[t]})}(a);e.default=r.a},222:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{hideBack:{},type:{},privateStyle:{},isRewrite:{type:Boolean,default:!1}},computed:{isShowSearch:function(){return!!this.isSearch},isShowBack:function(){return!this.hideBack}},methods:{goBack:function(){this.isRewrite?this.$emit("back"):this.$router.go(-1)},goSearch:function(){this.$router.push({name:"search"})},share:function(){}}}},223:function(t,e,i){},224:function(t,e,i){"use strict";i.r(e);var n=i(226),r=i(221);for(var a in r)"default"!==a&&function(t){i.d(e,t,function(){return r[t]})}(a);i(225);var o=i(0),s=Object(o.a)(r.default,n.a,n.b,!1,null,"bc7c4e9e",null);e.default=s.exports},225:function(t,e,i){"use strict";var n=i(223);i.n(n).a},226:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"header",style:t.privateStyle},[i("div",{staticClass:"header-left"},[t._t("left",[i("span",{staticClass:"icon-go-back icon-back",on:{click:t.goBack}})])],2),i("div",{staticClass:"header-center text-center"},[t._t("center")],2),i("div",{staticClass:"header-right text-right"},[t._t("right",["share"===t.type?i("span",{staticClass:"icon-share",on:{click:t.share}}):"search"===t.type?i("span",{staticClass:"icon-search_h",on:{click:t.goSearch}}):i("span",{staticClass:"placeholder"})])],2)])},r=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return r})},227:function(t,e,i){"use strict";function n(t){return t&&"[object Array]"===Object.prototype.toString.call(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.findItem=function(t,e){return e.filter(function(e){return e.id===t||e.children.some(function(e){return e.id===t})})},e.isArray=n,e.isEmptyObj=function(t){for(var e in t)return!1;return!0},e.getResource=function(t,e){var i={};return t&&e&&e.forEach(function(e){t.forEach(function(t){t.teaching_plan.forEach(function(t){t.teaching_plan_info.forEach(function(t){t.b_id===e.b_id&&(i[e.b_id]=t)})})})}),i},e.extract=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"reply";t.forEach(function(t){!function i(r){r.forEach(function(r){n(r[e])&&r[e].length>0&&i(r[e]),r.layer>2&&t[e].push(r)})}(t[e]),t[e].sort(function(t,e){return Date.parse(e.create_time)-Date.parse(t.create_time)})})},e.getInfoOfResource=function(t,e){var i={};return i.course_id=t.id,t.course_period_list&&t.course_period_list.forEach(function(t){t.teaching_plan&&t.teaching_plan.forEach(function(n){n.teaching_plan_info&&n.teaching_plan_info.forEach(function(r){r.id===e&&(i.course_hour_id=t.id,i.course_teaching_id=n.id,i.type=r.type)})})}),i.course_teaching_plan_id=e,i},e.getNextResource=function(t,e){var i={course_teaching_plan_id:-1},n=0;return t.course_period_list&&t.course_period_list.forEach(function(t){t.teaching_plan&&t.teaching_plan.forEach(function(r){r.teaching_plan_info&&r.teaching_plan_info.forEach(function(a){1!==n&&a.id!==e||(i.type=a.type,i.course_teaching_plan_id=a.id,i.course_teaching_id=r.id,i.course_hour_id=t.id),n=a.id===e?1:0})})}),i},e.getCurResource=function(t,e){var i={ids:{},data:null};return t.course_period_list&&t.course_period_list.forEach(function(n){n.teaching_plan&&n.teaching_plan.forEach(function(r){r.teaching_plan_info&&r.teaching_plan_info.forEach(function(a){a.id===e&&(i.data=a,i.ids={course_id:t.id,course_hour_id:n.id,course_plan_id:r.id,course_plan_info_id:a.id})})})}),i}},531:function(t,e,i){"use strict";i.r(e);var n=i(532),r=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,function(){return n[t]})}(a);e.default=r.a},532:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},r=i(6),a=c(i(224)),o=c(i(802)),s=i(227);function c(t){return t&&t.__esModule?t:{default:t}}e.default={data:function(){return{playing:!1,currentTime:0,duration:0,progress:0}},computed:n({},(0,r.mapState)("course",["curResources","courseInfo"])),components:{Head:a.default,Slider:o.default},methods:{toggleStatus:function(){this.playing?this.pause():this.play()},play:function(){this.$refs.myAudio.play()},pause:function(){this.$refs.myAudio.pause()},onPlay:function(){this.playing=!0},onPause:function(){this.playing=!1},onTimeupdate:function(t){this.currentTime=t.target.currentTime,this.$refs.slider.drag||(this.progress=parseInt(this.currentTime/this.duration*100))},onLoadedmetadata:function(t){this.duration=t.target.duration,t.target.currentTime=this.courseInfo.end_speed_info.course_time}},filters:{formatTime:function(t){var e=Math.floor(t/60),i=Math.round(t%60),n=function(t){return t>9?t:"0"+t};return n(Math.floor(e/60))+":"+n(e)+":"+n(i)}},watch:{progress:function(t){this.$refs.slider.drag&&(this.$refs.myAudio.currentTime=parseInt(t/100*this.duration))}},beforeRouteLeave:function(t,e,i){var r=this.$refs.myAudio&&this.$refs.myAudio.currentTime,a=this.$refs.myAudio&&this.$refs.myAudio.duration;0===r&&i();var o=(0,s.getInfoOfResource)(this.courseInfo,this.curResources.id);this.$service.course.leaveVideoPonit(n({},o,{course_time:r,resource_time:a})).then(function(t){i()})}}},533:function(t,e,i){"use strict";i.r(e);var n=i(534),r=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,function(){return n[t]})}(a);e.default=r.a},534:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"xt-slider",props:["formatTooltip","value"],data:function(){return{drag:!1,defaultVal:0,x0:0,len:0}},mounted:function(){this.len=this.$refs.progress.offsetWidth},methods:{startmove:function(t){this.drag=!0,this.x0=t.touches[0].clientX,this.defaultVal=this.value},move:function(t){if(this.drag){var e=((t.touches[0].clientX-this.x0)/this.len*100).toFixed(2);this.updateProgress(e)}},endmove:function(){this.drag=!1},updateProgress:function(t){(t=parseFloat(t)+parseFloat(this.defaultVal))>=100&&(t=100),t<=0&&(t=0),this.$emit("input",parseFloat(t.toFixed(2)))}}}},535:function(t,e,i){},536:function(t,e,i){},802:function(t,e,i){"use strict";i.r(e);var n=i(878),r=i(533);for(var a in r)"default"!==a&&function(t){i.d(e,t,function(){return r[t]})}(a);i(803);var o=i(0),s=Object(o.a)(r.default,n.a,n.b,!1,null,"3d357a56",null);e.default=s.exports},803:function(t,e,i){"use strict";var n=i(535);i.n(n).a},804:function(t,e,i){"use strict";var n=i(536);i.n(n).a},830:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("Head",[i("p",{attrs:{slot:"center"},slot:"center"},[t._v(t._s(t.curResources.name))]),i("p",{attrs:{slot:"right"},slot:"right"})]),i("div",{staticClass:"audio-player"},[i("audio",{ref:"myAudio",attrs:{src:t.curResources.preview},on:{play:t.onPlay,pause:t.onPause,timeupdate:t.onTimeupdate,loadedmetadata:t.onLoadedmetadata}}),i("div",{staticClass:"audio-img"},[i("img",{attrs:{src:t.curResources.img_src}}),i("button",{staticClass:"center-btn",class:[t.playing?"icon-play__pause":"icon-play__audio"],on:{click:t.toggleStatus}})]),i("div",{staticClass:"audio-actions p3"},[i("div",{staticClass:"audio-control"},[i("p",{staticClass:"audio-control__curtime"},[t._v(t._s(t._f("formatTime")(t.currentTime)))]),i("div",{staticClass:"audio-control__progress"},[i("Slider",{ref:"slider",model:{value:t.progress,callback:function(e){t.progress=e},expression:"progress"}})],1),i("p",{staticClass:"audio_control__duration"},[t._v(t._s(t._f("formatTime")(t.duration)))])]),i("div",{staticClass:"audio-name"},[t._v(t._s(t.curResources.abs||"hello world"))])]),i("div",{staticClass:"audio-ani"})])],1)},r=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return r})},878:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"xt-slider"},[i("div",{ref:"progress",staticClass:"xt-slider__progress"},[i("div",{staticClass:"xt-slider__progress-inner",style:{width:t.value+"%"}},[i("div",{staticClass:"xt-slider__block",on:{touchstart:t.startmove,touchmove:t.move,touchend:t.endmove}})])]),t.formatTooltip?i("div",{staticClass:"xt-slider__tip"},[t._v(t._s(t.formatTooltip))]):t._e()])},r=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return r})}}]);