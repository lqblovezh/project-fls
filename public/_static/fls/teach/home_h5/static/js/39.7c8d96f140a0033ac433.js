/*!
 * {
 *   "buildtime": "2019-05-31 16:22:54",
 *   "workspace": "F:\\X-BOOK\\xcloud\\x-book4\\js",
 *   "username": "LQB",
 *   "hostname": "DESKTOP-QL56OJS",
 *   "platform": "win32",
 *   "git": {
 *     "branch": "master",
 *     "hash": "fbc007935",
 *     "message": [
 *       "commit fbc00793544e5767db1868f95f89c64b93f3aa79",
 *       "Author: 骆秋波 <1277678760@qq.com>",
 *       "Date:   Fri May 31 15:21:03 2019 +0800",
 *       "    打包上传"
 *     ],
 *     "user": "骆秋波",
 *     "email": "1277678760@qq.com",
 *     "remote": [
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (fetch)",
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (push)"
 *     ]
 *   }
 * }
 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{201:function(t,e,n){"use strict";n.r(e);var r=n(847),s=n(436);for(var a in s)"default"!==a&&function(t){n.d(e,t,function(){return s[t]})}(a);n(755);var i=n(0),u=Object(i.a)(s.default,r.a,r.b,!1,null,"68b7d6d3",null);e.default=u.exports},228:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},s=n(6);e.default={beforeRouteEnter:function(t,e,n){n(function(t){t.$store.commit("common/TOGGLE_LOADING",!0)})},methods:r({},(0,s.mapMutations)("common",["TOGGLE_LOADING"]))}},236:function(t,e,n){"use strict";n.r(e);var r=n(237),s=n.n(r);for(var a in r)"default"!==a&&function(t){n.d(e,t,function(){return r[t]})}(a);e.default=s.a},237:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=u(n(5)),s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=(n(6),u(n(51))),i=u(n(228));function u(t){return t&&t.__esModule?t:{default:t}}function o(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}e.default={mixins:[i.default],props:{propToAdd:{default:!1},msgType:{required:!0}},data:function(){return{list:[],page:{pageStart:0,pageOffset:20},pullup:!0,isLoaded:!1}},mounted:function(){this.getList()},methods:{getList:function(){var t,e=this;return(t=r.default.mark(function t(){var n,a,i;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isLoaded){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,e.$service.message.getMsg(s({type:e.msgType},e.page));case 5:n=t.sent,a=n.data,i=n.page,a&&a.length&&(e.propToAdd&&e.addProperty(a),e.list=[].concat(o(e.list),o(a))),e.page.pageStart=e.list.length,e.isLoaded=e.list.length===i.total,t.next=17;break;case 13:t.prev=13,t.t0=t.catch(2),t.t0.toString(),e.$Toast("数据获取失败");case 17:return t.prev=17,e.TOGGLE_LOADING(!1),t.finish(17);case 20:case"end":return t.stop()}},t,e,[[2,13,17,20]])}),function(){var e=t.apply(this,arguments);return new Promise(function(t,n){return function r(s,a){try{var i=e[s](a),u=i.value}catch(t){return void n(t)}if(!i.done)return Promise.resolve(u).then(function(t){r("next",t)},function(t){r("throw",t)});t(u)}("next")})})()},del:function(t){var e=this;this.$MessageBox.confirm("确定删除？").then(function(n){e.$service.message.delMsg({id:t.id}).then(function(n){var r=(0,a.default)(e.list,function(e){return e.id===t.id});e.list.splice(r,1)})}).catch(console.warn)},addProperty:function(t){t.forEach(function(t){t.reply.forEach(function(t){t.expand=!0})})}}}},238:function(t,e,n){},258:function(t,e,n){"use strict";n.r(e);var r=n(260),s=n(236);for(var a in s)"default"!==a&&function(t){n.d(e,t,function(){return s[t]})}(a);n(259);var i=n(0),u=Object(i.a)(s.default,r.a,r.b,!1,null,null,null);e.default=u.exports},259:function(t,e,n){"use strict";var r=n(238);n.n(r).a},260:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ui-message"},[n("ui-scroll",{staticClass:"scroll-wrapper",attrs:{pullup:t.pullup},on:{pullup:t.getList}},[n("div",{staticClass:"scroll-message"},[t._t("default",null,{list:t.list})],2)]),t.list&&t.list.length?t._e():n("div",{staticClass:"msg-wrap"},[n("div",{staticClass:"icon-empty_bg"}),n("p",[t._v("暂无消息")])])],1)},s=[];n.d(e,"a",function(){return r}),n.d(e,"b",function(){return s})},436:function(t,e,n){"use strict";n.r(e);var r=n(437),s=n.n(r);for(var a in r)"default"!==a&&function(t){n.d(e,t,function(){return r[t]})}(a);e.default=s.a},437:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(n(228)),s=a(n(258));function a(t){return t&&t.__esModule?t:{default:t}}e.default={mixins:[r.default],components:{SlotMsg:s.default},methods:{go:function(t){this.$router.push({name:"chat",params:{id:t.user_id}})}}}},438:function(t,e,n){},755:function(t,e,n){"use strict";var r=n(438);n.n(r).a},847:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content private white-color"},[n("SlotMsg",{ref:"slotChild",attrs:{msgType:"private_message"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.list,function(e){return n("div",{staticClass:"item"},[n("div",{staticClass:"msg"},[n("div",{staticClass:"img"},[n("img",{attrs:{src:e.from_user_picture}})]),n("div",{staticClass:"txt"},[n("div",{staticClass:"name"},[n("span",[n("span",[t._v(t._s(e.from_user_name))]),n("span",{staticClass:"badge"},[t._v("私信")])]),n("span",{staticClass:"icon-trash",on:{click:function(n){return t.$refs.slotChild.del(e)}}})]),n("div",{staticClass:"ans"},[t._v(t._s(e.content))]),n("div",{staticClass:"time"},[n("span",[t._v(t._s(e.create_time))]),n("span",{on:{click:function(n){return t.go(e)}}},[t._v("查看对话")]),n("span",{staticClass:"icon-msg"})])])])])})}}])})],1)},s=[];n.d(e,"a",function(){return r}),n.d(e,"b",function(){return s})}}]);