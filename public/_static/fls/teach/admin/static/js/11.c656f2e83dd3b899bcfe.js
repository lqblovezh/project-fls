/*!
 * {
 *   "buildtime": "2019-06-14 15:40:00",
 *   "workspace": "F:\\project\\x-book4\\js",
 *   "username": "Administrator",
 *   "hostname": "PC201608171616",
 *   "platform": "win32",
 *   "git": {
 *     "branch": "master",
 *     "hash": "cc62e1956",
 *     "message": [
 *       "commit cc62e195633d44aadf65545d70d92ce1a5c1c701",
 *       "Author: YangZai <552396385@qq.com>",
 *       "Date:   Fri Jun 14 15:39:28 2019 +0800",
 *       "    'xxx'"
 *     ],
 *     "user": "YangZai",
 *     "email": "552396385@qq.com",
 *     "remote": [
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (fetch)",
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (push)"
 *     ]
 *   }
 * }
 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{1449:function(t,e,i){"use strict";var n=i(685);i.n(n).a},1508:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"setting"},[n("div",{staticClass:"head"},[n("el-button-group",[n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.$router.push({path:"/wms/setting/banner"})}}},[t._v("banner设置")]),n("el-button",{on:{click:function(e){return t.$router.push({path:"/wms/setting/ad"})}}},[t._v("广告位")]),n("el-button",{on:{click:function(e){return t.$router.push({path:"/wms/setting/advert"})}}},[t._v("侧边广告")]),n("el-button",{on:{click:function(e){return t.$router.push({path:"/wms/setting/commend"})}}},[t._v("推荐设置")]),n("el-button",{on:{click:function(e){return t.$router.push({path:"/wms/setting/footer"})}}},[t._v("底部设置")])],1),n("div",{staticClass:"flat"},[n("el-radio",{attrs:{label:"banner_pc"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("PC端")]),n("el-radio",{attrs:{label:"banner_mobile"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("手机端")])],1)],1),n("div",{staticClass:"content"},[t._m(0),n("div",{staticClass:"list"},t._l(t.tableData,function(e,a){return n("div",{staticClass:"item"},[n("div",{staticClass:"leftSide"},[n("img",{staticClass:"thumb",attrs:{src:e.img}})]),n("div",{staticClass:"rightSide"},[n("el-form",{attrs:{inline:!0}},[n("div",{staticClass:"operation"},[n("span",[t._v("排序：( "+t._s(a+1)+" )")]),n("img",{staticClass:"icon up",attrs:{src:i(680),alt:"icon"},on:{click:function(e){return t.up(a)}}}),n("img",{staticClass:"icon down",attrs:{src:i(681),alt:"icon"},on:{click:function(e){return t.down(a)}}}),n("div",{staticClass:"form-item"},[n("span",[t._v("关联:")]),n("el-input",{staticClass:"input",attrs:{placeholder:"请输入新的URL地址",value:e.src}}),n("el-button",{attrs:{type:"info"},on:{click:function(i){return t.open(e)}}},[t._v("修改")]),n("el-button",{attrs:{type:"danger"},on:{click:function(e){return t.del(a)}}},[t._v("删除")])],1)])])],1)])}),0),n("div",{staticClass:"add"},[n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.open("")}}},[t._v("添加图片")]),t._m(1)],1),n("el-dialog",{attrs:{title:"添加图片",width:"500px",visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("el-form",{ref:"form"},[n("el-form-item",{attrs:{label:"关联地址:"}},[n("el-input",{attrs:{placeholder:"请输入关联URL地址 eg:http://www.baidu.com/x-book.html"},model:{value:t.form.src,callback:function(e){t.$set(t.form,"src",e)},expression:"form.src"}})],1),n("el-form-item",[n("img",{ref:"img",staticClass:"banner",attrs:{src:t.form.img}}),n("input",{ref:"updateImg",staticClass:"updateImg",attrs:{type:"file"},on:{change:function(e){return t.update(e,"img")}}}),n("el-button",{attrs:{type:"primary",size:"small",plain:""},on:{click:function(e){return t.$refs.updateImg.click()}}},[t._v("上传banner图")])],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取消")]),n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.sendInfo("updateImg")}}},[t._v("确定")])],1)],1)],1)])},a=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"info"},[e("img",{attrs:{src:i(682)}}),e("span",[this._v("最多支持10张banner图片，当图片数量仅为1张时,无法轮播")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"info"},[e("span",[this._v("(Banner仅支持JPG、PNG 格式 ，推荐比例：1125*560 px)")])])}];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},255:function(t,e,i){"use strict";i.r(e);var n=i(1508),a=i(683);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1449);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"87700634",null);e.default=o.exports},277:function(t,e){var i=/^(?:submit|button|image|reset|file)$/i,n=/^(?:input|select|textarea|keygen)/i,a=/(\[[^\[\]]*\])/g;function r(t,e,i){if(e.match(a)){!function t(e,i,n){if(0===i.length)return e=n;var a=i.shift(),r=a.match(/^\[(.+?)\]$/);if("[]"===a)return e=e||[],Array.isArray(e)?e.push(t(null,i,n)):(e._values=e._values||[],e._values.push(t(null,i,n))),e;if(r){var s=r[1],o=+s;isNaN(o)?(e=e||{})[s]=t(e[s],i,n):(e=e||[])[o]=t(e[o],i,n)}else e[a]=t(e[a],i,n);return e}(t,function(t){var e=[],i=new RegExp(a),n=/^([^\[\]]*)/.exec(t);for(n[1]&&e.push(n[1]);null!==(n=i.exec(t));)e.push(n[1]);return e}(e),i)}else{var n=t[e];n?(Array.isArray(n)||(t[e]=[n]),t[e].push(i)):t[e]=i}return t}function s(t,e,i){return i=i.replace(/(\r)?\n/g,"\r\n"),i=(i=encodeURIComponent(i)).replace(/%20/g,"+"),t+(t?"&":"")+encodeURIComponent(e)+"="+i}t.exports=function(t,e){"object"!=typeof e?e={hash:!!e}:void 0===e.hash&&(e.hash=!0);for(var a=e.hash?{}:"",o=e.serializer||(e.hash?r:s),u=t&&t.elements?t.elements:[],c=Object.create(null),l=0;l<u.length;++l){var d=u[l];if((e.disabled||!d.disabled)&&d.name&&n.test(d.nodeName)&&!i.test(d.type)){var f=d.name,p=d.value;if("checkbox"!==d.type&&"radio"!==d.type||d.checked||(p=void 0),e.empty){if("checkbox"!==d.type||d.checked||(p=""),"radio"===d.type&&(c[d.name]||d.checked?d.checked&&(c[d.name]=!0):c[d.name]=!1),void 0==p&&"radio"==d.type)continue}else if(!p)continue;if("select-multiple"!==d.type)a=o(a,f,p);else{p=[];for(var h=d.options,g=!1,m=0;m<h.length;++m){var v=h[m],A=e.empty&&!v.value,b=v.value||A;v.selected&&b&&(g=!0,a=e.hash&&"[]"!==f.slice(f.length-2)?o(a,f+"[]",v.value):o(a,f,v.value))}!g&&e.empty&&(a=o(a,f,""))}}}if(e.empty)for(var f in c)c[f]||(a=o(a,f,""));return a}},278:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.main=void 0;var n,a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},r=i(277);(n=r)&&n.__esModule;var s={data:function(){return{tableData:[],total:0,page:{pageOffset:10,pageNum:1},ids:[],isTeacher:"",dialogVisible:!1,detailVisible:!1,detailData:[],productType:null}},created:function(){this.isTeacher=this.$config.isTeacher,this.getList(a({},this.query,this.page))},methods:{seareHandeler:function(){this.page.pageNum=1,this.getList(a({},this.query))},getList:function(t){var e=this;this.service&&this.service.getList(a({},this.page,this.query,t)).then(function(t){t&&t.status&&(e.tableData=t.data,e.total=t.page.total)})},handleSelectionChange:function(t){this.ids=t.map(function(t){return t.id}),this.multipleSelection=t},update:function(t,e){this.$refs[e].src=URL.createObjectURL(t.target.files[0])},getTime:function(t){t||(t=["",""]),this.query.time_start=t[0],this.query.time_end=t[1],this.query.start_time=t[0],this.query.end_time=t[1]},handleSizeChange:function(t){this.page.pageOffset=t,this.getList(a({},this.page,this.query))},handleCurrentChange:function(t){this.page.pageNum=t,this.getList(a({},this.page,this.query))},handleClose:function(){this.detailVisible=!1,this.dialogVisible=!1},del:function(t){var e=this;if(!t){if(!this.ids.length)return this.$message.warning("请先选中");t=this.ids}this.$confirm("你真的要删除该数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.service.del({id:t}).then(function(t){t&&t.status&&(e.getList(a({},e.page,e.query)),e.$message.success("删除成功"))},function(t){var i=t.payload;e.$message.error(i.message)})}).catch(function(){})},save:function(t){var e=this;t||(t=this.form),this.service.save(t).then(function(t){t.status&&(e.$message.success("保存成功"),e.getList(e.query)),e.dialogVisible=!1,e.$refs.child&&(e.$refs.child.dialogVisible=!1)},function(t){e.$message.error(t.payload.message)})},educe:function(t){this.service.educe({id:t}).then(function(t){window.location.href=t.data.url})},detail:function(t){var e=this;this.service.detail({id:t}).then(function(t){e.detailData=t.data,log(t,"detail")}),this.$refs.child.dialogVisible=!0},showDetail:function(t,e){var i=this;log("------------"),this.service.detail({id:t}).then(function(t){log(t,"detailInfo"),i.detailData=t.data,i.productType=e,i.detailVisible=!0})}}};e.main=s},282:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getTask=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments[2];return t.size,t.size>=1048576?(e.is_chunk=!0,(0,n.request_post)("/common/api/files/upload_task?r="+Math.random(5)).then(function(a){if(a.status)return e.task_id=a.data.task_id,(0,n.request_file)("/common/api/files/upload",{file:t,data:e},i);throw new Error(a.messages)}).catch(function(t){throw new Error("上传失败")})):(e.is_chunk=!1,(0,n.request_file)("/common/api/files/upload",{file:t,data:e}))},e.getAppId=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)("/common/api/app/search_name",t).then(function(t){return a.default.app_id=t.data.id,sessionStorage.app_id=t.data.id,t})},e.getClientToken=function(){return(0,n.request_post)("/common/api/auth/token/pcclient")},e.platInfo=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)(o(t)).then(function(t){return a.default.app_id=t.data.id,sessionStorage.app_id=t.data.id,document.title=t.data.name,t})},e.commonPreview=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)(c(t))},e.getDefaultCover=function(){return(0,n.request_get)("/api/videos/images")},e.generate=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/common/api/qr_code/generate",t)},e.commonPreviewCode=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/api/preview",t)},e.getQrcode=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)("/common/api/get_qrcode",t)},e.synchronization=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)(u(t)).then(function(t){return t})},e.getAuthor=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)("/api/ecommerce/author",t)},e.addAuthor=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/api/ecommerce/author",t)},e.getWeixinConfig=function(t){return(0,n.request_get)("/common/api/third/wx_js_sdk/config",t)},e.getIndexInfo=function(){return(0,n.request_get)("/common/api/current")};s(i(19));var n=i(49),a=s(i(50)),r=s(i(82));function s(t){return t&&t.__esModule?t:{default:t}}r.default.compile("/common/api/files/upload_task/:id"),r.default.compile("/common/api/manager/managers/:id"),r.default.compile("/common/api/manager/roles/:id");var o=r.default.compile("/common/api/app/apps/:id"),u=r.default.compile("/common/api/dragon_infos/:id");var c=r.default.compile("/api/preview/:id")},314:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getList=function(t){return n.request_get("/api/setting/all",t)},e.save=function(t){if(t.id)return n.request_put(s(t),t);return n.request_post("/api/setting",t)},e.del=function(t){return n.request_delete(s(t),t)},e.files_move=function(t){return n.request_put("/api/setting/files_move",t)},e.recommend=function(t){return n.request_post("/api/recommend",t)},e.courseList=function(t){return n.request_get("/api/recommend/list",t)},e.courseDel=function(t){return n.request_delete(o({id:t.id}),t)},e.teacherList=function(){return n.request_get("/common/api/user/users/teacher")};var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(49)),a=r(i(82));r(i(19));function r(t){return t&&t.__esModule?t:{default:t}}var s=a.default.compile("/api/setting/:id"),o=(a.default.compile("/api/live/online/:id"),a.default.compile("/api/live/state/:id"),a.default.compile("/api/recommend/:id"))},334:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.pub=void 0;var n=o(i(20)),a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},r=o(i(19)),s=i(282);function o(t){return t&&t.__esModule?t:{default:t}}var u={methods:{open:function(t){if(t)this.form=t,this.type="update";else{if("ewm"==this.toPage&&this.tableData.ewm.length>=3)return void this.$message.error("二维码数量不能超过3条");this.type="add",this.form={src:"",name:"",img:""}}this.dialogVisible=!0},getList:function(){var t=this;arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.radio;this.service.getList({key:this.radio}).then(function(e){log(e),e.data[0]?(t.id=e.data[0].id,t.tableData=Object.values(r.default.parse(e.data[0].value))):(t.id="",t.tableData=[])})},sendInfo:function(t){var e,i=this;return(e=n.default.mark(function e(){var r,o;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=i.$loading({text:"正在上传",background:"rgba(0, 0, 0, 0.8)"}),!i.$refs[t].files[0]){e.next=7;break}return o=void 0,e.next=5,(0,s.getTask)(i.$refs[t].files[0]).then(function(t){o=t.data.path});case 5:return e.next=7,i.service.files_move({temp:o}).then(function(t){var e=a({},i.form);e.img=t.data,"add"==i.type?(log(i.tableData,7),i.tableData.push(e)):i.form.img=t.data});case 7:r.close(),i.changeData();case 9:case"end":return e.stop()}},e,i)}),function(){var t=e.apply(this,arguments);return new Promise(function(e,i){return function n(a,r){try{var s=t[a](r),o=s.value}catch(t){return void i(t)}if(!s.done)return Promise.resolve(o).then(function(t){n("next",t)},function(t){n("throw",t)});e(o)}("next")})})()},del:function(t){this.tableData.splice(t,1),this.changeData()},changeData:function(t){this.save({position:this.radio,key:this.radio,value:r.default.stringify(this.tableData)||"{}",type:2,id:this.id})},up:function(t){0==t?this.tableData.push(this.tableData.shift()):this.tableData=this.swapItems(this.tableData,t,t-1),this.$message.success("上移成功"),this.changeData()},down:function(t){t==this.tableData.length-1?this.tableData.unshift(this.tableData.pop()):this.tableData=this.swapItems(this.tableData,t,t+1),this.$message.success("下移成功"),this.changeData()},swapItems:function(t,e,i){return t[e]=t.splice(i,1,t[e])[0],t}},watch:{radio:function(){log(this.radio),this.getList({key:this.radio})}}};e.pub=u},680:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAYAAAD6S912AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAEkSURBVEhLY2AYBcghoFZfJKJeX55ASqgw4VJsX1/PwvSfdTFQXoEqBr78/72egZHBgxTDQGqxulCjvtSHgZGxhlTDsBqoVl+p8f8/43JyDAPpYUTWqFVfz/P3/4/jjIwMOuQYeKOxkxHFy//+/5hPrmEwB8ANVK8vKwG6N4QclyHrARuoWV/hwvCfoZ1Sw+CR8pfhvwQjIyML1Qy81di5BOjCHqoZCDJInJGjkuH//wOUGgqPlIONjX+YGP9FAl36hBJDUdIhyCCN+jKL//8ZDsPC9D8DQ+PNxs4GYi3ByHo3GrtOMDL+zyTWAHR1WPPyjcbuOcDwXECOoTiLr++MnJnA8DxDqqE4DXzY2PjjPyNDKCPD/zekGopXPaigpaqBA24YADNRSiMxf6PpAAAAAElFTkSuQmCC"},681:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAYAAAD6S912AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAERSURBVEhL7dS9DsFQFAfw/2k6Gg1sRoMH8AAGg5HBZkBSs0UiwWTxBCpBSLyGxMDgMQwGD0CI41SiUVpxb5tYdOly7q/no+cC/+e5A1xHnKuoqHTFCArmDkxmzEBIRQPu0SFCXgVzYn0zvFZRIEZbFfMFpW9pKXOhgzlnyDOEBmJ8xlpKzeiANAR5SuYLxrrYIwEXvNbQlHSLOpk9n7mDXENOXv2wmDsUJiSkVDMy0BhizsAgMvA+7iRagi7Dou5QqIcLmSgLuguDev5DB5ItycrfuXJ7yuiRje63H3lbPWOEjRy2vgVe43x32bAxktInOmjg9UUnWHJ9bVXRYHCKoyxmSTI9qKIf452LNlLw59gNK0U5AOXGWm0AAAAASUVORK5CYII="},682:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAGPSURBVDhPhVO/S8NQEL57TwuZhEhpQRAEoVAsOOkg2oxOddLBraODiILiZGgXUVxc/CMsKAj+BwXBtRgMiEInoeAkDoXX865p07RN2sALvLvv7rsf30MY+fLusW1gdhsJ1wkg23UjtQjImwF68Co339EQjF5y7tk+EJTZlhpN3M2DaIjg0V/5vIO9muna+sCce1oFwuIgEH/Y2exVsMCB6dCH0NBgnXiVSluJMWCOBouVnt6rV0dyOPh5qCKCgqG/Q7Ep6blX9hCG2YP+Ez8s5d3zZSUDS+p5cgIAQ2ZHybTjgWhPS8ANrKlwVePocBOEMBefjLIKkfQ0JmaxkjB63tnYYmcmBtDOOMWvtLOZ7WDHicMgQkvx+vyE7HaHTFkOb2QxDiPqVBpNTRQ2CkDAj74OeM0vsSQaa0q0LfKcNodxAqj7F9eNQMr3uzr3tnTLTIUBUKRMr3InwFX+R4XV1GgdsJR/w7eQd91UIE8sTdQfQF2hdSnBght6jWIQeYrCRCR9Vpm2DAy4Zyk7SvAPCiiObi2O17AAAAAASUVORK5CYII="},683:function(t,e,i){"use strict";i.r(e);var n=i(684),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},684:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a=i(278),r=i(334),s=i(19),o=((n=s)&&n.__esModule,function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(314)));e.default={mixins:[a.main,r.pub],data:function(){return{radio:"banner_pc",dialogVisible:!1,service:o,id:"",type:"add",form:{src:"",img:""}}}}},685:function(t,e,i){}}]);