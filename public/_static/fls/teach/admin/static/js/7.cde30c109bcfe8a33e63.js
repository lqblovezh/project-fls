/*!
 * {
 *   "buildtime": "2019-06-14 15:40:00",
 *   "workspace": "F:\\project\\x-book4\\js",
 *   "username": "Administrator",
 *   "hostname": "PC201608171616",
 *   "platform": "win32",
 *   "git": {
 *     "branch": "master",
 *     "hash": "cc62e1956",
 *     "message": [
 *       "commit cc62e195633d44aadf65545d70d92ce1a5c1c701",
 *       "Author: YangZai <552396385@qq.com>",
 *       "Date:   Fri Jun 14 15:39:28 2019 +0800",
 *       "    'xxx'"
 *     ],
 *     "user": "YangZai",
 *     "email": "552396385@qq.com",
 *     "remote": [
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (fetch)",
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (push)"
 *     ]
 *   }
 * }
 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{1424:function(t,e,i){"use strict";i.r(e);var s=i(1535),a=i(621);for(var n in a)"default"!==n&&function(t){i.d(e,t,function(){return a[t]})}(n);i(1425);var r=i(0),u=Object(r.a)(a.default,s.a,s.b,!1,null,"e02d1670",null);e.default=u.exports},1425:function(t,e,i){"use strict";var s=i(623);i.n(s).a},1426:function(t,e,i){"use strict";var s=i(624);i.n(s).a},1526:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("TPL",{ref:"child",on:{sizeChange:t.handleSizeChange}},[i("div",{staticClass:"tab-nav",attrs:{slot:"content"},slot:"content"},[i("el-button-group",{staticClass:"header"},[i("el-button",{attrs:{type:"primary"}},[t._v("学生列表")]),i("el-button",{on:{click:function(e){return t.$router.push({name:"CourseBill",query:{id:t.$route.query.id,course_id:t.$route.query.course_id,index:t.index}})}}},[t._v(t._s("/wms/course"!=t.index?"班级报表":"课程报表"))])],1)],1),i("div",{staticClass:"search",attrs:{slot:"search"},slot:"search"},[i("el-input",{staticClass:"dy_inputWidth",attrs:{placeholder:"学生姓名",clearable:""},model:{value:t.query.name,callback:function(e){t.$set(t.query,"name",e)},expression:"query.name"}}),i("el-select",{attrs:{clearable:"",placeholder:"今日学习时长"},model:{value:t.query.status,callback:function(e){t.$set(t.query,"status",e)},expression:"query.status"}},t._l(t.options,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),i("div",{staticClass:"right"},[i("el-button",{staticClass:"el-icon-search",attrs:{type:"primary"},on:{click:function(e){return t.seareHandeler(t.query)}}},[t._v("搜索")])],1)],1),i("div",{staticClass:"list",attrs:{slot:"list"},slot:"list"},[i("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{stripe:"",data:t.tableData,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55",fixed:""}}),i("el-table-column",{attrs:{prop:"student_name",label:"学生姓名"}}),i("el-table-column",{attrs:{prop:"phone",label:"电话"}}),i("el-table-column",{attrs:{prop:"join_time",label:"加入日期"}}),i("el-table-column",{attrs:{prop:"total_length_of_time",label:"学习时长"}}),i("el-table-column",{attrs:{prop:"today_length_of_time",label:"今日学习时长"}}),i("el-table-column",{attrs:{label:"操作",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[i("Icon",{attrs:{type:"icon-detail",title:"报表详细"},on:{click:function(e){return t.openDetail(s)}}}),i("Icon",{attrs:{type:"icon-menu-private-letter",title:"私信"},on:{click:function(e){return t.send(s)}}})]}}])})],1),i("el-dialog",{staticClass:"dialog",attrs:{visible:t.messageVisible,width:"1000px","before-close":t.messageClose},on:{"update:visible":function(e){t.messageVisible=e}}},[i("div",{staticClass:"title",attrs:{slot:"title"},slot:"title"},[t._v("发送私信")]),i("div",{staticClass:"all"},[i("div",{staticClass:"msgBack"},[i("div",{staticClass:"head"},[i("span",{staticClass:"name"},[t._v(t._s(t.currentDetail.student_name)+":")]),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.$router.push({path:"/wms/message",query:{id:t.currentDetail.student_id}})}}},[t._v("查看私信")])],1),i("el-input",{attrs:{type:"textarea",rows:7,placeholder:"请输入回复内容"},model:{value:t.currentDetail.text,callback:function(e){t.$set(t.currentDetail,"text",e)},expression:"currentDetail.text"}})],1)]),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:t.messageClose}},[t._v("取消")]),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.sendMessage}},[t._v("发送")])],1)])],1),i("div",{staticClass:"detail",attrs:{slot:"detail"},slot:"detail"},[t.$refs.child&&t.$refs.child.dialogVisible?i("Info",{attrs:{item:t.currentItem}}):t._e()],1)])},a=[];i.d(e,"a",function(){return s}),i.d(e,"b",function(){return a})},1535:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("div",{staticClass:"head"},[i("img",{attrs:{src:t.infoDate.picture_absolute}}),i("div",{staticClass:"box"},[i("span",[t._v(" "+t._s(t.infoDate.name))]),i("span",[t._v(" 加入收时间："+t._s(t.infoDate.join_time))]),i("span",[t._v(" "+t._s(t.infoDate.school))]),i("span",[t._v(" "+t._s(t.infoDate.nick_name))]),i("span",[t._v(" "+t._s(t.infoDate.phone))]),i("span",[t._v(" 学习时长："+t._s(t.infoDate.length_of_time))]),i("span",[t._v(" "+t._s(t.infoDate.college))])])]),i("div",{staticClass:"tail"},[i("div",{staticClass:"group"},[i("div",{ref:"charts1",staticClass:"draw"})]),i("div",{staticClass:"group"},[i("div",{ref:"charts2",staticClass:"draw"})])])])},a=[];i.d(e,"a",function(){return s}),i.d(e,"b",function(){return a})},237:function(t,e,i){"use strict";i.r(e);var s=i(1526),a=i(619);for(var n in a)"default"!==n&&function(t){i.d(e,t,function(){return a[t]})}(n);i(1426);var r=i(0),u=Object(r.a)(a.default,s.a,s.b,!1,null,"88bddf96",null);e.default=u.exports},278:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.main=void 0;var s,a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},n=i(277);(s=n)&&s.__esModule;var r={data:function(){return{tableData:[],total:0,page:{pageOffset:10,pageNum:1},ids:[],isTeacher:"",dialogVisible:!1,detailVisible:!1,detailData:[],productType:null}},created:function(){this.isTeacher=this.$config.isTeacher,this.getList(a({},this.query,this.page))},methods:{seareHandeler:function(){this.page.pageNum=1,this.getList(a({},this.query))},getList:function(t){var e=this;this.service&&this.service.getList(a({},this.page,this.query,t)).then(function(t){t&&t.status&&(e.tableData=t.data,e.total=t.page.total)})},handleSelectionChange:function(t){this.ids=t.map(function(t){return t.id}),this.multipleSelection=t},update:function(t,e){this.$refs[e].src=URL.createObjectURL(t.target.files[0])},getTime:function(t){t||(t=["",""]),this.query.time_start=t[0],this.query.time_end=t[1],this.query.start_time=t[0],this.query.end_time=t[1]},handleSizeChange:function(t){this.page.pageOffset=t,this.getList(a({},this.page,this.query))},handleCurrentChange:function(t){this.page.pageNum=t,this.getList(a({},this.page,this.query))},handleClose:function(){this.detailVisible=!1,this.dialogVisible=!1},del:function(t){var e=this;if(!t){if(!this.ids.length)return this.$message.warning("请先选中");t=this.ids}this.$confirm("你真的要删除该数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.service.del({id:t}).then(function(t){t&&t.status&&(e.getList(a({},e.page,e.query)),e.$message.success("删除成功"))},function(t){var i=t.payload;e.$message.error(i.message)})}).catch(function(){})},save:function(t){var e=this;t||(t=this.form),this.service.save(t).then(function(t){t.status&&(e.$message.success("保存成功"),e.getList(e.query)),e.dialogVisible=!1,e.$refs.child&&(e.$refs.child.dialogVisible=!1)},function(t){e.$message.error(t.payload.message)})},educe:function(t){this.service.educe({id:t}).then(function(t){window.location.href=t.data.url})},detail:function(t){var e=this;this.service.detail({id:t}).then(function(t){e.detailData=t.data,log(t,"detail")}),this.$refs.child.dialogVisible=!0},showDetail:function(t,e){var i=this;log("------------"),this.service.detail({id:t}).then(function(t){log(t,"detailInfo"),i.detailData=t.data,i.productType=e,i.detailVisible=!0})}}};e.main=r},296:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getList=function(t){return a.request_get("/api/message/user",t)},e.save=function(t){return a.request_post("/api/message",t)},e.del=function(t){return a.request_delete(r(t),t)},e.getMsgInfo=function(t){return a.request_get("/api/message/record",t)};var s,a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(49)),n=i(82);var r=((s=n)&&s.__esModule?s:{default:s}).default.compile("/api/message/:id")},301:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getList=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)("/api/courses",t)},e.getPubList=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)("/api/course_share",t)},e.detail=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)(l(t))},e.del=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)("/api/courses/delete",t)},e.accredit=function(t){var e=t.id;if("acc"==t.type)return(0,a.request_put)(u({id:e}));return(0,a.request_put)(o({id:e}))},e.shelf=function(t){var e=t.id,i=function(t,e){var i={};for(var s in t)e.indexOf(s)>=0||Object.prototype.hasOwnProperty.call(t,s)&&(i[s]=t[s]);return i}(t,["id"]);return(0,a.request_put)(c({id:e}),i)},e.classfiy=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)("/api/classify/tree",t)},e.apply=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)("/api/class",t)},e.use=function(t){var e=t.id;return(0,a.request_put)(d({id:e}))},e.bill=function(t){var e=t.type,i=t.id;if("course"==e)return(0,a.request_get)(f({id:i}));return(0,a.request_get)(p({id:i}))},e.userBill=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)("/api/courses/user_statis",t)};var s,a=i(49),n=i(82),r=(s=n)&&s.__esModule?s:{default:s};var u=r.default.compile("/api/courses/authorization/:id"),o=r.default.compile("/api/courses/enable_class/:id"),l=r.default.compile("/api/courses/:id"),c=r.default.compile("/api/courses/classfiy/:id"),d=r.default.compile("/api/course_share/authorization/:id"),f=r.default.compile("/api/courses/statis/:id"),p=r.default.compile("/api/courses/class/statis/:id")},312:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getList=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)("/api/class/all",t)},e.detail=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)(o(t))},e.del=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)("/api/class/delete",t)},e.accredit=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_put)(u(t))},e.apply=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)("/api/class",t)},e.applyAgain=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)("/api/class/re_apply_code",t)},e.getAuditList=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)("/api/class/verify_list",t)},e.refuse=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_put)(l({id:t.id}))},e.upload=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_put)(c(t),t)},e.codeList=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)("/api/code/all",t).then(function(t){return t.data.forEach(function(t){t.prescription=t.satrt_time+"-"+t.end_time}),t})},e.studentList=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.type,i=function(t,e){var i={};for(var s in t)e.indexOf(s)>=0||Object.prototype.hasOwnProperty.call(t,s)&&(i[s]=t[s]);return i}(t,["type"]);if("course"==e)return(0,a.request_get)("/api/class/student_list",i);return(0,a.request_get)("/api/class/class_student_list",i)},e.educe=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.class_id=t.id,(0,a.request_get)("/api/code/export",t)},e.back=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_put)(d(t))},e.delCode=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_delete)(f(t))};var s,a=i(49),n=i(82),r=(s=n)&&s.__esModule?s:{default:s};var u=r.default.compile("/api/courses/authorization/:id"),o=r.default.compile("/api/courses/:id"),l=r.default.compile("/api/class/refuse/:id"),c=(r.default.compile("/api/class/:id"),r.default.compile("/api/class/agree_and_upload/:id")),d=r.default.compile("/api/code/withdraw/:id"),f=r.default.compile("/api/code/:id")},619:function(t,e,i){"use strict";i.r(e);var s=i(620),a=i.n(s);for(var n in s)"default"!==n&&function(t){i.d(e,t,function(){return s[t]})}(n);e.default=a.a},620:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s,a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},n=i(278),r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(312)),u=i(296),o=i(1424),l=(s=o)&&s.__esModule?s:{default:s};e.default={mixins:[n.main],components:{Info:l.default},data:function(){return{service:r,query:{name:"",phone:"",time_start:"",time_end:"",status:""},index:this.$route.query.index||"/wms/course",options:[{value:"1",label:"1小时内"},{value:"2",label:"2小时内"},{value:"3",label:"3小时内"}],currentItem:{},active:!1,messageVisible:!1,currentDetail:{},ids:[]}},created:function(){this.$route.query.id||this.$router.back()},methods:{getList:function(){var t=this,e=a({},this.query,this.page);e["/wms/course"!=this.index?"class_id":"course_id"]=this.$route.query.id,r.studentList(a({},e,{type:this.index&&this.index.split("/wms/")[1]})).then(function(e){t.tableData=e.data,t.total=e.page.total})},send:function(t){log(t),this.currentDetail=t,this.text=null,this.messageVisible=!0},sendMessage:function(){var t=this;(0,u.save)({to_user_id:this.currentDetail.student_id,content:this.currentDetail.text,type:"private_message"}).then(function(e){t.$message.success("消息发送成功"),t.messageVisible=!1})},tabs:function(){this.active=!this.active},messageClose:function(){this.messageVisible=!1},openDetail:function(t){this.currentItem=t,this.$refs.child.dialogVisible=!0}}}},621:function(t,e,i){"use strict";i.r(e);var s=i(622),a=i.n(s);for(var n in s)"default"!==n&&function(t){i.d(e,t,function(){return s[t]})}(n);e.default=a.a},622:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});i(278);var s,a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(301)),n=i(387),r=(s=n)&&s.__esModule?s:{default:s};e.default={props:["item"],data:function(){return{service:a,infoDate:{}}},created:function(){this.$route.query.id?this.getBill():this.$router.back()},methods:{getBill:function(){var t=this;a.userBill({user_id:this.item.student_id,course_id:this.item.course_id||this.$route.query.course_id}).then(function(e){t.infoDate=e.data;t.infoDate.course_user_count;t.$nextTick(function(){t.init()})})},init:function(){this.draw1(),this.draw2()},draw1:function(){r.default.init(this.$refs.charts1).setOption({title:{text:"每日学习时长",x:"center"},tooltip:{trigger:"axis"},xAxis:{type:"category",data:Object.entries(this.infoDate.course_sum_seven).map(function(t){return t[0]}),axisLabel:{interval:0,rotate:40}},yAxis:{type:"value"},series:[{data:Object.entries(this.infoDate.course_sum_seven).map(function(t){return t[1]}),type:"line",smooth:!0}]})},draw2:function(){r.default.init(this.$refs.charts2).setOption({title:{text:"学习进度"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["2011年"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value",boundaryGap:[0,.1]},yAxis:{type:"category",data:Object.entries(this.infoDate.course_speed).map(function(t){return t[0]})},series:[{type:"bar",barWidth:20,data:Object.entries(this.infoDate.course_speed).map(function(t){return t[1]})}]})}}}},623:function(t,e,i){},624:function(t,e,i){}}]);