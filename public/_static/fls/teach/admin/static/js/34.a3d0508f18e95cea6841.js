/*!
 * {
 *   "buildtime": "2019-06-14 15:40:00",
 *   "workspace": "F:\\project\\x-book4\\js",
 *   "username": "Administrator",
 *   "hostname": "PC201608171616",
 *   "platform": "win32",
 *   "git": {
 *     "branch": "master",
 *     "hash": "cc62e1956",
 *     "message": [
 *       "commit cc62e195633d44aadf65545d70d92ce1a5c1c701",
 *       "Author: YangZai <552396385@qq.com>",
 *       "Date:   Fri Jun 14 15:39:28 2019 +0800",
 *       "    'xxx'"
 *     ],
 *     "user": "YangZai",
 *     "email": "552396385@qq.com",
 *     "remote": [
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (fetch)",
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (push)"
 *     ]
 *   }
 * }
 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{1436:function(e,t,s){"use strict";var i=s(649);s.n(i).a},1519:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"exe"},[s("div",{staticClass:"tab-nav"},[s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.$router.back()}}},[e._v("返回")])],1),s("div",{staticClass:"left"},[s("div",{staticClass:"tab"},[s("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.tabChange()}}},[e._v("全部")]),s("el-button",{class:{active:"subjective_item"==e.currentType},attrs:{size:"mini"},on:{click:function(t){return e.tabChange({type:"subjective_item"})}}},[e._v("主观题")]),s("el-button",{class:{active:"yes"==e.currentStatus},attrs:{size:"mini"},on:{click:function(t){return e.tabChange({status:"yes"})}}},[e._v("已评分")]),s("el-button",{class:{active:"no"==e.currentStatus},attrs:{size:"mini"},on:{click:function(t){return e.tabChange({status:"no"})}}},[e._v("未评分")])],1),s("div",{staticClass:"content"},[s("ul",{staticClass:"exerciseInfo"},e._l(e.newArr,function(t,i){return s("li",[s("div",{staticClass:"top"},[s("span",{staticClass:"title"},[e._v("第"+e._s(e._f("numberToChinese")(i+1))+"题")]),s("span",{staticClass:"score"},[e._v(e._s(t.score)+"分")]),s("span",{staticClass:"name"},[e._v(e._s(t.type_name))]),"subjective_item"!=t.type?s("span",{staticClass:"answer"},[e._v("正确答案："+e._s(e.getAnswer(t)))]):s("span",{staticClass:"answer"},[e._v("评分："),s("el-select",{attrs:{placeholder:"分数",size:"small"},model:{value:t.account,callback:function(s){e.$set(t,"account",s)},expression:"item.account"}},e._l(e.getScore(t.score),function(e){return s("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1),"subjective_item"!=t.type?s("span",{staticClass:"isRight"},[t.account==t.score?s("span",{staticClass:"correct"},[e._v("√")]):s("span",{staticClass:"error"},[e._v("×")])]):e._e()]),s("div",{staticClass:"left"},[s("div",{staticClass:"exercise"},[s("div",{staticClass:"title"},[e._v("题目：")]),s("span",{domProps:{innerHTML:e._s(t.question)}}),"single"==t.type||"multi"==t.type?s("ul",{staticClass:"options"},e._l(t.option,function(i,a){return s("li",[s("span",[e._v(e._s(e.numberToLetter(a)))]),s("el-checkbox",{attrs:{checked:e.getUserAnswer(a,t),disabled:""}}),s("span",{domProps:{innerHTML:e._s(i.title)}})],1)}),0):e._e()]),"subjective_item"==t.type?s("div",{staticClass:"answer"},[s("div",{staticClass:"title"},[e._v("用户答案： "+e._s(t.user_answer))]),s("el-input",{attrs:{type:"textarea",placeholder:"教师回复："},model:{value:t.teach_answer,callback:function(s){e.$set(t,"teach_answer",s)},expression:"item.teach_answer"}})],1):e._e()]),s("div",{staticClass:"right"},[s("img",{attrs:{src:t.img}})])])}),0),s("div",{staticClass:"pageWrap"},[s("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.total,"page-size":e.pageSize},on:{"current-change":e.handleCurrentChange}})],1)])]),s("div",{staticClass:"right"},[s("div",{staticClass:"group"},[e._v(" 总分："+e._s(e.totalScore))]),s("div",{staticClass:"group"},[e._v(" 得分："+e._s(e.score))]),s("div",{staticClass:"group margin"},[s("div",{staticClass:"label"},[e._v("评价留言：")]),s("el-input",{attrs:{type:"textarea"},model:{value:e.details.text,callback:function(t){e.$set(e.details,"text",t)},expression:"details.text"}})],1),s("div",{staticClass:"group"},[s("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("发布")])],1),s("div",{staticClass:"group"},[s("el-checkbox",{model:{value:e.details.label,callback:function(t){e.$set(e.details,"label",t)},expression:"details.label"}},[e._v("要求重做")])],1)])])},a=[];s.d(t,"a",function(){return i}),s.d(t,"b",function(){return a})},244:function(e,t,s){"use strict";s.r(t);var i=s(1519),a=s(647);for(var n in a)"default"!==n&&function(e){s.d(t,e,function(){return a[e]})}(n);s(1436);var r=s(0),c=Object(r.a)(a.default,i.a,i.b,!1,null,"3c0027e4",null);t.default=c.exports},277:function(e,t){var s=/^(?:submit|button|image|reset|file)$/i,i=/^(?:input|select|textarea|keygen)/i,a=/(\[[^\[\]]*\])/g;function n(e,t,s){if(t.match(a)){!function e(t,s,i){if(0===s.length)return t=i;var a=s.shift(),n=a.match(/^\[(.+?)\]$/);if("[]"===a)return t=t||[],Array.isArray(t)?t.push(e(null,s,i)):(t._values=t._values||[],t._values.push(e(null,s,i))),t;if(n){var r=n[1],c=+r;isNaN(c)?(t=t||{})[r]=e(t[r],s,i):(t=t||[])[c]=e(t[c],s,i)}else t[a]=e(t[a],s,i);return t}(e,function(e){var t=[],s=new RegExp(a),i=/^([^\[\]]*)/.exec(e);for(i[1]&&t.push(i[1]);null!==(i=s.exec(e));)t.push(i[1]);return t}(t),s)}else{var i=e[t];i?(Array.isArray(i)||(e[t]=[i]),e[t].push(s)):e[t]=s}return e}function r(e,t,s){return s=s.replace(/(\r)?\n/g,"\r\n"),s=(s=encodeURIComponent(s)).replace(/%20/g,"+"),e+(e?"&":"")+encodeURIComponent(t)+"="+s}e.exports=function(e,t){"object"!=typeof t?t={hash:!!t}:void 0===t.hash&&(t.hash=!0);for(var a=t.hash?{}:"",c=t.serializer||(t.hash?n:r),u=e&&e.elements?e.elements:[],l=Object.create(null),o=0;o<u.length;++o){var h=u[o];if((t.disabled||!h.disabled)&&h.name&&i.test(h.nodeName)&&!s.test(h.type)){var p=h.name,f=h.value;if("checkbox"!==h.type&&"radio"!==h.type||h.checked||(f=void 0),t.empty){if("checkbox"!==h.type||h.checked||(f=""),"radio"===h.type&&(l[h.name]||h.checked?h.checked&&(l[h.name]=!0):l[h.name]=!1),void 0==f&&"radio"==h.type)continue}else if(!f)continue;if("select-multiple"!==h.type)a=c(a,p,f);else{f=[];for(var d=h.options,v=!1,g=0;g<d.length;++g){var m=d[g],y=t.empty&&!m.value,_=m.value||y;m.selected&&_&&(v=!0,a=t.hash&&"[]"!==p.slice(p.length-2)?c(a,p+"[]",m.value):c(a,p,m.value))}!v&&t.empty&&(a=c(a,p,""))}}}if(t.empty)for(var p in l)l[p]||(a=c(a,p,""));return a}},278:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.main=void 0;var i,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e},n=s(277);(i=n)&&i.__esModule;var r={data:function(){return{tableData:[],total:0,page:{pageOffset:10,pageNum:1},ids:[],isTeacher:"",dialogVisible:!1,detailVisible:!1,detailData:[],productType:null}},created:function(){this.isTeacher=this.$config.isTeacher,this.getList(a({},this.query,this.page))},methods:{seareHandeler:function(){this.page.pageNum=1,this.getList(a({},this.query))},getList:function(e){var t=this;this.service&&this.service.getList(a({},this.page,this.query,e)).then(function(e){e&&e.status&&(t.tableData=e.data,t.total=e.page.total)})},handleSelectionChange:function(e){this.ids=e.map(function(e){return e.id}),this.multipleSelection=e},update:function(e,t){this.$refs[t].src=URL.createObjectURL(e.target.files[0])},getTime:function(e){e||(e=["",""]),this.query.time_start=e[0],this.query.time_end=e[1],this.query.start_time=e[0],this.query.end_time=e[1]},handleSizeChange:function(e){this.page.pageOffset=e,this.getList(a({},this.page,this.query))},handleCurrentChange:function(e){this.page.pageNum=e,this.getList(a({},this.page,this.query))},handleClose:function(){this.detailVisible=!1,this.dialogVisible=!1},del:function(e){var t=this;if(!e){if(!this.ids.length)return this.$message.warning("请先选中");e=this.ids}this.$confirm("你真的要删除该数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.service.del({id:e}).then(function(e){e&&e.status&&(t.getList(a({},t.page,t.query)),t.$message.success("删除成功"))},function(e){var s=e.payload;t.$message.error(s.message)})}).catch(function(){})},save:function(e){var t=this;e||(e=this.form),this.service.save(e).then(function(e){e.status&&(t.$message.success("保存成功"),t.getList(t.query)),t.dialogVisible=!1,t.$refs.child&&(t.$refs.child.dialogVisible=!1)},function(e){t.$message.error(e.payload.message)})},educe:function(e){this.service.educe({id:e}).then(function(e){window.location.href=e.data.url})},detail:function(e){var t=this;this.service.detail({id:e}).then(function(e){t.detailData=e.data,log(e,"detail")}),this.$refs.child.dialogVisible=!0},showDetail:function(e,t){var s=this;log("------------"),this.service.detail({id:e}).then(function(e){log(e,"detailInfo"),s.detailData=e.data,s.productType=t,s.detailVisible=!0})}}};t.main=r},645:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)("/api/course_paper",e)},t.detail=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)(r(e))},t.del=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)("/api/course_paper/delete",e)},t.save=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)("/api/courses/teach_paper_answer",e)};var i,a=s(49),n=s(82);var r=((i=n)&&i.__esModule?i:{default:i}).default.compile("/api/courses/user_paper/:id")},647:function(e,t,s){"use strict";s.r(t);var i=s(648),a=s.n(i);for(var n in i)"default"!==n&&function(e){s.d(t,e,function(){return i[e]})}(n);t.default=a.a},648:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e},n=s(277),r=((i=n)&&i.__esModule,s(278)),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t.default=e,t}(s(645));t.default={mixins:[r.main],props:[],data:function(){return{exerciseList:[],total:50,pageSize:5,newArr:[],currentStatus:null,currentType:null,details:{}}},created:function(){var e=this;this.$route.query.id?c.detail({id:this.$route.query.id}).then(function(t){e.exerciseList=t.data||[],e.newArr=e.getArray(),e.total=e.exerciseList.length}):this.$router.back()},methods:{numberToLetter:function(e){return["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"][e]},getAnswer:function(e){return"judgment"==e.type?e.answer&&"false"!==e.answer?"正确":"错误":"multi"==e.type?e.answer.replace(/,/g,""):e.answer},getArray:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.p,s=void 0===t?1:t,i=e.type,a=e.status,n=[].concat(function(e){if(Array.isArray(e)){for(var t=0,s=Array(e.length);t<e.length;t++)s[t]=e[t];return s}return Array.from(e)}(this.exerciseList));return i&&(n=n.filter(function(e){return e.type==i})),a&&(n=n.filter(function(e){return"yes"==a?e.account:!e.account})),this.total=n.length,n.splice((s-1)*this.pageSize,this.pageSize)},getScore:function(e){for(var t=[],s=0;s<=e;s++)t.push(s);return t},getUserAnswer:function(e,t){var s=this.numberToLetter(e);return!!t.user_answer&&t.user_answer.includes(s)},handleCurrentChange:function(e){this.newArr=this.getArray({p:e,type:this.currentType,status:this.currentStatus})},tabChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,s=e.status;this.currentType=t||null,this.currentStatus=s||null,this.newArr=this.getArray({type:t,status:s})},save:function(){var e=this;this.exerciseList.forEach(function(e){e.reply=e.teach_answer}),c.save(a({exerciseList:this.exerciseList,id:this.$route.query.id},this.details)).then(function(t){e.$message.success("发布成功"),e.$router.back()},function(t){e.$message.err(t.message)})}},computed:{totalScore:function(){var e=0;return this.exerciseList.forEach(function(t){e+=parseInt(t.score)}),e},score:function(){var e=0;return this.exerciseList.forEach(function(t){e+=parseInt(t.account)}),e}},filters:{numberToChinese:function(e){if(!/^\d*$/.test(e))return"Null";"number"==typeof e&&(e=e.toString());var t=new RegExp("([0]*)([1-9]+[0-9]+)","g"),s="千百十亿千百十万千百十个";if((e=e.replace(t,"$2")).length>s.length)return"Null";var i="",a=e.length;s=s.substr(s.length-a);for(var n=0;n<a;n++)i+="零一二三四五六七八九".charAt(e[n])+s.charAt(n);for(var r=(i=(i=i.substr(0,i.length-1)).replace(/零(千|百|十)/g,"零").replace(/(零)+/g,"零").replace(/零(亿|万)/g,"$1")).length-1;r>0&&"零"==i[r];r--)i=i.replace(i[r],"");return i}}}},649:function(e,t,s){}}]);