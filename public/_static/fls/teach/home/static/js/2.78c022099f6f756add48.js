/*!
 * {
 *   "buildtime": "2019-06-17 15:13:29",
 *   "workspace": "F:\\project\\x-book4\\js",
 *   "username": "Administrator",
 *   "hostname": "PC201608171616",
 *   "platform": "win32",
 *   "git": {
 *     "branch": "master",
 *     "hash": "ecb058dd8",
 *     "message": [
 *       "commit ecb058dd8be16255580b36968fc3831fa41d5989",
 *       "Author: YangZai <552396385@qq.com>",
 *       "Date:   Mon Jun 17 15:12:32 2019 +0800",
 *       "    'xxxxx'"
 *     ],
 *     "user": "YangZai",
 *     "email": "552396385@qq.com",
 *     "remote": [
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (fetch)",
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (push)"
 *     ]
 *   }
 * }
 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{1008:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-course-exam"},[a("div",{staticClass:"wrap"},[t.paperScore?a("div",{staticClass:"head fix"},[a("div",{staticClass:"btns fr"},[t.isAnswer?t._e():a("Tbutton",{attrs:{icon:"commit",type:"og"},nativeOn:{click:function(e){return t.commitAnswer(e)}}},[t._v("提交试卷")]),t.isAnswer?a("Tbutton",{attrs:{icon:"commit",type:"og"},nativeOn:{click:function(e){return t.reDo(e)}}},[t._v("再做一次")]):t._e(),a("Tbutton",{attrs:{icon:"back",type:"og_plain"},nativeOn:{click:function(e){return t.go("back")}}},[t._v("返回")])],1)]):t._e(),t.paperScore?a("div",{staticClass:"content"},[a("div",{staticClass:"name tc f20 c_3"},[t._v(t._s(t.paperScore.name))]),t.isAnswer?a("div",{staticClass:"res c_8 f14"},[a("div",{staticClass:"abstract"},[a("span",[t._v(" 总分："+t._s(t.paperScore.score))]),a("span",{staticClass:"c_price"},[t._v(" 得分："+t._s(t.totalScore))]),a("span",[a("span",[t._v("重做要求： ")]),1==t.paperScore.teach_status?a("span",[t._v("否")]):t._e(),2==t.paperScore.teach_status?a("span",{staticClass:"c_price"},[t._v("是")]):t._e()]),a("span",[t._v("阅卷人： "+t._s(t.paperScore.teacher_name))]),a("span",{staticClass:"fr"},[t._v("日期： "+t._s(t.paperScore.update_time))])]),a("div",{staticClass:"txt"},[a("span",[t._v("阅卷人留言： ")]),a("span",[t._v(" "+t._s(t.paperScore.message))])])]):t._e(),a("div",{staticClass:"ls"},t._l(t.paperDetail,function(e,s){return a("div",{key:e.id,staticClass:"item"},[a("Topic",{attrs:{name:e.question,options:e.option,type:e.type,score:e.score,detail:e,index:s+1+".",isResolved:t.isAnswer,course:t.detail},on:{setAttr:t.setAttr}})],1)}),0),a("div",{staticClass:"btns tc"},[t.isAnswer?t._e():a("Tbutton",{attrs:{icon:"commit",type:"og"},nativeOn:{click:function(e){return t.commitAnswer(e)}}},[t._v("提交试卷")])],1)]):t._e()])])},n=[];a.d(e,"a",function(){return s}),a.d(e,"b",function(){return n})},1050:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"comp-topic"},[a("div",{staticClass:"wrap c_3"},[a("div",{staticClass:"name f17"},[t.index?a("span",{staticClass:"index fl"},[t._v(t._s(t.index))]):t._e(),a("span",{domProps:{innerHTML:t._s(t.name)}}),a("span",{staticClass:"c_8"},[t._v("【"+t._s(t.detail.type_name)+"】("+t._s(t.score)+"分) ")])]),a("div",{staticClass:"topic-answer f15"},["single"===t.type?a("div",{staticClass:"type"},t._l(t.options,function(e,s){return a("div",{staticClass:"item"},[a("span",{staticClass:"abc"},[t._v(t._s(t.abc[s]))]),a("el-radio",{attrs:{label:t.abc[s],disabled:t.isResolved},model:{value:t.detail.user_answer,callback:function(e){t.$set(t.detail,"user_answer",e)},expression:"detail.user_answer"}},[a("span",{domProps:{innerHTML:t._s(e.title)}})])],1)}),0):"multi"==t.type?a("div",{staticClass:"type"},[a("el-checkbox-group",{attrs:{disabled:t.isResolved},on:{change:t.handleCheckMulti},model:{value:t.detail.user_answer,callback:function(e){t.$set(t.detail,"user_answer",e)},expression:"detail.user_answer"}},t._l(t.options,function(e,s){return a("div",{key:e.title,staticClass:"item"},[a("span",{staticClass:"abc"},[t._v(t._s(t.abc[s]))]),a("el-checkbox",{attrs:{label:t.abc[s]}},[a("span",{domProps:{innerHTML:t._s(e.title)}})])],1)}),0)],1):"judgment"===t.type?a("div",{staticClass:"type"},t._l(t.judge,function(e,s){return a("div",{staticClass:"item"},[a("span",{staticClass:"abc"},[t._v(t._s(t.abc[s]))]),a("el-radio",{attrs:{label:e.val,disabled:t.isResolved},model:{value:t.detail.user_answer,callback:function(e){t.$set(t.detail,"user_answer",e)},expression:"detail.user_answer"}}),a("span",{domProps:{innerHTML:t._s(e.name)}})],1)}),0):a("div",{staticClass:"type"},[a("div",{staticClass:"item item-flex"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.detail.user_answer,expression:"detail.user_answer"}],staticClass:"answer",attrs:{disabled:t.isResolved},domProps:{value:t.detail.user_answer},on:{input:function(e){e.target.composing||t.$set(t.detail,"user_answer",e.target.value)}}}),t.img_url||t.detail.img?t.img_url||t.detail.img?a("div",{staticClass:"upload"},[a("img",{attrs:{src:t.img_url||t.detail.img}})]):t._e():a("div",{staticClass:"upload"},[a("input",{ref:"input",attrs:{type:"file",accept:"image/*"},on:{change:function(e){return t.previewImg(e)}}}),a("label",{on:{click:t.upload}},[t._m(0),a("span",{staticClass:"f12"},[t._v("上传图片")])])])])])]),t.isResolved?a("div",{staticClass:"real c_3 f14"},[a("div",{staticClass:"true"},["3"!=t.detail.status?a("span",{staticClass:"c_account"},[t._v(" 【得分】:"+t._s(t.detail.account))]):t._e(),a("br"),"2"==t.detail.status?a("span",{staticClass:"c_gn"},[t._v(" 【正确】")]):t._e(),"3"==t.detail.status?a("span",[t._v(" 【评审中】")]):t._e(),"4"==t.detail.status?a("span",{staticClass:"c_price"},[t._v(" 【错误】 ")]):t._e(),a("span",{staticClass:"c_8"},[t._v(" 你的答案： "+t._s(t.detail.user_answer)+"    ")]),a("br"),"4"==t.detail.status?a("span",{staticClass:"mr20 c_gn"},[t._v(" 【正确答案】："+t._s(t.detail.answer)+"   ")]):t._e()]),a("div",{staticClass:"your c_theme"},["3"!=t.detail.status?a("span",[t._v("【解析】: ")]):t._e(),a("span",{domProps:{innerHTML:t._s(t.detail.analysis)}}),a("br"),null!=t.detail.teach_answer?a("span",{staticClass:"c_teachermsg"},[t._v("【教师回复】："+t._s(t.detail.teach_answer))]):t._e()]),a("div",{staticClass:"link"},[a("span",{staticClass:"c_8"},[t._v("课时计划链接： ")]),t._l(t.detail.tp_constitute_info_array,function(e){return a("span",{staticClass:"c_blue2 cp",on:{click:function(a){return t.findResourse(e.b_id)}}},[t._v(t._s(e.period_info)+"/"+t._s(e.teaching_plan_info)+"/"+t._s(e.resource_name))])})],2)]):t._e()])])},n=[function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("span",{staticClass:"icon-upload"})])}];a.d(e,"a",function(){return s}),a.d(e,"b",function(){return n})},213:function(t,e,a){"use strict";a.r(e);var s=a(1008),n=a(623);for(var i in n)"default"!==i&&function(t){a.d(e,t,function(){return n[t]})}(i);a(949);var r=a(0),o=Object(r.a)(n.default,s.a,s.b,!1,null,null,null);e.default=o.exports},487:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getTask=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments[2];return t.size,t.size>=1048576?(e.is_chunk=!0,(0,s.request_post)("/common/api/files/upload_task?r="+Math.random(5)).then(function(n){if(n.status)return e.task_id=n.data.task_id,(0,s.request_file)("/common/api/files/upload",{file:t,data:e},a);throw new Error(n.messages)}).catch(function(t){throw new Error("上传失败")})):(e.is_chunk=!1,(0,s.request_file)("/common/api/files/upload",{file:t,data:e}))},e.getAppId=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.request_get)("/common/api/app/search_name",t).then(function(t){return n.default.app_id=t.data.id,sessionStorage.app_id=t.data.id,t})},e.getClientToken=function(){return(0,s.request_post)("/common/api/auth/token/pcclient")},e.platInfo=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.request_get)(o(t)).then(function(t){return n.default.app_id=t.data.id,sessionStorage.app_id=t.data.id,document.title=t.data.name,t})},e.commonPreview=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.request_get)(u(t))},e.getDefaultCover=function(){return(0,s.request_get)("/api/videos/images")},e.generate=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.request_post)("/common/api/qr_code/generate",t)},e.commonPreviewCode=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.request_post)("/api/preview",t)},e.getQrcode=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.request_get)("/common/api/get_qrcode",t)},e.synchronization=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.request_get)(c(t)).then(function(t){return t})},e.getAuthor=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.request_get)("/api/ecommerce/author",t)},e.addAuthor=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.request_post)("/api/ecommerce/author",t)},e.getWeixinConfig=function(t){return(0,s.request_get)("/common/api/third/wx_js_sdk/config",t)},e.getIndexInfo=function(){return(0,s.request_get)("/common/api/current")};r(a(26));var s=a(2),n=r(a(123)),i=r(a(6));function r(t){return t&&t.__esModule?t:{default:t}}i.default.compile("/common/api/files/upload_task/:id"),i.default.compile("/common/api/manager/managers/:id"),i.default.compile("/common/api/manager/roles/:id");var o=i.default.compile("/common/api/app/apps/:id"),c=i.default.compile("/common/api/dragon_infos/:id");var u=i.default.compile("/api/preview/:id")},623:function(t,e,a){"use strict";a.r(e);var s=a(624),n=a.n(s);for(var i in s)"default"!==i&&function(t){a.d(e,t,function(){return s[t]})}(i);e.default=n.a},624:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s,n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},i=a(947),r=(s=i)&&s.__esModule?s:{default:s},o=a(22);e.default={components:{Topic:r.default},created:function(){},beforeRouteUpdate:function(t,e,a){a(),this.init()},mounted:function(){this.init()},data:function(){return{isAnswer:!1,list:null}},computed:n({},(0,o.mapState)({topics:function(t){return t.exam.topics},paperDetail:function(t){return t.exam.paperDetail},paperScore:function(t){return t.exam.paperScore},totalScore:function(t){if(t.exam.paperDetail){var e=0;return t.exam.paperDetail.map(function(t){e+=t.account}),e}return 0},detail:function(t){return t.course.courseDetail}})),methods:{init:function(){this.$store.state.exam.paperDetail=[];var t=this.$route.query,e=(t.id,t.exam_id),a=t.type;this.isAnswer=a&&("answer"===a||"mistake"===a),this.$store.dispatch("exam/getPaperDetail",{id:e,type:a})},go:function(t){"back"===t&&this.$router.go(-1)},commitAnswer:function(){var t=this,e=this.getCommitData();e.noAnswers.length?this.$alert("题目:  "+e.noAnswers[0].question+"  未填写答案","提示"):this.$service.course.answer(e).then(function(e){t.$message.success("提交成功!"),t.$router.go(-1)})},reDo:function(){var t=this;this.$service.course.rePaper({id:this.$route.query.exam_id}).then(function(e){t.$message.success("成功!"),t.$replace("/course/exam",{id:t.$route.query.id,exam_id:e.data.id})})},getCommitData:function(){var t=this.paperDetail,e={id:this.$route.query.exam_id,data:[],noAnswers:[]};return t.forEach(function(t){var a=void 0;a=Array.isArray(t.user_answer)?t.user_answer.join(","):t.user_answer,e.data.push({id:t.id,answer:a,img:t.path}),a||!1===a||e.noAnswers.push(t)}),e},setAttr:function(t,e){t.path=e}}}},625:function(t,e,a){"use strict";a.r(e);var s=a(626),n=a.n(s);for(var i in s)"default"!==i&&function(t){a.d(e,t,function(){return s[t]})}(i);e.default=n.a},626:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s,n=a(5),i=(s=n)&&s.__esModule?s:{default:s},r=a(487);e.default={props:{name:{default:""},type:{},options:{default:!1},detail:{},index:{},score:{},answers:{},isResolved:{default:!1},course:{}},created:function(){var t=void 0;t=this.isResolved?"multi"===this.type?this.detail.user_answer.split(","):this.detail.user_answer:"multi"===this.type?[]:"",this.detail.user_answer=t},data:function(){return{temp:[],abc:["A","B","C","D"],judge:[{val:"true",name:"正确"},{val:"false",name:"错误"}],img_url:null}},methods:{handleCheckMulti:function(t){},previewImg:function(t){var e=this;this.uploadImg().then(function(t){e.$emit("setAttr",e.detail,t.data.path),e.img_url=t.data.url})},upload:function(){1===this.detail.status&&this.$refs.input.click()},uploadImg:function(){var t,e=this;return(t=i.default.mark(function t(){var a,s;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.$refs.input.files[0],s=void 0,t.prev=2,!a){t.next=7;break}return t.next=6,(0,r.getTask)(a);case 6:s=t.sent;case 7:t.next=12;break;case 9:throw t.prev=9,t.t0=t.catch(2),new Error("图片更新失败");case 12:return t.abrupt("return",s);case 13:case"end":return t.stop()}},t,e,[[2,9]])}),function(){var e=t.apply(this,arguments);return new Promise(function(t,a){return function s(n,i){try{var r=e[n](i),o=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(o).then(function(t){s("next",t)},function(t){s("throw",t)});t(o)}("next")})})()},goVideo:function(t){t.course_teaching_plan_id&&this.$go("/video",t)},findResourse:function(t){var e={};this.course&&(e.course_id=this.course.id,this.course.course_period_list.map(function(a){a.teaching_plan&&a.teaching_plan.map(function(s){s.teaching_plan_info&&s.teaching_plan_info.map(function(n){n.b_id===t&&(e.course_hour_id=a.id,e.course_teaching_id=s.id,e.course_teaching_plan_id=n.id)})})})),this.goVideo(e)}}}},627:function(t,e,a){},628:function(t,e,a){},947:function(t,e,a){"use strict";a.r(e);var s=a(1050),n=a(625);for(var i in n)"default"!==i&&function(t){a.d(e,t,function(){return n[t]})}(i);a(948);var r=a(0),o=Object(r.a)(n.default,s.a,s.b,!1,null,null,null);e.default=o.exports},948:function(t,e,a){"use strict";var s=a(627);a.n(s).a},949:function(t,e,a){"use strict";var s=a(628);a.n(s).a}}]);