/*!
 * {
 *   "buildtime": "2019-07-19 15:10:33",
 *   "workspace": "F:\\project\\x-book4\\js",
 *   "username": "Administrator",
 *   "hostname": "PC201608171616",
 *   "platform": "win32",
 *   "git": {
 *     "branch": "master",
 *     "hash": "95ac4eac7",
 *     "message": [
 *       "commit 95ac4eac704fa029807f3f814b494e89f845f835",
 *       "Author: YangZai <552396385@qq.com>",
 *       "Date:   Fri Jul 19 15:09:46 2019 +0800",
 *       "    xx"
 *     ],
 *     "user": "YangZai",
 *     "email": "552396385@qq.com",
 *     "remote": [
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (fetch)",
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (push)"
 *     ]
 *   }
 * }
 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{1427:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getList=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)("/api/book_info",t)},e.educe=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)("/api/book_info_export",t)},e.detail=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)("/api/book_info_all",t)},e.getOrders=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)("/api/book_order_info",t)},e.bookSale=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)("/api/book_sale",t)},e.bookSaleAchievement=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)("/api/sale_achievement_info",t)};var i,n=a(15),s=a(22),o=(i=s)&&i.__esModule?i:{default:i};o.default.compile("/api/messages/:id"),o.default.compile("/api/user/lock/:id")},1428:function(t,e,a){"use strict";var i=a(764);a.n(i).a},1430:function(t,e,a){"use strict";function i(){var a=this,t=a.$createElement,i=a._self._c||t;return i("div",{staticClass:"box"},[i("div",{staticClass:"top serachWrap"},[i("form",{attrs:{id:"mainForm"}},[i("span",{staticClass:"group-inline"},[i("el-input",{attrs:{placeholder:"输入名称搜索",name:"book_name",clearable:""},model:{value:a.where.book_name,callback:function(t){a.$set(a.where,"book_name",t)},expression:"where.book_name"}})],1),i("span",{staticClass:"group-inline"},[i("el-input",{attrs:{placeholder:"输入标签搜索",name:"tag",clearable:""},model:{value:a.where.tag,callback:function(t){a.$set(a.where,"tag",t)},expression:"where.tag"}})],1),i("span",{staticClass:"group-inline"},[i("TimePick",{attrs:{inputsName:["start_time","end_time"]}})],1),i("span",{staticClass:"group-inline"},[i("el-select",{attrs:{placeholder:"选择类型搜索",clearable:""},model:{value:a.where.type,callback:function(t){a.$set(a.where,"type",t)},expression:"where.type"}},a._l(a.roleList,function(t){return i("el-option",{key:t.value,attrs:{label:t.name,value:t.value}})}),1)],1),i("span",{staticClass:"group-inline"},[i("el-select",{attrs:{placeholder:"统计所有",clearable:""},model:{value:a.where.time,callback:function(t){a.$set(a.where,"time",t)},expression:"where.time"}},a._l(a.status,function(t){return i("el-option",{key:t.value,attrs:{label:t.name,value:t.value}})}),1)],1),i("span",{staticClass:"group-inline right"},[i("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-search"},on:{click:a.search}},[a._v("搜索")]),i("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){return a.educe()}}},[a._v("导出查询")])],1)])]),i("div",{staticClass:"content"},[i("div",{staticClass:"tableTop"},[i("div",{staticClass:"title vel-line"},[i("span",[a._v("全部 "),a.page?i("span",{staticClass:"totalNum"},[a._v("("+a._s(a.page.total)+")")]):a._e()]),i("div",{staticClass:"btns"},[i("el-button",{attrs:{type:"primary",size:"small",plain:""},on:{click:a.seeSelectData}},[a._v("合并查看数据")])],1)])]),i("table",{staticClass:"table"},[i("thead",[i("tr",[i("th",{attrs:{width:"40"}},[i("input",{attrs:{type:"checkbox"},on:{click:function(t){return a.$checkAll(t)}}})]),i("th",[a._v(" 名称")]),i("th",[a._v(" 产品类型")]),i("th",[a._v(" 标签")]),i("th",{attrs:{width:"150"}},[a._v(" 上架时间")]),i("th",[a._v(" 浏览次数")]),i("th",[a._v(" 分享次数")]),i("th",[a._v(" 销售次数")]),i("th",[a._v(" 销售金额")]),i("th",[a._v(" 分销数")]),i("th",{attrs:{width:"150"}},[a._v(" 最近成交")]),i("th",[a._v(" 操作")])])]),i("tbody",a._l(a.list,function(e,t){return i("tr",[i("td",[i("input",{ref:"ids",refInFor:!0,attrs:{type:"checkbox",name:"ids",book_name:e.book_name,img_src:e.img_src},domProps:{value:e.id}})]),i("td",[a._v(a._s(e.book_name))]),i("td",[a._v(a._s(e.type_name))]),i("td",[a._v(a._s(e.tag))]),i("td",[a._v(a._s(e.the_shelf_create_time))]),i("td",[a._v(a._s(e.browse_value))]),i("td",[a._v(a._s(e.share_value))]),i("td",[a._v(a._s(e.sale_value))]),i("td",[a._v(a._s(e.sale_money))]),i("td",[a._v(a._s(e.bution_value))]),i("td",[a._v(a._s(e.the_shelf_create_time))]),i("td",[i("el-button",{attrs:{size:"medium",type:"primary",plain:""},on:{click:function(t){return a.detail({book_id:[e.book_id],book_name:[e.book_name],img_src:[e.img_src]})}}},[a._v("详情")])],1)])}),0)]),a.page?i("div",{staticClass:"pageWrap"},[i("el-pagination",{attrs:{background:"","current-page":a.currentPage,"page-sizes":[10,50,100],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:a.page.total},on:{"size-change":a.handleSizeChange,"current-change":a.handleCurrentChange}})],1):a._e(),i("el-dialog",{staticClass:"dialog",attrs:{width:"1155px",visible:a.dialogVisible},on:{"update:visible":function(t){a.dialogVisible=t},close:a.resetOption}},[i("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[i("el-tabs",{attrs:{value:"detail"}},[i("el-tab-pane",{attrs:{label:"趋势图",name:"detail"}})],1)],1),i("div",{staticClass:"part"},[i("div",{staticClass:"lside"},[i("div",{staticClass:"group"},a._l(a.img_src,function(t,e){return i("div",{staticClass:"imgList",style:{backgroundImage:"url("+t+")",margin:2*e+"px"}})}),0),i("ul",{staticClass:"txt"},a._l(a.book_name,function(t){return i("li",[a._v(" "+a._s(t))])}),0)]),i("div",{staticClass:"rside"},[i("el-button-group",[i("el-button",{on:{click:function(t){return a.getChartsData({type:"browse",txt:"浏览数"})}}},[a._v("浏览数")]),i("el-button",{on:{click:function(t){return a.getChartsData({type:"share",txt:"分享数"})}}},[a._v("分享数")]),i("el-button",{on:{click:function(t){return a.getChartsData({type:"sale",txt:"销售次数"})}}},[a._v("销售次数")]),i("el-button",{on:{click:function(t){return a.getChartsData({type:"sale",txt:"销售金额"})}}},[a._v("销售金额")]),i("el-button",{on:{click:function(t){return a.getChartsData({type:"sale",txt:"分销数"})}}},[a._v("分销数")]),i("span",{staticStyle:{"line-height":"40px","margin-left":"10px"}},[a._v(" "+a._s(a.scantotal))]),i("div",{staticStyle:{"margin-top":"20px"}},[i("span",{staticStyle:{"line-height":"40px",margin:"0 10px"}},[a._v("按时段")]),i("el-select",{attrs:{placeholder:"统计所有"},on:{change:a.change},model:{value:a.timeValue,callback:function(t){a.timeValue=t},expression:"timeValue"}},a._l(a.time,function(t){return i("el-option",{key:t.txt,attrs:{label:t.txt,value:t.value}})}),1),i("span",{staticStyle:{"line-height":"40px",margin:"0 20px"}},[a._v("自定义"),i("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:a.change},model:{value:a.ctimePick,callback:function(t){a.ctimePick=t},expression:"ctimePick"}})],1)],1)],1)],1),i("div",{staticClass:"part"},[i("div",{staticClass:"echarts",staticStyle:{width:"1000px",height:"400px"},attrs:{id:"myChart"}})])]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){a.dialogVisible=!1}}},[a._v("关闭")])],1)])],1)])}var n=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n})},273:function(t,e,a){"use strict";a.r(e);var i=a(1430),n=a(762);for(var s in n)"default"!==s&&function(t){a.d(e,t,function(){return n[t]})}(s);a(1428);var o=a(1),r=Object(o.a)(n.default,i.a,i.b,!1,null,"7a1a8a00",null);e.default=r.exports},277:function(t,e,a){"use strict";var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_=/^(?:submit|button|image|reset|file)$/i,g=/^(?:input|select|textarea|keygen)/i,n=/(\[[^\[\]]*\])/g;function b(t,e,a){if(e.match(n)){!function t(e,a,i){if(0===a.length)return e=i;var n=a.shift(),s=n.match(/^\[(.+?)\]$/);if("[]"===n)return e=e||[],Array.isArray(e)?e.push(t(null,a,i)):(e._values=e._values||[],e._values.push(t(null,a,i))),e;if(s){var o=s[1],r=+o;isNaN(r)?(e=e||{})[o]=t(e[o],a,i):(e=e||[])[r]=t(e[r],a,i)}else e[n]=t(e[n],a,i);return e}(t,function(t){var e=[],a=new RegExp(n),i=/^([^\[\]]*)/.exec(t);for(i[1]&&e.push(i[1]);null!==(i=a.exec(t));)e.push(i[1]);return e}(e),a)}else{var i=t[e];i?(Array.isArray(i)||(t[e]=[i]),t[e].push(a)):t[e]=a}return t}function y(t,e,a){return a=a.replace(/(\r)?\n/g,"\r\n"),a=(a=encodeURIComponent(a)).replace(/%20/g,"+"),t+(t?"&":"")+encodeURIComponent(e)+"="+a}t.exports=function(t,e){"object"!=(void 0===e?"undefined":f(e))?e={hash:!!e}:void 0===e.hash&&(e.hash=!0);for(var a=e.hash?{}:"",i=e.serializer||(e.hash?b:y),n=t&&t.elements?t.elements:[],s=Object.create(null),o=0;o<n.length;++o){var r=n[o];if((e.disabled||!r.disabled)&&r.name&&(g.test(r.nodeName)&&!_.test(r.type))){var l=r.name,c=r.value;if("checkbox"!==r.type&&"radio"!==r.type||r.checked||(c=void 0),e.empty){if("checkbox"!==r.type||r.checked||(c=""),"radio"===r.type&&(s[r.name]||r.checked?r.checked&&(s[r.name]=!0):s[r.name]=!1),null==c&&"radio"==r.type)continue}else if(!c)continue;if("select-multiple"!==r.type)a=i(a,l,c);else{c=[];for(var u=r.options,h=!1,p=0;p<u.length;++p){var d=u[p],m=e.empty&&!d.value,v=d.value||m;d.selected&&v&&(h=!0,a=e.hash&&"[]"!==l.slice(l.length-2)?i(a,l+"[]",d.value):i(a,l,d.value))}!h&&e.empty&&(a=i(a,l,""))}}}if(e.empty)for(var l in s)s[l]||(a=i(a,l,""));return a}},762:function(t,e,a){"use strict";a.r(e);var i=a(763),n=a.n(i);for(var s in i)"default"!==s&&function(t){a.d(e,t,function(){return i[t]})}(s);e.default=n.a},763:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},n=a(850),o=(i=n)&&i.__esModule?i:{default:i},r=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}}(a(1427)),l=a(306);e.default={mixins:[l.publicMixin],data:function(){return{services:r,pickerOptions:{},ctimePick:"",list:[],currentPage:1,page:"",reset:null,option:{tooltip:{trigger:"axis",axisPointer:{}},toolbox:{feature:{}},legend:{},xAxis:[{type:"category"}],yAxis:[{type:"value",name:"浏览量",min:0,position:"left",axisLabel:{formatter:"{value}"}}],series:[]},multipleSelection:[],status:[{name:"昨天",value:"1"},{name:"3日内",value:"3"},{name:"7日内",value:"7"},{name:"30日内",value:"30"},{name:"60日内",value:"60"}],roleList:[{name:"融合发布库产品",value:"4"},{name:"主题产品",value:"2"},{name:"视读产品",value:"5"},{name:"听读产品",value:"6"},{name:"课件产品",value:"3"}],infoData:null,backMsg:"",stateValue:"",setBook:"",book_id:[],scantotal:"该时段内浏览量共 0 次",selectBook:"",bookdata:"",book_name:[],img_src:[],time:[{txt:"最近7天",value:6},{txt:"最近15天",value:14},{txt:"最近30天",value:29},{txt:"最近60天",value:59}],timeValue:"最近7天",where:{pageOffset:10,pageStart:0,tag:"",book_name:"",time:"",type:"",start_time:"",end_time:""},dialogVisible:!1,activeName2:"first"}},methods:{getList:function(t){var e=this;r.getList(t).then(function(t){e.list=t.data,e.page=t.page,log(t.data)})},addInfo:function(){this.dialogVisible=!0},del:function(t){var e=this;r.del({id:t}).then(function(t){e.getList(e.where)})},addsend:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return alert("error submit!!"),!1;r.save(e.infoAdd).then(function(t){e.getList(e.where)}),e.dialogVisible=!1,e.infoAdd={contents:"",title:"",type:""}})},search:function(){this.getList(this.where)},handleSizeChange:function(t){this.where.pageOffset=t,this.getList(this.where)},handleCurrentChange:function(t){this.where.pageStart=(t-1)*this.where.pageOffset,this.getList(this.where)},handleClick:function(){},seeSelectData:function(){var e=[],a=[],i=[];Array.from(document.querySelectorAll("input[type=checkbox]")).map(function(t){t.checked&&(e.push(t.value),a.push(t.getAttribute("book_name")),i.push(t.getAttribute("img_src")))}),0==e.length?this.$message({message:"请先选择然后查看",type:"warning"}):this.detail({book_id:e,book_name:a,img_src:i}),log(i)},detail:function(t){var e=t.book_id,a=t.book_name,i=t.img_src;log(i),this.book_id=e,this.book_name=a,this.img_src=i,this.getChartsData({type:"browse",txt:"浏览次数"}),this.dialogVisible=!0},getChartsData:function(e,t){var n=this;this.where.start_time?(e.start_time=this.where.start_time,e.end_time=this.where.end_time):e.time=isNaN(this.timeValue)?this.time[0].value:this.timeValue,r.detail(s({id:this.book_id},e)).then(function(t){var a=0;n.option.xAxis[0].data=[];var i=[];t.data.forEach(function(t,e){i[e]={type:"line",name:n.book_name[e],data:[]},t.forEach(function(t){0==e&&n.option.xAxis[0].data.push(t.date),i[e].data.push(t.value),a+=parseFloat(t.value)})}),n.option.legend.data=n.book_name,n.option.series=i,"销售金额"==e.txt?(n.option.yAxis[0].name="元",n.scantotal="这段时间段内总销售额为 "+a+"元"):(n.option.yAxis[0].name="次",n.scantotal="这段时间段内总浏览次数为 "+a+" 次"),log(n.option.legend.data),n.initial()})},change:function(){this.getChartsData({type:"browse",txt:"浏览数"},"")},initial:function(){var t=this;setTimeout(function(){t.myChart=o.default.init(document.querySelector("#myChart")),t.myChart.setOption(t.option)},200)},resetOption:function(){this.myChart.dispose()}},created:function(){this.reset=this.option,this.getList(this.where)},watch:{ctimePick:function(){this.where.start_time=this.ctimePick[0],this.where.end_time=this.ctimePick[1]}}}},764:function(t,e,a){}}]);