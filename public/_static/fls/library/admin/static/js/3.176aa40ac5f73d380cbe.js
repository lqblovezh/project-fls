/*!
 * {
 *   "buildtime": "2019-07-19 15:10:33",
 *   "workspace": "F:\\project\\x-book4\\js",
 *   "username": "Administrator",
 *   "hostname": "PC201608171616",
 *   "platform": "win32",
 *   "git": {
 *     "branch": "master",
 *     "hash": "95ac4eac7",
 *     "message": [
 *       "commit 95ac4eac704fa029807f3f814b494e89f845f835",
 *       "Author: YangZai <552396385@qq.com>",
 *       "Date:   Fri Jul 19 15:09:46 2019 +0800",
 *       "    xx"
 *     ],
 *     "user": "YangZai",
 *     "email": "552396385@qq.com",
 *     "remote": [
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (fetch)",
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (push)"
 *     ]
 *   }
 * }
 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{1109:function(t,e,r){"use strict";r.r(e);var a=r(1460),n=r(691);for(var i in n)"default"!==i&&function(t){r.d(e,t,function(){return n[t]})}(i);r(1110);var s=r(1),o=Object(s.a)(n.default,a.a,a.b,!1,null,"199ab234",null);e.default=o.exports},1110:function(t,e,r){"use strict";var a=r(693);r.n(a).a},1111:function(t,e,r){"use strict";r.r(e);var a=r(1456),n=r(694);for(var i in n)"default"!==i&&function(t){r.d(e,t,function(){return n[t]})}(i);r(1114);var s=r(1),o=Object(s.a)(n.default,a.a,a.b,!1,null,null,null);e.default=o.exports},1112:function(t,e,r){"use strict";r.r(e);var a=r(1462),n=r(696);for(var i in n)"default"!==i&&function(t){r.d(e,t,function(){return n[t]})}(i);r(1113);var s=r(1),o=Object(s.a)(n.default,a.a,a.b,!1,null,null,null);e.default=o.exports},1113:function(t,e,r){"use strict";var a=r(698);r.n(a).a},1114:function(t,e,r){"use strict";var a=r(699);r.n(a).a},1115:function(t,e,r){"use strict";var a=r(700);r.n(a).a},1452:function(t,e,r){"use strict";function a(){var a=this,t=a.$createElement,n=a._self._c||t;return n("div",{staticClass:"tree"},[a.resourceDialog?n("Resource",{attrs:{resourceDialog:a.resourceDialog,curSoucesList:a.list,currentType:a.resourceType},on:{"update:resourceDialog":function(t){a.resourceDialog=t},"update:resource-dialog":function(t){a.resourceDialog=t},select:a.addSelcet}}):a._e(),a.relationsDialog?n("el-dialog",{attrs:{width:"1000px",title:"描述与关系",visible:a.relationsDialog,"close-on-click-modal":!1,"close-on-press-escape":!1,"append-to-body":""},on:{"update:visible":function(t){a.relationsDialog=t}}},[n("VaForm",{ref:"detailForm"},[n("form",{ref:"detailForm",staticClass:"detailForm"},[n("div",{staticClass:"group"},[n("div",{staticClass:"label"},[a._v("事实描述:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:a.currentDescribe.desc,expression:"currentDescribe.desc"}],staticClass:"form-control",attrs:{type:"text",maxlength:"100"},domProps:{value:a.currentDescribe.desc},on:{input:function(t){t.target.composing||a.$set(a.currentDescribe,"desc",t.target.value)}}})]),n("div",{staticClass:"group"},[n("div",{staticClass:"label"},[a._v("引发关系:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:a.currentDescribe.initiation,expression:"currentDescribe.initiation"}],staticClass:"form-control",attrs:{type:"text",maxlength:"100"},domProps:{value:a.currentDescribe.initiation},on:{input:function(t){t.target.composing||a.$set(a.currentDescribe,"initiation",t.target.value)}}})]),n("div",{staticClass:"group"},[n("div",{staticClass:"label"},[a._v("关联关系:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:a.currentDescribe.relation,expression:"currentDescribe.relation"}],staticClass:"form-control",attrs:{type:"text",maxlength:"100"},domProps:{value:a.currentDescribe.relation},on:{input:function(t){t.target.composing||a.$set(a.currentDescribe,"relation",t.target.value)}}})]),n("div",{staticClass:"group"},[n("div",{staticClass:"label"},[a._v("对比关系:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:a.currentDescribe.contrast,expression:"currentDescribe.contrast"}],staticClass:"form-control",attrs:{type:"text",maxlength:"100"},domProps:{value:a.currentDescribe.contrast},on:{input:function(t){t.target.composing||a.$set(a.currentDescribe,"contrast",t.target.value)}}})]),n("div",{staticClass:"group"},[n("div",{staticClass:"label"},[a._v("交互关系:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:a.currentDescribe.interactive,expression:"currentDescribe.interactive"}],staticClass:"form-control",attrs:{type:"text",maxlength:"100"},domProps:{value:a.currentDescribe.interactive},on:{input:function(t){t.target.composing||a.$set(a.currentDescribe,"interactive",t.target.value)}}})]),n("div",{staticClass:"group"},[n("div",{staticClass:"label"},[a._v("代表词:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:a.currentDescribe.represent,expression:"currentDescribe.represent"}],staticClass:"form-control",attrs:{type:"text",maxlength:"100"},domProps:{value:a.currentDescribe.represent},on:{input:function(t){t.target.composing||a.$set(a.currentDescribe,"represent",t.target.value)}}})])])]),n("div",{staticClass:"btns",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"info"},on:{click:function(t){a.relationsDialog=!1}}},[a._v("取消")]),n("el-button",{attrs:{type:"primary"},on:{click:a.saveDescribe}},[a._v("确定")])],1)],1):a._e(),a.detailDialog?n("el-dialog",{staticClass:"detailDialog",attrs:{width:"1000px",title:"关联产品",visible:a.detailDialog,"close-on-click-modal":!1,"close-on-press-escape":!1,"append-to-body":""},on:{"update:visible":function(t){a.detailDialog=t}}},[n("table",{staticClass:"table"},[n("thead",[n("tr",[n("th",{staticClass:"table-check"},[n("input",{attrs:{type:"checkbox"},on:{click:function(t){return a.$checkAll(t)}}})]),n("th",[a._v("名称")]),n("th",[a._v("创建时间")]),n("th",[a._v("发布时间")]),n("th",{attrs:{width:"100"}},[a._v("操作")])])]),n("tbody",a._l(a.list,function(e){return n("tr",[n("th",[n("input",{ref:"ids",refInFor:!0,attrs:{type:"checkbox",name:"ids"},domProps:{value:e.id}})]),n("th",[n("img",{staticClass:"cover-photo"}),n("div",{staticClass:"th-name bookName",attrs:{title:e.name}},[a._v(a._s(e.name))])]),n("th",[n("div",{staticClass:"th-name"},[a._v(a._s(e.create_time))])]),n("th",[n("div",{staticClass:"th-name"})]),n("th",[n("div",{staticClass:"btns"},[n("Icon",{attrs:{type:"icon-delete",title:"删除"},on:{click:function(t){return a.del(e.rel_id)}}})],1)])])}),0)]),n("div",{staticClass:"btn"},[n("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:a.openResource}},[a._v("添加关联")])],1),n("div",{staticClass:"btns",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"info"},on:{click:function(t){a.detailDialog=!1}}},[a._v("取消")]),n("el-button",{attrs:{type:"primary"},on:{click:function(t){a.detailDialog=!1}}},[a._v("确定")])],1)]):a._e(),n("Nav",{ref:"nav",attrs:{navTab:a.navTab}}),n("div",{staticClass:"btn"},[n("el-button",{staticClass:"el-icon-plus",attrs:{type:"primary",plain:""},on:{click:function(t){return a.add()}}},[a._v("添加顶级")])],1),n("table",{ref:"table",staticClass:"table table1"},[n("thead",[n("tr",[n("th",{staticStyle:{"padding-left":"80px"}},[a._v(" 名称")]),n("th",{attrs:{width:"220"}},[a._v("编号")]),n("th",{attrs:{width:"150"}},[a._v("简介")]),"keyword"==a.currentType?n("th",{attrs:{width:"200"}},[a._v(" 关键词")]):a._e(),n("th",{attrs:{width:"150"}},[a._v("图片")]),n("th",{attrs:{width:"150"}},[a._v(" 创建时间")]),n("th",{staticClass:"options"},[a._v(" 操作")])])])]),n("el-tree",{ref:"tree",attrs:{data:a.data,"node-key":"id"},scopedSlots:a._u([{key:"default",fn:function(t){var e=t.node,r=t.data;return n("span",{staticClass:"custom-tree-node"},[n("input",{directives:[{name:"model",rawName:"v-model",value:r.name,expression:"data.name"}],staticClass:"form-control",domProps:{value:r.name},on:{input:function(t){t.target.composing||a.$set(r,"name",t.target.value)}}}),n("span",{staticClass:"options",staticStyle:{float:"right"}},[n("div",{staticClass:"icon el-icon-plus",attrs:{title:"添加关系"},on:{click:function(t){return t.stopPropagation(),a.$refs.modal.showModal(r.id)}}}),r.id?n("div",{staticClass:"icon up el-icon-back",attrs:{title:"上移"},on:{click:function(t){return t.stopPropagation(),a.muluSort(r,"up")}}}):a._e(),r.id?n("div",{staticClass:"icon down el-icon-back",attrs:{title:"下移"},on:{click:function(t){return t.stopPropagation(),a.muluSort(r,"down")}}}):a._e(),"keyword"==a.currentType?n("div",{staticClass:"icon el-icon-edit-outline",attrs:{title:"描述与关系"},on:{click:function(t){return t.stopPropagation(),a.describe(e,r)}}}):a._e(),"keyword"!=a.currentType&&r.id?n("div",{staticClass:"icon icon-detail",attrs:{title:"详情"},on:{click:function(t){return t.stopPropagation(),a.showDetail(e,r)}}}):a._e(),n("div",{staticClass:"icon el-icon-upload2",attrs:{title:"保存"},on:{click:function(t){return t.stopPropagation(),a.save(r,e)}}}),r.id?n("div",{staticClass:"icon el-icon-plus",attrs:{title:"添加"},on:{click:function(t){return t.stopPropagation(),a.append(r)}}}):a._e(),n("div",{staticClass:"icon icon-delete",attrs:{title:"删除"},on:{click:function(t){return t.stopPropagation(),a.remove(e,r)}}})]),n("span",{staticClass:"time",domProps:{textContent:a._s(r.create_time)},on:{click:function(t){t.stopPropagation()}}}),n("div",{staticClass:"time",on:{click:function(t){t.stopPropagation()}}},[n("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return t.stopPropagation(),a.uploadTreeFile(r,e)}}},[a._v("上传")]),n("img",{staticClass:"tree-img",attrs:{src:r.img_src}})],1),n("span",{staticClass:"time",on:{click:function(t){t.stopPropagation()}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:r.abs,expression:"data.abs"}],staticClass:"form-control",domProps:{value:r.abs},on:{input:function(t){t.target.composing||a.$set(r,"abs",t.target.value)}}})]),n("span",{staticClass:"time"},["keyword"==a.currentType?n("input",{directives:[{name:"model",rawName:"v-model",value:r.keyword,expression:"data.keyword"}],staticClass:"form-control",domProps:{value:r.keyword},on:{input:function(t){t.target.composing||a.$set(r,"keyword",t.target.value)}}}):a._e()]),n("span",{staticClass:"keyword"}),n("span",{staticClass:"code",on:{click:function(t){t.stopPropagation()}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:r.code,expression:"data.code"}],staticClass:"form-control",domProps:{value:r.code},on:{input:function(t){t.target.composing||a.$set(r,"code",t.target.value)}}})])])}}])}),n("input",{ref:"treeImgInp",staticClass:"hide",attrs:{type:"file"},on:{change:a.treeImgInpChange}}),n("Modal",{ref:"modal"})],1)}var n=[];r.d(e,"a",function(){return a}),r.d(e,"b",function(){return n})},1456:function(t,e,r){"use strict";function a(){var a=this,t=a.$createElement,n=a._self._c||t;return n("el-dialog",{attrs:{title:"分类新增",visible:a.modalStatus,width:"70%"},on:{"update:visible":function(t){a.modalStatus=t}}},[n("div",{staticClass:"modal-btn-group"},[n("el-button",{staticClass:"el-icon-plus",attrs:{type:"primary",plain:""},on:{click:function(t){return a.add()}}},[a._v("添加顶级")])],1),n("table",{ref:"table",staticClass:"table table1"},[n("thead",[n("tr",[n("th",[a._v("名称")]),n("th",[a._v("类型")]),n("th",[a._v("属性")]),n("th",{staticClass:"options"},[a._v("操作")])])])]),n("el-tree",{ref:"tree",attrs:{data:a.list,"node-key":"id"},scopedSlots:a._u([{key:"default",fn:function(t){var e=t.node,r=t.data;return n("div",{staticClass:"custom-tree-node"},[n("input",{directives:[{name:"model",rawName:"v-model",value:r.name,expression:"data.name"}],staticClass:"form-control",attrs:{disabled:"cate"===r.type},domProps:{value:r.name},on:{input:function(t){t.target.composing||a.$set(r,"name",t.target.value)}}}),n("span",{staticClass:"options",staticStyle:{float:"right"}},[n("div",{staticClass:"icon el-icon-upload2",attrs:{title:"保存"},on:{click:function(t){return t.stopPropagation(),a.save(r,e)}}}),r.id?n("div",{staticClass:"icon el-icon-plus",attrs:{title:"添加"},on:{click:function(t){return t.stopPropagation(),a.append(r)}}}):a._e(),n("div",{staticClass:"icon icon-delete",attrs:{title:"删除"},on:{click:function(t){return t.stopPropagation(),a.remove(e,r)}}})]),n("span",{staticClass:"code"},[n("input",{directives:[{name:"model",rawName:"v-model",value:r.value,expression:"data.value"}],staticClass:"form-control",attrs:{disabled:"group"===r.type},domProps:{value:r.value},on:{input:function(t){t.target.composing||a.$set(r,"value",t.target.value)}}}),n("button",{directives:[{name:"show",rawName:"v-show",value:"cate"===r.type,expression:"data.type === 'cate'"}],on:{click:function(t){return a.openCategoryDia(r)}}},[a._v("分类")])]),n("div",{staticClass:"choice",on:{click:function(t){t.stopPropagation()}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:r.type,expression:"data.type"}],attrs:{type:"radio",name:r.create_time,value:"group"},domProps:{checked:a._q(r.type,"group")},on:{change:function(t){return a.$set(r,"type","group")}}}),n("label",[a._v("分组")]),n("input",{directives:[{name:"model",rawName:"v-model",value:r.type,expression:"data.type"}],attrs:{type:"radio",name:r.create_time,value:"cate"},domProps:{checked:a._q(r.type,"cate")},on:{change:function(t){return a.$set(r,"type","cate")}}}),n("label",[a._v("分类")]),n("input",{directives:[{name:"model",rawName:"v-model",value:r.type,expression:"data.type"}],attrs:{type:"radio",name:r.create_time,value:"time"},domProps:{checked:a._q(r.type,"time")},on:{change:function(t){return a.$set(r,"type","time")}}}),n("label",[a._v("时间")])])])}}])}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){a.modalStatus=!1}}},[a._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:function(t){a.modalStatus=!1}}},[a._v("确 定")])],1),n("el-dialog",{attrs:{title:"选择分类",visible:a.categoryStatus,width:"60%","before-close":a.handleClose,"append-to-body":""},on:{"update:visible":function(t){a.categoryStatus=t}}},[n("div",{staticClass:"cascader-container"},[n("div",{staticClass:"cascader-wrap"},[n("Cascader",{attrs:{options:a.options},on:{requestChildData:a.requestChildData}})],1),n("div",{staticClass:"cascader-foot"},[n("el-button",{on:{click:a.clearSelect}},[a._v("取消")]),n("el-button",{attrs:{type:"primary"},on:{click:a.bindCateToOption}},[a._v("确定")])],1)])])],1)}var n=[];r.d(e,"a",function(){return a}),r.d(e,"b",function(){return n})},1460:function(t,e,r){"use strict";function a(){var r=this,t=r.$createElement,a=r._self._c||t;return a("div",[a("div",{staticClass:"settingsNavTab"},[a("ul",r._l(r.navTab,function(t,e){return a("li",{class:{active:r.type===t.type},on:{click:function(t){return r.handleNavClick(e)}}},[r._v(r._s(t.txt))])}),0)])])}var n=[];r.d(e,"a",function(){return a}),r.d(e,"b",function(){return n})},1462:function(t,e,r){"use strict";function a(){var r=this,t=r.$createElement,a=r._self._c||t;return a("div",{staticClass:"ui-cascader"},r._l(r.options,function(e){return a("div",{staticClass:"ui-cascader__item",class:{active:e.checked},on:{click:function(t){return t.stopPropagation(),r.selectItem(e)}}},[a("p",[r._v(r._s(e.txt||e.name))]),e.checked&&e.children&&e.children.length?a("cascader",{attrs:{options:e.children}}):r._e()],1)}),0)}var n=[];r.d(e,"a",function(){return a}),r.d(e,"b",function(){return n})},514:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getList=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)("/api/head_books",t)},e.save=function(t){var e=t.id,r=o(t,["id"]);if(e)return(0,n.request_put)(c({id:e}),r);return(0,n.request_post)("/api/head_books",r)},e.detail=function(t){var e=t.id,r=o(t,["id"]);return(0,n.request_get)(c({id:e}),r)},e.del=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/api/head_books/delete",t)},e.sort=function(t){var e=t.id,r=o(t,["id"]);return(0,n.request_put)(u({id:e}),r)};var a,n=r(15),i=r(22),s=(a=i)&&a.__esModule?a:{default:a};function o(t,e){var r={};for(var a in t)0<=e.indexOf(a)||Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=t[a]);return r}var c=s.default.compile("/api/head_books/:id"),u=s.default.compile("/api/head_books/sort/:id")},515:function(t,e,r){"use strict";r.r(e);var a=r(1452),n=r(689);for(var i in n)"default"!==i&&function(t){r.d(e,t,function(){return n[t]})}(i);r(1115);var s=r(1),o=Object(s.a)(n.default,a.a,a.b,!1,null,"0102bab4",null);e.default=o.exports},689:function(t,e,r){"use strict";r.r(e);var a=r(690),n=r.n(a);for(var i in a)"default"!==i&&function(t){r.d(e,t,function(){return a[t]})}(i);e.default=n.a},690:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=l(r(16)),n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},a=l(r(1109)),s=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}}(r(109)),o=r(82),c=l(r(288)),u=l(r(1111));function l(t){return t&&t.__esModule?t:{default:t}}function d(t){return function(){var o=t.apply(this,arguments);return new Promise(function(i,s){return function e(t,r){try{var a=o[t](r),n=a.value}catch(t){return void s(t)}if(!a.done)return Promise.resolve(n).then(function(t){e("next",t)},function(t){e("throw",t)});i(n)}("next")})}}e.default={props:["dataList"],components:{Resource:c.default,Nav:a.default,Modal:u.default},data:function(){return{data:[].concat(function(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}(this.dataList)),currMulu:[],relationsDialog:!1,detailDialog:!1,currentDescribe:{},currentDate:{},currentNode:{},list:[],resourceDialog:!1,resourceType:null,navTab:[]}},computed:{currentType:function(){return this.$route.query.type||this.navTab[0]&&this.navTab[0].type}},mounted:function(){var e=this;return d(i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getNav();case 2:e.getList();case 3:case"end":return t.stop()}},t,e)}))()},methods:{getNav:function(){var r=this;return d(i.default.mark(function t(){var e;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s.getTopCategory();case 3:(e=t.sent).data&&e.data.forEach(function(t){r.navTab.push({txt:t.name,type:t.type})}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("[getNav]："+t.t0.toString());case 10:case"end":return t.stop()}},t,r,[[0,7]])}))()},append:function(t){var e={children:[],name:"",describe:{},detail:[],keyword:"",code:"",create_time:this.formatDate(new Date)};t.children||this.$set(t,"children",[]),this.$refs.tree.store.nodesMap[t.id].expanded=!0,t.children.push(e)},remove:function(t,e){var r=this;if(e.id)s.del({id:e.id}).then(function(t){r.getList()});else{var a=t.parent,n=a.data.children||a.data,i=n.findIndex(function(t){return t.id===e.id});n.splice(i,1)}},getList:function(){var e=this;this.currentType,s.getList({type:this.currentType}).then(function(t){e.data=(0,o.recursionTree)(t.data,"pid","root")})},allowDrop:function(t,e,r){return"二级 3-1"!==e.data.name||"inner"!==r},allowDrag:function(t){return-1===t.data.name.indexOf("三级 3-2-2")},add:function(){this.data.push({children:[],pid:"root",name:"",describe:{},detail:[],keyword:"",code:"",create_time:this.formatDate(new Date)})},save:function(t,e){var r=this,a=e.parent?e.parent.data:{};s.save(n({},t,{type:this.currentType,pid:a.id})).then(function(t){r.$message.success("成功"),r.getList(),r.relationsDialog=!1})},selectCurrent:function(t,e){},describe:function(t,e){this.currentNode=t,(this.currentDate=e).describe||this.$set(e,"describe",{}),this.currentDescribe=e.describe||{},this.relationsDialog=!0},showDetail:function(t,e){var r=this;return d(i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r.currentDate=e,t.next=3,r.getDetailList();case 3:r.detailDialog=!0;case 4:case"end":return t.stop()}},t,r)}))()},getDetailList:function(){var e=this;return d(i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.detail({type:e.currentType,category_id:e.currentDate.id}).then(function(t){e.list=t.data||[]});case 2:case"end":return t.stop()}},t,e)}))()},muluSort:function(t,e){var r=this;s.sort({id:t.id,sort:e}).then(function(t){r.getList()}).catch(function(t){r.$message.error(t.message)})},formatDate:function(t,e){var r=1<arguments.length&&void 0!==e?e:"yyyy-MM-dd hh:mm:ss";/(y+)/.test(r)&&(r=r.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));var a={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds()};for(var n in a)if(new RegExp("("+n+")").test(r)){var i=a[n]+"";r=r.replace(RegExp.$1,1===RegExp.$1.length?i:this.padLeftZero(i))}return r},padLeftZero:function(t){return("00"+t).substr(t.length)},addSelcet:function(t,e){var r=this;s.add({category_id:this.currentDate.id,rel_id:e.map(function(t){return t.product_id}),type:this.currentType}).then(function(t){r.getDetailList(),r.resourceDialog=!1}).catch(function(t){var e=t.payload;r.$message.error(e.message)})},del:function(t){var r=this,e=[];if(t)e.push(t);else if(!(e=this.$getChecked()))return;this.$confirm("是否删除？").then(function(t){s.dels({rel_id:e,type:r.currentType,category_id:r.currentDate.id}).then(function(t){r.$message.success("删除成功"),r.getDetailList()}).catch(function(t){var e=t.payload;r.$message.error(e.message)})}).catch(function(t){})},openResource:function(){"subject"==this.type&&(this.resourceType="series"),this.resourceDialog=!0},uploadTreeFile:function(t,e){this.currTreeData=t,this.currNode=e,this.$refs.treeImgInp.click()},treeImgInpChange:function(a){var n=this;return d(i.default.mark(function t(){var e,r;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=n.$isFileBig(a,1)){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,n.$globalUpdateFile(e);case 5:r=t.sent,n.currTreeData.img_src=r.url,n.currTreeData.img=r.path,n.save(n.currTreeData,n.currNode);case 10:case"end":return t.stop()}},t,n)}))()},saveDescribe:function(){this.save(this.currentDate,this.currentNode)}}}},691:function(t,e,r){"use strict";r.r(e);var a=r(692),n=r.n(a);for(var i in a)"default"!==i&&function(t){r.d(e,t,function(){return a[t]})}(i);e.default=n.a},692:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});!function(t){{if(t&&t.__esModule)return;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);e.default=t}}(r(109));e.default={props:{navTab:{}},data:function(){return{}},computed:{type:function(){return this.$route.query.type||this.navTab[0]&&this.navTab[0].type||""}},methods:{handleNavClick:function(t){this.$router.replace({path:"/wms/typeSetting/case",query:{index:"/wms/typeSetting",type:this.navTab[t].type}})},checkSrc:function(){var t=!0,e=!1,r=void 0;try{for(var a,n=this.navTab[Symbol.iterator]();!(t=(a=n.next()).done);t=!0){var i=a.value;this.$route.path==i.href?this.$set(i,"active","active"):"/wms/typeSetting"==this.$route.path?this.$set(this.navTab[0],"active","active"):this.$set(i,"active","")}}catch(t){e=!0,r=t}finally{try{!t&&n.return&&n.return()}finally{if(e)throw r}}}},created:function(){this.checkSrc()},watch:{$route:function(){this.checkSrc()}}}},693:function(t,e,r){},694:function(t,e,r){"use strict";r.r(e);var a=r(695),n=r.n(a);for(var i in a)"default"!==i&&function(t){r.d(e,t,function(){return a[t]})}(i);e.default=n.a},695:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=l(r(16)),c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},a=l(r(1112)),u=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}}(r(109)),n=r(113),i=r(82),s=l(r(848));function l(t){return t&&t.__esModule?t:{default:t}}function d(t){return function(){var o=t.apply(this,arguments);return new Promise(function(i,s){return function e(t,r){try{var a=o[t](r),n=a.value}catch(t){return void s(t)}if(!a.done)return Promise.resolve(n).then(function(t){e("next",t)},function(t){e("throw",t)});i(n)}("next")})}}e.default={data:function(){return{modalStatus:!1,list:[],tid:"",categoryTemp:null,categoryStatus:!1,options:[]}},mounted:function(){s.default.$on("message",this.requestChildData),this.options=this.$parent.navTab},components:{Cascader:a.default},methods:{showModal:function(t){this.tid=t,this.getList(),this.modalStatus=!0},getList:function(){var e=this;u.getCFList({id:this.tid,type:"filter"}).then(function(t){e.list=(0,i.recursionTree)(t.data,"pid","root")})},append:function(t){var e={children:[],name:"",describe:{},detail:[],type:"group",value:"",create_time:(0,n.formatDate)(new Date)};t.children||this.$set(t,"children",[]),this.$refs.tree.store.nodesMap[t.id].expanded=!0,t.children.push(e)},add:function(){this.list.push({children:[],pid:"root",name:"",describe:{},detail:[],type:"group",value:"",create_time:(0,n.formatDate)(new Date)})},remove:function(t,e){var r=this;if(e.id)u.del({id:e.id}).then(function(t){r.getList(),r.$message.success("删除成功")});else{var a=t.parent,n=a.data.children||a.data,i=n.findIndex(function(t){return t.id===e.id});n.splice(i,1)}},save:function(n,i){var s=this;return d(o.default.mark(function t(){var e,r,a;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=i.parent?i.parent.data:{},r=n.id?0:1,(a=n.category_id_clone)&&-1!==a&&(n.category_id=a),t.prev=4,t.next=7,u.categoryFilterSave(c({id:n.id||s.tid,pid:e.id,is_add:r},n));case 7:s.getList(),s.$message.success("添加成功"),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),t.t0.toString();case 14:case"end":return t.stop()}},t,s,[[4,11]])}))()},openCategoryDia:function(t){this.categoryTemp=t,this.categoryStatus=!0},requestChildData:function(a){var n=this;return d(o.default.mark(function t(){var e,r;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.options.filter(function(t){return t.checked})[0],t.prev=1,t.next=4,u.getList({type:e.type||n.options[0].type,pid:a.id||"root"});case 4:r=t.sent,n.$set(a,"children",r.data),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.error("danger");case 11:case"end":return t.stop()}},t,n,[[1,8]])}))()},handleClose:function(t){this.clearSelect(),t()},clearSelect:function(){var t=this.options.filter(function(t){return t.checked})[0];t&&this.$set(t,"checked",!1)&&this.$set(t,"children",null),this.categoryStatus=!1},bindCateToOption:function(){this.categoryTemp.category_id_clone=this.getVal(this.options),this.clearSelect()},getVal:function(t){var e=t.filter(function(t){return t.checked})[0];if(e){if(e.children&&e.children.length){var r=this.getVal(e.children);return-1===r?e.id:r}return e.id}return-1}}}},696:function(t,e,r){"use strict";r.r(e);var a=r(697),n=r.n(a);for(var i in a)"default"!==i&&function(t){r.d(e,t,function(){return a[t]})}(i);e.default=n.a},697:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,n=r(848),i=(a=n)&&a.__esModule?a:{default:a};e.default={name:"cascader",props:{options:{}},computed:{selectedItem:function(){return this.options.filter(function(t){return t.checked})[0]||{}}},methods:{selectItem:function(t){var e=this.options.filter(function(t){return t.checked})[0];e&&this.$set(e,"checked",!1)&&this.$set(e,"children",[]),(!e||e&&e.id&&e.id!==t.id||e.type&&e.type!==t.type)&&(this.$set(t,"checked",!0),i.default.$emit("message",t))}}}},698:function(t,e,r){},699:function(t,e,r){},700:function(t,e,r){},848:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,n=r(3),i=(a=n)&&a.__esModule?a:{default:a};e.default=new i.default}}]);