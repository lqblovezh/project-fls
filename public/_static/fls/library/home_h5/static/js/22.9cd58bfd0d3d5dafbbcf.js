/*!
 * {
 *   "buildtime": "2019-07-17 10:58:50",
 *   "workspace": "F:\\project\\x-book4\\js",
 *   "username": "Administrator",
 *   "hostname": "PC201608171616",
 *   "platform": "win32",
 *   "git": {
 *     "branch": "master",
 *     "hash": "a51842995",
 *     "message": [
 *       "commit a51842995ac312d7b576d646ab99c7a4f3f34d0b",
 *       "Author: YangZai <552396385@qq.com>",
 *       "Date:   Wed Jul 17 10:58:23 2019 +0800",
 *       "    xxx"
 *     ],
 *     "user": "YangZai",
 *     "email": "552396385@qq.com",
 *     "remote": [
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (fetch)",
 *       "origin http://gitlab.kf.gli.cn/xcloud/x-book4.git (push)"
 *     ]
 *   }
 * }
 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{1014:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.info=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)(c(e),e)},t.xList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)(u(e),e)},t.xInfo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_put)(u(e),e)},t.getMedia=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)("/api/books/get_content",e)},t.getCourse=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)(d(e),e)},t.bookComment=function(e){return(0,n.request_post)("/api/home/book_comments",e)},t.getBookComment=function(e){return(0,n.request_get)("/api/home/book_comments",e)},t.bookCommentUp=function(e){return(0,n.request_put)("/api/home/book_comments",e)},t.bookRelate=function(e){return(0,n.request_get)("/api/relation",e)},t.getAccessCode=function(e){return(0,n.request_get)("/api/books/get_access_code",e)},t.getThemeBookDetail=function(e){return(0,n.request_get)(s(e),e)};var o,n=r(1),a=r(4),i=(o=a)&&o.__esModule?o:{default:o};var u=i.default.compile("/api/books/:id/XSearch"),c=i.default.compile("/api/books/:id/home_info"),s=i.default.compile("/api/theme/:id/book_info"),d=i.default.compile("/api/course_ware/:id/home_info")},1015:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.declare=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if(!window.DBI)return;var o=function(e){var t=e.event_class,r=void 0===t?"":t,o=e.event_data,n=void 0===o?{}:o,a=e.event_target,i=void 0===a?"":a,u=e.event_type,c=void 0===u?"":u,s=e.event_source,d=void 0===s?"WEB":s,l=e.event_sources,f=void 0===l?"":l,p=e.event_operator,v=void 0===p?"":p,_=e.event_temporary,h=void 0===_?"":_,m=e.event_system,y=void 0===m?"":m,b=e.event_system_verison,g=void 0===b?"":b,k=e.event_terminal,q=void 0===k?"":k,x=e.event_terminal_verison,w=void 0===x?"":x;if(!window.DBI)return void console.error("DBI对象不存在");return DBI.createEvent({event_class:r,event_data:n,event_target:i,event_type:c,event_source:d,event_sources:f,event_operator:v,event_temporary:h,event_system:y,event_system_verison:g,event_terminal:q,event_terminal_verison:w})}(e),n=Object.prototype.toString.call(t);"[object Object]"===n?o.addData(t):"[object Array]"===n&&t.forEach(function(e){o.addData(e)});DBI.declare(o,r)}},1016:function(e,t,r){"use strict";var o=r(846);r.n(o).a},1074:function(e,t,r){"use strict";var o=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"div"},[t("div",{ref:"root",staticClass:"root"})])},n=[];r.d(t,"a",function(){return o}),r.d(t,"b",function(){return n})},617:function(e,t,r){"use strict";r.r(t);var o=r(1074),n=r(844);for(var a in n)"default"!==a&&function(e){r.d(t,e,function(){return n[e]})}(a);r(1016);var i=r(0),u=Object(i.a)(n.default,o.a,o.b,!1,null,"109eb847",null);t.default=u.exports},844:function(e,t,r){"use strict";r.r(t);var o=r(845),n=r.n(o);for(var a in o)"default"!==a&&function(e){r.d(t,e,function(){return o[e]})}(a);t.default=n.a},845:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,n=r(9),a=(o=n)&&o.__esModule?o:{default:o},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},c=r(15),s=f(r(267)),d=f(r(1014)),l=f(r(1015));function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function p(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function o(n,a){try{var i=t[n](a),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then(function(e){o("next",e)},function(e){o("throw",e)});e(u)}("next")})}}t.default={name:"Reader",props:{params:{}},created:function(){},mounted:function(){this.query=this.$route.query,this.access_code=localStorage.access_code,this.init()},data:function(){return{access_code:"",isNav:!0,query:{},isShowX:!1,infoData:null,preChapterId:0,curChapterId:0}},computed:u({},(0,c.mapState)({})),methods:{init:function(){var e=this;return p(a.default.mark(function t(){var r,o;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(reader3){t.next=2;break}return t.abrupt("return");case 2:({id:e.query.id,type:3}),null,e.query.range&&JSON.parse(e.query.range).start,!!e.$user,r=void 0,r=e.query.chapter_rid?e.query.chapter_rid:e.query.chapter_root?e.query.chapter_root.split(" ")[1]:null,e.isShowX=!1,(o=new reader3.Mobile({imagePath:"/res",services:u({},s,{go_back:function(){o.unmount(),o=null,e.$router.go(-1)},request_full_screen:function(){e.isNav=!1},exit_full_screen:function(){e.isNav=!0},show_toast:function(t){e.$Toast({message:t})},show_confirm:function(t){return e.$MessageBox.confirm(t).then(function(e){return!0}).catch(console.log)},goXknow:function(){},do_share:function(e,t){e.bookId,e.bookName,e.chapterRid,e.chapterName;isWeixin()},action_control:function(t,r){t.type,t.action;var o=!0,n=!1,a=void 0;try{for(var i,u=t[Symbol.iterator]();!(o=(i=u.next()).done);o=!0){var c=i.value,s=c.type;return"read"!=c.action||"chapter"!=s&&"section"!=s||(e.$confirm("您还未购买该章节，前往购买？").then(function(t){if(void 0!==e.$route.query.from){var r={type:"Read",id:e.$route.query.id,inType:"Read"};e.$go("/bookMedia",r)}e.$router.go(-1)}).catch(function(){void 0!==e.$route.query.from&&e.$router.go(-1)}),!1)}}catch(e){n=!0,a=e}finally{try{!o&&u.return&&u.return()}finally{if(n)throw a}}}}),fontSize:{list:[{title:"小",value:"14px"},{title:"中",value:"16px"},{title:"大",value:"18px"},{title:"特大",value:"20px"}],index:0},labelEnabled:!0,fullScreenEnabled:!1,bookmarkEnabled:!0,searchEnabled:!0,preloadEnabled:!0,goBackEnabled:!0,userEnabled:!0,rootAsChapter:!1,quickLabelBtnText:"划线",toolBarActions:[].filter(function(e){return e}),defaultPageLayout:"normal",defaultTextLayout:"lr/static",readModeList:[{title:"无",pageLayout:"normal",textLayout:"lr/static",scope:"desktop"},{title:"翻页",pageLayout:"normal",textLayout:"lr/auto",scope:"desktop"},{title:"对页",pageLayout:"folio",scope:"desktop"},{title:"点击翻页",pageLayout:"normal",textLayout:"lr/static",scope:"mobile"},{title:"平滑翻页",pageLayout:"slide",textLayout:"lr/auto",scope:"mobile"}],background:{list:[{title:"默认",value:["#676A7B","#FFF","reader_bg"]}],index:0}})).emitter.on("updateURL",function(t){if(void 0!=i(t.chapterRid)){var r=decodeURIComponent(e.$route.fullPath),o=void 0,n=void 0;void 0===e.$route.query.chapter_id?(n=t.chapterRid,o=(o=r.replace("index=root","index=root "+n))+"&chapter_id="+n):(n=e.$route.query.chapter_id,o=r.replace(new RegExp("\\b"+n+"\\b","g"),t.chapterRid)),e.preChapterId=n,e.curChapterId=t.chapterRid,e.$router.replace(o)}}),o.extraParams={version:"release",content_version:"release",access_code:e.access_code,product_id:e.query.product_id,user_id:e.$user&&e.$user.id,release_id:e.query.product_id},setTimeout(function(){o.mount(e.$refs.root,{bookId:e.query.book_id,chapterRid:r||e.query.chapter_id||"",chapterId:e.query.chapter_id,range:JSON.parse(e.query.range||null)})},30);case 13:case"end":return t.stop()}},t,e)}))()},getUserId:function(){if(sessionStorage.userInfo){var e=JSON.parse(sessionStorage.userInfo);return e&&e.id||""}return""},getThemeBookDetail:function(){var e=this;d.getThemeBookDetail({id:this.query}).then(function(t){return e.all=t.data})},declareOne:function(e,t,r){var o,n;o={event_class:"PDAMBook",event_target:e,event_type:t,event_source:"WEB",event_operator:this.$user&&this.$user.id},n={data:[{res_id:r.id,res_type:r.type_name,res_name:r.books_info.name,res_cover:r.books_info.img_src,res_exp:r.books_info.abs,res_author:r.books_info.author,res_lables:r.books_info.tag,res_attr:r.books_info.attributes,res_money:r.audio_price}]},l.declare(o,n,function(e){})},getAccessCodes:function(e){var t=this;return p(a.default.mark(function r(){return a.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if("theme"!==t.query.from){r.next=4;break}t.access_code=sessionStorage.getItem("access_code"),r.next=7;break;case 4:return r.next=6,d.getAccessCode(e).then(function(e){t.access_code=e.data});case 6:return r.abrupt("return",r.sent);case 7:case"end":return r.stop()}},r,t)}))()},closeNav:function(){this.isNav=!1},openNav:function(){this.isNav=!0},getInfo:function(){return d.info({id:this.query.book_id})}}}},846:function(e,t,r){}}]);