(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{1341:function(t,e,i){"use strict";i.r(e);var a=i(1441),n=i(713);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);i(1342);var s=i(0),r=Object(s.a)(n.default,a.a,a.b,!1,null,"97569122",null);e.default=r.exports},1342:function(t,e,i){"use strict";var a=i(715);i.n(a).a},1343:function(t,e,i){"use strict";var a=i(716);i.n(a).a},1406:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"box"},[i("div",{staticClass:"mainRight"},[i("div",{staticClass:"contentWrap"},[i("div",{staticClass:"contentLeft"},[i("div",{staticClass:"maindata"},[i("div",{staticClass:"serachWrap"},[i("div",{staticClass:"title"}),i("form",{staticClass:"clearfix",attrs:{id:"mainForm"}},[i("span",{staticClass:"group-inline"},[i("el-input",{attrs:{placeholder:"名称",name:"name",clearable:""}})],1),i("span",{staticClass:"group-inline"},[i("TimePick",{attrs:{inputsName:["start_time","end_time"]}})],1),i("span",{staticClass:"group-inline float-right"},[i("el-button",{attrs:{size:"mediu",type:"primary",icon:"el-icon-plus",plain:""},on:{click:t.addQrcode}},[t._v("创建")]),i("el-button",{attrs:{size:"mediu",type:"primary",icon:"el-icon-search",plain:""},on:{click:t.query}},[t._v("搜索")])],1)])]),i("div",{staticClass:"btn"},[i("el-button-group",[i("el-button",{attrs:{type:"primary",plain:""},on:{click:t.getList}},[t._v("全部")]),i("el-button",{attrs:{type:"primary",plain:""},on:{click:t.getusedList}},[t._v("已使用")]),i("el-button",{attrs:{type:"primary",plain:""},on:{click:t.getnoUseList}},[t._v("未使用")])],1)],1),i("div",{staticClass:"tableWrap"},[i("div",{staticClass:"tableTop"},[i("div",{staticClass:"title vel-line"},[i("span",[t._v("全部 "),t.page?i("span",{staticClass:"totalNum"},[t._v("("+t._s(t.page.total)+")")]):t._e()]),i("div",{staticClass:"btns"},[i("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){return t.delChoosen(!1)}}},[t._v("删除")])],1)])]),i("table",{staticClass:"table"},[i("thead",[i("tr",[i("th",{staticClass:"table-check"},[i("input",{attrs:{type:"checkbox"},on:{click:function(e){return t.$checkAll(e)}}})]),i("th",[t._v("名称")]),i("th",[t._v("印码位置")]),i("th",[t._v("简介")]),i("th",[t._v("类型")]),i("th",{attrs:{width:"150"}},[t._v("使用状态")]),i("th",[t._v("创建时间")]),i("th",{attrs:{width:"80"}},[t._v("操作")])])]),t.list?i("tbody",t._l(t.list,function(e){return i("tr",[i("th",[i("input",{ref:"ids",refInFor:!0,attrs:{type:"checkbox",name:"ids"},domProps:{value:e.id}})]),i("th",[i("img",{staticClass:"cover-photo",attrs:{src:e.img_src}}),i("div",{staticClass:"th-name bookName",attrs:{title:e.name}},[t._v(t._s(e.name))])]),i("th",[i("div",{staticClass:"th-name"},[t._v(t._s(e.position_name))])]),i("th",[i("div",{staticClass:"th-name"},[t._v(t._s(e.abs))])]),i("th",[i("div",{staticClass:"th-name"},[t._v(t._s(e.type_name))])]),i("th",[i("div",{staticClass:"th-name"},[t._v(t._s(e.product_status_name))])]),i("th",[i("div",{staticClass:"th-name"},[t._v(t._s(e.create_time))])]),i("th",[i("div",{staticClass:"btns"},[i("Icon",{attrs:{type:"icon-detail",title:"详情"},on:{click:function(i){return t.opneDetailDialog("info",e)}}}),"true"!=e.product_status?i("Icon",{attrs:{type:"icon-delete",title:"删除"},on:{click:function(i){return t.delChoosen(e.id,e)}}}):t._e(),i("Icon",{attrs:{type:"icon-export",title:"导出二维码"}})],1)])])}),0):t._e()]),t.page?i("div",{staticClass:"pageWrap"},[i("el-pagination",{attrs:{small:!1,background:"","current-page":t.page.num,"page-sizes":[10,50,100],"page-size":t.page.offset,layout:"total, sizes,prev, pager, next, jumper",total:t.page.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1):t._e()])])])])]),i("div",{staticClass:"dialogs"},[i("el-dialog",{attrs:{center:!1,visible:t.detailDialog,"close-on-click-modal":!1,top:"50px",width:"1000px",title:"详情"},on:{"update:visible":function(e){t.detailDialog=e}}},[i("div",{staticClass:"content",attrs:{slot:"title"},slot:"title"},[t.detailDialog?i("Detail",{attrs:{detailDialog:t.detailDialog,readOnly:t.readOnly,detailData:t.detailData},on:{"update:detailDialog":function(e){t.detailDialog=e},"update:detail-dialog":function(e){t.detailDialog=e},close:t.close,saveok:t.saveok}}):t._e()],1)])],1)])},n=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},1441:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"div"},[i("VaForm",{ref:"detailForm"},[i("form",{ref:"detailForm",staticClass:"detailForm"},[i("fieldset",[i("div",{staticClass:"group"},[i("div",{staticClass:"label"},[t._v("*二维码名称:")]),i("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"},{name:"model",rawName:"v-model",value:t.information.name,expression:"information.name"}],staticClass:"form-control",attrs:{type:"text",maxlength:"20"},domProps:{value:t.information.name},on:{input:function(e){e.target.composing||t.$set(t.information,"name",e.target.value)}}})]),i("div",{staticClass:"group"},[i("div",{staticClass:"label"},[t._v("*描述:")]),i("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"},{name:"model",rawName:"v-model",value:t.information.abs,expression:"information.abs"}],staticClass:"form-control",attrs:{type:"text",maxlength:"20"},domProps:{value:t.information.abs},on:{input:function(e){e.target.composing||t.$set(t.information,"abs",e.target.value)}}})]),i("div",{staticClass:"group"},[i("div",{staticClass:"label"},[t._v("*二维码类型:")]),i("el-select",{model:{value:t.information.code_type,callback:function(e){t.$set(t.information,"code_type",e)},expression:"information.code_type"}},t._l(t.codeType,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),"agility"==t.information.code_type?i("div",{staticClass:"group"},[i("div",{staticClass:"label"},[t._v("*最多消息条数:")]),i("el-select",{model:{value:t.information.msg_num,callback:function(e){t.$set(t.information,"msg_num",e)},expression:"information.msg_num"}},t._l(t.messages,function(t){return i("el-option",{key:t.value,attrs:{label:t.name,value:t.value}})}),1)],1):t._e(),i("div",{staticClass:"group"},[i("div",{staticClass:"label"},[t._v("所属图书(不必填):")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.information.books_info,expression:"information.books_info"}],staticClass:"form-control",attrs:{type:"text",maxlength:"20"},domProps:{value:t.information.books_info},on:{input:function(e){e.target.composing||t.$set(t.information,"books_info",e.target.value)}}}),i("el-button",{staticClass:"modify",attrs:{type:"primary",size:"mini"}},[t._v("修改")])],1),i("div",{staticClass:"group"},[i("div",{staticClass:"label"},[t._v("二维码样式:")]),i("div",{staticClass:"left"},[t.information.config?i("vueQriousjs",{attrs:{config:t.config}}):t._e(),i("div",{staticClass:"div",staticStyle:{margin:"0 auto"}},["agility"!=t.information.code_type?i("input",{directives:[{name:"model",rawName:"v-model",value:t.config.value,expression:"config.value"},{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"}],staticClass:"form-control",staticStyle:{width:"300px"},attrs:{placeholder:"二维码内容"},domProps:{value:t.config.value},on:{input:function(e){e.target.composing||t.$set(t.config,"value",e.target.value)}}}):t._e(),i("el-slider",{attrs:{max:300,min:200},model:{value:t.config.size,callback:function(e){t.$set(t.config,"size",e)},expression:"config.size"}}),i("img",{staticClass:"img_logo",attrs:{src:t.information.img_src_logo}}),i("el-button",{attrs:{type:"primary",size:"small",plain:""},on:{click:function(e){return t.$refs.treeImgInp.click()}}},[t._v("上传logo")]),i("input",{ref:"treeImgInp",staticClass:"hide",attrs:{type:"file"},on:{change:t.treeImgInpChange}}),i("el-color-picker",{model:{value:t.config.background,callback:function(e){t.$set(t.config,"background",e)},expression:"config.background"}}),i("el-color-picker",{model:{value:t.config.foreground,callback:function(e){t.$set(t.config,"foreground",e)},expression:"config.foreground"}})],1)],1),i("el-button",{staticClass:"generate",attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(e){return t.getQrcode()}}},[t._v("生成")]),i("div",{staticClass:"right"},[i("img",{staticClass:"qrImg",attrs:{src:t.information.img_src}})])],1),i("div",{staticClass:"group"},[i("div",{staticClass:"label"},[t._v("*印刷位置:")]),i("el-radio-group",{model:{value:t.information.position,callback:function(e){t.$set(t.information,"position",e)},expression:"information.position"}},t._l(t.localPrinting,function(e){return i("el-radio",{key:e.position,attrs:{label:e.position}},[t._v(t._s(e.position_name))])}),1)],1),t.readOnly?t._e():i("div",{staticClass:"btn"},[i("el-button",{attrs:{type:"info"},on:{click:function(e){return t.$emit("close")}}},[t._v("取消")]),"true"!=t.information.product_status?i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitInfo("detailForm")}}},[t._v("确定")]):t._e()],1)])])])],1)},n=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},289:function(t,e,i){"use strict";i.r(e);var a=i(1406),n=i(711);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);i(1343);var s=i(0),r=Object(s.a)(n.default,a.a,a.b,!1,null,"6809c9c0",null);e.default=r.exports},310:function(t,e){var i=/^(?:submit|button|image|reset|file)$/i,a=/^(?:input|select|textarea|keygen)/i,n=/(\[[^\[\]]*\])/g;function o(t,e,i){if(e.match(n)){!function t(e,i,a){if(0===i.length)return e=a;var n=i.shift(),o=n.match(/^\[(.+?)\]$/);if("[]"===n)return e=e||[],Array.isArray(e)?e.push(t(null,i,a)):(e._values=e._values||[],e._values.push(t(null,i,a))),e;if(o){var s=o[1],r=+s;isNaN(r)?(e=e||{})[s]=t(e[s],i,a):(e=e||[])[r]=t(e[r],i,a)}else e[n]=t(e[n],i,a);return e}(t,function(t){var e=[],i=new RegExp(n),a=/^([^\[\]]*)/.exec(t);for(a[1]&&e.push(a[1]);null!==(a=i.exec(t));)e.push(a[1]);return e}(e),i)}else{var a=t[e];a?(Array.isArray(a)||(t[e]=[a]),t[e].push(i)):t[e]=i}return t}function s(t,e,i){return i=i.replace(/(\r)?\n/g,"\r\n"),i=(i=encodeURIComponent(i)).replace(/%20/g,"+"),t+(t?"&":"")+encodeURIComponent(e)+"="+i}t.exports=function(t,e){"object"!=typeof e?e={hash:!!e}:void 0===e.hash&&(e.hash=!0);for(var n=e.hash?{}:"",r=e.serializer||(e.hash?o:s),l=t&&t.elements?t.elements:[],c=Object.create(null),u=0;u<l.length;++u){var d=l[u];if((e.disabled||!d.disabled)&&d.name&&a.test(d.nodeName)&&!i.test(d.type)){var f=d.name,p=d.value;if("checkbox"!==d.type&&"radio"!==d.type||d.checked||(p=void 0),e.empty){if("checkbox"!==d.type||d.checked||(p=""),"radio"===d.type&&(c[d.name]||d.checked?d.checked&&(c[d.name]=!0):c[d.name]=!1),void 0==p&&"radio"==d.type)continue}else if(!p)continue;if("select-multiple"!==d.type)n=r(n,f,p);else{p=[];for(var v=d.options,m=!1,g=0;g<v.length;++g){var h=v[g],_=e.empty&&!h.value,y=h.value||_;h.selected&&y&&(m=!0,n=e.hash&&"[]"!==f.slice(f.length-2)?r(n,f+"[]",h.value):r(n,f,h.value))}!m&&e.empty&&(n=r(n,f,""))}}}if(e.empty)for(var f in c)c[f]||(n=r(n,f,""));return n}},417:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getList=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)("/api/qrcode",t)},e.del=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/api/qrcode/delete",t)},e.detail=c,e.save=function(t){var e=t.id,i=r(t,["id"]);if(e)return(0,n.request_put)(l({id:e}),i);return(0,n.request_post)("/api/qrcode",i)},e.codePosition=function(){return(0,n.request_get)("/api/qrcode/position")};var a,n=i(16),o=i(22),s=(a=o)&&a.__esModule?a:{default:a};function r(t,e){var i={};for(var a in t)e.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(t,a)&&(i[a]=t[a]);return i}var l=s.default.compile("/api/qrcode/:id"),c=s.default.compile("/api/qrcode/:id");function c(t){var e=t.id,i=r(t,["id"]);return(0,n.request_get)(c({id:e}),i)}},711:function(t,e,i){"use strict";i.r(e);var a=i(712),n=i.n(a);for(var o in a)"default"!==o&&function(t){i.d(e,t,function(){return a[t]})}(o);e.default=n.a},712:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},n=i(313),o=(l(i(310)),function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(417))),s=l(i(1341)),r=i(50);function l(t){return t&&t.__esModule?t:{default:t}}e.default={components:{Detail:s.default},mixins:[n.main],data:function(){return{services:o,detailDialog:!1,detailDialoaType:"info",detailData:{},readOnly:!1}},created:function(){},methods:a({close:function(){this.detailDialog=!1},opneDetailDialog:function(t,e){this.detailDialog=!0,this.detailData=e},addQrcode:function(){this.detailDialog=!0,this.detailData={}},getusedList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.page&&this.page.num||1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.page&&this.page.offset||10,i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"true";this.services.getList(a({pageNum:t,pageOffset:e},n,{product_status:o})).then(function(t){i.setList(t.data),i.setPage(t.page)})},getnoUseList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.page&&this.page.num||1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.page&&this.page.offset||10,i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"false";this.services.getList(a({pageNum:t,pageOffset:e},n,{product_status:o})).then(function(t){i.setList(t.data),i.setPage(t.page)})},setList:function(t){this.setSerieslist(t)},setPage:function(t){this.setSerieslistPage(t)},saveok:function(t){this.detailData.id||(this.detailData=t),this.getList()}},(0,r.mapMutations)(["setSerieslist","setSerieslistPage"])),computed:a({},(0,r.mapState)({list:function(t){return t.series.list},page:function(t){return t.series.page}}))}},713:function(t,e,i){"use strict";i.r(e);var a=i(714),n=i.n(a);for(var o in a)"default"!==o&&function(t){i.d(e,t,function(){return a[t]})}(o);e.default=n.a},714:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=l(i(9)),n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},o=(l(i(310)),r(i(110))),s=r(i(417));function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function l(t){return t&&t.__esModule?t:{default:t}}function c(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,i){return function a(n,o){try{var s=e[n](o),r=s.value}catch(t){return void i(t)}if(!s.done)return Promise.resolve(r).then(function(t){a("next",t)},function(t){a("throw",t)});t(r)}("next")})}}e.default={props:["detailData","readOnly","detailDialog"],created:function(){this.codePosition(),this.detailData.id?this.getDetail():this.information.config=this.config},data:function(){return{information:{code_type:"agility",config:null},previewImgUrl:null,imgUrl:null,file:null,checkAll:!1,content:"view",messages:[{name:"1条",value:1},{name:"2条",value:2},{name:"3条",value:3},{name:"4条",value:4},{name:"5条",value:5},{name:"6条",value:6},{name:"7条",value:7},{name:"8条",value:8}],localPrinting:[],codeType:[{label:"固定链接地址",value:"fixed"},{label:"灵活配置",value:"agility"}],config:{background:"#fff",foreground:"#000",level:"Q",padding:0,size:255,value:"测试二维码"}}},methods:{codePosition:function(){var t=this;s.codePosition().then(function(e){t.localPrinting=e.data})},getDetail:function(){var t=this;s.detail({id:this.detailData.id}).then(function(e){t.information=e.data,e.data.config?(t.config=e.data.config,delete t.config.logo,t.config.size=Number(e.data.config.size)):t.information.config=t.config,t.information.code_type||t.$set(t.information,"code_type","agility")})},getQrcode:function(){var t=this;o.generate({logo:this.information.img_logo,color:this.config.foreground,bg_color:this.config.background,size:this.config.size,content:this.config.value}).then(function(e){t.$set(t.information,"img_src",e.data.url),t.$set(t.information,"img",e.data.path)})},treeImgInpChange:function(){var t=c(a.default.mark(function t(e){var i,n;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e.target.files[0]){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,this.$globalUpdateFile(i);case 5:n=t.sent,this.$set(this.information,"img_src_logo",n.url),this.$set(this.information,"img_logo",n.path);case 8:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),submitInfo:function(){var t=c(a.default.mark(function t(){var e,i=this;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(e=n({id:this.detailData.id},this.information,{config:n({},this.config,{logo:this.information.img_logo}),content:"agility"!=this.information.code_type?this.config.value:null})).books_info||(e.books_info=""),t.next=4,s.save(e).then(function(t){i.$message.success("操作成功!"),i.$emit("saveok",t.data)}).catch(function(t){i.$message({message:t.message||"错误!",type:"error"})});case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}}},715:function(t,e,i){},716:function(t,e,i){}}]);