(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{1336:function(t,e,i){"use strict";var a=i(701);i.n(a).a},1409:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"index clearfix"},[i("div",{staticClass:"mainRight"},[i("div",{staticClass:"contentWrap"},[i("div",{staticClass:"contentLeft"},[i("div",{staticClass:"maindata"},[i("div",{staticClass:"btnGroup"},[i("el-button-group",[i("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){return t.$router.push({path:"/wms/userList",query:{index:t.$route.query.index,id:t.$route.query.id}})}}},[t._v("扫码用户列表")]),i("el-button",{attrs:{type:"primary"}},[t._v("数据分析")]),i("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){return t.$router.push({path:"/wms/scanRecord",query:{index:t.$route.query.index,id:t.$route.query.id}})}}},[t._v("扫码记录")])],1)],1),i("div",{staticClass:"data"},[i("div",{staticClass:"tableTop"},[i("div",{staticClass:"title"},[t._m(0),i("div",{staticClass:"item"},[i("span",[t._v(t._s(t.infoDate.scan_count))])])]),i("div",{staticClass:"title"},[t._m(1),i("div",{staticClass:"item"},[i("span",[t._v(t._s(t.infoDate.user_count))])])])]),i("div",{staticClass:"tail"},[i("div",{staticClass:"group"},[i("div",{staticClass:"name"},[t._v("用户性别分布")]),i("div",{ref:"charts1",staticClass:"draw"})]),i("div",{staticClass:"group"},[i("div",{staticClass:"name"},[t._v("24小时扫码时间段分布")]),i("div",{ref:"charts2",staticClass:"draw"})]),i("div",{staticClass:"group"},[i("div",{staticClass:"name"},[t._v("用户地域分布")]),i("div",{ref:"charts3",staticClass:"draw"})]),i("div",{staticClass:"group"},[i("div",{staticClass:"name"},[t._v("7日用户新增量")]),i("div",{ref:"charts4",staticClass:"draw"})]),i("div",{staticClass:"group"},[i("div",{staticClass:"name"},[t._v("每周扫码数量分布")]),i("div",{ref:"charts5",staticClass:"draw"})]),i("div",{staticClass:"group"},[i("div",{staticClass:"name"},[t._v("累计停留时长分布")]),i("div",{ref:"charts6",staticClass:"draw"})])]),i("div",{staticClass:"tail tail2"},[i("div",{staticClass:"group"},[i("div",{staticClass:"name"},[t._v("用户地域详细分布")]),i("div",{ref:"charts7",staticClass:"draw"})]),i("div",{staticClass:"group"},[i("div",{staticClass:"name"},[t._v("用户单次停留最高时长分布")]),i("div",{ref:"charts8",staticClass:"draw"})])]),i("div",{staticClass:"tail tail2"},[i("div",{staticClass:"group"},[i("div",{staticClass:"name"},[t._v("30日二维码扫码排行榜")]),i("div",{ref:"charts9",staticClass:"draw"})]),i("div",{staticClass:"group"},[i("div",{staticClass:"name"},[t._v("7日二维码扫码排行榜")]),i("div",{ref:"charts10",staticClass:"draw"})])])])])])])])])},s=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"name"},[e("span",[this._v("扫码总数：")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"name"},[e("span",[this._v("用户数量：")])])}];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return s})},286:function(t,e,i){"use strict";i.r(e);var a=i(1409),s=i(699);for(var r in s)"default"!==r&&function(t){i.d(e,t,function(){return s[t]})}(r);i(1336);var n=i(0),o=Object(n.a)(s.default,a.a,a.b,!1,null,"4314a07e",null);e.default=o.exports},334:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.analysAll=e.analysisData=e.userStatics=void 0;var a,s,r,n=c(i(9));e.userStatics=(a=d(n.default.mark(function t(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f(i).then(function(t){return t.data});case 2:return e=t.sent,t.abrupt("return",(0,o.request_get)("/api/statistics/user",i).then(function(t){return t.data.history=e,t}));case 4:case"end":return t.stop()}},t,this)})),function(){return a.apply(this,arguments)}),e.analysisData=(s=d(n.default.mark(function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return"/wms/proStatics"==e.type?e.product_id=e.id:"/wms/bookStatics"==e.type&&(e.book_id=e.id),t.abrupt("return",(0,o.request_get)("/api/statistics/data_analysis",e));case 2:case"end":return t.stop()}},t,this)})),function(){return s.apply(this,arguments)}),e.analysAll=(r=d(n.default.mark(function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,o.request_get)("/api/statistics/all",e));case 1:case"end":return t.stop()}},t,this)})),function(){return r.apply(this,arguments)});e.getList=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.request_get)("/api/statistics/product_list",t)},e.getBookList=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.request_get)("/api/statistics/book_list",t)},e.del=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.request_post)("/api/statistics/product_list",t)},e.detail=l,e.scanList=f,e.userList=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"/wms/proStatics"==t.type?t.product_id=t.id:"/wms/bookStatics"==t.type&&(t.book_id=t.id);return(0,o.request_get)("/api/statistics/user_list",t)},e.scanExport=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"/wms/proStatics"==t.type?t.product_id=t.ids:"/wms/bookStatics"==t.type&&(t.book_id=t.ids);return(0,o.request_get)("/api/statistics/scan_record_list_export",t)},e.userExport=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"/wms/proStatics"==t.type?t.product_id=t.ids:"/wms/bookStatics"==t.type&&(t.book_id=t.ids);return(0,o.request_get)("/api/statistics/user_list_export",t)};var o=i(16),u=c(i(22));function c(t){return t&&t.__esModule?t:{default:t}}function d(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,i){return function a(s,r){try{var n=e[s](r),o=n.value}catch(t){return void i(t)}if(!n.done)return Promise.resolve(o).then(function(t){a("next",t)},function(t){a("throw",t)});t(o)}("next")})}}u.default.compile("/api/statistics/product_list/:id");var l=u.default.compile("/api/statistics/product_list/:id");function l(t){var e=t.id,i=function(t,e){var i={};for(var a in t)e.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(t,a)&&(i[a]=t[a]);return i}(t,["id"]);return(0,o.request_get)(l({id:e}),i)}function f(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"/wms/proStatics"==t.type?t.product_id=t.id:"/wms/bookStatics"==t.type&&(t.book_id=t.id),(0,o.request_get)("/api/statistics/scan_record_list",t)}},699:function(t,e,i){"use strict";i.r(e);var a=i(700),s=i.n(a);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);e.default=s.a},700:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(334)),r=i(388),n=(a=r)&&a.__esModule?a:{default:a};i(885),e.default={data:function(){return{services:s,infoDate:{}}},created:function(){this.getDate()},methods:{getDate:function(){var t=this;s.analysisData({type:this.$route.query.index,id:this.$route.query.id}).then(function(e){t.infoDate=e.data,t.init()})},init:function(){this.draw1(),this.draw({ref:"charts2",name:"读者扫码时段分析",x:this.infoDate.twenty_four_distribution.map(function(t){return t.distribution}),y:this.infoDate.twenty_four_distribution.map(function(t){return t.total})}),this.draw3(),this.draw({ref:"charts4",name:"7天浏览读者量",x:this.infoDate.new_user.map(function(t){return t.date}),y:this.infoDate.new_user.map(function(t){return t.new_user_count})}),this.draw({ref:"charts5",name:"读者扫码时段分析",x:this.infoDate.week_scan_count.map(function(t){return t.distribution}),y:this.infoDate.week_scan_count.map(function(t){return t.total})}),this.draw({ref:"charts6",name:"读者累计停留时长分布",x:this.infoDate.user_total_stop_time.map(function(t){return t.time}),y:this.infoDate.user_total_stop_time.map(function(t){return t.count})}),this.draw7(),this.draw({ref:"charts8",name:"读者累计停留时长分布",x:this.infoDate.user_max_stop_time.map(function(t){return t.time}),y:this.infoDate.user_max_stop_time.map(function(t){return t.count})}),this.draw({ref:"charts9",name:"读者累计停留时长分布",x:this.infoDate.top_thirty.map(function(t){return t.name}),y:this.infoDate.top_thirty.map(function(t){return t.total}),type:"bar"}),this.draw({ref:"charts10",name:"读者累计停留时长分布",x:this.infoDate.top_seven.map(function(t){return t.name}),y:this.infoDate.top_seven.map(function(t){return t.total}),type:"bar"})},draw1:function(){n.default.init(this.$refs.charts1).setOption({title:{text:"男女百分比",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:this.infoDate.user_sex.map(function(t){return t.name})},series:[{name:"占比",type:"pie",radius:"55%",center:["50%","60%"],data:this.infoDate.user_sex,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]})},draw3:function(){n.default.init(this.$refs.charts3).setOption({tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",x:"left",data:this.infoDate.pro_list.map(function(t){return t.name}).splice(0,10)},toolbox:{show:!0,feature:{mark:{show:!0},magicType:{show:!0,type:["pie","funnel"],option:{funnel:{x:"25%",width:"50%",funnelAlign:"center",max:1548}}}}},calculable:!0,series:[{name:"访问来源",type:"pie",radius:["50%","70%"],itemStyle:{normal:{label:{show:!1},labelLine:{show:!1}},emphasis:{label:{show:!0,position:"center",textStyle:{fontSize:"30",fontWeight:"bold"}}}},data:this.infoDate.pro_list}]})},draw7:function(){n.default.init(this.$refs.charts7).setOption({tooltip:{trigger:"item"},legend:{x:"right",selectedMode:!1,data:["北京","上海","广东"]},dataRange:{orient:"horizontal",min:0,max:100,text:["高","低"],splitNumber:0},toolbox:{show:!1,orient:"vertical",x:"right",y:"center",feature:{mark:{show:!1},dataView:{show:!1,readOnly:!1}}},series:[{name:"地域详细分布",type:"map",mapType:"china",mapLocation:{x:"center"},selectedMode:"multiple",itemStyle:{normal:{label:{show:!0}},emphasis:{label:{show:!0}}},data:this.infoDate.pro_list}],animation:!1},!0)},draw:function(t){var e=t.ref,i=t.name,a=void 0===i?"name":i,s=t.x,r=void 0===s?[]:s,o=t.y,u=void 0===o?[]:o,c=t.type,d=void 0===c?"line":c;n.default.init(this.$refs[e]).setOption({title:{text:a,x:"center"},tooltip:{trigger:"axis"},xAxis:{type:"category",data:r},yAxis:{type:"value"},series:[{data:u,type:d,smooth:!0,barWidth:30}]})}}}},701:function(t,e,i){}}]);