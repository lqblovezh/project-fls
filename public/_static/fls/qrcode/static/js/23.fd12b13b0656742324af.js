(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{1003:function(t,e,i){"use strict";var a=i(611);i.n(a).a},1426:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"index clearfix"},[i("div",{staticClass:"dialogs"},[t.moveToOtherDiaolog?i("MoveGroup",{attrs:{currGroup:t.currGroup,groupList:t.groupList},on:{back:function(e){t.moveToOtherDiaolog=!1},submit:t.moveToSubmit}}):t._e(),t.upShelfDiaolog?i("Grounding",{attrs:{type:"subject"},on:{back:function(e){t.upShelfDiaolog=!1},upShelf:t.shelfClass}}):t._e(),t.detailVisible?i("Detail",{attrs:{type:t.detailDialoaType,detailVisible:t.detailVisible,defaultData:t.detailData,detailValue:"info"},on:{"update:detailVisible":function(e){t.detailVisible=e},"update:detail-visible":function(e){t.detailVisible=e}}}):t._e()],1),i("div",{staticClass:"mainRight"},[i("div",{staticClass:"contentWrap"},[i("div",{staticClass:"contentLeft"},[i("div",{staticClass:"maindata"},[i("div",{staticClass:"serachWrap"},[i("div",{staticClass:"title"}),i("form",{staticClass:"clearfix",attrs:{id:"mainForm"}},[i("span",{staticClass:"group-inline"},[i("el-input",{attrs:{placeholder:"名称",name:"name",clearable:""}})],1),i("span",{staticClass:"group-inline"},[i("TimePick",{attrs:{inputsName:["start_time","end_time"]}})],1),t._m(0),i("span",{staticClass:"group-inline float-right"},[i("el-button",{attrs:{size:"mediu",type:"primary",icon:"el-icon-search",plain:""},on:{click:t.query}},[t._v("搜索")])],1)])]),i("div",{staticClass:"tableWrap"},[i("div",{staticClass:"tableTop"},[i("div",{staticClass:"title vel-line"},[i("span",[t._v("全部 "),t.page?i("span",{staticClass:"totalNum"},[t._v("("+t._s(t.page.total)+")")]):t._e()]),i("div",{staticClass:"btns"},[i("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:t.moveToOther}},[t._v("移动分组")]),i("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){return t.downShelf()}}},[t._v("下架")]),i("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){return t.delChoosen(!1)}}},[t._v("删除")])],1)])]),i("table",{staticClass:"table"},[i("thead",[i("tr",[i("th",{staticClass:"table-check"},[i("input",{attrs:{type:"checkbox"},on:{click:function(e){return t.$checkAll(e)}}})]),i("th",[t._v("名称")]),i("th",[t._v("类型")]),i("th",[t._v("创建时间")]),i("th",{attrs:{width:"150"}},[t._v("上架状态")]),i("th",{attrs:{width:"70"}},[t._v("使用版本")]),i("th",{attrs:{width:"80"}},[t._v("操作")])])]),t.list?i("tbody",t._l(t.list,function(e){return i("tr",[i("th",[i("input",{ref:"ids",refInFor:!0,attrs:{type:"checkbox",name:"ids"},domProps:{value:e.id}})]),i("th",[i("img",{staticClass:"cover-photo",attrs:{src:e.books_info.img_src}}),i("div",{staticClass:"th-name bookName",attrs:{title:e.books_info.name}},[t._v(t._s(e.books_info.name))])]),i("th",[i("div",{staticClass:"th-name",attrs:{title:e.books_info.components.category_name}},[t._v(t._s(e.books_info.components.category_name))])]),i("th",[i("div",{staticClass:"th-name"},[t._v(t._s(e.books_info.create_time))])]),i("th",[i("div",{staticClass:"th-name"},[t._v(t._s(e.status_name))])]),i("th",["0"!=e.status?i("div",{staticClass:"th-name"},[t._v(t._s(e.version_id))]):t._e(),"0"==e.status?i("div",{staticClass:"th-name"},[i("select",{on:{change:function(i){return t.versionChage(i,e)}}},t._l(e.version_list,function(a,s){return i("option",{domProps:{value:a,selected:e.version_id==s}},[t._v(t._s(s))])}),0)]):t._e()]),i("th",[i("div",{staticClass:"btns"},["0"!=e.status?i("Icon",{attrs:{type:"icon-reject",title:"下架"},on:{click:function(i){return t.downShelf(e.id)}}}):t._e(),i("Icon",{attrs:{type:"icon-upload",title:"上架"},on:{click:function(i){return t.upShelf(e.id)}}}),i("Icon",{attrs:{type:"el-icon-setting",title:"上架"},on:{click:function(i){return t.showUpShelf(e)}}}),i("Icon",{attrs:{type:"icon-detail",title:"详情"},on:{click:function(i){return t.opneDetailDialog(10,e.id)}}})],1)])])}),0):t._e()]),t.page?i("div",{staticClass:"pageWrap"},[i("el-pagination",{attrs:{small:!1,background:"","current-page":t.page.num,"page-sizes":[10,50,100],"page-size":t.page.offset,layout:"total, sizes,prev, pager, next, jumper",total:t.page.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1):t._e()]),i("div",{staticClass:"gruopList"},[i("GroupList",{attrs:{groupList:t.groupList,currGroup:t.currGroup},on:{addGroup:t.addGroup,updateGroup:t.updateGroup,delGroup:t.delGroup,groupChange:t.groupChange}}),t.pustSetDialog?i("el-dialog",{attrs:{title:"价格设置",visible:t.pustSetDialog,width:"500px"},on:{"update:visible":function(e){t.pustSetDialog=e}}},[i("div",{staticClass:"formWrap"},[i("VaForm",{ref:"pustSetForm"},[i("form",{attrs:{id:"pustSetForm"}},[i("div",{staticClass:"group"},[i("span",{staticClass:"left"},[t._v("版本")]),i("span",{staticClass:"right"},[t._v("价格")]),i("input",{staticClass:"hide",attrs:{name:"id"},domProps:{value:t.currentPut.id}})]),t._l(t.currentPut.theme_extend_list,function(e,a){return i("div",{staticClass:"group"},[i("span",{staticClass:"left",domProps:{textContent:t._s(e.version_id)}}),i("span",{staticClass:"right"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.price,expression:"item.price"}],staticClass:"form-control info",attrs:{name:"prices",disabled:e.is_put},domProps:{value:e.price},on:{input:function(i){i.target.composing||t.$set(e,"price",i.target.value)}}}),i("input",{staticClass:"hide",attrs:{name:"ids",disabled:e.is_put},domProps:{value:e.xread_book_id}})])])})],2)])],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small",type:"info"},on:{click:function(e){t.pustSetDialog=!1}}},[t._v("取消")]),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.pustSetSave}},[t._v("确定")])],1)]):t._e()],1)])])])])])},s=[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"group-inline"},[e("select",{staticClass:"form-control width-small",attrs:{placeholder:"标签",name:"status"}},[e("option",{attrs:{value:""}},[this._v("选择状态")]),e("option",{attrs:{value:"1"}},[this._v("已上架")]),e("option",{attrs:{value:"0"}},[this._v("未上架")])])])}];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return s})},270:function(t,e,i){"use strict";i.r(e);var a=i(1426),s=i(609);for(var n in s)"default"!==n&&function(t){i.d(e,t,function(){return s[t]})}(n);i(1003);var r=i(0),o=Object(r.a)(s.default,a.a,a.b,!1,null,"66d0b0c1",null);e.default=o.exports},339:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getList=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.request_get)("/api/data_subjects",t)},e.del=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.request_post)("/api/data_subjects/delete",t)},e.detail=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.request_get)(c(t),t)},e.modifySeries=function(t){var e=t.id,i=o(t,["id"]);return(0,s.request_put)(c({id:e}),i)},e.put=function(t){return(0,s.request_put)("/api/data_subjects/put",t)},e.pull=function(t){return(0,s.request_put)("/api/data_subjects/pull",t)},e.putSave=function(t){return(0,s.request_put)("/api/data_subjects/set",t)},e.getColList=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.request_get)("/api/data_subjects/class/books",t)},e.groupList=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.request_get)("/api/data_subjects/groups",t)},e.group=function(t){var e=t.id,i=o(t,["id"]);if(e)return(0,s.request_put)(l({id:e}),i);return(0,s.request_post)("/api/data_subjects/groups",i)},e.groupDel=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,i=o(t,["id"]);return(0,s.request_delete)(u({id:e}),i)},e.groupMove=function(t){return(0,s.request_put)("/api/groups/data_subjects",t)},e.getClass=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.request_get)("/api/data_categorys/books/class",t)};var a,s=i(16),n=i(22),r=(a=n)&&a.__esModule?a:{default:a};function o(t,e){var i={};for(var a in t)e.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(t,a)&&(i[a]=t[a]);return i}var u=r.default.compile("/api/data_subjects/groups/:id"),l=r.default.compile("/api/data_subjects/:id/groups"),c=r.default.compile("/api/data_subjects/:id")},373:function(t,e,i){"use strict";i.r(e);var a=i(374),s=i.n(a);for(var n in a)"default"!==n&&function(t){i.d(e,t,function(){return a[t]})}(n);e.default=s.a},374:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["groupList","currGroup"],data:function(){return{newGroupDialogOpen:!1,updateGroupDialogOpen:!1,currEditGroup:null}},created:function(){},computed:{},methods:{groupChange:function(t){this.$emit("groupChange",t)},addGroupDialog:function(){},delGroup:function(t){var e=this;this.$confirm("是否删除分组:"+t.name).then(function(i){dir(i),e.$emit("delGroup",t.id)}).catch(function(t){dir(t)})},updateGroupDialog:function(t){this.currEditGroup=t,log(t),this.updateGroupDialogOpen=!0},addGroup:function(){if(this.$refs.addGroupForm.valiAll()){var t=document.querySelector("#addGroupForm");this.$emit("addGroup",t),this.newGroupDialogOpen=!1}},updateGroup:function(){if(this.$refs.updateGroupForm.valiAll()){var t=document.querySelector("#updateGroupForm");this.$emit("updateGroup",t),this.updateGroupDialogOpen=!1}},moveToSubmit:function(){this.$emit("moveGroup")}}}},375:function(t,e,i){},376:function(t,e,i){"use strict";i.r(e);var a=i(377),s=i.n(a);for(var n in a)"default"!==n&&function(t){i.d(e,t,function(){return a[t]})}(n);e.default=s.a},377:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["groupList","currGroup"],created:function(){log("重庆插件")},data:function(){return{flag:!0}},methods:{submit:function(){var t=this.$refs.moveToId.value;this.$emit("submit",t)}},watch:{flag:function(){this.flag||this.$emit("back")}}}},496:function(t,e,i){"use strict";i.r(e);var a=i(795),s=i(373);for(var n in s)"default"!==n&&function(t){i.d(e,t,function(){return s[t]})}(n);i(497);var r=i(0),o=Object(r.a)(s.default,a.a,a.b,!1,null,"01130e0a",null);e.default=o.exports},497:function(t,e,i){"use strict";var a=i(375);i.n(a).a},498:function(t,e,i){"use strict";i.r(e);var a=i(796),s=i(376);for(var n in s)"default"!==n&&function(t){i.d(e,t,function(){return s[t]})}(n);var r=i(0),o=Object(r.a)(s.default,a.a,a.b,!1,null,"66ea60dc",null);e.default=o.exports},609:function(t,e,i){"use strict";i.r(e);var a=i(610),s=i.n(a);for(var n in a)"default"!==n&&function(t){i.d(e,t,function(){return a[t]})}(n);e.default=s.a},610:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},s=c(i(496)),n=c(i(498)),r=i(313),o=(c(i(310)),function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(339))),u=c(i(368)),l=i(50);function c(t){return t&&t.__esModule?t:{default:t}}e.default={components:{Detail:u.default,GroupList:s.default,MoveGroup:n.default},mixins:[r.main],data:function(){return{services:o,detailVisible:!1,detailDialoaType:"info",detailData:null,pustSetDialog:!1,currentPut:null,moveToOtherDiaolog:!1,moveIds:null,toId:null,columnBook:null}},created:function(){this.getColumn()},methods:a({setList:function(t){this.setSerieslist(t)},setGroupList:function(t){this.setSeriesGrouplist(t)},setPage:function(t){this.setSerieslistPage(t)},putSet:function(t){this.currentPut={theme_extend_list:t.theme_extend_list},this.pustSetDialog=!0},getColumn:function(){var t=this;this.services.getColList().then(function(e){t.columnBook=e.data})},pustSetSave:function(){var t=this;this.services.putSave(this.currentPut).then(function(e){t.pustSetDialog=!1,t.getList()})},shelfClass:function(t){a({},t,{id:this.currentShelf.id})}},(0,l.mapMutations)(["setSerieslist","setSerieslistPage","setSeriesGrouplist"])),computed:a({},(0,l.mapState)({list:function(t){return t.series.list},page:function(t){return t.series.page},groupList:function(t){return t.series.groupList}}))}},611:function(t,e,i){},795:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"div"},[i("div",{staticClass:"groupWrap"},[i("div",{staticClass:"list"},[i("ul",t._l(t.groupList,function(e){return i("li",{staticClass:"licontent",class:{red:e.id==t.currGroup}},[i("div",{staticClass:"name ellipsis",attrs:{title:e.name+"("+e.num+")"},on:{click:function(i){return t.groupChange(e.id)}}},[i("span",{staticClass:"title"},[t._v(t._s(e.name))]),i("span",[t._v(t._s("("+e.num+")"))])]),""!=e.id&&"non"!=e.id?i("div",{staticClass:"btns"},[i("span",{on:{click:function(i){return t.updateGroupDialog(e)}}},[i("i",{staticClass:"el-icon-edit"})]),i("span",{on:{click:function(i){return t.delGroup(e)}}},[i("i",{staticClass:"el-icon-delete"})])]):t._e()])}),0)]),i("div",{staticClass:"addGroupBtnWrap"},[i("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){t.newGroupDialogOpen=!0}}},[i("i",{staticClass:"el-icon-plus"},[t._v("新建分组")])])],1)]),i("div",{staticClass:"dialogs"},[t.newGroupDialogOpen?i("el-dialog",{attrs:{title:"新增",visible:t.newGroupDialogOpen,width:"500px"},on:{"update:visible":function(e){t.newGroupDialogOpen=e}}},[i("div",{staticClass:"formWrap"},[i("VaForm",{ref:"addGroupForm"},[i("form",{attrs:{id:"addGroupForm"}},[i("div",{staticClass:"group"},[i("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"}],staticClass:"form-control",attrs:{name:"name"}})])])])],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"info"},on:{click:function(e){t.newGroupDialogOpen=!1}}},[t._v("取消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.addGroup}},[t._v("确定")])],1)]):t._e(),t.updateGroupDialogOpen?i("el-dialog",{attrs:{title:"修改",visible:t.updateGroupDialogOpen,width:"500px"},on:{"update:visible":function(e){t.updateGroupDialogOpen=e}}},[i("div",{staticClass:"formWrap"},[i("VaForm",{ref:"updateGroupForm"},[t.currEditGroup?i("form",{attrs:{id:"updateGroupForm"}},[i("div",{staticClass:"group"},[i("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"}],staticClass:"form-control",attrs:{name:"name"},domProps:{value:t.currEditGroup.name}}),i("input",{staticClass:"hide",attrs:{name:"id"},domProps:{value:t.currEditGroup.id}})])]):t._e()])],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"info"},on:{click:function(e){t.updateGroupDialogOpen=!1}}},[t._v("取消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.updateGroup}},[t._v("确定")])],1)]):t._e()],1)])},s=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return s})},796:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"div"},[t.flag?i("el-dialog",{attrs:{center:!1,visible:t.flag,"close-on-click-modal":!1,title:"移动分组",width:"400px"},on:{"update:visible":function(e){t.flag=e}}},[i("span",{}),i("div",{staticClass:"group"},[i("div",{staticClass:"label"},[t._v("移动到")]),i("select",{ref:"moveToId",staticClass:"form-control",attrs:{placeholder:"请选择"}},t._l(t.groupList,function(e,a){return e.id!=t.currGroup&&""!=e.id?i("option",{domProps:{value:e.id,textContent:t._s(e.name)}}):t._e()}),0)]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"info"},on:{click:function(e){t.flag=!1}}},[t._v("返回")]),i("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v(" 确定  ")])],1)]):t._e()],1)},s=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return s})}}]);