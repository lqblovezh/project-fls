(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{1338:function(t,e,a){"use strict";a.r(e);var i=a(1440),n=a(707);for(var s in n)"default"!==s&&function(t){a.d(e,t,function(){return n[t]})}(s);a(1339);var r=a(0),o=Object(r.a)(n.default,i.a,i.b,!1,null,"ce805406",null);e.default=o.exports},1339:function(t,e,a){"use strict";var i=a(709);a.n(i).a},1340:function(t,e,a){"use strict";var i=a(710);a.n(i).a},1407:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"index clearfix"},[a("div",{staticClass:"mainRight"},[a("div",{staticClass:"contentWrap"},[a("div",{staticClass:"contentLeft"},[a("div",{staticClass:"maindata"},[a("div",{staticClass:"serachWrap"},[a("div",{staticClass:"title"}),a("form",{staticClass:"clearfix",attrs:{id:"mainForm"}},[a("span",{staticClass:"group-inline"},[a("el-input",{attrs:{placeholder:"名称",name:"name",clearable:""}})],1),a("span",{staticClass:"group-inline"},[a("TimePick",{attrs:{inputsName:["start_time","end_time"]}})],1),a("span",{staticClass:"group-inline float-right"},[a("el-button",{attrs:{size:"mediu",type:"primary",icon:"el-icon-plus",plain:""},on:{click:t.addBooks}},[t._v("新建")]),a("el-button",{attrs:{size:"mediu",type:"primary",icon:"el-icon-search",plain:""},on:{click:t.query}},[t._v("搜索")])],1)])]),a("div",{staticClass:"tableWrap"},[a("div",{staticClass:"tableTop"},[a("div",{staticClass:"title vel-line"},[a("span",[t._v("全部 "),t.page?a("span",{staticClass:"totalNum"},[t._v("("+t._s(t.page.total)+")")]):t._e()]),a("div",{staticClass:"btns"},[a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){return t.delChoosen(!1)}}},[t._v("删除")])],1)])]),a("table",{staticClass:"table"},[a("thead",[a("tr",[a("th",{staticClass:"table-check"},[a("input",{attrs:{type:"checkbox"},on:{click:function(e){return t.$checkAll(e)}}})]),a("th",[t._v("名称")]),a("th",[t._v("简介")]),a("th",[t._v("创建时间")]),a("th",{attrs:{width:"150"}},[t._v("二维码数量")]),a("th",{attrs:{width:"80"}},[t._v("操作")])])]),t.list?a("tbody",t._l(t.list,function(e){return a("tr",[a("th",[a("input",{ref:"ids",refInFor:!0,attrs:{type:"checkbox",name:"ids"},domProps:{value:e.id}})]),a("th",[a("img",{staticClass:"cover-photo",attrs:{src:e.img_src}}),a("div",{staticClass:"th-name bookName",attrs:{title:e.name}},[t._v(t._s(e.name))])]),a("th",[a("div",{staticClass:"th-name",attrs:{title:e.name}},[t._v(t._s(e.abs))])]),a("th",[a("div",{staticClass:"th-name"},[t._v(t._s(e.create_time))])]),a("th",[a("div",{staticClass:"th-name"},[t._v(t._s(e.qrcode_num))])]),a("th",[a("div",{staticClass:"btns"},[a("Icon",{attrs:{type:"icon-detail",title:"详情"},on:{click:function(a){return t.opneDetailDialog("info",e)}}}),a("Icon",{attrs:{type:"icon-delete",title:"删除"},on:{click:function(a){return t.del(10,e.id)}}})],1)])])}),0):t._e()]),t.page?a("div",{staticClass:"pageWrap"},[a("el-pagination",{attrs:{small:!1,background:"","current-page":t.page.num,"page-sizes":[10,50,100],"page-size":t.page.offset,layout:"total, sizes,prev, pager, next, jumper",total:t.page.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1):t._e()])])])])]),a("div",{staticClass:"dialogs"},[a("el-dialog",{attrs:{center:!1,visible:t.detailDialog,"close-on-click-modal":!1,top:"50px",width:"1000px",title:"详情"},on:{"update:visible":function(e){t.detailDialog=e}}},[a("div",{staticClass:"content",attrs:{slot:"title"},slot:"title"},[t.detailDialog?a("Detail",{attrs:{detailDialog:t.detailDialog,readOnly:t.readOnly,detailData:t.detailData},on:{"update:detailDialog":function(e){t.detailDialog=e},"update:detail-dialog":function(e){t.detailDialog=e},close:t.close,saveok:t.saveok}}):t._e()],1)])],1)])},n=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n})},1440:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"div"},[t.resourceDialog?a("Resource",{attrs:{type:"6",resourceDialog:t.resourceDialog,curSoucesList:t.chooseArray,isShowType:!1,parameter:t.parameter},on:{"update:resourceDialog":function(e){t.resourceDialog=e},"update:resource-dialog":function(e){t.resourceDialog=e},select:t.addSelcet}}):t._e(),a("VaForm",{ref:"detailForm"},[a("form",{ref:"detailForm",staticClass:"detailForm"},[a("fieldset",{attrs:{disabled:t.readOnly}},[a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("*名称:")]),a("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"},{name:"model",rawName:"v-model",value:t.information.name,expression:"information.name"}],staticClass:"form-control",attrs:{type:"text",maxlength:"20",disabled:t.readOnly},domProps:{value:t.information.name},on:{input:function(e){e.target.composing||t.$set(t.information,"name",e.target.value)}}})]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("*简介:")]),a("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"},{name:"model",rawName:"v-model",value:t.information.abs,expression:"information.abs"}],staticClass:"form-control",attrs:{type:"text",maxlength:"20",disabled:t.readOnly},domProps:{value:t.information.abs},on:{input:function(e){e.target.composing||t.$set(t.information,"abs",e.target.value)}}})]),a("div",{staticClass:"using"},[a("div",{staticClass:"name"},[t._v("拥有二维码")]),a("el-button",{staticClass:"add",attrs:{type:"primary",plain:"",size:"mini"},on:{click:t.add}},[t._v("添加")]),a("table",{staticClass:"table"},[a("thead",[a("tr",[a("th",[t._v("二维码名称")]),a("th",[t._v("二维码简介")]),a("th",[t._v("创建时间")]),a("th",[t._v("操作")])])]),a("tbody",t._l(t.information.qrcode_info,function(e){return a("tr",[a("td",[t._v(t._s(e.name))]),a("td",[t._v(t._s(e.abs))]),a("td",[t._v(t._s(e.create_time))]),a("td",[a("div",{staticClass:"btns"},[a("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(a){return t.delQrcode(e.id)}}},[t._v("删除")])],1)])])}),0)])],1)])]),t.readOnly?t._e():a("div",{staticClass:"btn"},[a("el-button",{attrs:{type:"info"},on:{click:function(e){return t.$emit("close")}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitInfo("detailForm")}}},[t._v("确定")])],1)])],1)},n=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n})},288:function(t,e,a){"use strict";a.r(e);var i=a(1407),n=a(705);for(var s in n)"default"!==s&&function(t){a.d(e,t,function(){return n[t]})}(s);a(1340);var r=a(0),o=Object(r.a)(n.default,i.a,i.b,!1,null,"5ec6cda4",null);e.default=o.exports},310:function(t,e){var a=/^(?:submit|button|image|reset|file)$/i,i=/^(?:input|select|textarea|keygen)/i,n=/(\[[^\[\]]*\])/g;function s(t,e,a){if(e.match(n)){!function t(e,a,i){if(0===a.length)return e=i;var n=a.shift(),s=n.match(/^\[(.+?)\]$/);if("[]"===n)return e=e||[],Array.isArray(e)?e.push(t(null,a,i)):(e._values=e._values||[],e._values.push(t(null,a,i))),e;if(s){var r=s[1],o=+r;isNaN(o)?(e=e||{})[r]=t(e[r],a,i):(e=e||[])[o]=t(e[o],a,i)}else e[n]=t(e[n],a,i);return e}(t,function(t){var e=[],a=new RegExp(n),i=/^([^\[\]]*)/.exec(t);for(i[1]&&e.push(i[1]);null!==(i=a.exec(t));)e.push(i[1]);return e}(e),a)}else{var i=t[e];i?(Array.isArray(i)||(t[e]=[i]),t[e].push(a)):t[e]=a}return t}function r(t,e,a){return a=a.replace(/(\r)?\n/g,"\r\n"),a=(a=encodeURIComponent(a)).replace(/%20/g,"+"),t+(t?"&":"")+encodeURIComponent(e)+"="+a}t.exports=function(t,e){"object"!=typeof e?e={hash:!!e}:void 0===e.hash&&(e.hash=!0);for(var n=e.hash?{}:"",o=e.serializer||(e.hash?s:r),l=t&&t.elements?t.elements:[],c=Object.create(null),u=0;u<l.length;++u){var d=l[u];if((e.disabled||!d.disabled)&&d.name&&i.test(d.nodeName)&&!a.test(d.type)){var f=d.name,p=d.value;if("checkbox"!==d.type&&"radio"!==d.type||d.checked||(p=void 0),e.empty){if("checkbox"!==d.type||d.checked||(p=""),"radio"===d.type&&(c[d.name]||d.checked?d.checked&&(c[d.name]=!0):c[d.name]=!1),void 0==p&&"radio"==d.type)continue}else if(!p)continue;if("select-multiple"!==d.type)n=o(n,f,p);else{p=[];for(var v=d.options,m=!1,h=0;h<v.length;++h){var g=v[h],y=e.empty&&!g.value,_=g.value||y;g.selected&&_&&(m=!0,n=e.hash&&"[]"!==f.slice(f.length-2)?o(n,f+"[]",g.value):o(n,f,g.value))}!m&&e.empty&&(n=o(n,f,""))}}}if(e.empty)for(var f in c)c[f]||(n=o(n,f,""));return n}},705:function(t,e,a){"use strict";a.r(e);var i=a(706),n=a.n(i);for(var s in i)"default"!==s&&function(t){a.d(e,t,function(){return i[t]})}(s);e.default=n.a},706:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},n=a(313),s=(l(a(310)),function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}(a(548))),r=l(a(1338)),o=a(50);function l(t){return t&&t.__esModule?t:{default:t}}e.default={components:{Detail:r.default},mixins:[n.main],data:function(){return{services:s,detailDialog:!1,detailDialoaType:"info",detailData:null,readOnly:!1}},methods:i({getList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.page&&this.page.num||1,e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.page&&this.page.offset||10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.services.booksList(i({pageNum:t,pageOffset:a},n)).then(function(t){e.setList(t.data),e.setPage(t.page)})},opneDetailDialog:function(t,e){this.detailDialog=!0,this.detailData=e},addBooks:function(){this.detailDialog=!0,this.detailData={}},close:function(){this.detailDialog=!1},setList:function(t){this.setSerieslist(t)},setPage:function(t){this.setSerieslistPage(t)},saveok:function(t){this.detailData.id||(this.detailData=t),this.getList()}},(0,o.mapMutations)(["setSerieslist","setSerieslistPage"])),computed:i({},(0,o.mapState)({list:function(t){return t.series.list},page:function(t){return t.series.page}}))}},707:function(t,e,a){"use strict";a.r(e);var i=a(708),n=a.n(i);for(var s in i)"default"!==s&&function(t){a.d(e,t,function(){return i[t]})}(s);e.default=n.a},708:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(a(9)),n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},s=(o(a(310)),a(110),function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}(a(548))),r=o(a(320));function o(t){return t&&t.__esModule?t:{default:t}}e.default={props:["detailData","readOnly","detailDialog"],components:{Resource:r.default},created:function(){this.detailData.id&&this.getDetail()},data:function(){return{information:{},checkAll:!1,resourceDialog:!1,chooseArray:[],parameter:{status:!1}}},methods:{getDetail:function(){var t=this;s.detail({id:this.detailData.id}).then(function(e){t.information=e.data,t.information.qrcode_info=e.data.qrcode_info,t.chooseArray=[].concat(function(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}(e.data.qrcode_info))})},add:function(){this.resourceDialog=!0},delQrcode:function(t){var e=this;s.delQrcode({id:t}).then(function(t){e.getDetail()})},addSelcet:function(t){var e=this;if(!this.detailData.id)return this.$message.warning("请先保存");s.addQrcode({books_id:this.detailData.id,constitute:t}).then(function(t){e.getDetail(),e.resourceDialog=!1},function(t){e.$message.error(t.message)})},submitInfo:function(){var t,e=(t=i.default.mark(function t(){var e,a=this;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=n({},this.information),t.next=3,s.save(e).then(function(t){a.detailData.id||(a.information=t.data),a.$message.success("操作成功!"),a.$emit("saveok",t.data)}).catch(function(t){a.$message({message:t.message||"错误!",type:"error"})});case 3:case"end":return t.stop()}},t,this)}),function(){var e=t.apply(this,arguments);return new Promise(function(t,a){return function i(n,s){try{var r=e[n](s),o=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(o).then(function(t){i("next",t)},function(t){i("throw",t)});t(o)}("next")})});return function(){return e.apply(this,arguments)}}()}}},709:function(t,e,a){},710:function(t,e,a){}}]);