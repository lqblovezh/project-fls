(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{186:function(t,e,i){"use strict";i.r(e);var n=i(187),o=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,function(){return n[t]})}(a);e.default=o.a},187:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(88),o=i(18);e.default={mixins:[n.main],data:function(){return{type:0,toPath:"",ad:"",preview:"",qrcode_product_id:""}},methods:{getList:function(){var t=this,e=this.$route.query.id;this.qrcode_product_id=this.$route.query.qrcode_product_id,this.toPath="/special?id="+this.$route.query.pid+"&qrcode_product_id="+this.$route.query.qrcode_product_id,(0,o.get_category_list)({id:e}).then(function(i){t.info=i.data,t.info.children.unshift({name:"全部",id:e})}),this.getData(e)},getData:function(t){var e=this;this.$dialog.loading.open("数据加载中"),(0,o.get_category)({id:t}).then(function(t){e.list=t.data.resource_list,t.data.ad?(e.ad=t.data.ad.img_src,e.preview=t.data.ad.preview):e.ad="",e.$dialog.loading.close()})},itemClick:function(t){var e=this.info.children[t].id;this.getData(e),this.type=t},showType:function(t){var e=this.qrcode_id;"resource"==t.type?this.to("gather",{qrcode_id:e,id:t.id,name:t.name,type:"dal"}):"app"==t.type?"书圈"==t.app_type_name?this.to("bookDetail",{qrcode_id:e,id:t.id,name:t.name,type:"dal"}):"投票"==t.app_type_name?this.$router.push({path:"/vote",query:{qrcode_id:e,id:t.id,qrcode_product_id:this.qrcode_product_id,type:"dal"}}):"问卷调查"==t.app_type_name?this.to("ans",{qrcode_id:e,id:t.id,qrcode_product_id:this.qrcode_product_id,type:"dal"}):"问答"==t.app_type_name?this.to("/qus",{qrcode_id:e,id:t.id,qrcode_product_id:this.qrcode_product_id,type:"dal"}):"抽奖"==t.app_type_name&&"刮刮卡"==t.lottery_info.type_name?this.to("/scratch",{qrcode_id:e,id:t.id,qrcode_product_id:this.qrcode_product_id,type:"dal"}):"抽奖"==t.app_type_name&&"大转盘"==t.lottery_info.type_name&&this.to("/turntable",{qrcode_id:e,id:t.id,qrcode_product_id:this.qrcode_product_id,type:"dal"}):"special"==t.type&&this.to("/special",{qrcode_id:e,id:t.id,name:t.name,type:"dal"})}}}},188:function(t,e,i){},413:function(t,e,i){"use strict";var n=i(188);i.n(n).a},440:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("yd-layout",[i("yd-navbar",{attrs:{slot:"navbar",title:t.info.name,color:"#fff",bgcolor:"#3998e2"},slot:"navbar"},[i("a",{attrs:{slot:"left",href:"javascript:history.back(-1)"},slot:"left"},[i("yd-navbar-back-icon",{attrs:{color:"#fff"}},[t._v("返回")])],1)]),i("yd-infinitescroll",{ref:"infinitescroll",staticClass:"scroll",attrs:{callback:t.loadList}},[i("div",{staticClass:"content",attrs:{slot:"list"},slot:"list"},[i("yd-tab",{attrs:{"horizontal-scroll":!1,"active-color":"#3998e2","prevent-default":!1,"item-click":t.itemClick},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},t._l(t.info.children,function(e){return i("yd-tab-panel",{attrs:{label:e.name}},[i("div",{staticClass:"list"},[i("ul",t._l(t.list,function(e,n){return i("li",{on:{click:function(i){return t.showType(e)}}},[e.info?i("img",{attrs:{src:e.info.img_src}}):t._e(),i("div",{staticClass:"abstract"},[i("div",{staticClass:"title"},[i("span",[t._v(t._s(e.name))]),e.product_type_name?i("yd-button",{attrs:{size:"mini",type:"hollow",color:"#b3b3b3"}},[t._v(t._s(e.product_type_name))]):"app"==e.type&&"抽奖"!=e.app_type_name?i("yd-button",{attrs:{size:"mini",type:"hollow",color:"#b3b3b3"}},[t._v(t._s(e.app_type_name))]):i("yd-button",{attrs:{size:"mini",type:"hollow",color:"#b3b3b3"}},[t._v(t._s(e.lottery_info.type_name))])],1),e.info?i("div",{staticClass:"txt"},[t._v(t._s(e.info.abs))]):t._e(),i("div",{staticClass:"price"},[i("span",[t._v("价格：")]),i("span",{staticClass:"pr"},[t._v("￥"+t._s(e.price))])])])])}),0)]),t.ad?i("div",{staticClass:"ad",style:{backgroundImage:"url("+t.ad+")"},on:{click:function(e){return t.outLink(t.preview)}}}):t._e()])}),1)],1),i("img",{staticClass:"loading",attrs:{slot:"loadingTip",src:"http://static.ydcss.com/uploads/ydui/loading/loading10.svg"},slot:"loadingTip"}),i("span",{attrs:{slot:"doneTip"},slot:"doneTip"},[t._v("没有数据啦 ~~~")])])],1)},o=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return o})},70:function(t,e,i){"use strict";i.r(e);var n=i(440),o=i(186);for(var a in o)"default"!==a&&function(t){i.d(e,t,function(){return o[t]})}(a);i(413);var r=i(9),s=Object(r.a)(o.default,n.a,n.b,!1,null,"3f087f0e",null);e.default=s.exports},87:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getList=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.request_get)("/system/app_manager/managers",t)},e.del=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.request_post)("/system/app_manager/managers/delete",t)},e.detail=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.request_get)(r(t),t)},e.save=function(t){var e=t.id,i=function(t,e){var i={};for(var n in t)e.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n]);return i}(t,["id"]);if(e)return(0,o.request_put)(r({id:e}),i);return(0,o.request_post)("/system/app_manager/managers",i).then(function(t){i.apps.forEach(function(e){s({manager_id:t.data.id,app_id:e.id})})})},e.getApps=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.request_get)("/system/app/apps",t)},e.authorize=s,e.revoke=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.request_post)("/system/app_manager/managers/app_revoke",t)},e.codeImage=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=Math.random().toFixed(3);return(0,o.request_get)("/common/api/captcha/image?code="+t)},e.codePhone=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.request_post)("/common/api/captcha/mobile",t)},e.userLogin=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.request_post)("/common/api/auth/login/user",t).then(function(t){return window.sessionStorage.setItem("token",t.data.token),window.localStorage.setItem("token",t.data.token),config.token=t.data.token,t})},e.userReg=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.request_post)("/common/api/user/register",t)},e.backPwdCode=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.request_post)("/common/api/user/pass_reset/send",t)},e.setPwd=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.request_post)("/common/api/user/pass_reset/set",t)},e.phoneLogin=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.request_post)("/common/api/auth/login_by_phone/user",t).then(function(t){return window.sessionStorage.setItem("token",t.data.token),window.localStorage.setItem("token",t.data.token),config.token=t.data.token,t})};var n,o=i(5),a=i(10);var r=((n=a)&&n.__esModule?n:{default:n}).default.compile("/system/api/app_manager/managers/:id");function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.request_post)("/system/app_manager/managers/app_authorize",t)}},88:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.code=e.main=void 0;var n=s(i(8)),o=s(i(89)),a=i(17),r=(i(11),i(87));function s(t){return t&&t.__esModule?t:{default:t}}var d=new o.default({phone:{required:!0,length:11,message:{required:"请输入手机号",length:"手机号码长度应为11位"}}}),c={data:function(){return{list:[],info:{},qrcode_id:this.$route.query.qrcode_id,page:{}}},created:function(){var t,e=this;return(t=n.default.mark(function t(){return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.$route.query.token_id&&window.sessionStorage.setItem("token",e.$route.query.token_id),window.sessionStorage.getItem("token")){t.next=5;break}return alert(123456),e.$router.push({path:"/login"}),t.abrupt("return");case 5:e.getList();case 6:case"end":return t.stop()}},t,e)}),function(){var e=t.apply(this,arguments);return new Promise(function(t,i){return function n(o,a){try{var r=e[o](a),s=r.value}catch(t){return void i(t)}if(!r.done)return Promise.resolve(s).then(function(t){n("next",t)},function(t){n("throw",t)});t(s)}("next")})})()},methods:{loadList:function(t){var e=this;t&&(0,a.setTimeout)(function(){e.list=[].concat(function(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}(e.list),[{txt:"xxxxx"}]),e.$refs.infinitescroll.$emit("ydui.infinitescroll.finishLoad")},1e3)},go:function(t,e){this.$router.push({name:t,params:e})},to:function(t,e){this.$router.push({path:t,query:e})},outLink:function(t){location.href=t},pay:function(){},fetch:function(){return JSON.parse(window.localStorage.getItem("params")||"[]")},save:function(t){window.localStorage.setItem("params",JSON.stringify(t))}},computed:{unescapeHTML:function(){return function(t){return(t=""+t).replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&apos;/g,"'")}}},watch:{params:{handler:function(t){this.save(t)},deep:!0}}},u={data:function(){return{img_code:{code_id:null,code_img:null},img_code_val:null,code_tip:"发送验证码",duration:60,timer:null}},methods:{getImgCode:function(){var t=this;(0,r.codeImage)().then(function(e){t.img_code=e.data})},validatePhone:function(){var t=d.validate({phone:this.info.phone});return!(t.length>0)||(this.$Toast({message:t[0].toString()}),!1)},setTimer:function(){var t=this;if(null===this.timer){var e=this.duration;!function i(){t.code_tip=e+"秒后再试",e-- >0?t.timer=(0,a.setTimeout)(i,1e3):(t.code_tip="发送验证码",t.timer=null)}()}},sendCheckCode:function(){var t=this;null!==this.img_code_val?this.validatePhone()&&!this.timer&&(0,r.codePhone)({phone:this.info.phone,code_id_img:this.img_code.code_id,code_val_img:this.img_code_val,not_check_user_exist:1}).then(function(e){t.$dialog.toast({mes:e.message||"发送成功",icon:"success",timeout:1500}),t.setTimer(),t.info.code_id=e.data.code_id}).catch(function(e){t.$dialog.toast({icon:"error",timeout:1500,mes:"发送失败"})}):this.$dialog.toast({mes:"请输入图片验证码",timeout:1e3})}}};e.main=c,e.code=u}}]);