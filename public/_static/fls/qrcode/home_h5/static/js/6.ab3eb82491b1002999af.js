(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{222:function(e,t,n){"use strict";n.r(t);var o=n(223),r=n.n(o);for(var a in o)"default"!==a&&function(e){n.d(t,e,function(){return o[e]})}(a);t.default=r.a},223:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=c(n(8)),r=c(n(97)),a=c(n(89)),i=(c(n(13)),c(n(12))),s=n(87),u=n(11);function c(e){return e&&e.__esModule?e:{default:e}}var l=new a.default({user_name:{type:String,required:!0,length:{min:4,max:16},message:{type:"用户名格式不正确，请重新输入！",required:"用户名不能为空！",length:"用户名长度应在6-16之间"}},user_pass:{type:String,required:!0,length:{min:6,max:16},message:{type:"密码格式不正确，请重新输入！",required:"密码不能为空！",length:"密码长度应在6-16之间"}}});t.default={data:function(){return{loginInfo:{user_name:null,user_pass:null},back:!1,showLoading:!1}},components:{Head:r.default},mounted:function(){var e,t=this;return(e=o.default.mark(function e(){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(n=t.$route.query).token_id&&(window.sessionStorage.setItem("token",n.token_id),window.localStorage.setItem("token",n.token_id),i.default.token=n.token_id,n.redirect,t.$router.push({path:"/"}));case 2:case"end":return e.stop()}},e,t)}),function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function o(r,a){try{var i=t[r](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then(function(e){o("next",e)},function(e){o("throw",e)});e(s)}("next")})})()},methods:{go:function(e){this.$router.replace({path:e})},login:function(){var e=this;this.showLoading=!0;var t=l.validate(this.loginInfo);this.$check_form(t)&&(0,s.userLogin)(this.loginInfo).then(function(t){e.$router.push({path:"/"})}).catch(function(t){var n=t.payload,o=n.errors,r=n.message;e.$dialog.toast({mes:o[0]||r||"登录失败，用户名或密码错误！",timeout:1500,icon:"error"})})},sendThirdRequest:function(e){(0,u.thirdLogin)({back_url:window.location.href,type:e}).then(function(e){window.location.href=e.data.login_link})}}}},224:function(e,t,n){},435:function(e,t,n){"use strict";var o=n(224);n.n(o).a},468:function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login pt88-static__vh c-bg-f"},[n("Head",{attrs:{text:"登录","need-back":e.back}}),e._m(0),n("div",{staticClass:"p15rem"},[n("form",[n("div",{staticClass:"form-control"},[n("span",{staticClass:"icon-user"}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.loginInfo.user_name,expression:"loginInfo.user_name"}],attrs:{type:"text",placeholder:"请输入用户名"},domProps:{value:e.loginInfo.user_name},on:{input:function(t){t.target.composing||e.$set(e.loginInfo,"user_name",t.target.value)}}})]),n("div",{staticClass:"form-control"},[n("span",{staticClass:"icon-lock"}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.loginInfo.user_pass,expression:"loginInfo.user_pass"}],attrs:{type:"password",placeholder:"请输入密码"},domProps:{value:e.loginInfo.user_pass},on:{input:function(t){t.target.composing||e.$set(e.loginInfo,"user_pass",t.target.value)}}})])]),n("div",{staticClass:"login-phone"},[n("p",{on:{click:function(t){return e.go("phone-login")}}},[e._v("短信验证码登录")]),n("p",{on:{click:function(t){return e.go("forget-pwd")}}},[e._v("忘记密码？")])]),n("button",{staticClass:"btn-login flex-center",attrs:{type:"button"},on:{click:e.login}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.showLoading,expression:"showLoading"}],staticClass:"ib"},[n("mt-spinner",{attrs:{type:"fading-circle"}})],1),n("span",[e._v("登录")])]),n("p",{staticClass:"text-center reg-text",on:{click:function(t){return e.go("register")}}},[e._v("注册账号")]),n("div",{staticClass:"login-methods"},[n("p",{staticClass:"login-methods__title text-center"},[e._v("第三方账号登录")]),n("div",{staticClass:"login-methods__items"},[n("div",{staticClass:"icon-weixin",on:{click:function(t){return e.sendThirdRequest("weixin_mp")}}}),n("div",{staticClass:"icon-qq",on:{click:function(t){return e.sendThirdRequest("qq_web")}}})])])])],1)},r=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"img-panel tc"},[t("div",{staticClass:"img-login_bg"})])}];n.d(t,"a",function(){return o}),n.d(t,"b",function(){return r})},82:function(e,t,n){"use strict";n.r(t);var o=n(468),r=n(222);for(var a in r)"default"!==a&&function(e){n.d(t,e,function(){return r[e]})}(a);n(435);var i=n(9),s=Object(i.a)(r.default,o.a,o.b,!1,null,"7e1a9cc5",null);t.default=s.exports},87:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_get)("/system/app_manager/managers",e)},t.del=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)("/system/app_manager/managers/delete",e)},t.detail=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_get)(i(e),e)},t.save=function(e){var t=e.id,n=function(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}(e,["id"]);if(t)return(0,r.request_put)(i({id:t}),n);return(0,r.request_post)("/system/app_manager/managers",n).then(function(e){n.apps.forEach(function(t){s({manager_id:e.data.id,app_id:t.id})})})},t.getApps=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_get)("/system/app/apps",e)},t.authorize=s,t.revoke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)("/system/app_manager/managers/app_revoke",e)},t.codeImage=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=Math.random().toFixed(3);return(0,r.request_get)("/common/api/captcha/image?code="+e)},t.codePhone=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)("/common/api/captcha/mobile",e)},t.userLogin=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)("/common/api/auth/login/user",e).then(function(e){return window.sessionStorage.setItem("token",e.data.token),window.localStorage.setItem("token",e.data.token),config.token=e.data.token,e})},t.userReg=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)("/common/api/user/register",e)},t.backPwdCode=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)("/common/api/user/pass_reset/send",e)},t.setPwd=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)("/common/api/user/pass_reset/set",e)},t.phoneLogin=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)("/common/api/auth/login_by_phone/user",e).then(function(e){return window.sessionStorage.setItem("token",e.data.token),window.localStorage.setItem("token",e.data.token),config.token=e.data.token,e})};var o,r=n(5),a=n(10);var i=((o=a)&&o.__esModule?o:{default:o}).default.compile("/system/api/app_manager/managers/:id");function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)("/system/app_manager/managers/app_authorize",e)}},91:function(e,t,n){"use strict";n.r(t);var o=n(92),r=n.n(o);for(var a in o)"default"!==a&&function(e){n.d(t,e,function(){return o[e]})}(a);t.default=r.a},92:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{text:{type:String,required:!0},needBack:{type:Boolean,default:!0}},methods:{back:function(){this.$router.push({path:"/login"})}}}},93:function(e,t,n){},97:function(e,t,n){"use strict";n.r(t);var o=n(99),r=n(91);for(var a in r)"default"!==a&&function(e){n.d(t,e,function(){return r[e]})}(a);n(98);var i=n(9),s=Object(i.a)(r.default,o.a,o.b,!1,null,null,null);t.default=s.exports},98:function(e,t,n){"use strict";var o=n(93);n.n(o).a},99:function(e,t,n){"use strict";var o=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"default-header f16"},[this._v(this._s(this.text)),t("div",{directives:[{name:"show",rawName:"v-show",value:this.needBack,expression:"needBack"}],staticClass:"icon icon-back",on:{click:this.back}})])},r=[];n.d(t,"a",function(){return o}),n.d(t,"b",function(){return r})}}]);