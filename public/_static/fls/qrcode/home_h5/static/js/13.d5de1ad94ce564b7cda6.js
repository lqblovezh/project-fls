(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{124:function(t,e,r){"use strict";r.r(e);var a=r(125),n=r.n(a);for(var o in a)"default"!==o&&function(t){r.d(e,t,function(){return a[t]})}(o);e.default=n.a},125:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r(88),n=r(18);r(126);e.default={mixins:[a.main],data:function(){return{type:0,access_code:"",params:{gather:{}}}},methods:{getList:function(){var t=this;this.params=this.fetch();var e=this.params.gather;this.info=e.data.components[e.n],(0,n.get_chapters)({resource_info_id:e.data.id,product_id:e.data.product_id,book_id:this.info.id}).then(function(e){t.access_code=e.data.access_code,t.$set(t.info,"chapters",e.data.chapters)})},run:function(t){this.$router.push({path:"/reader",query:{book_id:t.book_id,chapter_id:t.id,product_id:this.params.gather.data.product_id,access_code:this.access_code}})}}}},126:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],a=!0,n=!1,o=void 0;try{for(var i,s=t[Symbol.iterator]();!(a=(i=s.next()).done)&&(r.push(i.value),!e||r.length!==e);a=!0);}catch(t){n=!0,o=t}finally{try{!a&&s.return&&s.return()}finally{if(n)throw o}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t};e.get_book=function(t,e){var r=t.bookId,a=e.extraParams;return(0,u.request_post)(c+"/reader/books",n({book_id:r},a)).then(function(t){var e=t.data;return e})},e.get_catalogs=function(t,e){var r=t.bookId,a=t.chapterId,o=e.extraParams;return(0,u.request_post)(c+"/reader/catalogs",n({book_id:r,catalog_pid:a},o)).then(function(t){var e=t.data;return e})},e.get_chapters=function(t,e){var r=t.bookId,a=t.chapterIds,o=e.extraParams;return(0,u.request_post)(c+"/reader/chapters",n({chapter_id:a,book_id:r},o)).then(function(t){var e=t.data;return e})},e.search=function(t,e){var r=t.keyword,a=t.bookId,o=t.page,i=t.chapterRid,s=e.extraParams;return(0,u.request_post)(c+"/reader/search",n({keyword:r,book_id:a,chapter_id:i,pageStart:o.start,pageOffset:o.offset},s)).then(function(t){var e=t.data,r=t.page;return{list:e,page:r}})},e.get_labels=function(t,e){var r=t.bookId,a=e.extraParams;return(0,u.request_get)("/api/book_notes",{book_id:r,user_id:a.user_id}).then(function(t){var e=t.data;return e})},e.add_label=function(t,e){var r=t.bookId,a=t.chapterRid,o=t.chapterName,i=t.userText,s=t.rangeJSON,c=t.selectedText,d=t.status,l=e.extraParams;return(0,u.request_post)("/api/book_notes",n({book_id:r,chapter_id:a,chapter_name:o,chapter_value:c,comm_text:i,range:s,protected:d},l)).then(function(t){var e=t.data;return e})},e.get_bookmarks=function(t,e){var r=t.bookId,a=e.extraParams;return(0,u.request_get)("/api/book_marks",{book_id:r,user_id:a.user_id}).then(function(t){var e=t.data;return e})},e.add_bookmark=function(t,e){var r=t.bookId,a=t.chapterRid,o=t.chapterName,i=t.rangeJSON,s=t.text,c=e.extraParams;return(0,u.request_post)("/api/book_marks",n({book_id:r,chapter_id:a,chapter_name:o,chapter_value:s,range:i},c)).then(function(t){var e=t.data;return e})},e.remove_bookmarks=function(t,e){d(t,e)},e.remove_labels=function(t,e){d(t,e)},e.modify_label=function(t){return t.range=JSON.stringify(t.range),t.comm_text=t.userText,delete t.userText,(0,u.request_put)("/api/book_notes",n({},t)).then(function(t){return t.data})},e.backup_setting=function(t){return(0,u.request_post)("/api/user_read_setting",{data:JSON.stringify(t)})},e.restore_setting=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,u.request_get)("/api/user_read_setting").then(function(t){var e=t.data,r=s.default.isArray(e)&&e[0]||e;return r?JSON.parse(r):{}})},e.set_progress=function(t,e){var r=t.bookId,a=(t.chapterRid,t.progressJSON),n=t.percentJSON,o=e.extraParams;return(0,u.request_post)("/api/read_record",{data:a,proportion:n,release_id:o.release_id,book_id:r})},e.get_progress=function(t,e){var r=t.bookId,n=e.extraParams;return(0,u.request_get)("/api/read_record",{book_id:r,release_id:n.release_id}).then(function(t){var e=a(t.data,1),r=e[0];return r})};var o,i=r(240),s=(o=i)&&o.__esModule?o:{default:o},u=r(5);var c="publish"=="qrcode"?"/api":"/common/api";function d(t,e){var r=t.ids,a=e.extraParams;return(0,u.request_post)("/api/book_exegesis/delete",n({id:r},a)).then(function(t){return t.data})}},140:function(t,e,r){},393:function(t,e,r){"use strict";var a=r(140);r.n(a).a},456:function(t,e,r){"use strict";var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("yd-layout",[r("yd-navbar",{attrs:{slot:"navbar",title:t.info.name,color:"#fff",bgcolor:"#3998e2"},slot:"navbar"},[r("a",{attrs:{slot:"left",href:"javascript:history.back(-1)"},slot:"left"},[r("yd-navbar-back-icon",{attrs:{color:"#fff"}},[t._v("返回")])],1)]),r("div",{staticClass:"scroll"},[r("div",{staticClass:"content",attrs:{slot:"list"},slot:"list"},[r("div",{staticClass:"list"},[r("ul",[t.info?r("li",{staticClass:"ths"},[r("img",{attrs:{src:t.info.img_src}}),r("div",{staticClass:"abstract"},[r("div",{staticClass:"title"},[r("span",{staticClass:"oh"},[t._v(t._s(t.info.name)+"  ")])]),r("div",{staticClass:"txt"},[r("p",{staticClass:"author"},[t._v(t._s(t.info.author)+" ")]),r("p",{staticClass:"abs"},[t._v(t._s(t.info.abs||"暂无简介"))])])])]):t._e(),r("li",{staticClass:"chapter_title"},[r("div",{staticClass:"current"},[r("span",[r("span",[t._v("当前章节：")]),r("span",{staticClass:"c5"},[t._v("第 "+t._s(1)+" 章")])]),r("yd-button",{attrs:{size:"mini",bgcolor:"#3998e2",color:"#fff"},nativeOn:{click:function(e){return t.run(t.info.chapters[0])}}},[t._v("继续阅读 ")])],1),r("h3",[t._v("目录")])]),t._l(t.info.chapters,function(e,a){return r("li",{on:{click:function(r){return t.run(e)}}},[r("div",{staticClass:"abstract"},[r("div",{staticClass:"titles"},[r("p",[t._v("第 "+t._s(a+1)+" 章")]),r("p",{staticClass:"oh"},[t._v(t._s(e.chapter_name))])])])])})],2)])])])],1)},n=[];r.d(e,"a",function(){return a}),r.d(e,"b",function(){return n})},54:function(t,e,r){"use strict";r.r(e);var a=r(456),n=r(124);for(var o in n)"default"!==o&&function(t){r.d(e,t,function(){return n[t]})}(o);r(393);var i=r(9),s=Object(i.a)(n.default,a.a,a.b,!1,null,"b916081c",null);e.default=s.exports},87:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getList=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)("/system/app_manager/managers",t)},e.del=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/system/app_manager/managers/delete",t)},e.detail=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)(i(t),t)},e.save=function(t){var e=t.id,r=function(t,e){var r={};for(var a in t)e.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=t[a]);return r}(t,["id"]);if(e)return(0,n.request_put)(i({id:e}),r);return(0,n.request_post)("/system/app_manager/managers",r).then(function(t){r.apps.forEach(function(e){s({manager_id:t.data.id,app_id:e.id})})})},e.getApps=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)("/system/app/apps",t)},e.authorize=s,e.revoke=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/system/app_manager/managers/app_revoke",t)},e.codeImage=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=Math.random().toFixed(3);return(0,n.request_get)("/common/api/captcha/image?code="+t)},e.codePhone=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/common/api/captcha/mobile",t)},e.userLogin=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/common/api/auth/login/user",t).then(function(t){return window.sessionStorage.setItem("token",t.data.token),window.localStorage.setItem("token",t.data.token),config.token=t.data.token,t})},e.userReg=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/common/api/user/register",t)},e.backPwdCode=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/common/api/user/pass_reset/send",t)},e.setPwd=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/common/api/user/pass_reset/set",t)},e.phoneLogin=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/common/api/auth/login_by_phone/user",t).then(function(t){return window.sessionStorage.setItem("token",t.data.token),window.localStorage.setItem("token",t.data.token),config.token=t.data.token,t})};var a,n=r(5),o=r(10);var i=((a=o)&&a.__esModule?a:{default:a}).default.compile("/system/api/app_manager/managers/:id");function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/system/app_manager/managers/app_authorize",t)}},88:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.code=e.main=void 0;var a=s(r(8)),n=s(r(89)),o=r(17),i=(r(11),r(87));function s(t){return t&&t.__esModule?t:{default:t}}var u=new n.default({phone:{required:!0,length:11,message:{required:"请输入手机号",length:"手机号码长度应为11位"}}}),c={data:function(){return{list:[],info:{},qrcode_id:this.$route.query.qrcode_id,page:{}}},created:function(){var t,e=this;return(t=a.default.mark(function t(){return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.$route.query.token_id&&window.sessionStorage.setItem("token",e.$route.query.token_id),window.sessionStorage.getItem("token")){t.next=5;break}return alert(123456),e.$router.push({path:"/login"}),t.abrupt("return");case 5:e.getList();case 6:case"end":return t.stop()}},t,e)}),function(){var e=t.apply(this,arguments);return new Promise(function(t,r){return function a(n,o){try{var i=e[n](o),s=i.value}catch(t){return void r(t)}if(!i.done)return Promise.resolve(s).then(function(t){a("next",t)},function(t){a("throw",t)});t(s)}("next")})})()},methods:{loadList:function(t){var e=this;t&&(0,o.setTimeout)(function(){e.list=[].concat(function(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}(e.list),[{txt:"xxxxx"}]),e.$refs.infinitescroll.$emit("ydui.infinitescroll.finishLoad")},1e3)},go:function(t,e){this.$router.push({name:t,params:e})},to:function(t,e){this.$router.push({path:t,query:e})},outLink:function(t){location.href=t},pay:function(){},fetch:function(){return JSON.parse(window.localStorage.getItem("params")||"[]")},save:function(t){window.localStorage.setItem("params",JSON.stringify(t))}},computed:{unescapeHTML:function(){return function(t){return(t=""+t).replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&apos;/g,"'")}}},watch:{params:{handler:function(t){this.save(t)},deep:!0}}},d={data:function(){return{img_code:{code_id:null,code_img:null},img_code_val:null,code_tip:"发送验证码",duration:60,timer:null}},methods:{getImgCode:function(){var t=this;(0,i.codeImage)().then(function(e){t.img_code=e.data})},validatePhone:function(){var t=u.validate({phone:this.info.phone});return!(t.length>0)||(this.$Toast({message:t[0].toString()}),!1)},setTimer:function(){var t=this;if(null===this.timer){var e=this.duration;!function r(){t.code_tip=e+"秒后再试",e-- >0?t.timer=(0,o.setTimeout)(r,1e3):(t.code_tip="发送验证码",t.timer=null)}()}},sendCheckCode:function(){var t=this;null!==this.img_code_val?this.validatePhone()&&!this.timer&&(0,i.codePhone)({phone:this.info.phone,code_id_img:this.img_code.code_id,code_val_img:this.img_code_val,not_check_user_exist:1}).then(function(e){t.$dialog.toast({mes:e.message||"发送成功",icon:"success",timeout:1500}),t.setTimer(),t.info.code_id=e.data.code_id}).catch(function(e){t.$dialog.toast({icon:"error",timeout:1500,mes:"发送失败"})}):this.$dialog.toast({mes:"请输入图片验证码",timeout:1e3})}}};e.main=c,e.code=d}}]);