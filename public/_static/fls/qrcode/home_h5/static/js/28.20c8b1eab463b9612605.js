(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{144:function(t,e,i){"use strict";i.r(e);var o=i(145),n=i.n(o);for(var r in o)"default"!==r&&function(t){i.d(e,t,function(){return o[t]})}(r);e.default=n.a},145:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});i(88);var o=i(18);i(11);e.default={data:function(){var t=this;return{list:[],info:{},page:{},showMenu:!1,id:this.$route.query.qrcode_id||window.sessionStorage.getItem("qrcode_id"),myItems:[{label:"我的奖品",callback:function(){t.to("/prize",{qrcode_id:t.id})},stay:!0},{label:"订单记录",callback:function(){t.to("/order",{qrcode_id:t.id})}},{label:"我的资源",callback:function(){t.to("/myResource",{qrcode_id:t.id})}},{label:"读者圈",callback:function(){t.to("/circle",{qrcode_id:t.id})}}]}},created:function(){window.sessionStorage.setItem("qrcode_id",this.id),window.sessionStorage.getItem("token")?this.$route.query.token_id?(window.sessionStorage.setItem("token",this.$route.query.token_id),this.token=this.$route.query.token_id,this.getList()):this.getList():this.$router.push({path:"/login"})},methods:{getList:function(){var t=this;if(!this.id){var e=JSON.parse(window.localStorage.getItem("system"))||{};this.id=e.id}(0,o.get_resource)({id:this.id}).then(function(e){window.localStorage.setItem("system",JSON.stringify({id:t.id,scan_id:e.data.scan_id,time:(new Date).getTime()})),t.list=e.data.resource_list})},login:function(){},go:function(t,e){this.$router.push({name:t,params:e})},to:function(t,e){this.$router.push({path:t,query:e})},outLink:function(t){location.href=t},show:function(t){if(t.preview)location.href=t.preview;else if("resource"==t.resource_type){if("practices"==t.product_type)return void this.to("/resource",{qrcode_id:this.id,id:t.id,qrcode_product_id:t.qrcode_product_id});this.to("/gather",{qrcode_id:this.id,id:t.id,name:t.name,qrcode_product_id:t.qrcode_product_id})}else"app"==t.resource_type?"书圈"==t.app_type_name?this.to("/bookDetail",{id:t.id,qrcode_id:this.id,name:t.name,qrcode_product_id:t.qrcode_product_id}):"投票"==t.app_type_name?this.to("/vote",{id:t.id,qrcode_id:this.id,qrcode_product_id:t.qrcode_product_id}):"问卷调查"==t.app_type_name?this.to("/ans",{id:t.id,qrcode_id:this.id,qrcode_product_id:t.qrcode_product_id}):"问答"==t.app_type_name?this.to("/qus",{id:t.id,qrcode_id:this.id,qrcode_product_id:t.qrcode_product_id}):"刮刮卡"==t.app_type_name?this.to("/scratch",{id:t.id,qrcode_id:this.id,qrcode_product_id:t.qrcode_product_id}):"大转盘"==t.app_type_name&&this.to("/turntable",{id:t.id,qrcode_id:this.id,qrcode_product_id:t.qrcode_product_id}):"special"==t.resource_type&&this.to("/special",{id:t.id,qrcode_id:this.id,name:t.name,qrcode_product_id:t.qrcode_product_id})}}}},146:function(t,e,i){},397:function(t,e,i){"use strict";var o=i(146);i.n(o).a},442:function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("yd-layout",[i("yd-navbar",{attrs:{slot:"navbar",title:"主页",color:"#fff",bgcolor:"#3998e2"},slot:"navbar"},[i("router-link",{attrs:{slot:"left",to:"/"},slot:"left"})],1),i("div",{staticClass:"scroll"},[i("div",{staticClass:"content"},[t.list[0]?t._e():i("div",{staticClass:"noMsg"},[t._v("管理员未挂载数据")]),t.list[0]?i("div",{staticClass:"part",on:{click:function(e){return t.show(t.list[0])}}},[i("img",{staticClass:"banner",attrs:{src:t.list[0].img_src}}),i("div",{staticClass:"txt"},[t._v(t._s(t.list[0].name))])]):t._e(),i("ul",{staticClass:"list"},t._l(t.list,function(e,o){return o>0?i("li",{on:{click:function(i){return t.show(e)}}},[i("div",{staticClass:"txt"},[t._v(t._s(e.name))]),i("img",{attrs:{src:e.img_src}})]):t._e()}),0)])]),i("div",{attrs:{slot:"tabbar"},slot:"tabbar"},[i("yd-button",{attrs:{size:"large",color:"#fff",bgcolor:"#3998e2"},nativeOn:{click:function(e){t.showMenu=!0}}},[t._v("我的")]),i("yd-actionsheet",{attrs:{items:t.myItems},model:{value:t.showMenu,callback:function(e){t.showMenu=e},expression:"showMenu"}})],1)],1)},n=[];i.d(e,"a",function(){return o}),i.d(e,"b",function(){return n})},56:function(t,e,i){"use strict";i.r(e);var o=i(442),n=i(144);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);i(397);var a=i(9),s=Object(a.a)(n.default,o.a,o.b,!1,null,"5301efea",null);e.default=s.exports},87:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getList=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)("/system/app_manager/managers",t)},e.del=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/system/app_manager/managers/delete",t)},e.detail=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)(a(t),t)},e.save=function(t){var e=t.id,i=function(t,e){var i={};for(var o in t)e.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(t,o)&&(i[o]=t[o]);return i}(t,["id"]);if(e)return(0,n.request_put)(a({id:e}),i);return(0,n.request_post)("/system/app_manager/managers",i).then(function(t){i.apps.forEach(function(e){s({manager_id:t.data.id,app_id:e.id})})})},e.getApps=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)("/system/app/apps",t)},e.authorize=s,e.revoke=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/system/app_manager/managers/app_revoke",t)},e.codeImage=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=Math.random().toFixed(3);return(0,n.request_get)("/common/api/captcha/image?code="+t)},e.codePhone=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/common/api/captcha/mobile",t)},e.userLogin=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/common/api/auth/login/user",t).then(function(t){return window.sessionStorage.setItem("token",t.data.token),window.localStorage.setItem("token",t.data.token),config.token=t.data.token,t})},e.userReg=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/common/api/user/register",t)},e.backPwdCode=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/common/api/user/pass_reset/send",t)},e.setPwd=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/common/api/user/pass_reset/set",t)},e.phoneLogin=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/common/api/auth/login_by_phone/user",t).then(function(t){return window.sessionStorage.setItem("token",t.data.token),window.localStorage.setItem("token",t.data.token),config.token=t.data.token,t})};var o,n=i(5),r=i(10);var a=((o=r)&&o.__esModule?o:{default:o}).default.compile("/system/api/app_manager/managers/:id");function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/system/app_manager/managers/app_authorize",t)}},88:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.code=e.main=void 0;var o=s(i(8)),n=s(i(89)),r=i(17),a=(i(11),i(87));function s(t){return t&&t.__esModule?t:{default:t}}var d=new n.default({phone:{required:!0,length:11,message:{required:"请输入手机号",length:"手机号码长度应为11位"}}}),c={data:function(){return{list:[],info:{},qrcode_id:this.$route.query.qrcode_id,page:{}}},created:function(){var t,e=this;return(t=o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.$route.query.token_id&&window.sessionStorage.setItem("token",e.$route.query.token_id),window.sessionStorage.getItem("token")){t.next=5;break}return alert(123456),e.$router.push({path:"/login"}),t.abrupt("return");case 5:e.getList();case 6:case"end":return t.stop()}},t,e)}),function(){var e=t.apply(this,arguments);return new Promise(function(t,i){return function o(n,r){try{var a=e[n](r),s=a.value}catch(t){return void i(t)}if(!a.done)return Promise.resolve(s).then(function(t){o("next",t)},function(t){o("throw",t)});t(s)}("next")})})()},methods:{loadList:function(t){var e=this;t&&(0,r.setTimeout)(function(){e.list=[].concat(function(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}(e.list),[{txt:"xxxxx"}]),e.$refs.infinitescroll.$emit("ydui.infinitescroll.finishLoad")},1e3)},go:function(t,e){this.$router.push({name:t,params:e})},to:function(t,e){this.$router.push({path:t,query:e})},outLink:function(t){location.href=t},pay:function(){},fetch:function(){return JSON.parse(window.localStorage.getItem("params")||"[]")},save:function(t){window.localStorage.setItem("params",JSON.stringify(t))}},computed:{unescapeHTML:function(){return function(t){return(t=""+t).replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&apos;/g,"'")}}},watch:{params:{handler:function(t){this.save(t)},deep:!0}}},u={data:function(){return{img_code:{code_id:null,code_img:null},img_code_val:null,code_tip:"发送验证码",duration:60,timer:null}},methods:{getImgCode:function(){var t=this;(0,a.codeImage)().then(function(e){t.img_code=e.data})},validatePhone:function(){var t=d.validate({phone:this.info.phone});return!(t.length>0)||(this.$Toast({message:t[0].toString()}),!1)},setTimer:function(){var t=this;if(null===this.timer){var e=this.duration;!function i(){t.code_tip=e+"秒后再试",e-- >0?t.timer=(0,r.setTimeout)(i,1e3):(t.code_tip="发送验证码",t.timer=null)}()}},sendCheckCode:function(){var t=this;null!==this.img_code_val?this.validatePhone()&&!this.timer&&(0,a.codePhone)({phone:this.info.phone,code_id_img:this.img_code.code_id,code_val_img:this.img_code_val,not_check_user_exist:1}).then(function(e){t.$dialog.toast({mes:e.message||"发送成功",icon:"success",timeout:1500}),t.setTimer(),t.info.code_id=e.data.code_id}).catch(function(e){t.$dialog.toast({icon:"error",timeout:1500,mes:"发送失败"})}):this.$dialog.toast({mes:"请输入图片验证码",timeout:1e3})}}};e.main=c,e.code=u}}]);