(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{1597:function(t,i,e){"use strict";var a=e(869);e.n(a).a},1680:function(t,i,e){"use strict";var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"index clearfix"},[e("div",{staticClass:"mainRight"},[e("div",{staticClass:"contentWrap"},[e("div",{staticClass:"contentLeft"},[e("div",{staticClass:"maindata"},[e("div",{staticClass:"btnGroup"},[e("el-button-group",[e("el-button",{attrs:{type:"primary",plain:""},on:{click:function(i){return t.$router.push({path:"/wms/userList",query:{index:t.$route.query.index,id:t.$route.query.id}})}}},[t._v("扫码用户列表")]),e("el-button",{attrs:{type:"primary"}},[t._v("数据分析")]),e("el-button",{attrs:{type:"primary",plain:""},on:{click:function(i){return t.$router.push({path:"/wms/scanRecord",query:{index:t.$route.query.index,id:t.$route.query.id}})}}},[t._v("扫码记录")])],1)],1),e("div",{staticClass:"data"},[e("div",{staticClass:"tableTop"},[e("div",{staticClass:"title"},[t._m(0),e("div",{staticClass:"item"},[e("span",[t._v(t._s(t.infoDate.scan_count))])])]),e("div",{staticClass:"title"},[t._m(1),e("div",{staticClass:"item"},[e("span",[t._v(t._s(t.infoDate.user_count))])])])]),e("div",{staticClass:"tail"},[e("div",{staticClass:"group"},[e("div",{staticClass:"name"},[t._v("用户性别分布")]),e("div",{ref:"charts1",staticClass:"draw"})]),e("div",{staticClass:"group"},[e("div",{staticClass:"name"},[t._v("24小时扫码时间段分布")]),e("div",{ref:"charts2",staticClass:"draw"})]),e("div",{staticClass:"group"},[e("div",{staticClass:"name"},[t._v("用户地域分布")]),e("div",{ref:"charts3",staticClass:"draw"})]),e("div",{staticClass:"group"},[e("div",{staticClass:"name"},[t._v("7日用户新增量")]),e("div",{ref:"charts4",staticClass:"draw"})]),e("div",{staticClass:"group"},[e("div",{staticClass:"name"},[t._v("每周扫码数量分布")]),e("div",{ref:"charts5",staticClass:"draw"})]),e("div",{staticClass:"group"},[e("div",{staticClass:"name"},[t._v("累计停留时长分布")]),e("div",{ref:"charts6",staticClass:"draw"})])]),e("div",{staticClass:"tail tail2"},[e("div",{staticClass:"group"},[e("div",{staticClass:"name"},[t._v("用户地域详细分布")]),e("div",{ref:"charts7",staticClass:"draw"})]),e("div",{staticClass:"group"},[e("div",{staticClass:"name"},[t._v("用户单次停留最高时长分布")]),e("div",{ref:"charts8",staticClass:"draw"})])]),e("div",{staticClass:"tail tail2"},[e("div",{staticClass:"group"},[e("div",{staticClass:"name"},[t._v("30日二维码扫码排行榜")]),e("div",{ref:"charts9",staticClass:"draw"})]),e("div",{staticClass:"group"},[e("div",{staticClass:"name"},[t._v("7日二维码扫码排行榜")]),e("div",{ref:"charts10",staticClass:"draw"})])])])])])])])])},s=[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"name"},[i("span",[this._v("扫码总数：")])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"name"},[i("span",[this._v("用户数量：")])])}];e.d(i,"a",function(){return a}),e.d(i,"b",function(){return s})},257:function(t,i,e){"use strict";e.r(i);var a=e(1680),s=e(867);for(var r in s)"default"!==r&&function(t){e.d(i,t,function(){return s[t]})}(r);e(1597);var n=e(0),o=Object(n.a)(s.default,a.a,a.b,!1,null,"4314a07e",null);i.default=o.exports},566:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.analysAll=i.analysisData=i.userStatics=void 0;var a,s,r,n=c(e(15));i.userStatics=(a=d(n.default.mark(function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,o.request_get)("/api/statistics/user",i));case 1:case"end":return t.stop()}},t,this)})),function(){return a.apply(this,arguments)}),i.analysisData=(s=d(n.default.mark(function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return"/wms/proStatics"==i.type?i.product_id=i.id:"/wms/bookStatics"==i.type&&(i.book_id=i.id),t.abrupt("return",(0,o.request_get)("/api/statistics/data_analysis",i));case 2:case"end":return t.stop()}},t,this)})),function(){return s.apply(this,arguments)}),i.analysAll=(r=d(n.default.mark(function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,o.request_get)("/api/statistics/all",i));case 1:case"end":return t.stop()}},t,this)})),function(){return r.apply(this,arguments)});i.getList=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.request_get)("/api/statistics/product_list",t)},i.getBookList=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.request_get)("/api/statistics/book_list",t)},i.del=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.request_post)("/api/statistics/product_list",t)},i.detail=l,i.scanList=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"/wms/proStatics"==t.type?t.product_id=t.id:"/wms/bookStatics"==t.type&&(t.book_id=t.id);return(0,o.request_get)("/api/statistics/scan_record_list",t)},i.userList=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"/wms/proStatics"==t.type?t.product_id=t.id:"/wms/bookStatics"==t.type&&(t.book_id=t.id);return(0,o.request_get)("/api/statistics/user_list",t)},i.scanExport=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"/wms/proStatics"==t.type?t.product_id=t.ids:"/wms/bookStatics"==t.type&&(t.book_id=t.ids);return(0,o.request_get)("/api/statistics/scan_record_list_export",t)},i.userExport=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"/wms/proStatics"==t.type?(t.product_ids=t.ids,t.product_id=t.id):"/wms/bookStatics"==t.type&&(t.book_ids=t.ids,t.book_id=t.id);return(0,o.request_get)("/api/statistics/user_list_export",t)};var o=e(16),u=c(e(21));function c(t){return t&&t.__esModule?t:{default:t}}function d(t){return function(){var i=t.apply(this,arguments);return new Promise(function(t,e){return function a(s,r){try{var n=i[s](r),o=n.value}catch(t){return void e(t)}if(!n.done)return Promise.resolve(o).then(function(t){a("next",t)},function(t){a("throw",t)});t(o)}("next")})}}u.default.compile("/api/statistics/product_list/:id");var l=u.default.compile("/api/statistics/product_list/:id");function l(t){var i=t.id,e=function(t,i){var e={};for(var a in t)i.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}(t,["id"]);return(0,o.request_get)(l({id:i}),e)}},867:function(t,i,e){"use strict";e.r(i);var a=e(868),s=e.n(a);for(var r in a)"default"!==r&&function(t){e.d(i,t,function(){return a[t]})}(r);i.default=s.a},868:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a,s=function(t){if(t&&t.__esModule)return t;var i={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(i[e]=t[e]);return i.default=t,i}(e(566)),r=e(630),n=(a=r)&&a.__esModule?a:{default:a};e(1092),i.default={data:function(){return{services:s,infoDate:{}}},created:function(){this.getDate()},methods:{getDate:function(){var t=this;s.analysisData({type:this.$route.query.index,id:this.$route.query.id}).then(function(i){t.infoDate=i.data,t.init()})},init:function(){this.draw1(),this.draw({ref:"charts2",name:"读者扫码时段分析",x:this.infoDate.twenty_four_distribution.map(function(t){return t.distribution}),y:this.infoDate.twenty_four_distribution.map(function(t){return t.total})}),this.draw3(),this.draw({ref:"charts4",name:"7天浏览读者量",x:this.infoDate.new_user.map(function(t){return t.date}),y:this.infoDate.new_user.map(function(t){return t.new_user_count})}),this.draw({ref:"charts5",name:"读者扫码时段分析",x:this.infoDate.week_scan_count.map(function(t){return t.distribution}),y:this.infoDate.week_scan_count.map(function(t){return t.total})}),this.draw({ref:"charts6",name:"读者累计停留时长分布",x:this.infoDate.user_total_stop_time.map(function(t){return t.time}),y:this.infoDate.user_total_stop_time.map(function(t){return t.count})}),this.draw7(),this.draw({ref:"charts8",name:"读者累计停留时长分布",x:this.infoDate.user_max_stop_time.map(function(t){return t.time}),y:this.infoDate.user_max_stop_time.map(function(t){return t.count})}),this.draw({ref:"charts9",name:"读者累计停留时长分布",x:this.infoDate.top_thirty.map(function(t){return t.name}),y:this.infoDate.top_thirty.map(function(t){return t.total}),type:"bar"}),this.draw({ref:"charts10",name:"读者累计停留时长分布",x:this.infoDate.top_seven.map(function(t){return t.name}),y:this.infoDate.top_seven.map(function(t){return t.total}),type:"bar"})},draw1:function(){n.default.init(this.$refs.charts1).setOption({title:{text:"男女百分比",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:this.infoDate.user_sex.map(function(t){return t.name})},series:[{name:"占比",type:"pie",radius:"55%",center:["50%","60%"],data:this.infoDate.user_sex,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]})},draw3:function(){n.default.init(this.$refs.charts3).setOption({tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",x:"left",data:this.infoDate.pro_list.map(function(t){return t.name}).splice(0,10)},toolbox:{show:!0,feature:{mark:{show:!0},magicType:{show:!0,type:["pie","funnel"],option:{funnel:{x:"25%",width:"50%",funnelAlign:"center",max:1548}}}}},calculable:!0,series:[{name:"访问来源",type:"pie",radius:["50%","70%"],itemStyle:{normal:{label:{show:!1},labelLine:{show:!1}},emphasis:{label:{show:!0,position:"center",textStyle:{fontSize:"30",fontWeight:"bold"}}}},data:this.infoDate.pro_list}]})},draw7:function(){n.default.init(this.$refs.charts7).setOption({tooltip:{trigger:"item"},legend:{x:"right",selectedMode:!1,data:["北京","上海","广东"]},dataRange:{orient:"horizontal",min:0,max:100,text:["高","低"],splitNumber:0},toolbox:{show:!1,orient:"vertical",x:"right",y:"center",feature:{mark:{show:!1},dataView:{show:!1,readOnly:!1}}},series:[{name:"地域详细分布",type:"map",mapType:"china",mapLocation:{x:"center"},selectedMode:"multiple",itemStyle:{normal:{label:{show:!0}},emphasis:{label:{show:!0}}},data:this.infoDate.pro_list}],animation:!1},!0)},draw:function(t){var i=t.ref,e=t.name,a=void 0===e?"name":e,s=t.x,r=void 0===s?[]:s,o=t.y,u=void 0===o?[]:o,c=t.type,d=void 0===c?"line":c;n.default.init(this.$refs[i]).setOption({title:{text:a,x:"center"},tooltip:{trigger:"axis"},xAxis:{type:"category",data:r},yAxis:{type:"value"},series:[{data:u,type:d,smooth:!0,barWidth:30}]})}}}},869:function(t,i,e){}}]);