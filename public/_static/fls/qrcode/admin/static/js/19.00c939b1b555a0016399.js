(window.webpackJsonp=window.webpackJsonp||[]).push([[19,33],{1267:function(t,e,i){"use strict";i.r(e);var a=i(1700),n=i(779);for(var s in n)"default"!==s&&function(t){i.d(e,t,function(){return n[t]})}(s);i(1268);var r=i(0),o=Object(r.a)(n.default,a.a,a.b,!1,null,"b78c0ddc",null);e.default=o.exports},1268:function(t,e,i){"use strict";var a=i(787);i.n(a).a},1269:function(t,e,i){"use strict";var a=i(788);i.n(a).a},1696:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"box"},[i("div",{staticClass:"mainRight"},[i("div",{staticClass:"contentWrap"},[i("div",{staticClass:"contentLeft"},[i("div",{staticClass:"maindata"},[i("div",{staticClass:"serachWrap"},[i("div",{staticClass:"title"}),i("form",{staticClass:"clearfix",attrs:{id:"mainForm"}},[i("span",{staticClass:"group-inline"},[i("el-input",{attrs:{placeholder:"名称",name:"name",clearable:""},model:{value:t.searchQuery.name,callback:function(e){t.$set(t.searchQuery,"name",e)},expression:"searchQuery.name"}})],1),i("span",{staticClass:"group-inline"},[i("TimePick",{attrs:{inputsName:["start_time","end_time"]}})],1),i("span",{staticClass:"group-inline"},[i("select",{staticClass:"form-control",attrs:{name:"status"}},t._l(t.options,function(t){return i("option",{key:t.value,attrs:{label:t.name},domProps:{value:t.value}})}),0)]),i("span",{staticClass:"group-inline float-right"},[i("el-button",{attrs:{size:"mediu",type:"primary",icon:"el-icon-plus",plain:""},on:{click:t.addQrcode}},[t._v("创建")]),i("el-button",{attrs:{size:"mediu",type:"primary",icon:"el-icon-search",plain:""},on:{click:t.query}},[t._v("搜索")])],1)])]),i("div",{staticClass:"tableWrap"},[i("div",{staticClass:"tableTop"},[i("div",{staticClass:"title vel-line"},[i("span",[t._v("全部 "),t.page?i("span",{staticClass:"totalNum"},[t._v("("+t._s(t.page.total)+")")]):t._e()]),i("div",{staticClass:"btns"},[i("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){return t.delChoosen(!1)}}},[t._v("删除")])],1)])]),i("table",{staticClass:"table"},[i("thead",[i("tr",[i("th",{staticClass:"table-check"},[i("input",{attrs:{type:"checkbox"},on:{click:function(e){return t.$checkAll(e)}}})]),i("th",[t._v("名称")]),i("th",[t._v("使用状态")]),i("th",[t._v("创建时间")]),i("th",{attrs:{width:"80"}},[t._v("操作")])])]),t.list?i("tbody",t._l(t.list,function(e){return i("tr",[i("th",[i("input",{ref:"ids",refInFor:!0,attrs:{type:"checkbox",name:"ids"},domProps:{value:e.id}})]),i("th",[i("img",{staticClass:"cover-photo",attrs:{src:e.img_src}}),i("div",{staticClass:"th-name bookName",attrs:{title:e.name}},[t._v(t._s(e.name))])]),i("th",[i("div",{staticClass:"th-name"},[t._v(t._s(e.status_name))])]),i("th",[i("div",{staticClass:"th-name"},[t._v(t._s(e.create_time))])]),i("th",[i("div",{staticClass:"btns"},[i("Icon",{attrs:{type:"icon-detail",title:"详情"},on:{click:function(i){return t.opneDetailDialog("info",e)}}}),"true"!=e.status?i("Icon",{attrs:{type:"icon-delete",title:"删除"},on:{click:function(i){return t.delChoosen(e.id,e)}}}):t._e()],1)])])}),0):t._e()]),t.page?i("div",{staticClass:"pageWrap"},[i("el-pagination",{attrs:{small:!1,background:"","current-page":t.page.num,"page-sizes":[10,50,100],"page-size":t.page.offset,layout:"total, sizes,prev, pager, next, jumper",total:t.page.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1):t._e()])])])])]),i("div",{staticClass:"dialogs"},[i("el-dialog",{attrs:{center:!1,visible:t.detailDialog,"close-on-click-modal":!1,top:"50px",width:"1200px",title:"详情"},on:{"update:visible":function(e){t.detailDialog=e}}},[i("div",{staticClass:"content",attrs:{slot:"title"},slot:"title"},[t.detailDialog?i("Detail",{attrs:{detailDialog:t.detailDialog,readOnly:t.readOnly,services:t.services,detailData:t.detailData,type:t.type},on:{"update:detailDialog":function(e){t.detailDialog=e},"update:detail-dialog":function(e){t.detailDialog=e},close:t.close,saveok:t.saveok}}):t._e()],1)])],1)])},n=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},1700:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"div"},[i("el-tabs",{attrs:{value:t.type},on:{"tab-click":t.handleClick}},[i("el-tab-pane",{attrs:{label:"详情",name:"info"}},[i("VaForm",{ref:"detailForm"},[i("form",{staticClass:"detailForm"},[i("fieldset",{attrs:{disabled:t.readOnly}},[i("div",{staticClass:"group"},[i("div",{staticClass:"label"},[t._v("*名称:")]),i("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required'}"},{name:"model",rawName:"v-model",value:t.information.name,expression:"information.name"}],staticClass:"form-control",attrs:{type:"text",disabled:t.readOnly},domProps:{value:t.information.name},on:{input:function(e){e.target.composing||t.$set(t.information,"name",e.target.value)}}})]),i("div",{staticClass:"group"},[i("div",{staticClass:"label"},[t._v("*简介:")]),i("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required'}"},{name:"model",rawName:"v-model",value:t.information.abs,expression:"information.abs"}],staticClass:"form-control",attrs:{type:"text",disabled:t.readOnly},domProps:{value:t.information.abs},on:{input:function(e){e.target.composing||t.$set(t.information,"abs",e.target.value)}}})]),i("div",{staticClass:"group"},[i("div",{staticClass:"label"},[t._v("*封面:")]),i("img",{staticClass:"cover",attrs:{src:t.previewImgUrl||t.information.img_src}}),i("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(e){return t.$refs.cover.click()}}},[t._v("选择")]),i("input",{ref:"cover",staticClass:"hide",attrs:{type:"file",accept:"image/jpeg,image/jpg,image/png"},on:{change:function(e){return t.preview(e)}}})],1)])])]),i("Tree",{ref:"tree",attrs:{dataList:t.cateList,services:t.services,detailData:t.detailData,getDetail:t.getDetail}}),i("div",{staticClass:"btns"},[i("el-button",{attrs:{type:"priamry",plain:""},on:{click:function(e){return t.$emit("close")}}},[t._v("取消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitInfo("detailForm")}}},[t._v("确定")])],1)],1),i("el-tab-pane",{attrs:{label:"资源与应用",name:"resource"}},[i("ResAndUse",{attrs:{detailData:t.detailData,cateList:t.cateList,services:t.services,readOnly:t.readOnly}})],1),i("el-tab-pane",{attrs:{label:"广告位",name:"ad"}},[i("Advertising",{attrs:{detailData:t.detailData,services:t.services,cateList:t.cateList}})],1),i("el-tab-pane",{attrs:{label:"使用中产品",name:"using"}},[i("Using",{attrs:{detailData:t.detailData,services:t.services,readOnly:t.readOnly}})],1)],1)],1)},n=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},233:function(t,e,i){"use strict";i.r(e);var a=i(646),n=i(563);for(var s in n)"default"!==s&&function(t){i.d(e,t,function(){return n[t]})}(s);i(620);var r=i(0),o=Object(r.a)(n.default,a.a,a.b,!1,null,"b07243a2",null);e.default=o.exports},234:function(t,e,i){"use strict";i.r(e);var a=i(687),n=i(578);for(var s in n)"default"!==s&&function(t){i.d(e,t,function(){return n[t]})}(s);i(668);var r=i(0),o=Object(r.a)(n.default,a.a,a.b,!1,null,"e7583670",null);e.default=o.exports},235:function(t,e,i){"use strict";i.r(e);var a=i(970),n=i(621);for(var s in n)"default"!==s&&function(t){i.d(e,t,function(){return n[t]})}(s);i(783);var r=i(0),o=Object(r.a)(n.default,a.a,a.b,!1,null,"708ba18b",null);e.default=o.exports},236:function(t,e,i){"use strict";i.r(e);var a=i(969),n=i(624);for(var s in n)"default"!==s&&function(t){i.d(e,t,function(){return n[t]})}(s);i(786);var r=i(0),o=Object(r.a)(n.default,a.a,a.b,!1,null,"cbce1782",null);e.default=o.exports},242:function(t,e,i){"use strict";i.r(e);var a=i(1696),n=i(777);for(var s in n)"default"!==s&&function(t){i.d(e,t,function(){return n[t]})}(s);i(1269);var r=i(0),o=Object(r.a)(n.default,a.a,a.b,!1,null,"207337b8",null);e.default=o.exports},563:function(t,e,i){"use strict";i.r(e);var a=i(564),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,function(){return a[t]})}(s);e.default=n.a},564:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},s=i(293),r=i(282),o=((a=r)&&a.__esModule,i(49));e.default={mixins:[s.main],props:["detailData","services","readOnly"],data:function(){return{type:"info"}},methods:n({getList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.page&&this.page.num||1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.page&&this.page.offset||10;if(!this.detailData.id)return this.setList([]),void this.setPage({});this.services.getUseList({pageNum:e,pageOffset:i,special_id:this.detailData.id}).then(function(e){t.setList(e.data),t.setPage(e.page)})},setList:function(t){this.setUselist(t)},setPage:function(t){this.setUselistPage(t)}},(0,o.mapMutations)(["setUselist","setUselistPage"])),computed:n({},(0,o.mapState)({list:function(t){return t.using.list},page:function(t){return t.using.page}}))}},565:function(t,e,i){},578:function(t,e,i){"use strict";i.r(e);var a=i(579),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,function(){return a[t]})}(s);e.default=n.a},579:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(433));e.default={props:{columnList:Array,detailData:Object},created:function(){this.getTypes()},data:function(){return{cateVis:!0,types:{list:[],value:this.columnList[0]?this.columnList[0]:null},options:{list:[],value:this.columnList[1]?this.columnList[1]:null}}},methods:{submit:function(){return this.options.value?this.types.value?void this.$emit("submit",{class_id:this.options.value?this.options.value:this.types.value}):this.$message.error("请选择一级分类"):this.$message.error("请选择二级分类")},getTypes:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"root",i=arguments[1];a.getCateList({pid:e,special_id:this.detailData.id}).then(function(a){if("root"!=e){for(var n in a.data)t.options.list=a.data[n].children;i&&(t.options.value=null)}else t.types.list=a.data})},back:function(){this.$emit("back")}},watch:{types:function(){this.cateVis||this.$emit("back")},"types.value":function(t,e){this.getTypes(t,!0)}}}},580:function(t,e,i){},617:function(t,e,i){"use strict";i.r(e);var a=i(618),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,function(){return a[t]})}(s);e.default=n.a},618:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,n=i(15),s=(a=n)&&a.__esModule?a:{default:a},r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},o=i(78);e.default={props:["dataList","type","services","detailData","getDetail"],data:function(){return{data:this.dataList,currMulu:[],detailDialog:!1}},components:{},created:function(){},methods:{append:function(t){t.children||this.$set(t,"children",[]),t.children.push({children:[],name:""})},remove:function(t,e){var i=this;if(e.id)this.services.delCate({id:e.id}).then(function(t){i.getDetail()},function(t){i.$message.error(t.message)});else{var a=t.parent,n=a.data.children||a.data,s=n.findIndex(function(t){return t.id===e.id});n.splice(s,1)}},getList:function(){var t=this;this.detailData.id&&this.services.detail({id:this.detailData.id}).then(function(e){t.data=(0,o.recursionTree)(e.data.category_list)})},allowDrop:function(t,e,i){return"二级 3-1"!==e.data.name||"inner"!==i},allowDrag:function(t){return-1===t.data.name.indexOf("三级 3-2-2")},add:function(){if(!this.detailData.id)return this.$message.warning("请先保存专题详情!");this.data.push({children:[],pid:"0",name:""})},uploadTreeFile:function(t,e){this.currTreeData=t,this.currNode=e,this.$refs.treeImgInp.click()},treeImgInpChange:function(){var t,e=(t=s.default.mark(function t(e){var i,a;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=this.$isFileBig(e,1)){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,this.$globalUpdateFile(i);case 5:a=t.sent,this.currTreeData,this.$set(this.currTreeData,"img_src",a.url),this.$set(this.currTreeData,"img",a.path);case 9:case"end":return t.stop()}},t,this)}),function(){var e=t.apply(this,arguments);return new Promise(function(t,i){return function a(n,s){try{var r=e[n](s),o=r.value}catch(t){return void i(t)}if(!r.done)return Promise.resolve(o).then(function(t){a("next",t)},function(t){a("throw",t)});t(o)}("next")})});return function(t){return e.apply(this,arguments)}}(),save:function(t,e){var i=this,a=e.parent?e.parent.data:{};this.services.addCate(r({},t,{pid:a.id,special_id:this.detailData.id})).then(function(t){i.$message.success("保存成功"),i.getDetail()},function(t){i.$message.error(t.message)})},selectCurrent:function(t,e){},muluSort:function(t,e){var i=this;this.services.sort({id:t.id,sort:e}).then(function(t){i.getList()})}}}},619:function(t,e,i){},620:function(t,e,i){"use strict";var a=i(565);i.n(a).a},621:function(t,e,i){"use strict";i.r(e);var a=i(622),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,function(){return a[t]})}(s);e.default=n.a},622:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},n=i(293),s=(c(i(282)),i(49)),r=c(i(284)),o=c(i(234));function c(t){return t&&t.__esModule?t:{default:t}}e.default={components:{Resource:r.default,Grounding:o.default},props:["detailData","services","cateList"],mixins:[n.main],data:function(){return{useDialog:!1,resourceDialog:!1,cateVis:!1,columnList:[],id:"",currentItem:{},resourcesType:"1"}},created:function(){},methods:a({getList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.page&&this.page.num||1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.page&&this.page.offset||10;if(!this.detailData.id)return this.setList([]),void this.setPage({});this.services.getContList({pageNum:e,pageOffset:i,special_id:this.detailData.id}).then(function(e){t.setList(e.data),t.setPage(e.page)})},del:function(t,e){var i=this;this.$confirm("你确定删除吗").then(function(e){i.services.delContent({id:t}).then(function(t){i.getList()}).catch(function(t){var e=t.payload;for(var a in e.messages){i.$message.error(e.messages[a]);break}})})},addSelect:function(t,e){var i=this;this.services.addContent({special_id:this.detailData.id,type:"1"==this.resourcesType?"resource":"app",resource_id:e.map(function(t){return t.id})}).then(function(t){i.getList(),i.resourceDialog=!1})},mofdifyCate:function(t){var e=this;this.id=t.id,this.currentItem=t,t&&this.services.getCateList({special_id:this.detailData.id}).then(function(t){e.columnList=t.data,e.cateVis=!0})},submitCate:function(){var t=this;this.services.mofdifyCate({id:this.id,category_id:this.currentItem.category_id}).then(function(e){t.$message.success("成功"),t.cateVis=!1,t.getList()})},setList:function(t){this.setQrcodelist(t)},setPage:function(t){this.setQrcodelistPage(t)},addRelation:function(t){if(!this.detailData.id)return this.$message.warning("请先保存专题详情!");this.resourcesType=t,this.resourceDialog=!0},isChecked:function(t){return t==this.currentItem.category_id},uncheckedAll:function(t,e){Array.from(document.querySelectorAll("input[name='cateList_ids']")).forEach(function(t){return t.checked=!1}),t.target.checked=!0,this.currentItem.category_id=e.id}},(0,s.mapMutations)(["setQrcodelist","setQrcodelistPage"])),computed:a({},(0,s.mapState)({list:function(t){return t.qrcode.list},page:function(t){return t.qrcode.page}}))}},623:function(t,e,i){},624:function(t,e,i){"use strict";i.r(e);var a=i(625),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,function(){return a[t]})}(s);e.default=n.a},625:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=c(i(15)),n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},s=i(293),r=(c(i(22)),c(i(282)),i(49)),o=(i(103),i(784));function c(t){return t&&t.__esModule?t:{default:t}}e.default={mixins:[s.main],props:["detailData","services","cateList"],created:function(){},data:function(){return{dialogVisible:!1,previewImgUrl:null,currentItem:{status:!1}}},mounted:function(){var t=this;(0,o.setTimeout)(function(){t.cateList},1e3)},methods:n({getList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.page&&this.page.num||1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.page&&this.page.offset||10;if(!this.detailData.id)return this.setList([]),void this.setPage({});this.services.getAdList({pageNum:e,pageOffset:i,special_id:this.detailData.id}).then(function(e){t.setList(e.data),t.setPage(e.page)})},del:function(t,e){var i=this;this.$confirm("你确定删除吗").then(function(e){i.services.delAd({id:t}).then(function(t){i.getList()}).catch(function(t){var e=t.payload;for(var a in e.messages){i.$message.error(e.messages[a]);break}})})},detail:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{status:!1};if(!this.detailData.id)return this.$message.warning("请先保存专题详情!");this.currentItem,this.currentItem=t,this.dialogVisible=!0},save:function(){var t,e=(t=a.default.mark(function t(){var e,i,s,r=this;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.$refs.updateImg.files[0],i=this.$loading({text:"正在上传",background:"rgba(0, 0, 0, 0.8)"}),!e){t.next=8;break}return t.next=5,this.$globalUpdateFile(e);case 5:s=t.sent,this.currentItem.img_src=s.url,this.currentItem.img=s.path;case 8:return t.next=10,this.services.saveAdver(n({special_id:this.detailData.id},this.currentItem)).then(function(t){r.getList(),r.$message.success("操作成功")},function(t){i.close(),r.$message.error(t.message)});case 10:case"end":return t.stop()}},t,this)}),function(){var e=t.apply(this,arguments);return new Promise(function(t,i){return function a(n,s){try{var r=e[n](s),o=r.value}catch(t){return void i(t)}if(!r.done)return Promise.resolve(o).then(function(t){a("next",t)},function(t){a("throw",t)});t(o)}("next")})});return function(){return e.apply(this,arguments)}}(),update:function(t){var e=t.target.files[0];this.imgFile=e,this.previewImgUrl=URL.createObjectURL(e),this.previewImgUrl},setList:function(t){this.setAdlist(t)},setPage:function(t){this.setAdlistPage(t)},uncheckedAll:function(t,e){Array.from(document.querySelectorAll("input[name='cateList_ids']")).forEach(function(t){return t.checked=!1}),t.target.checked=!0,this.currentItem.category_id=e.id},isChecked:function(t){return t==this.currentItem.category_id}},(0,r.mapMutations)(["setAdlist","setAdlistPage"])),computed:n({},(0,r.mapState)({list:function(t){return t.ad.list},page:function(t){return t.ad.page}}))}},626:function(t,e,i){},646:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"box"},[i("div",{staticClass:"maindata"},[i("table",{staticClass:"table"},[t._m(0),t.list?i("tbody",t._l(t.list,function(e){return i("tr",[i("th",[i("img",{staticClass:"cover-photo",attrs:{src:e.img_src}}),i("div",{staticClass:"th-name bookName",attrs:{title:e.name}},[t._v(t._s(e.name))])]),i("th",[i("div",{staticClass:"th-name"},[t._v(t._s(e.abs))])]),i("th",[i("div",{staticClass:"th-name"},[t._v(t._s(e.create_time))])])])}),0):t._e()])]),t.page?i("div",{staticClass:"pageWrap"},[i("el-pagination",{attrs:{small:!1,background:"","current-page":t.page.num,"page-sizes":[10,50,100],"page-size":t.page.offset,layout:"total, sizes,prev, pager, next, jumper",total:t.page.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1):t._e()])},n=[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("名称")]),e("th",{attrs:{width:"150"}},[this._v("产品简介")]),e("th",[this._v("创建时间")])])])}];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},668:function(t,e,i){"use strict";var a=i(580);i.n(a).a},687:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"div"},[t.cateVis?i("el-dialog",{attrs:{center:!1,visible:t.cateVis,"close-on-click-modal":!1,"before-close":t.back,width:"410px",title:"设置","append-to-body":""},on:{"update:visible":function(e){t.cateVis=e}}},[i("VaForm"),i("div",{staticClass:"content"},[i("span",[t._v("一级分类")]),i("el-select",{model:{value:t.types.value,callback:function(e){t.$set(t.types,"value",e)},expression:"types.value"}},t._l(t.types.list,function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1),i("div",{staticClass:"content"},[i("span",[t._v("二级分类：")]),i("el-select",{model:{value:t.options.value,callback:function(e){t.$set(t.options,"value",e)},expression:"options.value"}},t._l(t.options.list,function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1),i("div",{staticClass:"content"},[i("el-button",{attrs:{type:"primary",plain:""},on:{click:t.submit}},[t._v("确定")])],1)],1):t._e()],1)},n=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},777:function(t,e,i){"use strict";i.r(e);var a=i(778),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,function(){return a[t]})}(s);e.default=n.a},778:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},n=i(293),s=(c(i(282)),function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(433))),r=c(i(1267)),o=i(49);function c(t){return t&&t.__esModule?t:{default:t}}e.default={components:{Detail:r.default},mixins:[n.main],data:function(){return{services:s,detailDialog:!1,detailDialoaType:"info",detailData:{},readOnly:!1,type:"info",options:[{name:"全部",value:""},{name:"使用中",value:"true"},{name:"未使用",value:"false"}],searchQuery:{}}},created:function(){},methods:a({close:function(){this.detailDialog=!1},saveok:function(t){this.detailData.id||(this.detailData=t),this.getList()},opneDetailDialog:function(t,e){this.detailDialog=!0,this.detailData=e},addQrcode:function(){this.detailDialog=!0,this.detailData={}},saveOk:function(t){this.detailData.id||(this.detailData=t),this.getList(),this.detailDialog=!1},setList:function(t){this.setSerieslist(t)},setPage:function(t){this.setSerieslistPage(t)}},(0,o.mapMutations)(["setSerieslist","setSerieslistPage"])),computed:a({},(0,o.mapState)({list:function(t){return t.series.list},page:function(t){return t.series.page}}))}},779:function(t,e,i){"use strict";i.r(e);var a=i(780),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,function(){return a[t]})}(s);e.default=n.a},780:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=u(i(15)),n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},s=i(103),r=u(i(781)),o=u(i(233)),c=u(i(235)),l=u(i(236));i(78);function u(t){return t&&t.__esModule?t:{default:t}}e.default={props:["detailData","readOnly","detailDialog","resAndUseVis","services"],data:function(){return{cateList:[],secondList:[],information:{},previewImgUrl:null,file:null,imgFile:null,type:"info"}},components:{Tree:r.default,ResAndUse:c.default,Using:o.default,Advertising:l.default},created:function(){this.services,this.detailData.id&&this.getDetail()},methods:{handleClick:function(t,e){this.type=t.name},getDetail:function(){var t=this;this.services.detail({id:this.detailData.id}).then(function(e){t.information=e.data,t.cateList=e.data.category_list,t.$refs.tree.data=e.data.category_list})},preview:function(t){var e=t.target.files[0];this.imgFile=e,this.previewImgUrl=URL.createObjectURL(e)},submitInfo:function(){var t,e=(t=a.default.mark(function t(){var e,i,r=this;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.$refs.cover.files[0],this.$refs.detailForm.valiAll()){t.next=4;break}return t.abrupt("return");case 4:if(i=this.$loading({text:"正在上传",background:"rgba(0, 0, 0, 0.8)"}),n({},this.information),!e){t.next=9;break}return t.next=9,(0,s.getTask)(e).then(function(t){r.information.img=t.data.path});case 9:return t.next=11,this.services.save(this.information).then(function(t){r.detailData.id||(r.information=t.data),r.$message.success("操作成功!"),r.$emit("saveok",t.data),i.close()}).catch(function(t){r.$message({message:t.message||"错误!",type:"error"})});case 11:i.close();case 12:case"end":return t.stop()}},t,this)}),function(){var e=t.apply(this,arguments);return new Promise(function(t,i){return function a(n,s){try{var r=e[n](s),o=r.value}catch(t){return void i(t)}if(!r.done)return Promise.resolve(o).then(function(t){a("next",t)},function(t){a("throw",t)});t(o)}("next")})});return function(){return e.apply(this,arguments)}}()}}},781:function(t,e,i){"use strict";i.r(e);var a=i(973),n=i(617);for(var s in n)"default"!==s&&function(t){i.d(e,t,function(){return n[t]})}(s);i(782);var r=i(0),o=Object(r.a)(n.default,a.a,a.b,!1,null,"5a7f30d1",null);e.default=o.exports},782:function(t,e,i){"use strict";var a=i(619);i.n(a).a},783:function(t,e,i){"use strict";var a=i(623);i.n(a).a},784:function(t,e,i){(function(t){var a=void 0!==t&&t||"undefined"!=typeof self&&self||window,n=Function.prototype.apply;function s(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new s(n.call(setTimeout,a,arguments),clearTimeout)},e.setInterval=function(){return new s(n.call(setInterval,a,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},s.prototype.unref=s.prototype.ref=function(){},s.prototype.close=function(){this._clearFn.call(a,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},i(785),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,i(5))},785:function(t,e,i){(function(t,e){!function(t,i){"use strict";if(!t.setImmediate){var a,n,s,r,o,c=1,l={},u=!1,d=t.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(t);f=f&&f.setTimeout?f:t,"[object process]"==={}.toString.call(t.process)?a=function(t){e.nextTick(function(){v(t)})}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,i=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=i,e}}()?t.MessageChannel?((s=new MessageChannel).port1.onmessage=function(t){v(t.data)},a=function(t){s.port2.postMessage(t)}):d&&"onreadystatechange"in d.createElement("script")?(n=d.documentElement,a=function(t){var e=d.createElement("script");e.onreadystatechange=function(){v(t),e.onreadystatechange=null,n.removeChild(e),e=null},n.appendChild(e)}):a=function(t){setTimeout(v,0,t)}:(r="setImmediate$"+Math.random()+"$",o=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(r)&&v(+e.data.slice(r.length))},t.addEventListener?t.addEventListener("message",o,!1):t.attachEvent("onmessage",o),a=function(e){t.postMessage(r+e,"*")}),f.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),i=0;i<e.length;i++)e[i]=arguments[i+1];var n={callback:t,args:e};return l[c]=n,a(c),c++},f.clearImmediate=p}function p(t){delete l[t]}function v(t){if(u)setTimeout(v,0,t);else{var e=l[t];if(e){u=!0;try{!function(t){var e=t.callback,a=t.args;switch(a.length){case 0:e();break;case 1:e(a[0]);break;case 2:e(a[0],a[1]);break;case 3:e(a[0],a[1],a[2]);break;default:e.apply(i,a)}}(e)}finally{p(t),u=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,i(5),i(105))},786:function(t,e,i){"use strict";var a=i(626);i.n(a).a},787:function(t,e,i){},788:function(t,e,i){},969:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"setting"},[i("div",{staticClass:"content"},[t._m(0),i("div",{staticClass:"list"},[t._l(t.list,function(e,a){return i("div",{staticClass:"item"},[i("div",{staticClass:"leftSide"},[i("span",[t._v(t._s(e.name))]),i("img",{staticClass:"thumb",attrs:{src:e.img_src}})]),i("div",{staticClass:"rightSide"},[i("el-form",{attrs:{inline:!0}},[i("div",{staticClass:"operation"},[i("div",{staticClass:"form-item"},[i("el-input",{staticClass:"input",attrs:{placeholder:"请输入新的URL地址"},model:{value:e.preview,callback:function(i){t.$set(e,"preview",i)},expression:"item.preview"}}),i("el-button",{attrs:{type:"danger",size:"mini",plain:""},on:{click:function(i){return t.del(e.id)}}},[t._v("删除")]),i("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(i){return t.detail(e)}}},[t._v("修改")])],1)])])],1)])}),i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.detail()}}},[t._v("添加广告")])],2),i("el-dialog",{staticClass:"dialog",attrs:{title:"请填写广告相关消息",width:"500px",visible:t.dialogVisible,"append-to-body":""},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-form",{ref:"form"},[i("el-form-item",{attrs:{label:"是否启用弹出式广告位:"}},[i("el-checkbox",{model:{value:t.currentItem.status,callback:function(e){t.$set(t.currentItem,"status",e)},expression:"currentItem.status"}},[t._v("启用弹出式广告位")])],1),i("el-form-item",{attrs:{label:"链接地址:"}},[i("el-input",{attrs:{placeholder:"请输入全路径"},model:{value:t.currentItem.preview,callback:function(e){t.$set(t.currentItem,"preview",e)},expression:"currentItem.preview"}})],1),t.currentItem.status?t._e():i("el-form-item",{attrs:{label:"选择分类："}},[i("div",{staticStyle:{display:"inline-block",width:"450px"}},[i("el-tree",{ref:"cateList",staticClass:"classfiyList",attrs:{id:"classfiyList",data:t.cateList,"node-key":"id","default-expand-all":"","expand-on-click-node":!1},scopedSlots:t._u([{key:"default",fn:function(e){e.node;var a=e.data;return i("div",{staticClass:"list custom-tree-node"},[i("span",[t._v(t._s(a.name))]),i("span",{staticClass:"checkbox"},[i("input",{ref:"cateList_ids",attrs:{type:"checkbox",name:"cateList_ids"},domProps:{value:a.id,checked:t.isChecked(a.id)},on:{click:function(e){return t.uncheckedAll(e,a)}}})])])}}],null,!1,2520865154)})],1)]),i("el-form-item",[i("img",{ref:"img",staticClass:"banner",attrs:{src:t.previewImgUrl||t.currentItem.img_src}}),i("input",{ref:"updateImg",staticClass:"updateImg",attrs:{type:"file",accept:"image/jpeg,image/png,image/jpg"},on:{change:function(e){return t.update(e,"img")}}}),i("el-button",{attrs:{type:"primary",size:"small",plain:""},on:{click:function(e){return t.$refs.updateImg.click()}}},[t._v("上传广告图")])],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.save("updateImg")}}},[t._v("确定")])],1)],1)],1)])},n=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"info"},[e("span",[this._v("5个广告位对应不同的位置,关闭后不显示")])])}];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},970:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"index clearfix"},[i("div",{staticClass:"maindata"},[i("div",{staticClass:"tableWrap"},[i("div",{staticClass:"tableTop"},[i("div",{staticClass:"title vel-line"},[i("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){return t.addRelation("1")}}},[t._v("新增资源")]),i("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){return t.addRelation("7")}}},[t._v("新增应用")])],1)]),i("table",{staticClass:"table"},[i("thead",[i("tr",[i("th",{staticClass:"table-check"},[i("input",{attrs:{type:"checkbox"},on:{click:function(e){return t.$checkAll(e)}}})]),i("th",[t._v("名称")]),i("th",[t._v("价格")]),i("th",[t._v("创建时间")]),i("th",{attrs:{width:"100"}},[t._v("分类")]),i("th",{attrs:{width:"100"}},[t._v("操作")])])]),t.list?i("tbody",t._l(t.list,function(e){return i("tr",[i("th",[i("input",{ref:"ids",refInFor:!0,attrs:{type:"checkbox",name:"ids"},domProps:{value:e.id}})]),i("th",[i("img",{staticClass:"cover-photo",attrs:{src:e.img_src}}),i("div",{staticClass:"th-name bookName",attrs:{title:e.name}},[t._v(t._s(e.name))])]),i("th",[i("div",{staticClass:"th-name"},[t._v(t._s(e.price))])]),i("th",[i("div",{staticClass:"th-name"},[t._v(t._s(e.create_time))])]),i("th",[i("div",{staticClass:"th-name"},[t._v(t._s(e.category_name))])]),i("th",[i("div",{staticClass:"btns"},[i("Icon",{attrs:{type:"icon-delete",title:"删除"},on:{click:function(i){return t.del(e.id,e)}}}),i("Icon",{attrs:{type:"el-icon-setting",title:"修改所属分类"},on:{click:function(i){return t.mofdifyCate(e)}}})],1)])])}),0):t._e()])])]),t.page?i("div",{staticClass:"pageWrap"},[i("el-pagination",{attrs:{small:!1,background:"","current-page":t.page.num,"page-sizes":[10,50,100],"page-size":t.page.offset,layout:"total, sizes,prev, pager, next, jumper",total:t.page.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),t.cateVis?i("el-dialog",{attrs:{center:!1,visible:t.cateVis,"close-on-click-modal":!1,width:"410px",title:"设置","append-to-body":""},on:{"update:visible":function(e){t.cateVis=e}}},[i("el-tree",{ref:"cateList",staticClass:"classfiyList",attrs:{id:"classfiyList",data:t.cateList,"node-key":"id","default-expand-all":"","expand-on-click-node":!1},scopedSlots:t._u([{key:"default",fn:function(e){e.node;var a=e.data;return i("div",{staticClass:"list custom-tree-node"},[i("span",[t._v(t._s(a.name))]),"0"!=a.pid?i("span",{staticClass:"checkbox"},[i("input",{ref:"cateList_ids",attrs:{type:"checkbox",name:"cateList_ids"},domProps:{value:a.id,checked:t.isChecked(a.id)},on:{click:function(e){return t.uncheckedAll(e,a)}}})]):t._e()])}}],null,!1,2116412786)}),i("div",{staticClass:"content",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:t.submitCate}},[t._v("确定")])],1)],1):t._e(),t.resourceDialog?i("Resource",{attrs:{detailData:t.detailData,resourceDialog:t.resourceDialog,curSoucesList:[],isShowType:!0,type:t.resourcesType},on:{"update:resourceDialog":function(e){t.resourceDialog=e},"update:resource-dialog":function(e){t.resourceDialog=e},select:t.addSelect}}):t._e()],1):t._e()])},n=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},973:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tree"},[t.detailDialog?i("el-dialog",{attrs:{width:"1000px",title:"详情",visible:t.detailDialog,"close-on-click-modal":!1,"close-on-press-escape":!1,"append-to-body":""},on:{"update:visible":function(e){t.detailDialog=e}}},[i("VaForm",{ref:"detailForm"},[i("form",{ref:"detailForm",staticClass:"detailForm"},[i("div",{staticClass:"group"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.currentDetail.abs,expression:"currentDetail.abs"}],staticClass:"textarea",attrs:{type:"text",maxlength:"300"},domProps:{value:t.currentDetail.abs},on:{input:function(e){e.target.composing||t.$set(t.currentDetail,"abs",e.target.value)}}})])])]),i("div",{staticClass:"btns",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"info"},on:{click:function(e){t.detailDialog=!1}}},[t._v("取消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.detailDialog=!1}}},[t._v("确定")])],1)],1):t._e(),i("div",{staticClass:"btn"},[i("el-button",{staticClass:"el-icon-plus",attrs:{type:"primary",plain:""},on:{click:function(e){return t.add()}}},[t._v("添加顶级")])],1),i("table",{ref:"table",staticClass:"table table1"},[t._m(0)]),i("el-tree",{ref:"tree",attrs:{data:t.data,"node-key":"id","default-expand-all":"",draggable:"","allow-drop":t.allowDrop,"allow-drag":t.allowDrag},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.node,n=e.data;return i("span",{staticClass:"custom-tree-node"},[i("input",{directives:[{name:"model",rawName:"v-model",value:n.name,expression:"data.name"}],staticClass:"form-control",domProps:{value:n.name},on:{input:function(e){e.target.composing||t.$set(n,"name",e.target.value)}}}),i("span",{staticClass:"options",staticStyle:{float:"right"}},[i("div",{staticClass:"icon el-icon-upload2",attrs:{title:"保存"},on:{click:function(e){return e.stopPropagation(),t.save(n,a)}}}),n.id?i("div",{staticClass:"icon el-icon-plus",attrs:{title:"添加"},on:{click:function(e){return e.stopPropagation(),t.append(n)}}}):t._e(),i("div",{staticClass:"icon icon-delete",attrs:{title:"删除"},on:{click:function(e){return e.stopPropagation(),t.remove(a,n)}}})]),"0"===n.pid?i("div",{staticClass:"time"},[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return e.stopPropagation(),t.uploadTreeFile(n,a)}}},[t._v("上传")]),i("img",{staticClass:"tree-img",attrs:{src:n.img_src}})],1):t._e()])}}])}),i("input",{ref:"treeImgInp",staticClass:"hide",attrs:{type:"file"},on:{change:t.treeImgInpChange}})],1)},n=[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",{staticStyle:{"padding-left":"80px"}},[this._v(" 名称")]),e("th",{attrs:{width:"200"}},[this._v(" 一级分类图")]),e("th",{staticClass:"options"},[this._v(" 操作")])])])}];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})}}]);