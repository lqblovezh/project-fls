(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{236:function(e,t,i){"use strict";i.r(t);var n=i(969),a=i(624);for(var s in a)"default"!==s&&function(e){i.d(t,e,function(){return a[e]})}(s);i(786);var r=i(0),c=Object(r.a)(a.default,n.a,n.b,!1,null,"cbce1782",null);t.default=c.exports},282:function(e,t){var i=/^(?:submit|button|image|reset|file)$/i,n=/^(?:input|select|textarea|keygen)/i,a=/(\[[^\[\]]*\])/g;function s(e,t,i){if(t.match(a)){!function e(t,i,n){if(0===i.length)return t=n;var a=i.shift(),s=a.match(/^\[(.+?)\]$/);if("[]"===a)return t=t||[],Array.isArray(t)?t.push(e(null,i,n)):(t._values=t._values||[],t._values.push(e(null,i,n))),t;if(s){var r=s[1],c=+r;isNaN(c)?(t=t||{})[r]=e(t[r],i,n):(t=t||[])[c]=e(t[c],i,n)}else t[a]=e(t[a],i,n);return t}(e,function(e){var t=[],i=new RegExp(a),n=/^([^\[\]]*)/.exec(e);for(n[1]&&t.push(n[1]);null!==(n=i.exec(e));)t.push(n[1]);return t}(t),i)}else{var n=e[t];n?(Array.isArray(n)||(e[t]=[n]),e[t].push(i)):e[t]=i}return e}function r(e,t,i){return i=i.replace(/(\r)?\n/g,"\r\n"),i=(i=encodeURIComponent(i)).replace(/%20/g,"+"),e+(e?"&":"")+encodeURIComponent(t)+"="+i}e.exports=function(e,t){"object"!=typeof t?t={hash:!!t}:void 0===t.hash&&(t.hash=!0);for(var a=t.hash?{}:"",c=t.serializer||(t.hash?s:r),o=e&&e.elements?e.elements:[],l=Object.create(null),u=0;u<o.length;++u){var d=o[u];if((t.disabled||!d.disabled)&&d.name&&n.test(d.nodeName)&&!i.test(d.type)){var f=d.name,m=d.value;if("checkbox"!==d.type&&"radio"!==d.type||d.checked||(m=void 0),t.empty){if("checkbox"!==d.type||d.checked||(m=""),"radio"===d.type&&(l[d.name]||d.checked?d.checked&&(l[d.name]=!0):l[d.name]=!1),void 0==m&&"radio"==d.type)continue}else if(!m)continue;if("select-multiple"!==d.type)a=c(a,f,m);else{m=[];for(var p=d.options,h=!1,v=0;v<p.length;++v){var g=p[v],y=t.empty&&!g.value,b=g.value||y;g.selected&&b&&(h=!0,a=t.hash&&"[]"!==f.slice(f.length-2)?c(a,f+"[]",g.value):c(a,f,g.value))}!h&&t.empty&&(a=c(a,f,""))}}}if(t.empty)for(var f in l)l[f]||(a=c(a,f,""));return a}},624:function(e,t,i){"use strict";i.r(t);var n=i(625),a=i.n(n);for(var s in n)"default"!==s&&function(e){i.d(t,e,function(){return n[e]})}(s);t.default=a.a},625:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(i(15)),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},s=i(293),r=(o(i(22)),o(i(282)),i(49)),c=(i(103),i(784));function o(e){return e&&e.__esModule?e:{default:e}}t.default={mixins:[s.main],props:["detailData","services","cateList"],created:function(){},data:function(){return{dialogVisible:!1,previewImgUrl:null,currentItem:{status:!1}}},mounted:function(){var e=this;(0,c.setTimeout)(function(){e.cateList},1e3)},methods:a({getList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.page&&this.page.num||1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.page&&this.page.offset||10;if(!this.detailData.id)return this.setList([]),void this.setPage({});this.services.getAdList({pageNum:t,pageOffset:i,special_id:this.detailData.id}).then(function(t){e.setList(t.data),e.setPage(t.page)})},del:function(e,t){var i=this;this.$confirm("你确定删除吗").then(function(t){i.services.delAd({id:e}).then(function(e){i.getList()}).catch(function(e){var t=e.payload;for(var n in t.messages){i.$message.error(t.messages[n]);break}})})},detail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{status:!1};if(!this.detailData.id)return this.$message.warning("请先保存专题详情!");this.currentItem,this.currentItem=e,this.dialogVisible=!0},save:function(){var e,t=(e=n.default.mark(function e(){var t,i,s,r=this;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.$refs.updateImg.files[0],i=this.$loading({text:"正在上传",background:"rgba(0, 0, 0, 0.8)"}),!t){e.next=8;break}return e.next=5,this.$globalUpdateFile(t);case 5:s=e.sent,this.currentItem.img_src=s.url,this.currentItem.img=s.path;case 8:return e.next=10,this.services.saveAdver(a({special_id:this.detailData.id},this.currentItem)).then(function(e){r.getList(),r.$message.success("操作成功")},function(e){i.close(),r.$message.error(e.message)});case 10:case"end":return e.stop()}},e,this)}),function(){var t=e.apply(this,arguments);return new Promise(function(e,i){return function n(a,s){try{var r=t[a](s),c=r.value}catch(e){return void i(e)}if(!r.done)return Promise.resolve(c).then(function(e){n("next",e)},function(e){n("throw",e)});e(c)}("next")})});return function(){return t.apply(this,arguments)}}(),update:function(e){var t=e.target.files[0];this.imgFile=t,this.previewImgUrl=URL.createObjectURL(t),this.previewImgUrl},setList:function(e){this.setAdlist(e)},setPage:function(e){this.setAdlistPage(e)},uncheckedAll:function(e,t){Array.from(document.querySelectorAll("input[name='cateList_ids']")).forEach(function(e){return e.checked=!1}),e.target.checked=!0,this.currentItem.category_id=t.id},isChecked:function(e){return e==this.currentItem.category_id}},(0,r.mapMutations)(["setAdlist","setAdlistPage"])),computed:a({},(0,r.mapState)({list:function(e){return e.ad.list},page:function(e){return e.ad.page}}))}},626:function(e,t,i){},784:function(e,t,i){(function(e){var n=void 0!==e&&e||"undefined"!=typeof self&&self||window,a=Function.prototype.apply;function s(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new s(a.call(setTimeout,n,arguments),clearTimeout)},t.setInterval=function(){return new s(a.call(setInterval,n,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},s.prototype.unref=s.prototype.ref=function(){},s.prototype.close=function(){this._clearFn.call(n,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},i(785),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,i(5))},785:function(e,t,i){(function(e,t){!function(e,i){"use strict";if(!e.setImmediate){var n,a,s,r,c,o=1,l={},u=!1,d=e.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(e);f=f&&f.setTimeout?f:e,"[object process]"==={}.toString.call(e.process)?n=function(e){t.nextTick(function(){p(e)})}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,i=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=i,t}}()?e.MessageChannel?((s=new MessageChannel).port1.onmessage=function(e){p(e.data)},n=function(e){s.port2.postMessage(e)}):d&&"onreadystatechange"in d.createElement("script")?(a=d.documentElement,n=function(e){var t=d.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,a.removeChild(t),t=null},a.appendChild(t)}):n=function(e){setTimeout(p,0,e)}:(r="setImmediate$"+Math.random()+"$",c=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(r)&&p(+t.data.slice(r.length))},e.addEventListener?e.addEventListener("message",c,!1):e.attachEvent("onmessage",c),n=function(t){e.postMessage(r+t,"*")}),f.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),i=0;i<t.length;i++)t[i]=arguments[i+1];var a={callback:e,args:t};return l[o]=a,n(o),o++},f.clearImmediate=m}function m(e){delete l[e]}function p(e){if(u)setTimeout(p,0,e);else{var t=l[e];if(t){u=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(i,n)}}(t)}finally{m(e),u=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,i(5),i(105))},786:function(e,t,i){"use strict";var n=i(626);i.n(n).a},969:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"setting"},[i("div",{staticClass:"content"},[e._m(0),i("div",{staticClass:"list"},[e._l(e.list,function(t,n){return i("div",{staticClass:"item"},[i("div",{staticClass:"leftSide"},[i("span",[e._v(e._s(t.name))]),i("img",{staticClass:"thumb",attrs:{src:t.img_src}})]),i("div",{staticClass:"rightSide"},[i("el-form",{attrs:{inline:!0}},[i("div",{staticClass:"operation"},[i("div",{staticClass:"form-item"},[i("el-input",{staticClass:"input",attrs:{placeholder:"请输入新的URL地址"},model:{value:t.preview,callback:function(i){e.$set(t,"preview",i)},expression:"item.preview"}}),i("el-button",{attrs:{type:"danger",size:"mini",plain:""},on:{click:function(i){return e.del(t.id)}}},[e._v("删除")]),i("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(i){return e.detail(t)}}},[e._v("修改")])],1)])])],1)])}),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.detail()}}},[e._v("添加广告")])],2),i("el-dialog",{staticClass:"dialog",attrs:{title:"请填写广告相关消息",width:"500px",visible:e.dialogVisible,"append-to-body":""},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("el-form",{ref:"form"},[i("el-form-item",{attrs:{label:"是否启用弹出式广告位:"}},[i("el-checkbox",{model:{value:e.currentItem.status,callback:function(t){e.$set(e.currentItem,"status",t)},expression:"currentItem.status"}},[e._v("启用弹出式广告位")])],1),i("el-form-item",{attrs:{label:"链接地址:"}},[i("el-input",{attrs:{placeholder:"请输入全路径"},model:{value:e.currentItem.preview,callback:function(t){e.$set(e.currentItem,"preview",t)},expression:"currentItem.preview"}})],1),e.currentItem.status?e._e():i("el-form-item",{attrs:{label:"选择分类："}},[i("div",{staticStyle:{display:"inline-block",width:"450px"}},[i("el-tree",{ref:"cateList",staticClass:"classfiyList",attrs:{id:"classfiyList",data:e.cateList,"node-key":"id","default-expand-all":"","expand-on-click-node":!1},scopedSlots:e._u([{key:"default",fn:function(t){t.node;var n=t.data;return i("div",{staticClass:"list custom-tree-node"},[i("span",[e._v(e._s(n.name))]),i("span",{staticClass:"checkbox"},[i("input",{ref:"cateList_ids",attrs:{type:"checkbox",name:"cateList_ids"},domProps:{value:n.id,checked:e.isChecked(n.id)},on:{click:function(t){return e.uncheckedAll(t,n)}}})])])}}],null,!1,2520865154)})],1)]),i("el-form-item",[i("img",{ref:"img",staticClass:"banner",attrs:{src:e.previewImgUrl||e.currentItem.img_src}}),i("input",{ref:"updateImg",staticClass:"updateImg",attrs:{type:"file",accept:"image/jpeg,image/png,image/jpg"},on:{change:function(t){return e.update(t,"img")}}}),i("el-button",{attrs:{type:"primary",size:"small",plain:""},on:{click:function(t){return e.$refs.updateImg.click()}}},[e._v("上传广告图")])],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.save("updateImg")}}},[e._v("确定")])],1)],1)],1)])},a=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"info"},[t("span",[this._v("5个广告位对应不同的位置,关闭后不显示")])])}];i.d(t,"a",function(){return n}),i.d(t,"b",function(){return a})}}]);