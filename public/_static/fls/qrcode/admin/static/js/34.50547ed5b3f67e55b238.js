(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{1599:function(t,e,a){"use strict";a.r(e);var i=a(1711),n=a(875);for(var s in n)"default"!==s&&function(t){a.d(e,t,function(){return n[t]})}(s);a(1600);var r=a(0),o=Object(r.a)(n.default,i.a,i.b,!1,null,"0153f1a4",null);e.default=o.exports},1600:function(t,e,a){"use strict";var i=a(877);a.n(i).a},1601:function(t,e,a){"use strict";var i=a(878);a.n(i).a},1678:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"index clearfix"},[a("div",{staticClass:"mainRight"},[a("div",{staticClass:"contentWrap"},[a("div",{staticClass:"contentLeft"},[a("div",{staticClass:"maindata"},[a("div",{staticClass:"serachWrap"},[a("div",{staticClass:"title"}),a("form",{staticClass:"clearfix",attrs:{id:"mainForm"}},[a("span",{staticClass:"group-inline"},[a("el-input",{attrs:{placeholder:"名称",name:"name",clearable:""},model:{value:t.searchQuery.name,callback:function(e){t.$set(t.searchQuery,"name",e)},expression:"searchQuery.name"}})],1),a("span",{staticClass:"group-inline"},[a("TimePick",{attrs:{inputsName:["start_time","end_time"]}})],1),a("span",{staticClass:"group-inline float-right"},[a("el-button",{attrs:{size:"mediu",type:"primary",icon:"el-icon-plus",plain:""},on:{click:t.addBooks}},[t._v("新建")]),a("el-button",{attrs:{size:"mediu",type:"primary",icon:"el-icon-search",plain:""},on:{click:t.query}},[t._v("搜索")])],1)])]),a("div",{staticClass:"tableWrap"},[a("div",{staticClass:"tableTop"},[a("div",{staticClass:"title vel-line"},[a("span",[t._v("全部 "),t.page?a("span",{staticClass:"totalNum"},[t._v("("+t._s(t.page.total)+")")]):t._e()]),a("div",{staticClass:"btns"},[a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){return t.educe("")}}},[t._v("导出")]),a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){return t.delChoosen(!1)}}},[t._v("删除")])],1)])]),a("table",{staticClass:"table"},[a("thead",[a("tr",[a("th",{staticClass:"table-check"},[a("input",{attrs:{type:"checkbox"},on:{click:function(e){return t.$checkAll(e)}}})]),a("th",[t._v("名称")]),a("th",[t._v("简介")]),a("th",[t._v("创建时间")]),a("th",{attrs:{width:"150"}},[t._v("二维码数量")]),a("th",{attrs:{width:"80"}},[t._v("操作")])])]),t.list?a("tbody",t._l(t.list,function(e){return a("tr",[a("th",[a("input",{ref:"ids",refInFor:!0,attrs:{type:"checkbox",name:"ids"},domProps:{value:e.id}})]),a("th",[a("img",{staticClass:"cover-photo",attrs:{src:e.img_src}}),a("div",{staticClass:"th-name bookName",attrs:{title:e.name}},[t._v(t._s(e.name))])]),a("th",[a("div",{staticClass:"th-name",attrs:{title:e.name}},[t._v(t._s(e.abs))])]),a("th",[a("div",{staticClass:"th-name"},[t._v(t._s(e.create_time))])]),a("th",[a("div",{staticClass:"th-name"},[t._v(t._s(e.qrcode_num))])]),a("th",[a("div",{staticClass:"btns"},[a("Icon",{attrs:{type:"icon-detail",title:"详情"},on:{click:function(a){return t.opneDetailDialog("info",e)}}}),a("Icon",{attrs:{type:"icon-delete",title:"删除"},on:{click:function(a){return t.delChoosen(e.id,e)}}}),a("Icon",{attrs:{type:"icon-export",title:"导出"},on:{click:function(a){return t.educe([e.id])}}})],1)])])}),0):t._e()]),t.page?a("div",{staticClass:"pageWrap"},[a("el-pagination",{attrs:{small:!1,background:"","current-page":t.page.num,"page-sizes":[10,50,100],"page-size":t.page.offset,layout:"total, sizes,prev, pager, next, jumper",total:t.page.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1):t._e()])])])])]),a("div",{staticClass:"dialogs"},[a("el-dialog",{attrs:{center:!1,visible:t.detailDialog,"close-on-click-modal":!1,top:"50px",width:"1000px",title:"详情"},on:{"update:visible":function(e){t.detailDialog=e}}},[a("div",{staticClass:"content",attrs:{slot:"title"},slot:"title"},[t.detailDialog?a("Detail",{attrs:{detailDialog:t.detailDialog,readOnly:t.readOnly,detailData:t.detailData},on:{"update:detailDialog":function(e){t.detailDialog=e},"update:detail-dialog":function(e){t.detailDialog=e},close:t.close,saveok:t.saveok}}):t._e()],1)])],1)])},n=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n})},1711:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"div"},[t.resourceDialog?a("Resource",{attrs:{type:"6",resourceDialog:t.resourceDialog,curSoucesList:t.chooseArray,isShowType:!1,parameter:t.parameter},on:{"update:resourceDialog":function(e){t.resourceDialog=e},"update:resource-dialog":function(e){t.resourceDialog=e},select:t.addSelcet}}):t._e(),a("VaForm",{ref:"detailForm"},[a("form",{ref:"detailForm",staticClass:"detailForm"},[a("fieldset",{attrs:{disabled:t.readOnly}},[a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("*名称:")]),a("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"},{name:"model",rawName:"v-model",value:t.information.name,expression:"information.name"}],staticClass:"form-control",attrs:{type:"text",maxlength:"20",disabled:t.readOnly},domProps:{value:t.information.name},on:{input:function(e){e.target.composing||t.$set(t.information,"name",e.target.value)}}})]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("*简介:")]),a("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"},{name:"model",rawName:"v-model",value:t.information.abs,expression:"information.abs"}],staticClass:"form-control",attrs:{type:"text",maxlength:"20",disabled:t.readOnly},domProps:{value:t.information.abs},on:{input:function(e){e.target.composing||t.$set(t.information,"abs",e.target.value)}}})]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("isbn:")]),a("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"},{name:"model",rawName:"v-model",value:t.information.isbn,expression:"information.isbn"}],staticClass:"form-control",attrs:{type:"text",maxlength:"20"},domProps:{value:t.information.isbn},on:{input:function(e){e.target.composing||t.$set(t.information,"isbn",e.target.value)}}})]),a("div",{staticClass:"using"},[a("div",{staticClass:"name"},[t._v("拥有二维码")]),a("el-button",{staticClass:"add",attrs:{type:"primary",plain:"",size:"mini"},on:{click:t.add}},[t._v("添加")]),a("table",{staticClass:"table"},[a("thead",[a("tr",[a("th",[t._v("二维码名称")]),a("th",[t._v("二维码简介")]),a("th",[t._v("创建时间")]),a("th",[t._v("操作")])])]),a("tbody",t._l(t.information.qrcode_info,function(e){return a("tr",[a("td",[t._v(t._s(e.name))]),a("td",[t._v(t._s(e.abs))]),a("td",[t._v(t._s(e.create_time))]),a("td",[a("div",{staticClass:"btns"},[a("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(a){return t.delQrcode(e.id)}}},[t._v("删除")])],1)])])}),0)])],1)])]),t.readOnly?t._e():a("div",{staticClass:"btn"},[a("el-button",{attrs:{type:"info"},on:{click:function(e){return t.$emit("close")}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitInfo("detailForm")}}},[t._v("确定")])],1)])],1)},n=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n})},259:function(t,e,a){"use strict";a.r(e);var i=a(1678),n=a(873);for(var s in n)"default"!==s&&function(t){a.d(e,t,function(){return n[t]})}(s);a(1601);var r=a(0),o=Object(r.a)(n.default,i.a,i.b,!1,null,"723f61ca",null);e.default=o.exports},873:function(t,e,a){"use strict";a.r(e);var i=a(874),n=a.n(i);for(var s in i)"default"!==s&&function(t){a.d(e,t,function(){return i[t]})}(s);e.default=n.a},874:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},n=a(293),s=(l(a(282)),function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}(a(666))),r=l(a(1599)),o=a(49);function l(t){return t&&t.__esModule?t:{default:t}}e.default={components:{Detail:r.default},mixins:[n.main],data:function(){return{services:s,detailDialog:!1,detailDialoaType:"info",detailData:null,readOnly:!1,searchQuery:{}}},methods:i({getList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.page&&this.page.num||1,e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.page&&this.page.offset||10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.services.booksList(i({pageNum:t,pageOffset:a},n)).then(function(t){e.setList(t.data),e.setPage(t.page)})},opneDetailDialog:function(t,e){this.detailDialog=!0,this.detailData=e},educe:function(t){var e=this,a=null;(a=t||this.$getChecked())&&s.educe({id:a}).then(function(t){e.$message.success("任务创建成功，请前往'导入导出列表'页查看进度！")}).catch(function(t){e.$message.error("导出失败")})},addBooks:function(){this.detailDialog=!0,this.detailData={}},close:function(){this.detailDialog=!1},setList:function(t){this.setSerieslist(t)},setPage:function(t){this.setSerieslistPage(t)},saveok:function(t){this.detailData.id||(this.detailData=t),this.getList()}},(0,o.mapMutations)(["setSerieslist","setSerieslistPage"])),computed:i({},(0,o.mapState)({list:function(t){return t.series.list},page:function(t){return t.series.page}}))}},875:function(t,e,a){"use strict";a.r(e);var i=a(876),n=a.n(i);for(var s in i)"default"!==s&&function(t){a.d(e,t,function(){return i[t]})}(s);e.default=n.a},876:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(a(15)),n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},s=(o(a(282)),a(103),function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}(a(666))),r=o(a(284));function o(t){return t&&t.__esModule?t:{default:t}}e.default={props:["detailData","readOnly","detailDialog"],components:{Resource:r.default},created:function(){this.detailData.id&&this.getDetail()},data:function(){return{information:{},checkAll:!1,resourceDialog:!1,chooseArray:[],parameter:{status:!1}}},methods:{getDetail:function(){var t=this;s.detail({id:this.detailData.id}).then(function(e){t.information=e.data,t.information.qrcode_info=e.data.qrcode_info,t.chooseArray=[].concat(function(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}(e.data.qrcode_info))})},add:function(){this.resourceDialog=!0},delQrcode:function(t){var e=this;s.delQrcode({id:t}).then(function(t){e.getDetail()})},addSelcet:function(t){var e=this;if(!this.detailData.id)return this.$message.warning("请先保存");s.addQrcode({books_id:this.detailData.id,constitute:t}).then(function(t){e.getDetail(),e.resourceDialog=!1},function(t){e.$message.error(t.message)})},submitInfo:function(){var t,e=(t=i.default.mark(function t(){var e,a=this;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=n({},this.information),t.next=3,s.save(e).then(function(t){a.detailData.id||(a.information=t.data),a.$message.success("操作成功!"),a.$emit("saveok",t.data)}).catch(function(t){a.$message({message:t.message||"错误!",type:"error"})});case 3:case"end":return t.stop()}},t,this)}),function(){var e=t.apply(this,arguments);return new Promise(function(t,a){return function i(n,s){try{var r=e[n](s),o=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(o).then(function(t){i("next",t)},function(t){i("throw",t)});t(o)}("next")})});return function(){return e.apply(this,arguments)}}()}}},877:function(t,e,a){},878:function(t,e,a){}}]);