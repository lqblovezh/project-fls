(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{1605:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getIconStyle=t.publicMixin=t.detailVideo=t.main=void 0;var s=c(i(15)),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},r=c(i(282)),n=i(79),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(i(1606)),u=i(103);function c(e){return e&&e.__esModule?e:{default:e}}function l(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,i){return function s(a,r){try{var n=t[a](r),o=n.value}catch(e){return void i(e)}if(!n.done)return Promise.resolve(o).then(function(e){s("next",e)},function(e){s("throw",e)});e(o)}("next")})}}var h={mounted:function(){var e=l(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.getGroupList(),this.$route.query.id&&(this.currGroup=this.$route.query.id),"function"==typeof this.getList&&this.getList();case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),beforeRouteUpdate:function(e,t,i){this.currGroup=e.query.id;var s=(0,r.default)(document.querySelector("#mainForm"),{hash:!0});void 0!==this.getList&&this.getList(1,this.page.offset,s),this.uncheckedAll(),i()},data:function(){return{currGroup:"",examineDialog:!1,currExamineID:null,readOnly:!1,linkDialogObj:{img_src:""}}},methods:{query:function(){var e=(0,r.default)(document.querySelector("#mainForm"),{hash:!0});"undefined"!==this.getList&&this.getList(1,this.page.offset,e)},getGroupList:function(){var e=this;"function"==typeof this.services.listGroup&&this.services.listGroup({product_type:this.product_type}).then(function(t){e.groupList=t.data})},groupChange:function(e){this.$router.push({path:this.$route.path,query:{id:e}})},addGroup:function(e){var t=this;this.services.addGroup(a({},(0,r.default)(e,{hash:!0}),{product_type:this.product_type})).then(function(e){t.getGroupList()})},updateGroup:function(e){var t=this;log((0,r.default)(e,{hash:!0})),this.services.modifyGroup((0,r.default)(e,{hash:!0})).then(function(e){t.getGroupList()}).catch(function(e){var i=e.payload;for(var s in i.messages){t.$message.error(i.messages[s]);break}})},uncheckedAll:function(){(this.$refs.ids||[]).forEach(function(e){return e.checked=!1});var e=document.querySelector(".allBtn input ");e&&(e.checked=!1)},importSomething:function(){this.$refs.upload.init(),this.uploadDialog=!0},importFiles:function(e){var t=this;this.services.putin&&this.services.putin(e).then(function(e){"function"==typeof t.getList&&setTimeout(function(){t.uploadDialog=!1,t.$message.success("导入成功"),t.getList()},2e3)}).catch(function(e){t.$message.error("导入失败")})},exportSomething:function(){var e=this,t=(0,r.default)(document.querySelector("#mainForm"),{hash:!0}),i=this.getChecked();i&&(t.id=i,this.services.educe(t).then(function(t){e.$message.success("任务创建成功，请前往'导入导出列表'页查看进度！")}).catch(function(t){e.$message.error("导出失败!")}))},exportSomething2:function(){var e=this,t=(0,r.default)(document.querySelector("#mainForm"),{hash:!0}),i=this.getChecked2();i&&(t.id=i,this.services.educe(t).then(function(t){e.$message.success("任务创建成功，请前往'导入导出列表'页查看进度！")}).catch(function(t){e.$message.error("导出失败!")})),this.services.educe(t).then(function(t){e.$message.success("任务创建成功，请前往'导入导出列表'页查看进度！")}).catch(function(t){e.$message.error("导出失败!")})},fileExport:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;(0,n.fileExport)({id:e}).then(function(s){var a=s.data,r=a.zip_status,n=a.url;if(log(r,n),i>100)return log("请求次数太多,暂停循环");r?t.fileExport(e,i+1):location.href=n}).catch(function(e){t.$message.error("导出失败!")})},delGroup:function(e){var t=this;log("删除分组",e),(0,n.groupsDelete)({id:[e]}).then(function(i){e===t.currGroup&&t.$router.push({path:t.$route.path,query:{id:"non"}}),t.getGroupList()})},handleSizeChange:function(e){this.uncheckedAll(),void 0!==this.getList&&(this.page.num=1,this.getList(1,e))},handleCurrentChange:function(e){if(this.uncheckedAll(),e!==this.page.nun){var t=(0,r.default)(document.querySelector("#mainForm"),{hash:!0});void 0!==this.getList&&this.getList(e,this.page.offset,t)}},checkAll:function(e){var t=e.target;Array.from(document.querySelectorAll('input[name="ids"]')).forEach(function(e,i){e.checked=t.checked})},moveToOther:function(e){var t=this.getChecked();this.moveIds=t,t&&(this.moveToOtherDiaolog=!0)},detailBack:function(e){this.detailDialog=!1,void 0!==e&&e&&this.$refs.child_msg.showMsgDialog(),this.getGroupList(),this.query()},moveToSubmit:function(e){var t=this;if(this.moveIds){this.currGroup,this.$refs.moveToId.value,this.moveIds;log(this.currGroup,this.moveIds),this.services.moveGroup({old_group_id:this.currGroup,new_group_id:this.$refs.moveToId.value,id:this.moveIds}).then(function(e){t.moveToOtherDiaolog=!1,void 0!==t.getList&&t.getList(),t.getGroupList()})}},copyLink:function(e){try{document.querySelector("#"+e).select();document.execCommand("copy"),this.$message.success("复制成功!")}catch(e){this.$message.error("请使用ctrl+c 实现复制")}},getChecked:function(){var e=[],t=Array.from(document.querySelectorAll('input[name="ids"]:checked'));return t.forEach(function(t){e.push(t.value)}),t.length?e:(this.$message.error("请先选中!"),!1)},getChecked2:function(){var e=[],t=Array.from(document.querySelectorAll('input[name="ids"]:checked'));return t.forEach(function(t){e.push(t.value)}),!!t.length&&e},opneImgLinkDialog:function(e){var t=this;this.imgLinkDialog=!0,(0,u.commonPreviewCode)({entity_type:e.type,entity:e}).then(function(e){log(e),t.linkDialogObj.img_src=e.data.qr_url,t.linkDialogObj.link=e.data.preview_url}).catch(function(e){throw e})},delChoosen:function(){var e=l(s.default.mark(function e(t){var i,a,n=this;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=[],t){e.next=9;break}if((a=Array.from(document.querySelectorAll('input[name="ids"]:checked'))).forEach(function(e){i.push(e.value)}),a.length){e.next=7;break}return this.$message.error("请先选中!"),e.abrupt("return");case 7:e.next=10;break;case 9:i.push(t);case 10:i.length>0&&this.$confirm("是否删除?").then(function(e){(n.services.del?n.services.del:n.del)({id:i}).then(function(e){var t=(0,r.default)(document.querySelector("#mainForm"),{hash:!0}),s=n.page,a=s.total,o=s.start,u=s.num;a-i.length==o&&(n.page.num=o?u-1:1),void 0!==n.getList&&n.getList(n.page.num,n.page.offset,t),n.getGroupList()})}).catch(function(e){});case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),dispenseOk:function(){this.getList(),this.publishDialog=!1},audits:function(e){var t=[];if(e)t.push(e);else if(!(t=this.$getChecked({data:this.list,name:"audits_status",value:"1",error:"批量审核不可以包含待审核的产品!"})))return;this.currExamineID=t,this.examineDialog=!0},auditsPass:function(e){var t=[];if(e)t.push(e);else if(!(t=this.$getChecked({data:this.list,name:"audits_status",value:"1",error:"批量审核不可以包含待审核的产品!"})))return;this.saveExamine("创建新版本",t)},getColor:function(e){switch(e){case"未审核":return"notPush";case"已通过":return"pushed";case"待审核":return"pushing";case"未通过":return"noPush"}},opneDetailDialog:function(e,t){this.readOnly=!(!t||1!=t.audits_status),this.detailData=t||{},this.detailDialoaType=e,this.resourceDate=null,this.detailType=t&&t.type,this.detailDialog=!0},saveExamine:function(e,t){var i=this;this.services.audits({id:t||this.currExamineID,purpose:e}).then(function(e){i.examineDialog=!1,i.getList(),i.$message.success("提交审核成功")},function(e){var t=e.payload;if(t)for(var s in t.errors){i.$message.error(t.errors[s]);break}})},opnePublishDialog:function(e){this.detailData=e,this.publishDialog=!0},urgentDigital:function(){for(var e=this,t=this.getChecked(),i=0,s=t.length;i<s;i++)for(var a=0,r=this.list.length;a<r;a++)if(this.list[a].id==t[i]&&1!=this.list[a].audits_status)return void this.$message.error("只能勾选待审核数据");t&&this.services.urgentDigital({id:t}).then(function(t){return e.$message.success("已提交加急审核")})}}},d={data:function(){return{isDefaultCover:!1}},methods:{handleClick:function(e,t){},addMetadata:function(){this.metadata.push({key:"",value:""})},delMetadata:function(e){this.metadata.splice(e,1)},previewImg:function(e){var t=e.target;this.coverFile=t.files[0],this.previewImgUrl=URL.createObjectURL(this.coverFile)},otherFile:function(){var e=this.$refs.otherImgInput.value;if(e){var t=e.split("?")[0].substr(e.lastIndexOf(".")+1);this.previewOtherFileUrl=e,this.fileMsg.format=t}},previewMedia:function(e){var t=this,i=e.target.files[0];this.mediaFile=i,i&&i.size>3221225472e3?this.$message.errot("文件过大!请小于3G"):(this.detailDataOwn.size=i.size,this.detailDataOwn.format=i.name.substr(i.name.lastIndexOf(".")+1),this.previewMediaUrl=URL.createObjectURL(i),setTimeout(function(){var e=t.$refs.media;t.detailDataOwn.length=e.duration,log(e.duration)},1e3))},hasFile:function(){this.detailDataOwn.img_status},setDefaultCover:function(){var e=this;log("设置默认封面"),(0,u.getDefaultCover)().then(function(t){e.previewImgUrl=t.data.url,e.$set(e.detailDataOwn,"img",t.data.path),e.isDefaultCover=!0})},submitDetail:function(){var e=l(s.default.mark(function e(t){var i,r,n,o,c,l,h=this;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(log("提交"),this.$refs.detailFormVali.valiAll()){e.next=4;break}return e.abrupt("return");case 4:if(i=null,e.prev=5,"wailian"!==this.detailType){e.next=29;break}if(r=this.$loading({text:"正在上传",background:"rgba(0, 0, 0, 0.8)"}),log("外"),n=this.previewOtherFileUrl,this.detailDataOwn.preview=n,i=this.fileMsg,!this.coverFile){e.next=17;break}return e.next=15,(0,u.getTask)(this.coverFile).then(function(e){h.detailDataOwn.img=e.data.path}).catch(function(e){h.$message.error("图片上传失败!")});case 15:e.next=18;break;case 17:this.isDefaultCover||(this.detailDataOwn.img=null);case 18:if(o=a({},this.detailDataOwn,i),!this.detailDataOwn.id){e.next=24;break}return e.next=22,this.services.modify(o).then(function(e){h.$emit("detailBack")});case 22:e.next=26;break;case 24:return e.next=26,this.services.add(o).then(function(e){h.$emit("detailBack")});case 26:this.$nextTick(function(e){r.close()}),e.next=65;break;case 29:if(log("本地"),e.prev=30,!this.mediaFile){e.next=36;break}return e.next=34,(0,u.getTask)(this.mediaFile,{is_chunk:!0,size:1048576},function(e){h.percentage=e}).then(function(e){h.detailDataOwn.preview=e.data.path});case 34:e.next=42;break;case 36:if(!this.detailDataOwn.preview){e.next=40;break}this.detailDataOwn.preview=null,e.next=42;break;case 40:return this.$message.error("请导入文件!"),e.abrupt("return");case 42:if(!this.coverFile){e.next=47;break}return e.next=45,(0,u.getTask)(this.coverFile).then(function(e){h.detailDataOwn.img=e.data.path});case 45:e.next=48;break;case 47:this.isDefaultCover||(this.detailDataOwn.img=null);case 48:e.next=55;break;case 50:return e.prev=50,e.t0=e.catch(30),this.$message.error("媒体文件上传失败!"),this.percentage=0,e.abrupt("return");case 55:if(log("this.detailDataOwn",this.detailDataOwn),!this.detailDataOwn.id){e.next=62;break}return log("==== 详情 ===="),e.next=60,this.services.modify(this.detailDataOwn).then(function(e){h.$emit("detailBack")});case 60:e.next=64;break;case 62:return e.next=64,this.services.add(this.detailDataOwn).then(function(e){h.$emit("detailBack")});case 64:this.percentage=0;case 65:e.next=78;break;case 67:if(e.prev=67,e.t1=e.catch(5),!(c=e.t1.payload)){e.next=78;break}e.t2=s.default.keys(c.messages);case 72:if((e.t3=e.t2()).done){e.next=78;break}return l=e.t3.value,this.$message.error(c.messages[l]),e.abrupt("break",78);case 78:case"end":return e.stop()}},e,this,[[5,67],[30,50]])}));return function(t){return e.apply(this,arguments)}}()}},f={created:function(){this.detailData&&this.detailData.id&&(this.detailReadOnly=!0)},data:function(){return{detailReadOnly:!1}},methods:{getStyle:function(e){return"xRead"==e?"xRead":"weChat"==e?"weChat":"sina"==e?"sina":"eCommerce"==e?"eCommerce":"xTeach"==e?"xTeach":"xLibrary"==e?"xLibrary":"xQrcode"==e?"xQrcode":void 0},showDetail:function(e,t,i){var s=this;if(2!=e.type){this.item=e;var a=e.id,r=e.summary,n=e.type_name,u=e.product_id,c=e.products_id;this.detailValue=i||"info",this.detailData.id=a,o.getDetail({id:u||c,type_name:n}).then(function(t){s.detailData=t.data||{},s.productType=e.type,s.detailType=r,s.detailVisible=!0}).catch(function(e){var t=e.payload;for(var i in t.messages){s.$message.error(t.messages[i]);break}})}else this.$router.push({path:"/contentLibrary/article/editor",query:{articleId:e.entity_id||e.foreign_id,from:"push",hide:"true",index:this.$route.path}})}}},p={created:function(){var e=l(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"===this.getList){e.next=3;break}return e.next=3,this.getList();case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),methods:{handleNavClick:function(e){this.$router.push({path:"/"+this.path+"/"+e.name})},seareHandeler:function(){this.query=(0,r.default)(document.querySelector("#mainForm"),{hash:!0}),this.getList(1,10,this.query)},handleSizeChange:function(e){this.page.num=1,this.getList(1,e,this.query)},handleCurrentChange:function(e){e!==this.page.num&&this.getList(e,this.page.offset,this.query)},selcetAll:function(e){Array.from(document.querySelectorAll("[name='checkbox']")).forEach(function(t){t.checked=e.target.checked})},handleClose:function(){this.$refs.detailDialog.resetFields(),this.detailVisible=!1}}};t.main=h,t.detailVideo=d,t.publicMixin=p,t.getIconStyle=f},1606:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMetadatas=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,i=function(e,t){var i={};for(var s in e)t.indexOf(s)>=0||Object.prototype.hasOwnProperty.call(e,s)&&(i[s]=e[s]);return i}(e,["id"]),s=n.default.compile(restUrl_publish+"/api/releases/metadata/:id");return(0,a.request_get)(s({id:t}),i)},t.getDetail=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.default.compile(restUrl_publish+"/api/releases/product/:id");return(0,a.request_get)(t(e))},t.getList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.default.compile(restUrl_publish+"/api/releases/:id");return(0,a.request_get)(t(e),e)},t.getDispense=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)(restUrl_publish+"/api/platforms",e)},t.getOverview=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_get)(restUrl_publish+"/api/releases/basic",e)},t.dispense=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.request_post)(restUrl_publish+"/api/common/issuance",e).then(function(t){return log(t,888),(0,o.suance)({id:e.audits_id,info:t.data}),t})};var s,a=i(16),r=i(21),n=(s=r)&&s.__esModule?s:{default:s},o=i(77)},1607:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getList=function(e){return(0,a.request_get)("/api/system/export",e)},t.delTask=function(e){return(0,a.request_post)("/api/system/tasks_delete",e)};var s,a=i(16),r=i(21);(s=r)&&s.__esModule},1608:function(e,t,i){"use strict";var s=i(887);i.n(s).a},1676:function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"indexs clearfix"},[i("div",{staticClass:"mainRight"},[i("div",{staticClass:"contentWrap"},[i("div",{staticClass:"maindata"},[i("div",{staticClass:"tableWrap"},[i("div",{staticClass:"tableTop"},[i("div",{staticClass:"title vel-line"},[i("span",[e._v("状态")]),i("span",{staticClass:"group-inline"},[i("el-select",{attrs:{name:"type"},on:{change:e.selectChange},model:{value:e.options.value,callback:function(t){e.$set(e.options,"value",t)},expression:"options.value"}},e._l(e.options.list,function(e){return i("el-option",{key:e.label,attrs:{value:e.value}})}),1)],1)])]),i("table",{staticClass:"table aProgress"},[e._m(0),e.list?i("tbody",e._l(e.list,function(t){return i("tr",{attrs:{"data-id":t._id}},[i("th",[e._v(e._s(t.info.res_total))]),i("th",[i("div",{staticClass:"th-name"},[e._v(e._s(t.create_time))])]),"success"==t.status?i("th",[i("el-progress",{staticClass:"tProgress",attrs:{percentage:parseInt(100),status:"success"}})],1):"failed"==t.status?i("th",[i("el-progress",{staticClass:"tProgress",attrs:{percentage:parseInt(0),status:"exception"}})],1):"sleep"==t.status&&void 0!==t.info.speed?i("th",[i("el-progress",{staticClass:"tProgress",attrs:{percentage:t.info.speed<=100?parseInt(t.info.speed):parseInt(0)}})],1):i("th",[i("el-progress",{staticClass:"tProgress",attrs:{percentage:parseInt(0)}})],1),"failed"==t.status&&"import"==e.name?i("th",[e._v(e._s(e.type[t.status])+"("+e._s(t.info.speed)+")")]):"import"==e.name?i("th",[e._v(e._s(e.type[t.status])+"("+e._s(t.info.data)+")")]):i("th",[e._v(e._s(e.type[t.status]))]),"export"==t.type?i("th",[e._v("导出")]):i("th",[e._v("导入")]),i("th",[e._v(e._s(e._f("formatSize")(t.info.zip_size)))]),i("th",[i("div",{staticClass:"btns"},["success"==t.status&&"export"==t.type?i("a",{staticClass:"download-btn",attrs:{href:t.info.url_zip,download:"files"}},[i("span",[e._v("下载")])]):e._e(),i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(i){return e.delTask([t.id])}}},[e._v("删除")])],1)])])}),0):e._e()])]),e.page?i("div",{staticClass:"pageWrap"},[i("el-pagination",{attrs:{small:!1,background:"","current-page":e.page.num,"page-sizes":[10,50,100],"page-size":e.page.offset,layout:"total,sizes ,prev, pager, next, jumper",total:e.page.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1):e._e()])])])])},a=[function(){var e=this.$createElement,t=this._self._c||e;return t("thead",[t("tr",[t("th",[this._v("名称")]),t("th",{staticClass:"time"},[this._v("任务创建时间")]),t("th",[this._v("进度")]),t("th",[this._v("状态")]),t("th",[this._v("类型")]),t("th",[this._v("文件大小")]),t("th",{staticClass:"operate"},[this._v("操作")])])])}];i.d(t,"a",function(){return s}),i.d(t,"b",function(){return a})},261:function(e,t,i){"use strict";i.r(t);var s=i(1676),a=i(885);for(var r in a)"default"!==r&&function(e){i.d(t,e,function(){return a[e]})}(r);i(1608);var n=i(0),o=Object(n.a)(a.default,s.a,s.b,!1,null,"0d4fe788",null);t.default=o.exports},282:function(e,t){var i=/^(?:submit|button|image|reset|file)$/i,s=/^(?:input|select|textarea|keygen)/i,a=/(\[[^\[\]]*\])/g;function r(e,t,i){if(t.match(a)){!function e(t,i,s){if(0===i.length)return t=s;var a=i.shift(),r=a.match(/^\[(.+?)\]$/);if("[]"===a)return t=t||[],Array.isArray(t)?t.push(e(null,i,s)):(t._values=t._values||[],t._values.push(e(null,i,s))),t;if(r){var n=r[1],o=+n;isNaN(o)?(t=t||{})[n]=e(t[n],i,s):(t=t||[])[o]=e(t[o],i,s)}else t[a]=e(t[a],i,s);return t}(e,function(e){var t=[],i=new RegExp(a),s=/^([^\[\]]*)/.exec(e);for(s[1]&&t.push(s[1]);null!==(s=i.exec(e));)t.push(s[1]);return t}(t),i)}else{var s=e[t];s?(Array.isArray(s)||(e[t]=[s]),e[t].push(i)):e[t]=i}return e}function n(e,t,i){return i=i.replace(/(\r)?\n/g,"\r\n"),i=(i=encodeURIComponent(i)).replace(/%20/g,"+"),e+(e?"&":"")+encodeURIComponent(t)+"="+i}e.exports=function(e,t){"object"!=typeof t?t={hash:!!t}:void 0===t.hash&&(t.hash=!0);for(var a=t.hash?{}:"",o=t.serializer||(t.hash?r:n),u=e&&e.elements?e.elements:[],c=Object.create(null),l=0;l<u.length;++l){var h=u[l];if((t.disabled||!h.disabled)&&h.name&&s.test(h.nodeName)&&!i.test(h.type)){var d=h.name,f=h.value;if("checkbox"!==h.type&&"radio"!==h.type||h.checked||(f=void 0),t.empty){if("checkbox"!==h.type||h.checked||(f=""),"radio"===h.type&&(c[h.name]||h.checked?h.checked&&(c[h.name]=!0):c[h.name]=!1),void 0==f&&"radio"==h.type)continue}else if(!f)continue;if("select-multiple"!==h.type)a=o(a,d,f);else{f=[];for(var p=h.options,g=!1,v=0;v<p.length;++v){var m=p[v],y=t.empty&&!m.value,_=m.value||y;m.selected&&_&&(g=!0,a=t.hash&&"[]"!==d.slice(d.length-2)?o(a,d+"[]",m.value):o(a,d,m.value))}!g&&t.empty&&(a=o(a,d,""))}}}if(t.empty)for(var d in c)c[d]||(a=o(a,d,""));return a}},885:function(e,t,i){"use strict";i.r(t);var s=i(886),a=i.n(s);for(var r in s)"default"!==r&&function(e){i.d(t,e,function(){return s[e]})}(r);t.default=a.a},886:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},a=i(1605),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(i(1607));t.default={mixins:[a.main],data:function(){return{services:r,list:null,options:{value:"全部",list:[{label:0,value:"全部"},{label:1,value:"未开始"},{label:2,value:"进行中"},{label:3,value:"已完成"},{label:4,value:"失败"}]},type:{success:"成功",failed:"失败",sleep:"进行中",default:"未开始"},page:null,delay:1e4,timer:null,name:"export",status:-1}},methods:{getList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.page&&this.page.num||1,t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.page&&this.page.offset||10,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];log("getList"),a=this.status<0?{name:this.name}:{name:this.name,status:this.status},this.timer&&clearTimeout(this.timer),r.getList(s({pageNum:e,pageOffset:i},a)).then(function(e){t.list=e.data,t.page=e.page,t.getTaskProgress()})},selectChange:function(e){var t=!0,i=!1,s=void 0;try{for(var a,r=this.options.list[Symbol.iterator]();!(t=(a=r.next()).done);t=!0){var n=a.value;n.value==e&&(this.page=null,this.status=n.label-1,this.getList())}}catch(e){i=!0,s=e}finally{try{!t&&r.return&&r.return()}finally{if(i)throw s}}},getTasks:function(e){this.name!==e&&(this.page=null,this.name=e,this.getList())},getTaskProgress:function(){this.timer=setTimeout(this.getList,this.delay),log("timer start: "+this.timer)},delTask:function(e){var t=this;r.delTask({id:e}).then(function(e){return t.getList()})}},destroyed:function(){this.timer&&(clearTimeout(this.timer),log("clear timer: "+this.timer))},filters:{formatSize:function(e){return void 0===e?"0MB":(e/1024/1024).toFixed(2)+"MB"}}}},887:function(e,t,i){}}]);